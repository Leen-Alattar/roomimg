!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(f,t){var h=[],c=h.slice,m=h.concat,s=h.push,r=h.indexOf,i={},e=i.toString,g=i.hasOwnProperty,v={},n="1.11.3",S=function(t,e){return new S.fn.init(t,e)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,a=/^-ms-/,l=/-([\da-z])/gi,u=function(t,e){return e.toUpperCase()};function p(t){var e="length"in t&&t.length,i=S.type(t);return"function"!==i&&!S.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t))}S.fn=S.prototype={jquery:n,constructor:S,selector:"",length:0,toArray:function(){return c.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:c.call(this)},pushStack:function(t){var e=S.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return S.each(this,t,e)},map:function(i){return this.pushStack(S.map(this,function(t,e){return i.call(t,e,t)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:h.sort,splice:h.splice},S.extend=S.fn.extend=function(){var t,e,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||S.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(r=arguments[s]))for(n in r)t=a[n],a!==(i=r[n])&&(u&&i&&(S.isPlainObject(i)||(e=S.isArray(i)))?(e?(e=!1,o=t&&S.isArray(t)?t:[]):o=t&&S.isPlainObject(t)?t:{},a[n]=S.extend(u,o,i)):void 0!==i&&(a[n]=i));return a},S.extend({expando:"jQuery"+(n+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===S.type(t)},isArray:Array.isArray||function(t){return"array"===S.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!S.isArray(t)&&0<=t-parseFloat(t)+1},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==S.type(t)||t.nodeType||S.isWindow(t))return!1;try{if(t.constructor&&!g.call(t,"constructor")&&!g.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(v.ownLast)for(e in t)return g.call(t,e);for(e in t);return void 0===e||g.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[e.call(t)]||"object":typeof t},globalEval:function(t){t&&S.trim(t)&&(f.execScript||function(t){f.eval.call(f,t)})(t)},camelCase:function(t){return t.replace(a,"ms-").replace(l,u)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var n=0,r=t.length,o=p(t);if(i){if(o)for(;n<r&&!1!==e.apply(t[n],i);n++);else for(n in t)if(!1===e.apply(t[n],i))break}else if(o)for(;n<r&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(o,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(p(Object(t))?S.merge(i,"string"==typeof t?[t]:t):s.call(i,t)),i},inArray:function(t,e,i){var n;if(e){if(r)return r.call(e,t,i);for(n=e.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;)t[r++]=e[n++];if(i!=i)for(;void 0!==e[n];)t[r++]=e[n++];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,a=!i;r<o;r++)!e(t[r],r)!==a&&n.push(t[r]);return n},map:function(t,e,i){var n,r=0,o=t.length,a=[];if(p(t))for(;r<o;r++)null!=(n=e(t[r],r,i))&&a.push(n);else for(r in t)null!=(n=e(t[r],r,i))&&a.push(n);return m.apply([],a)},guid:1,proxy:function(t,e){var i,n,r;if("string"==typeof e&&(r=t[e],e=t,t=r),S.isFunction(t))return i=c.call(arguments,2),(n=function(){return t.apply(e||this,i.concat(c.call(arguments)))}).guid=t.guid=t.guid||S.guid++,n},now:function(){return+new Date},support:v}),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){i["[object "+e+"]"]=e.toLowerCase()});var d=function(i){var t,f,b,o,n,m,h,g,x,u,c,v,w,r,y,_,a,s,S,T="sizzle"+1*new Date,C=i.document,E=0,p=0,l=ot(),d=ot(),k=ot(),A=function(t,e){return t===e&&(c=!0),0},I={}.hasOwnProperty,e=[],P=e.pop,z=e.push,M=e.push,D=e.slice,L=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",B=F.replace("w","w#"),N="\\["+R+"*("+F+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+R+"*\\]",j=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",$=new RegExp(R+"+","g"),U=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),V=new RegExp("^"+R+"*,"+R+"*"),q=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),H=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),W=new RegExp(j),Z=new RegExp("^"+B+"$"),G={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,tt=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),it=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},nt=function(){v()};try{M.apply(e=D.call(C.childNodes),C.childNodes),e[C.childNodes.length].nodeType}catch(t){M={apply:e.length?function(t,e){z.apply(t,D.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function rt(t,e,i,n){var r,o,a,s,l,u,c,h,p,d;if((e?e.ownerDocument||e:C)!==w&&v(e),i=i||[],s=(e=e||w).nodeType,"string"!=typeof t||!t||1!==s&&9!==s&&11!==s)return i;if(!n&&y){if(11!==s&&(r=J.exec(t)))if(a=r[1]){if(9===s){if(!(o=e.getElementById(a))||!o.parentNode)return i;if(o.id===a)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&S(e,o)&&o.id===a)return i.push(o),i}else{if(r[2])return M.apply(i,e.getElementsByTagName(t)),i;if((a=r[3])&&f.getElementsByClassName)return M.apply(i,e.getElementsByClassName(a)),i}if(f.qsa&&(!_||!_.test(t))){if(h=c=T,p=e,d=1!==s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=m(t),(c=e.getAttribute("id"))?h=c.replace(tt,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=u.length;l--;)u[l]=h+mt(u[l]);p=Q.test(t)&&dt(e.parentNode)||e,d=u.join(",")}if(d)try{return M.apply(i,p.querySelectorAll(d)),i}catch(t){}finally{c||e.removeAttribute("id")}}}return g(t.replace(U,"$1"),e,i,n)}function ot(){var n=[];return function t(e,i){return n.push(e+" ")>b.cacheLength&&delete t[n.shift()],t[e+" "]=i}}function at(t){return t[T]=!0,t}function st(t){var e=w.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function lt(t,e){for(var i=t.split("|"),n=t.length;n--;)b.attrHandle[i[n]]=e}function ut(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ct(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ht(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}function pt(a){return at(function(o){return o=+o,at(function(t,e){for(var i,n=a([],t.length,o),r=n.length;r--;)t[i=n[r]]&&(t[i]=!(e[i]=t[i]))})})}function dt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in f=rt.support={},n=rt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},v=rt.setDocument=function(t){var e,i,l=t?t.ownerDocument||t:C;return l!==w&&9===l.nodeType&&l.documentElement?(r=(w=l).documentElement,(i=l.defaultView)&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",nt,!1):i.attachEvent&&i.attachEvent("onunload",nt)),y=!n(l),f.attributes=st(function(t){return t.className="i",!t.getAttribute("className")}),f.getElementsByTagName=st(function(t){return t.appendChild(l.createComment("")),!t.getElementsByTagName("*").length}),f.getElementsByClassName=K.test(l.getElementsByClassName),f.getById=st(function(t){return r.appendChild(t).id=T,!l.getElementsByName||!l.getElementsByName(T).length}),f.getById?(b.find.ID=function(t,e){if(void 0!==e.getElementById&&y){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},b.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}}):(delete b.find.ID,b.filter.ID=function(t){var i=t.replace(et,it);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===i}}),b.find.TAG=f.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):f.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},b.find.CLASS=f.getElementsByClassName&&function(t,e){if(y)return e.getElementsByClassName(t)},a=[],_=[],(f.qsa=K.test(l.querySelectorAll))&&(st(function(t){r.appendChild(t).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||_.push("\\["+R+"*(?:value|"+O+")"),t.querySelectorAll("[id~="+T+"-]").length||_.push("~="),t.querySelectorAll(":checked").length||_.push(":checked"),t.querySelectorAll("a#"+T+"+*").length||_.push(".#.+[+~]")}),st(function(t){var e=l.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&_.push("name"+R+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||_.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),_.push(",.*:")})),(f.matchesSelector=K.test(s=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector))&&st(function(t){f.disconnectedMatch=s.call(t,"div"),s.call(t,"[s!='']:x"),a.push("!=",j)}),_=_.length&&new RegExp(_.join("|")),a=a.length&&new RegExp(a.join("|")),e=K.test(r.compareDocumentPosition),S=e||K.test(r.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return c=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!f.sortDetached&&e.compareDocumentPosition(t)===i?t===l||t.ownerDocument===C&&S(C,t)?-1:e===l||e.ownerDocument===C&&S(C,e)?1:u?L(u,t)-L(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return c=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t===l?-1:e===l?1:r?-1:o?1:u?L(u,t)-L(u,e):0;if(r===o)return ut(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?ut(a[n],s[n]):a[n]===C?-1:s[n]===C?1:0},l):w},rt.matches=function(t,e){return rt(t,null,null,e)},rt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==w&&v(t),e=e.replace(H,"='$1']"),f.matchesSelector&&y&&(!a||!a.test(e))&&(!_||!_.test(e)))try{var i=s.call(t,e);if(i||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return 0<rt(e,w,null,[t]).length},rt.contains=function(t,e){return(t.ownerDocument||t)!==w&&v(t),S(t,e)},rt.attr=function(t,e){(t.ownerDocument||t)!==w&&v(t);var i=b.attrHandle[e.toLowerCase()],n=i&&I.call(b.attrHandle,e.toLowerCase())?i(t,e,!y):void 0;return void 0!==n?n:f.attributes||!y?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},rt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},rt.uniqueSort=function(t){var e,i=[],n=0,r=0;if(c=!f.detectDuplicates,u=!f.sortStable&&t.slice(0),t.sort(A),c){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return u=null,t},o=rt.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=o(e);return i},(b=rt.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||rt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&rt.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&W.test(i)&&(e=m(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=l[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&l(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(t){var e=rt.attr(t,i);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e.replace($," ")+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(d,t,e,f,m){var g="nth"!==d.slice(0,3),v="last"!==d.slice(-4),y="of-type"===t;return 1===f&&0===m?function(t){return!!t.parentNode}:function(t,e,i){var n,r,o,a,s,l,u=g!==v?"nextSibling":"previousSibling",c=t.parentNode,h=y&&t.nodeName.toLowerCase(),p=!i&&!y;if(c){if(g){for(;u;){for(o=t;o=o[u];)if(y?o.nodeName.toLowerCase()===h:1===o.nodeType)return!1;l=u="only"===d&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&p){for(s=(n=(r=c[T]||(c[T]={}))[d]||[])[0]===E&&n[1],a=n[0]===E&&n[2],o=s&&c.childNodes[s];o=++s&&o&&o[u]||(a=s=0)||l.pop();)if(1===o.nodeType&&++a&&o===t){r[d]=[E,s,a];break}}else if(p&&(n=(t[T]||(t[T]={}))[d])&&n[0]===E)a=n[1];else for(;(o=++s&&o&&o[u]||(a=s=0)||l.pop())&&((y?o.nodeName.toLowerCase()!==h:1!==o.nodeType)||!++a||(p&&((o[T]||(o[T]={}))[d]=[E,a]),o!==t)););return(a-=m)===f||a%f==0&&0<=a/f}}},PSEUDO:function(t,o){var e,a=b.pseudos[t]||b.setFilters[t.toLowerCase()]||rt.error("unsupported pseudo: "+t);return a[T]?a(o):1<a.length?(e=[t,t,"",o],b.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,e){for(var i,n=a(t,o),r=n.length;r--;)t[i=L(t,n[r])]=!(e[i]=n[r])}):function(t){return a(t,0,e)}):a}},pseudos:{not:at(function(t){var n=[],r=[],s=h(t.replace(U,"$1"));return s[T]?at(function(t,e,i,n){for(var r,o=s(t,null,n,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,e,i){return n[0]=t,s(n,null,i,r),n[0]=null,!r.pop()}}),has:at(function(e){return function(t){return 0<rt(e,t).length}}),contains:at(function(e){return e=e.replace(et,it),function(t){return-1<(t.textContent||t.innerText||o(t)).indexOf(e)}}),lang:at(function(i){return Z.test(i||"")||rt.error("unsupported lang: "+i),i=i.replace(et,it).toLowerCase(),function(t){var e;do{if(e=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===r},focus:function(t){return t===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return Y.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,i){return[i<0?i+e:i]}),even:pt(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:pt(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:pt(function(t,e,i){for(var n=i<0?i+e:i;0<=--n;)t.push(n);return t}),gt:pt(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})b.pseudos[t]=ht(t);function ft(){}function mt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function gt(a,t,e){var s=t.dir,l=e&&"parentNode"===s,u=p++;return t.first?function(t,e,i){for(;t=t[s];)if(1===t.nodeType||l)return a(t,e,i)}:function(t,e,i){var n,r,o=[E,u];if(i){for(;t=t[s];)if((1===t.nodeType||l)&&a(t,e,i))return!0}else for(;t=t[s];)if(1===t.nodeType||l){if((n=(r=t[T]||(t[T]={}))[s])&&n[0]===E&&n[1]===u)return o[2]=n[2];if((r[s]=o)[2]=a(t,e,i))return!0}}}function vt(r){return 1<r.length?function(t,e,i){for(var n=r.length;n--;)if(!r[n](t,e,i))return!1;return!0}:r[0]}function yt(t,e,i,n,r){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(i&&!i(o,n,r)||(a.push(o),u&&e.push(s)));return a}function _t(d,f,m,g,v,t){return g&&!g[T]&&(g=_t(g)),v&&!v[T]&&(v=_t(v,t)),at(function(t,e,i,n){var r,o,a,s=[],l=[],u=e.length,c=t||function(t,e,i){for(var n=0,r=e.length;n<r;n++)rt(t,e[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),h=!d||!t&&f?c:yt(c,s,d,i,n),p=m?v||(t?d:u||g)?[]:e:h;if(m&&m(h,p,i,n),g)for(r=yt(p,l),g(r,[],i,n),o=r.length;o--;)(a=r[o])&&(p[l[o]]=!(h[l[o]]=a));if(t){if(v||d){if(v){for(r=[],o=p.length;o--;)(a=p[o])&&r.push(h[o]=a);v(null,p=[],r,n)}for(o=p.length;o--;)(a=p[o])&&-1<(r=v?L(t,a):s[o])&&(t[r]=!(e[r]=a))}}else p=yt(p===e?p.splice(u,p.length):p),v?v(null,e,p,n):M.apply(e,p)})}function bt(t){for(var r,e,i,n=t.length,o=b.relative[t[0].type],a=o||b.relative[" "],s=o?1:0,l=gt(function(t){return t===r},a,!0),u=gt(function(t){return-1<L(r,t)},a,!0),c=[function(t,e,i){var n=!o&&(i||e!==x)||((r=e).nodeType?l(t,e,i):u(t,e,i));return r=null,n}];s<n;s++)if(e=b.relative[t[s].type])c=[gt(vt(c),e)];else{if((e=b.filter[t[s].type].apply(null,t[s].matches))[T]){for(i=++s;i<n&&!b.relative[t[i].type];i++);return _t(1<s&&vt(c),1<s&&mt(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(U,"$1"),e,s<i&&bt(t.slice(s,i)),i<n&&bt(t=t.slice(i)),i<n&&mt(t))}c.push(e)}return vt(c)}return ft.prototype=b.filters=b.pseudos,b.setFilters=new ft,m=rt.tokenize=function(t,e){var i,n,r,o,a,s,l,u=d[t+" "];if(u)return e?0:u.slice(0);for(a=t,s=[],l=b.preFilter;a;){for(o in i&&!(n=V.exec(a))||(n&&(a=a.slice(n[0].length)||a),s.push(r=[])),i=!1,(n=q.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(U," ")}),a=a.slice(i.length)),b.filter)!(n=G[o].exec(a))||l[o]&&!(n=l[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return e?a.length:a?rt.error(t):d(t,s).slice(0)},h=rt.compile=function(t,e){var i,g,v,y,_,n,r=[],o=[],a=k[t+" "];if(!a){for(e||(e=m(t)),i=e.length;i--;)(a=bt(e[i]))[T]?r.push(a):o.push(a);(a=k(t,(g=o,y=0<(v=r).length,_=0<g.length,n=function(t,e,i,n,r){var o,a,s,l=0,u="0",c=t&&[],h=[],p=x,d=t||_&&b.find.TAG("*",r),f=E+=null==p?1:Math.random()||.1,m=d.length;for(r&&(x=e!==w&&e);u!==m&&null!=(o=d[u]);u++){if(_&&o){for(a=0;s=g[a++];)if(s(o,e,i)){n.push(o);break}r&&(E=f)}y&&((o=!s&&o)&&l--,t&&c.push(o))}if(l+=u,y&&u!==l){for(a=0;s=v[a++];)s(c,h,e,i);if(t){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=P.call(n));h=yt(h)}M.apply(n,h),r&&!t&&0<h.length&&1<l+v.length&&rt.uniqueSort(n)}return r&&(E=f,x=p),c},y?at(n):n))).selector=t}return a},g=rt.select=function(t,e,i,n){var r,o,a,s,l,u="function"==typeof t&&t,c=!n&&m(t=u.selector||t);if(i=i||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&f.getById&&9===e.nodeType&&y&&b.relative[o[1].type]){if(!(e=(b.find.ID(a.matches[0].replace(et,it),e)||[])[0]))return i;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=G.needsContext.test(t)?0:o.length;r--&&(a=o[r],!b.relative[s=a.type]);)if((l=b.find[s])&&(n=l(a.matches[0].replace(et,it),Q.test(o[0].type)&&dt(e.parentNode)||e))){if(o.splice(r,1),!(t=n.length&&mt(o)))return M.apply(i,n),i;break}}return(u||h(t,c))(n,e,!y,i,Q.test(t)&&dt(e.parentNode)||e),i},f.sortStable=T.split("").sort(A).join("")===T,f.detectDuplicates=!!c,v(),f.sortDetached=st(function(t){return 1&t.compareDocumentPosition(w.createElement("div"))}),st(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||lt("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),f.attributes&&st(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||lt("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),st(function(t){return null==t.getAttribute("disabled")})||lt(O,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),rt}(f);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains;var y=S.expr.match.needsContext,_=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,b=/^.[^:#\[\.,]*$/;function x(t,i,n){if(S.isFunction(i))return S.grep(t,function(t,e){return!!i.call(t,e,t)!==n});if(i.nodeType)return S.grep(t,function(t){return t===i!==n});if("string"==typeof i){if(b.test(i))return S.filter(i,t,n);i=S.filter(i,t)}return S.grep(t,function(t){return 0<=S.inArray(t,i)!==n})}S.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?S.find.matchesSelector(n,t)?[n]:[]:S.find.matches(t,S.grep(e,function(t){return 1===t.nodeType}))},S.fn.extend({find:function(t){var e,i=[],n=this,r=n.length;if("string"!=typeof t)return this.pushStack(S(t).filter(function(){for(e=0;e<r;e++)if(S.contains(n[e],this))return!0}));for(e=0;e<r;e++)S.find(t,n[e],i);return(i=this.pushStack(1<r?S.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(x(this,t||[],!1))},not:function(t){return this.pushStack(x(this,t||[],!0))},is:function(t){return!!x(this,"string"==typeof t&&y.test(t)?S(t):t||[],!1).length}});var w,T=f.document,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(S.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:C.exec(t))||!i[1]&&e)return!e||e.jquery?(e||w).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof S?e[0]:e,S.merge(this,S.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:T,!0)),_.test(i[1])&&S.isPlainObject(e))for(i in e)S.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((n=T.getElementById(i[2]))&&n.parentNode){if(n.id!==i[2])return w.find(t);this.length=1,this[0]=n}return this.context=T,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):S.isFunction(t)?void 0!==w.ready?w.ready(t):t(S):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),S.makeArray(t,this))}).prototype=S.fn,w=S(T);var E=/^(?:parents|prev(?:Until|All))/,k={children:!0,contents:!0,next:!0,prev:!0};function A(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}S.extend({dir:function(t,e,i){for(var n=[],r=t[e];r&&9!==r.nodeType&&(void 0===i||1!==r.nodeType||!S(r).is(i));)1===r.nodeType&&n.push(r),r=r[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),S.fn.extend({has:function(t){var e,i=S(t,this),n=i.length;return this.filter(function(){for(e=0;e<n;e++)if(S.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,o=[],a=y.test(t)||"string"!=typeof t?S(t,e||this.context):0;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&S.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(1<o.length?S.unique(o):o)},index:function(t){return t?"string"==typeof t?S.inArray(this[0],S(t)):S.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(S.unique(S.merge(this.get(),S(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),S.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S.dir(t,"parentNode")},parentsUntil:function(t,e,i){return S.dir(t,"parentNode",i)},next:function(t){return A(t,"nextSibling")},prev:function(t){return A(t,"previousSibling")},nextAll:function(t){return S.dir(t,"nextSibling")},prevAll:function(t){return S.dir(t,"previousSibling")},nextUntil:function(t,e,i){return S.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return S.dir(t,"previousSibling",i)},siblings:function(t){return S.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return S.sibling(t.firstChild)},contents:function(t){return S.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:S.merge([],t.childNodes)}},function(n,r){S.fn[n]=function(t,e){var i=S.map(this,r,t);return"Until"!==n.slice(-5)&&(e=t),e&&"string"==typeof e&&(i=S.filter(e,i)),1<this.length&&(k[n]||(i=S.unique(i)),E.test(n)&&(i=i.reverse())),this.pushStack(i)}});var I,P=/\S+/g,z={};function M(){T.addEventListener?(T.removeEventListener("DOMContentLoaded",D,!1),f.removeEventListener("load",D,!1)):(T.detachEvent("onreadystatechange",D),f.detachEvent("onload",D))}function D(){(T.addEventListener||"load"===event.type||"complete"===T.readyState)&&(M(),S.ready())}S.Callbacks=function(r){var t,i;r="string"==typeof r?z[r]||(i=z[t=r]={},S.each(t.match(P)||[],function(t,e){i[e]=!0}),i):S.extend({},r);var n,e,o,a,s,l,u=[],c=!r.once&&[],h=function(t){for(e=r.memory&&t,o=!0,s=l||0,l=0,a=u.length,n=!0;u&&s<a;s++)if(!1===u[s].apply(t[0],t[1])&&r.stopOnFalse){e=!1;break}n=!1,u&&(c?c.length&&h(c.shift()):e?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;!function n(t){S.each(t,function(t,e){var i=S.type(e);"function"===i?r.unique&&p.has(e)||u.push(e):e&&e.length&&"string"!==i&&n(e)})}(arguments),n?a=u.length:e&&(l=t,h(e))}return this},remove:function(){return u&&S.each(arguments,function(t,e){for(var i;-1<(i=S.inArray(e,u,i));)u.splice(i,1),n&&(i<=a&&a--,i<=s&&s--)}),this},has:function(t){return t?-1<S.inArray(t,u):!(!u||!u.length)},empty:function(){return u=[],a=0,this},disable:function(){return u=c=e=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,e||p.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!u||o&&!c||(e=[t,(e=e||[]).slice?e.slice():e],n?c.push(e):h(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!o}};return p},S.extend({Deferred:function(t){var o=[["resolve","done",S.Callbacks("once memory"),"resolved"],["reject","fail",S.Callbacks("once memory"),"rejected"],["notify","progress",S.Callbacks("memory")]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var r=arguments;return S.Deferred(function(n){S.each(o,function(t,e){var i=S.isFunction(r[t])&&r[t];s[e[1]](function(){var t=i&&i.apply(this,arguments);t&&S.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[e[0]+"With"](this===a?n.promise():this,i?[t]:arguments)})}),r=null}).promise()},promise:function(t){return null!=t?S.extend(t,a):a}},s={};return a.pipe=a.then,S.each(o,function(t,e){var i=e[2],n=e[3];a[e[1]]=i.add,n&&i.add(function(){r=n},o[1^t][2].disable,o[2][2].lock),s[e[0]]=function(){return s[e[0]+"With"](this===s?a:this,arguments),this},s[e[0]+"With"]=i.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){var r,e,i,n=0,o=c.call(arguments),a=o.length,s=1!==a||t&&S.isFunction(t.promise)?a:0,l=1===s?t:S.Deferred(),u=function(e,i,n){return function(t){i[e]=this,n[e]=1<arguments.length?c.call(arguments):t,n===r?l.notifyWith(i,n):--s||l.resolveWith(i,n)}};if(1<a)for(r=new Array(a),e=new Array(a),i=new Array(a);n<a;n++)o[n]&&S.isFunction(o[n].promise)?o[n].promise().done(u(n,i,o)).fail(l.reject).progress(u(n,e,r)):--s;return s||l.resolveWith(i,o),l.promise()}}),S.fn.ready=function(t){return S.ready.promise().done(t),this},S.extend({isReady:!1,readyWait:1,holdReady:function(t){t?S.readyWait++:S.ready(!0)},ready:function(t){if(!0===t?!--S.readyWait:!S.isReady){if(!T.body)return setTimeout(S.ready);(S.isReady=!0)!==t&&0<--S.readyWait||(I.resolveWith(T,[S]),S.fn.triggerHandler&&(S(T).triggerHandler("ready"),S(T).off("ready")))}}}),S.ready.promise=function(t){if(!I)if(I=S.Deferred(),"complete"===T.readyState)setTimeout(S.ready);else if(T.addEventListener)T.addEventListener("DOMContentLoaded",D,!1),f.addEventListener("load",D,!1);else{T.attachEvent("onreadystatechange",D),f.attachEvent("onload",D);var i=!1;try{i=null==f.frameElement&&T.documentElement}catch(t){}i&&i.doScroll&&function e(){if(!S.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}M(),S.ready()}}()}return I.promise(t)};var L,O="undefined";for(L in S(v))break;v.ownLast="0"!==L,v.inlineBlockNeedsLayout=!1,S(function(){var t,e,i,n;(i=T.getElementsByTagName("body")[0])&&i.style&&(e=T.createElement("div"),(n=T.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==O&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",v.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=T.createElement("div");if(null==v.deleteExpando){v.deleteExpando=!0;try{delete t.test}catch(t){v.deleteExpando=!1}}t=null}(),S.acceptData=function(t){var e=S.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return(1===i||9===i)&&(!e||!0!==e&&t.getAttribute("classid")===e)};var R=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,F=/([A-Z])/g;function B(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(F,"-$1").toLowerCase();if("string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:R.test(i)?S.parseJSON(i):i)}catch(t){}S.data(t,e,i)}else i=void 0}return i}function N(t){var e;for(e in t)if(("data"!==e||!S.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function j(t,e,i,n){if(S.acceptData(t)){var r,o,a=S.expando,s=t.nodeType,l=s?S.cache:t,u=s?t[a]:t[a]&&a;if(u&&l[u]&&(n||l[u].data)||void 0!==i||"string"!=typeof e)return u||(u=s?t[a]=h.pop()||S.guid++:a),l[u]||(l[u]=s?{}:{toJSON:S.noop}),"object"!=typeof e&&"function"!=typeof e||(n?l[u]=S.extend(l[u],e):l[u].data=S.extend(l[u].data,e)),o=l[u],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[S.camelCase(e)]=i),"string"==typeof e?null==(r=o[e])&&(r=o[S.camelCase(e)]):r=o,r}}function $(t,e,i){if(S.acceptData(t)){var n,r,o=t.nodeType,a=o?S.cache:t,s=o?t[S.expando]:S.expando;if(a[s]){if(e&&(n=i?a[s]:a[s].data)){r=(e=S.isArray(e)?e.concat(S.map(e,S.camelCase)):e in n?[e]:(e=S.camelCase(e))in n?[e]:e.split(" ")).length;for(;r--;)delete n[e[r]];if(i?!N(n):!S.isEmptyObject(n))return}(i||(delete a[s].data,N(a[s])))&&(o?S.cleanData([t],!0):v.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}S.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?S.cache[t[S.expando]]:t[S.expando])&&!N(t)},data:function(t,e,i){return j(t,e,i)},removeData:function(t,e){return $(t,e)},_data:function(t,e,i){return j(t,e,i,!0)},_removeData:function(t,e){return $(t,e,!0)}}),S.fn.extend({data:function(t,e){var i,n,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=S.data(o),1===o.nodeType&&!S._data(o,"parsedAttrs"))){for(i=a.length;i--;)a[i]&&0===(n=a[i].name).indexOf("data-")&&B(o,n=S.camelCase(n.slice(5)),r[n]);S._data(o,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){S.data(this,t)}):1<arguments.length?this.each(function(){S.data(this,t,e)}):o?B(o,t,S.data(o,t)):void 0},removeData:function(t){return this.each(function(){S.removeData(this,t)})}}),S.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=S._data(t,e),i&&(!n||S.isArray(i)?n=S._data(t,e,S.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=S.queue(t,e),n=i.length,r=i.shift(),o=S._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,function(){S.dequeue(t,e)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return S._data(t,i)||S._data(t,i,{empty:S.Callbacks("once memory").add(function(){S._removeData(t,e+"queue"),S._removeData(t,i)})})}}),S.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?S.queue(this[0],e):void 0===i?this:this.each(function(){var t=S.queue(this,e,i);S._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&S.dequeue(this,e)})},dequeue:function(t){return this.each(function(){S.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=S.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=S._data(o[a],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(e)}});var U=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=["Top","Right","Bottom","Left"],q=function(t,e){return t=e||t,"none"===S.css(t,"display")||!S.contains(t.ownerDocument,t)},H=S.access=function(t,e,i,n,r,o,a){var s=0,l=t.length,u=null==i;if("object"===S.type(i))for(s in r=!0,i)S.access(t,e,s,i[s],!0,o,a);else if(void 0!==n&&(r=!0,S.isFunction(n)||(a=!0),u&&(a?(e.call(t,n),e=null):(u=e,e=function(t,e,i){return u.call(S(t),i)})),e))for(;s<l;s++)e(t[s],i,a?n:n.call(t[s],s,e(t[s],i)));return r?t:u?e.call(t):l?e(t[0],i):o},W=/^(?:checkbox|radio)$/i;!function(){var t=T.createElement("input"),e=T.createElement("div"),i=T.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",v.leadingWhitespace=3===e.firstChild.nodeType,v.tbody=!e.getElementsByTagName("tbody").length,v.htmlSerialize=!!e.getElementsByTagName("link").length,v.html5Clone="<:nav></:nav>"!==T.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),v.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,v.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){v.noCloneEvent=!1}),e.cloneNode(!0).click()),null==v.deleteExpando){v.deleteExpando=!0;try{delete e.test}catch(t){v.deleteExpando=!1}}}(),function(){var t,e,i=T.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})e="on"+t,(v[t+"Bubbles"]=e in f)||(i.setAttribute(e,"t"),v[t+"Bubbles"]=!1===i.attributes[e].expando);i=null}();var Z=/^(?:input|select|textarea)$/i,G=/^key/,X=/^(?:mouse|pointer|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,K=/^([^.]*)(?:\.(.+)|)$/;function J(){return!0}function Q(){return!1}function tt(){try{return T.activeElement}catch(t){}}function et(t){var e=it.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}S.event={global:{},add:function(t,e,i,n,r){var o,a,s,l,u,c,h,p,d,f,m,g=S._data(t);if(g){for(i.handler&&(i=(l=i).handler,r=l.selector),i.guid||(i.guid=S.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||((c=g.handle=function(t){return typeof S===O||t&&S.event.triggered===t.type?void 0:S.event.dispatch.apply(c.elem,arguments)}).elem=t),s=(e=(e||"").match(P)||[""]).length;s--;)d=m=(o=K.exec(e[s])||[])[1],f=(o[2]||"").split(".").sort(),d&&(u=S.event.special[d]||{},d=(r?u.delegateType:u.bindType)||d,u=S.event.special[d]||{},h=S.extend({type:d,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&S.expr.match.needsContext.test(r),namespace:f.join(".")},l),(p=a[d])||((p=a[d]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,f,c)||(t.addEventListener?t.addEventListener(d,c,!1):t.attachEvent&&t.attachEvent("on"+d,c))),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,h):p.push(h),S.event.global[d]=!0);t=null}},remove:function(t,e,i,n,r){var o,a,s,l,u,c,h,p,d,f,m,g=S.hasData(t)&&S._data(t);if(g&&(c=g.events)){for(u=(e=(e||"").match(P)||[""]).length;u--;)if(d=m=(s=K.exec(e[u])||[])[1],f=(s[2]||"").split(".").sort(),d){for(h=S.event.special[d]||{},p=c[d=(n?h.delegateType:h.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=p.length;o--;)a=p[o],!r&&m!==a.origType||i&&i.guid!==a.guid||s&&!s.test(a.namespace)||n&&n!==a.selector&&("**"!==n||!a.selector)||(p.splice(o,1),a.selector&&p.delegateCount--,h.remove&&h.remove.call(t,a));l&&!p.length&&(h.teardown&&!1!==h.teardown.call(t,f,g.handle)||S.removeEvent(t,d,g.handle),delete c[d])}else for(d in c)S.event.remove(t,d+e[u],i,n,!0);S.isEmptyObject(c)&&(delete g.handle,S._removeData(t,"events"))}},trigger:function(t,e,i,n){var r,o,a,s,l,u,c,h=[i||T],p=g.call(t,"type")?t.type:t,d=g.call(t,"namespace")?t.namespace.split("."):[];if(a=u=i=i||T,3!==i.nodeType&&8!==i.nodeType&&!Y.test(p+S.event.triggered)&&(0<=p.indexOf(".")&&(p=(d=p.split(".")).shift(),d.sort()),o=p.indexOf(":")<0&&"on"+p,(t=t[S.expando]?t:new S.Event(p,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:S.makeArray(e,[t]),l=S.event.special[p]||{},n||!l.trigger||!1!==l.trigger.apply(i,e))){if(!n&&!l.noBubble&&!S.isWindow(i)){for(s=l.delegateType||p,Y.test(s+p)||(a=a.parentNode);a;a=a.parentNode)h.push(a),u=a;u===(i.ownerDocument||T)&&h.push(u.defaultView||u.parentWindow||f)}for(c=0;(a=h[c++])&&!t.isPropagationStopped();)t.type=1<c?s:l.bindType||p,(r=(S._data(a,"events")||{})[t.type]&&S._data(a,"handle"))&&r.apply(a,e),(r=o&&a[o])&&r.apply&&S.acceptData(a)&&(t.result=r.apply(a,e),!1===t.result&&t.preventDefault());if(t.type=p,!n&&!t.isDefaultPrevented()&&(!l._default||!1===l._default.apply(h.pop(),e))&&S.acceptData(i)&&o&&i[p]&&!S.isWindow(i)){(u=i[o])&&(i[o]=null),S.event.triggered=p;try{i[p]()}catch(t){}S.event.triggered=void 0,u&&(i[o]=u)}return t.result}},dispatch:function(t){t=S.event.fix(t);var e,i,n,r,o,a,s=c.call(arguments),l=(S._data(this,"events")||{})[t.type]||[],u=S.event.special[t.type]||{};if((s[0]=t).delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(a=S.event.handlers.call(this,t,l),e=0;(r=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,o=0;(n=r.handlers[o++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(n.namespace)||(t.handleObj=n,t.data=n.data,void 0!==(i=((S.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,s))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(r=[],o=0;o<s;o++)void 0===r[i=(n=e[o]).selector+" "]&&(r[i]=n.needsContext?0<=S(i,this).index(l):S.find(i,this,null,[l]).length),r[i]&&r.push(n);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[S.expando])return t;var e,i,n,r=t.type,o=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=X.test(r)?this.mouseHooks:G.test(r)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,t=new S.Event(o),e=n.length;e--;)t[i=n[e]]=o[i];return t.target||(t.target=o.srcElement||T),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(r=(n=t.target.ownerDocument||T).documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==tt()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===tt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(S.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return S.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var r=S.extend(new S.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?S.event.trigger(r,null,e):S.event.dispatch.call(e,r),r.isDefaultPrevented()&&i.preventDefault()}},S.removeEvent=T.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===O&&(t[n]=null),t.detachEvent(n,i))},S.Event=function(t,e){if(!(this instanceof S.Event))return new S.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?J:Q):this.type=t,e&&S.extend(this,e),this.timeStamp=t&&t.timeStamp||S.now(),this[S.expando]=!0},S.Event.prototype={isDefaultPrevented:Q,isPropagationStopped:Q,isImmediatePropagationStopped:Q,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=J,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=J,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=J,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){S.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||S.contains(this,i))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=r),e}}}),v.submitBubbles||(S.event.special.submit={setup:function(){if(S.nodeName(this,"form"))return!1;S.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=S.nodeName(e,"input")||S.nodeName(e,"button")?e.form:void 0;i&&!S._data(i,"submitBubbles")&&(S.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),S._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&S.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){if(S.nodeName(this,"form"))return!1;S.event.remove(this,"._submit")}}),v.changeBubbles||(S.event.special.change={setup:function(){if(Z.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(S.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),S.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),S.event.simulate("change",this,t,!0)})),!1;S.event.add(this,"beforeactivate._change",function(t){var e=t.target;Z.test(e.nodeName)&&!S._data(e,"changeBubbles")&&(S.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||S.event.simulate("change",this.parentNode,t,!0)}),S._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return S.event.remove(this,"._change"),!Z.test(this.nodeName)}}),v.focusinBubbles||S.each({focus:"focusin",blur:"focusout"},function(i,n){var r=function(t){S.event.simulate(n,t.target,S.event.fix(t),!0)};S.event.special[n]={setup:function(){var t=this.ownerDocument||this,e=S._data(t,n);e||t.addEventListener(i,r,!0),S._data(t,n,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=S._data(t,n)-1;e?S._data(t,n,e):(t.removeEventListener(i,r,!0),S._removeData(t,n))}}}),S.fn.extend({on:function(t,e,i,n,r){var o,a;if("object"==typeof t){for(o in"string"!=typeof e&&(i=i||e,e=void 0),t)this.on(o,e,i,t[o],r);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),!1===n)n=Q;else if(!n)return this;return 1===r&&(a=n,(n=function(t){return S().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),this.each(function(){S.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,S(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Q),this.each(function(){S.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){S.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return S.event.trigger(t,e,i,!0)}});var it="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",nt=/ jQuery\d+="(?:null|\d+)"/g,rt=new RegExp("<(?:"+it+")[\\s/>]","i"),ot=/^\s+/,at=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,st=/<([\w:]+)/,lt=/<tbody/i,ut=/<|&#?\w+;/,ct=/<(?:script|style|link)/i,ht=/checked\s*(?:[^=]|=\s*.checked.)/i,pt=/^$|\/(?:java|ecma)script/i,dt=/^true\/(.*)/,ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,mt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:v.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},gt=et(T).appendChild(T.createElement("div"));function vt(t,e){var i,n,r=0,o=typeof t.getElementsByTagName!==O?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==O?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],i=t.childNodes||t;null!=(n=i[r]);r++)!e||S.nodeName(n,e)?o.push(n):S.merge(o,vt(n,e));return void 0===e||e&&S.nodeName(t,e)?S.merge([t],o):o}function yt(t){W.test(t.type)&&(t.defaultChecked=t.checked)}function _t(t,e){return S.nodeName(t,"table")&&S.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function bt(t){return t.type=(null!==S.find.attr(t,"type"))+"/"+t.type,t}function xt(t){var e=dt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function wt(t,e){for(var i,n=0;null!=(i=t[n]);n++)S._data(i,"globalEval",!e||S._data(e[n],"globalEval"))}function St(t,e){if(1===e.nodeType&&S.hasData(t)){var i,n,r,o=S._data(t),a=S._data(e,o),s=o.events;if(s)for(i in delete a.handle,a.events={},s)for(n=0,r=s[i].length;n<r;n++)S.event.add(e,i,s[i][n]);a.data&&(a.data=S.extend({},a.data))}}function Tt(t,e){var i,n,r;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!v.noCloneEvent&&e[S.expando]){for(n in(r=S._data(e)).events)S.removeEvent(e,n,r.handle);e.removeAttribute(S.expando)}"script"===i&&e.text!==t.text?(bt(e).text=t.text,xt(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),v.html5Clone&&t.innerHTML&&!S.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&W.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}}mt.optgroup=mt.option,mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td,S.extend({clone:function(t,e,i){var n,r,o,a,s,l=S.contains(t.ownerDocument,t);if(v.html5Clone||S.isXMLDoc(t)||!rt.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(gt.innerHTML=t.outerHTML,gt.removeChild(o=gt.firstChild)),!(v.noCloneEvent&&v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||S.isXMLDoc(t)))for(n=vt(o),s=vt(t),a=0;null!=(r=s[a]);++a)n[a]&&Tt(r,n[a]);if(e)if(i)for(s=s||vt(t),n=n||vt(o),a=0;null!=(r=s[a]);a++)St(r,n[a]);else St(t,o);return 0<(n=vt(o,"script")).length&&wt(n,!l&&vt(t,"script")),n=s=r=null,o},buildFragment:function(t,e,i,n){for(var r,o,a,s,l,u,c,h=t.length,p=et(e),d=[],f=0;f<h;f++)if((o=t[f])||0===o)if("object"===S.type(o))S.merge(d,o.nodeType?[o]:o);else if(ut.test(o)){for(s=s||p.appendChild(e.createElement("div")),l=(st.exec(o)||["",""])[1].toLowerCase(),c=mt[l]||mt._default,s.innerHTML=c[1]+o.replace(at,"<$1></$2>")+c[2],r=c[0];r--;)s=s.lastChild;if(!v.leadingWhitespace&&ot.test(o)&&d.push(e.createTextNode(ot.exec(o)[0])),!v.tbody)for(r=(o="table"!==l||lt.test(o)?"<table>"!==c[1]||lt.test(o)?0:s:s.firstChild)&&o.childNodes.length;r--;)S.nodeName(u=o.childNodes[r],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(S.merge(d,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=p.lastChild}else d.push(e.createTextNode(o));for(s&&p.removeChild(s),v.appendChecked||S.grep(vt(d,"input"),yt),f=0;o=d[f++];)if((!n||-1===S.inArray(o,n))&&(a=S.contains(o.ownerDocument,o),s=vt(p.appendChild(o),"script"),a&&wt(s),i))for(r=0;o=s[r++];)pt.test(o.type||"")&&i.push(o);return s=null,p},cleanData:function(t,e){for(var i,n,r,o,a=0,s=S.expando,l=S.cache,u=v.deleteExpando,c=S.event.special;null!=(i=t[a]);a++)if((e||S.acceptData(i))&&(o=(r=i[s])&&l[r])){if(o.events)for(n in o.events)c[n]?S.event.remove(i,n):S.removeEvent(i,n,o.handle);l[r]&&(delete l[r],u?delete i[s]:typeof i.removeAttribute!==O?i.removeAttribute(s):i[s]=null,h.push(r))}}}),S.fn.extend({text:function(t){return H(this,function(t){return void 0===t?S.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||_t(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=_t(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?S.filter(t,this):this,r=0;null!=(i=n[r]);r++)e||1!==i.nodeType||S.cleanData(vt(i)),i.parentNode&&(e&&S.contains(i.ownerDocument,i)&&wt(vt(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&S.cleanData(vt(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&S.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return S.clone(this,t,e)})},html:function(t){return H(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(nt,""):void 0;if("string"==typeof t&&!ct.test(t)&&(v.htmlSerialize||!rt.test(t))&&(v.leadingWhitespace||!ot.test(t))&&!mt[(st.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(at,"<$1></$2>");try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(S.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,S.cleanData(vt(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(i,n){i=m.apply([],i);var t,e,r,o,a,s,l=0,u=this.length,c=this,h=u-1,p=i[0],d=S.isFunction(p);if(d||1<u&&"string"==typeof p&&!v.checkClone&&ht.test(p))return this.each(function(t){var e=c.eq(t);d&&(i[0]=p.call(this,t,e.html())),e.domManip(i,n)});if(u&&(t=(s=S.buildFragment(i,this[0].ownerDocument,!1,this)).firstChild,1===s.childNodes.length&&(s=t),t)){for(r=(o=S.map(vt(s,"script"),bt)).length;l<u;l++)e=s,l!==h&&(e=S.clone(e,!0,!0),r&&S.merge(o,vt(e,"script"))),n.call(this[l],e,l);if(r)for(a=o[o.length-1].ownerDocument,S.map(o,xt),l=0;l<r;l++)e=o[l],pt.test(e.type||"")&&!S._data(e,"globalEval")&&S.contains(a,e)&&(e.src?S._evalUrl&&S._evalUrl(e.src):S.globalEval((e.text||e.textContent||e.innerHTML||"").replace(ft,"")));s=t=null}return this}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){S.fn[t]=function(t){for(var e,i=0,n=[],r=S(t),o=r.length-1;i<=o;i++)e=i===o?this:this.clone(!0),S(r[i])[a](e),s.apply(n,e.get());return this.pushStack(n)}});var Ct,Et,kt={};function At(t,e){var i,n=S(e.createElement(t)).appendTo(e.body),r=f.getDefaultComputedStyle&&(i=f.getDefaultComputedStyle(n[0]))?i.display:S.css(n[0],"display");return n.detach(),r}function It(t){var e=T,i=kt[t];return i||("none"!==(i=At(t,e))&&i||((e=((Ct=(Ct||S("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||Ct[0].contentDocument).document).write(),e.close(),i=At(t,e),Ct.detach()),kt[t]=i),i}v.shrinkWrapBlocks=function(){return null!=Et?Et:(Et=!1,(e=T.getElementsByTagName("body")[0])&&e.style?(t=T.createElement("div"),(i=T.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(i).appendChild(t),typeof t.style.zoom!==O&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(T.createElement("div")).style.width="5px",Et=3!==t.offsetWidth),e.removeChild(i),Et):void 0);var t,e,i};var Pt,zt,Mt=/^margin/,Dt=new RegExp("^("+U+")(?!px)[a-z%]+$","i"),Lt=/^(top|right|bottom|left)$/;function Ot(e,i){return{get:function(){var t=e();if(null!=t){if(!t)return(this.get=i).apply(this,arguments);delete this.get}}}}f.getComputedStyle?(Pt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):f.getComputedStyle(t,null)},zt=function(t,e,i){var n,r,o,a,s=t.style;return a=(i=i||Pt(t))?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==a||S.contains(t.ownerDocument,t)||(a=S.style(t,e)),Dt.test(a)&&Mt.test(e)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0===a?a:a+""}):T.documentElement.currentStyle&&(Pt=function(t){return t.currentStyle},zt=function(t,e,i){var n,r,o,a,s=t.style;return null==(a=(i=i||Pt(t))?i[e]:void 0)&&s&&s[e]&&(a=s[e]),Dt.test(a)&&!Lt.test(e)&&(n=s.left,(o=(r=t.runtimeStyle)&&r.left)&&(r.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=n,o&&(r.left=o)),void 0===a?a:a+""||"auto"}),function(){var t,e,i,r,o,a,s;function n(){var t,e,i,n;(e=T.getElementsByTagName("body")[0])&&e.style&&(t=T.createElement("div"),(i=T.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=o=!1,s=!0,f.getComputedStyle&&(r="1%"!==(f.getComputedStyle(t,null)||{}).top,o="4px"===(f.getComputedStyle(t,null)||{width:"4px"}).width,(n=t.appendChild(T.createElement("div"))).style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",t.style.width="1px",s=!parseFloat((f.getComputedStyle(n,null)||{}).marginRight),t.removeChild(n)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(n=t.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===n[0].offsetHeight)&&(n[0].style.display="",n[1].style.display="none",a=0===n[0].offsetHeight),e.removeChild(i))}(t=T.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(e=(i=t.getElementsByTagName("a")[0])&&i.style)&&(e.cssText="float:left;opacity:.5",v.opacity="0.5"===e.opacity,v.cssFloat=!!e.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===t.style.backgroundClip,v.boxSizing=""===e.boxSizing||""===e.MozBoxSizing||""===e.WebkitBoxSizing,S.extend(v,{reliableHiddenOffsets:function(){return null==a&&n(),a},boxSizingReliable:function(){return null==o&&n(),o},pixelPosition:function(){return null==r&&n(),r},reliableMarginRight:function(){return null==s&&n(),s}}))}(),S.swap=function(t,e,i,n){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=i.apply(t,n||[]),e)t.style[o]=a[o];return r};var Rt=/alpha\([^)]*\)/i,Ft=/opacity\s*=\s*([^)]*)/,Bt=/^(none|table(?!-c[ea]).+)/,Nt=new RegExp("^("+U+")(.*)$","i"),jt=new RegExp("^([+-])=("+U+")","i"),$t={position:"absolute",visibility:"hidden",display:"block"},Ut={letterSpacing:"0",fontWeight:"400"},Vt=["Webkit","O","Moz","ms"];function qt(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,r=Vt.length;r--;)if((e=Vt[r]+i)in t)return e;return n}function Ht(t,e){for(var i,n,r,o=[],a=0,s=t.length;a<s;a++)(n=t[a]).style&&(o[a]=S._data(n,"olddisplay"),i=n.style.display,e?(o[a]||"none"!==i||(n.style.display=""),""===n.style.display&&q(n)&&(o[a]=S._data(n,"olddisplay",It(n.nodeName)))):(r=q(n),(i&&"none"!==i||!r)&&S._data(n,"olddisplay",r?i:S.css(n,"display"))));for(a=0;a<s;a++)(n=t[a]).style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[a]||"":"none"));return t}function Wt(t,e,i){var n=Nt.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function Zt(t,e,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,a=0;o<4;o+=2)"margin"===i&&(a+=S.css(t,i+V[o],!0,r)),n?("content"===i&&(a-=S.css(t,"padding"+V[o],!0,r)),"margin"!==i&&(a-=S.css(t,"border"+V[o]+"Width",!0,r))):(a+=S.css(t,"padding"+V[o],!0,r),"padding"!==i&&(a+=S.css(t,"border"+V[o]+"Width",!0,r)));return a}function Gt(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=Pt(t),a=v.boxSizing&&"border-box"===S.css(t,"boxSizing",!1,o);if(r<=0||null==r){if(((r=zt(t,e,o))<0||null==r)&&(r=t.style[e]),Dt.test(r))return r;n=a&&(v.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+Zt(t,e,i||(a?"border":"content"),n,o)+"px"}function Xt(t,e,i,n,r){return new Xt.prototype.init(t,e,i,n,r)}S.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=zt(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:v.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=S.camelCase(e),l=t.style;if(e=S.cssProps[s]||(S.cssProps[s]=qt(l,s)),a=S.cssHooks[e]||S.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(t,!1,n))?r:l[e];if("string"===(o=typeof i)&&(r=jt.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(S.css(t,e)),o="number"),null!=i&&i==i&&("number"!==o||S.cssNumber[s]||(i+="px"),v.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(i=a.set(t,i,n)))))try{l[e]=i}catch(t){}}},css:function(t,e,i,n){var r,o,a,s=S.camelCase(e);return e=S.cssProps[s]||(S.cssProps[s]=qt(t.style,s)),(a=S.cssHooks[e]||S.cssHooks[s])&&"get"in a&&(o=a.get(t,!0,i)),void 0===o&&(o=zt(t,e,n)),"normal"===o&&e in Ut&&(o=Ut[e]),""===i||i?(r=parseFloat(o),!0===i||S.isNumeric(r)?r||0:o):o}}),S.each(["height","width"],function(t,r){S.cssHooks[r]={get:function(t,e,i){if(e)return Bt.test(S.css(t,"display"))&&0===t.offsetWidth?S.swap(t,$t,function(){return Gt(t,r,i)}):Gt(t,r,i)},set:function(t,e,i){var n=i&&Pt(t);return Wt(0,e,i?Zt(t,r,i,v.boxSizing&&"border-box"===S.css(t,"boxSizing",!1,n),n):0)}}}),v.opacity||(S.cssHooks.opacity={get:function(t,e){return Ft.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,r=S.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";((i.zoom=1)<=e||""===e)&&""===S.trim(o.replace(Rt,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=Rt.test(o)?o.replace(Rt,r):o+" "+r)}}),S.cssHooks.marginRight=Ot(v.reliableMarginRight,function(t,e){if(e)return S.swap(t,{display:"inline-block"},zt,[t,"marginRight"])}),S.each({margin:"",padding:"",border:"Width"},function(r,o){S.cssHooks[r+o]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[r+V[e]+o]=n[e]||n[e-2]||n[0];return i}},Mt.test(r)||(S.cssHooks[r+o].set=Wt)}),S.fn.extend({css:function(t,e){return H(this,function(t,e,i){var n,r,o={},a=0;if(S.isArray(e)){for(n=Pt(t),r=e.length;a<r;a++)o[e[a]]=S.css(t,e[a],!1,n);return o}return void 0!==i?S.style(t,e,i):S.css(t,e)},t,e,1<arguments.length)},show:function(){return Ht(this,!0)},hide:function(){return Ht(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){q(this)?S(this).show():S(this).hide()})}}),((S.Tween=Xt).prototype={constructor:Xt,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(S.cssNumber[i]?"":"px")},cur:function(){var t=Xt.propHooks[this.prop];return t&&t.get?t.get(this):Xt.propHooks._default.get(this)},run:function(t){var e,i=Xt.propHooks[this.prop];return this.options.duration?this.pos=e=S.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Xt.propHooks._default.set(this),this}}).init.prototype=Xt.prototype,(Xt.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=S.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){S.fx.step[t.prop]?S.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[S.cssProps[t.prop]]||S.cssHooks[t.prop])?S.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}}).scrollTop=Xt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},S.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},S.fx=Xt.prototype.init,S.fx.step={};var Yt,Kt,Jt,Qt,te,ee,ie,ne=/^(?:toggle|show|hide)$/,re=new RegExp("^(?:([+-])=|)("+U+")([a-z%]*)$","i"),oe=/queueHooks$/,ae=[function(e,t,i){var n,r,o,a,s,l,u,c=this,h={},p=e.style,d=e.nodeType&&q(e),f=S._data(e,"fxshow");i.queue||(null==(s=S._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,S.queue(e,"fx").length||s.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],u=S.css(e,"display"),"inline"===("none"===u?S._data(e,"olddisplay")||It(e.nodeName):u)&&"none"===S.css(e,"float")&&(v.inlineBlockNeedsLayout&&"inline"!==It(e.nodeName)?p.zoom=1:p.display="inline-block"));i.overflow&&(p.overflow="hidden",v.shrinkWrapBlocks()||c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],ne.exec(r)){if(delete t[n],o=o||"toggle"===r,r===(d?"hide":"show")){if("show"!==r||!f||void 0===f[n])continue;d=!0}h[n]=f&&f[n]||S.style(e,n)}else u=void 0;if(S.isEmptyObject(h))"inline"===("none"===u?It(e.nodeName):u)&&(p.display=u);else for(n in f?"hidden"in f&&(d=f.hidden):f=S._data(e,"fxshow",{}),o&&(f.hidden=!d),d?S(e).show():c.done(function(){S(e).hide()}),c.done(function(){var t;for(t in S._removeData(e,"fxshow"),h)S.style(e,t,h[t])}),h)a=ce(d?f[n]:0,n,c),n in f||(f[n]=a.start,d&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}],se={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),r=re.exec(e),o=r&&r[3]||(S.cssNumber[t]?"":"px"),a=(S.cssNumber[t]||"px"!==o&&+n)&&re.exec(S.css(i.elem,t)),s=1,l=20;if(a&&a[3]!==o)for(o=o||a[3],r=r||[],a=+n||1;a/=s=s||".5",S.style(i.elem,t,a+o),s!==(s=i.cur()/n)&&1!==s&&--l;);return r&&(a=i.start=+a||+n||0,i.unit=o,i.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),i}]};function le(){return setTimeout(function(){Yt=void 0}),Yt=S.now()}function ue(t,e){var i,n={height:t},r=0;for(e=e?1:0;r<4;r+=2-e)n["margin"+(i=V[r])]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function ce(t,e,i){for(var n,r=(se[e]||[]).concat(se["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,e,t))return n}function he(o,t,e){var i,a,n=0,r=ae.length,s=S.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=Yt||le(),e=Math.max(0,u.startTime+u.duration-t),i=1-(e/u.duration||0),n=0,r=u.tweens.length;n<r;n++)u.tweens[n].run(i);return s.notifyWith(o,[u,i,e]),i<1&&r?e:(s.resolveWith(o,[u]),!1)},u=s.promise({elem:o,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{}},e),originalProperties:t,originalOptions:e,startTime:Yt||le(),duration:e.duration,tweens:[],createTween:function(t,e){var i=S.Tween(o,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var e=0,i=t?u.tweens.length:0;if(a)return this;for(a=!0;e<i;e++)u.tweens[e].run(1);return t?s.resolveWith(o,[u,t]):s.rejectWith(o,[u,t]),this}}),c=u.props;for(!function(t,e){var i,n,r,o,a;for(i in t)if(r=e[n=S.camelCase(i)],o=t[i],S.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(a=S.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=r);else e[n]=r}(c,u.opts.specialEasing);n<r;n++)if(i=ae[n].call(u,o,c,u.opts))return i;return S.map(c,ce,u),S.isFunction(u.opts.start)&&u.opts.start.call(o,u),S.fx.timer(S.extend(l,{elem:o,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}S.Animation=S.extend(he,{tweener:function(t,e){S.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,r=t.length;n<r;n++)i=t[n],se[i]=se[i]||[],se[i].unshift(e)},prefilter:function(t,e){e?ae.unshift(t):ae.push(t)}}),S.speed=function(t,e,i){var n=t&&"object"==typeof t?S.extend({},t):{complete:i||!i&&e||S.isFunction(t)&&t,duration:t,easing:i&&e||e&&!S.isFunction(e)&&e};return n.duration=S.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in S.fx.speeds?S.fx.speeds[n.duration]:S.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){S.isFunction(n.old)&&n.old.call(this),n.queue&&S.dequeue(this,n.queue)},n},S.fn.extend({fadeTo:function(t,e,i,n){return this.filter(q).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){var r=S.isEmptyObject(e),o=S.speed(t,i,n),a=function(){var t=he(this,S.extend({},e),o);(r||S._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,t,o){var a=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof r&&(o=t,t=r,r=void 0),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",i=S.timers,n=S._data(this);if(e)n[e]&&n[e].stop&&a(n[e]);else for(e in n)n[e]&&n[e].stop&&oe.test(e)&&a(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=r&&i[e].queue!==r||(i[e].anim.stop(o),t=!1,i.splice(e,1));!t&&o||S.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=S._data(this),i=e[a+"queue"],n=e[a+"queueHooks"],r=S.timers,o=i?i.length:0;for(e.finish=!0,S.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===a&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),S.each(["toggle","show","hide"],function(t,n){var r=S.fn[n];S.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(ue(n,!0),t,e,i)}}),S.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){S.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),S.timers=[],S.fx.tick=function(){var t,e=S.timers,i=0;for(Yt=S.now();i<e.length;i++)(t=e[i])()||e[i]!==t||e.splice(i--,1);e.length||S.fx.stop(),Yt=void 0},S.fx.timer=function(t){S.timers.push(t),t()?S.fx.start():S.timers.pop()},S.fx.interval=13,S.fx.start=function(){Kt||(Kt=setInterval(S.fx.tick,S.fx.interval))},S.fx.stop=function(){clearInterval(Kt),Kt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(n,t){return n=S.fx&&S.fx.speeds[n]||n,t=t||"fx",this.queue(t,function(t,e){var i=setTimeout(t,n);e.stop=function(){clearTimeout(i)}})},(Qt=T.createElement("div")).setAttribute("className","t"),Qt.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ee=Qt.getElementsByTagName("a")[0],ie=(te=T.createElement("select")).appendChild(T.createElement("option")),Jt=Qt.getElementsByTagName("input")[0],ee.style.cssText="top:1px",v.getSetAttribute="t"!==Qt.className,v.style=/top/.test(ee.getAttribute("style")),v.hrefNormalized="/a"===ee.getAttribute("href"),v.checkOn=!!Jt.value,v.optSelected=ie.selected,v.enctype=!!T.createElement("form").enctype,te.disabled=!0,v.optDisabled=!ie.disabled,(Jt=T.createElement("input")).setAttribute("value",""),v.input=""===Jt.getAttribute("value"),Jt.value="t",Jt.setAttribute("type","radio"),v.radioValue="t"===Jt.value;var pe=/\r/g;S.fn.extend({val:function(i){var n,t,r,e=this[0];return arguments.length?(r=S.isFunction(i),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?i.call(this,t,S(this).val()):i)?e="":"number"==typeof e?e+="":S.isArray(e)&&(e=S.map(e,function(t){return null==t?"":t+""})),(n=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):e?(n=S.valHooks[e.type]||S.valHooks[e.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(pe,""):null==t?"":t:void 0}}),S.extend({valHooks:{option:{get:function(t){var e=S.find.attr(t,"value");return null!=e?e:S.trim(S.text(t))}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,o="select-one"===t.type||r<0,a=o?null:[],s=o?r+1:n.length,l=r<0?s:o?r:0;l<s;l++)if(((i=n[l]).selected||l===r)&&(v.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!S.nodeName(i.parentNode,"optgroup"))){if(e=S(i).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var i,n,r=t.options,o=S.makeArray(e),a=r.length;a--;)if(n=r[a],0<=S.inArray(S.valHooks.option.get(n),o))try{n.selected=i=!0}catch(t){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),r}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(t,e){if(S.isArray(e))return t.checked=0<=S.inArray(S(t).val(),e)}},v.checkOn||(S.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var de,fe,me=S.expr.attrHandle,ge=/^(?:checked|selected)$/i,ve=v.getSetAttribute,ye=v.input;S.fn.extend({attr:function(t,e){return H(this,S.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){S.removeAttr(this,t)})}}),S.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===O?S.prop(t,e,i):(1===o&&S.isXMLDoc(t)||(e=e.toLowerCase(),n=S.attrHooks[e]||(S.expr.match.bool.test(e)?fe:de)),void 0===i?n&&"get"in n&&null!==(r=n.get(t,e))?r:null==(r=S.find.attr(t,e))?void 0:r:null!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:(t.setAttribute(e,i+""),i):void S.removeAttr(t,e))},removeAttr:function(t,e){var i,n,r=0,o=e&&e.match(P);if(o&&1===t.nodeType)for(;i=o[r++];)n=S.propFix[i]||i,S.expr.match.bool.test(i)?ye&&ve||!ge.test(i)?t[n]=!1:t[S.camelCase("default-"+i)]=t[n]=!1:S.attr(t,i,""),t.removeAttribute(ve?i:n)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&S.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),fe={set:function(t,e,i){return!1===e?S.removeAttr(t,i):ye&&ve||!ge.test(i)?t.setAttribute(!ve&&S.propFix[i]||i,i):t[S.camelCase("default-"+i)]=t[i]=!0,i}},S.each(S.expr.match.bool.source.match(/\w+/g),function(t,e){var o=me[e]||S.find.attr;me[e]=ye&&ve||!ge.test(e)?function(t,e,i){var n,r;return i||(r=me[e],me[e]=n,n=null!=o(t,e,i)?e.toLowerCase():null,me[e]=r),n}:function(t,e,i){if(!i)return t[S.camelCase("default-"+e)]?e.toLowerCase():null}}),ye&&ve||(S.attrHooks.value={set:function(t,e,i){if(!S.nodeName(t,"input"))return de&&de.set(t,e,i);t.defaultValue=e}}),ve||(de={set:function(t,e,i){var n=t.getAttributeNode(i);if(n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i))return e}},me.id=me.name=me.coords=function(t,e,i){var n;if(!i)return(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},S.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);if(i&&i.specified)return i.value},set:de.set},S.attrHooks.contenteditable={set:function(t,e,i){de.set(t,""!==e&&e,i)}},S.each(["width","height"],function(t,i){S.attrHooks[i]={set:function(t,e){if(""===e)return t.setAttribute(i,"auto"),e}}})),v.style||(S.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var _e=/^(?:input|select|textarea|button|object)$/i,be=/^(?:a|area)$/i;S.fn.extend({prop:function(t,e){return H(this,S.prop,t,e,1<arguments.length)},removeProp:function(t){return t=S.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),S.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return(1!==o||!S.isXMLDoc(t))&&(e=S.propFix[e]||e,r=S.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=S.find.attr(t,"tabindex");return e?parseInt(e,10):_e.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}}}),v.hrefNormalized||S.each(["href","src"],function(t,e){S.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),v.optSelected||(S.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),v.enctype||(S.propFix.enctype="encoding");var xe=/[\t\r\n\f]/g;S.fn.extend({addClass:function(e){var t,i,n,r,o,a,s=0,l=this.length,u="string"==typeof e&&e;if(S.isFunction(e))return this.each(function(t){S(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(P)||[];s<l;s++)if(n=1===(i=this[s]).nodeType&&(i.className?(" "+i.className+" ").replace(xe," "):" ")){for(o=0;r=t[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");a=S.trim(n),i.className!==a&&(i.className=a)}return this},removeClass:function(e){var t,i,n,r,o,a,s=0,l=this.length,u=0===arguments.length||"string"==typeof e&&e;if(S.isFunction(e))return this.each(function(t){S(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(P)||[];s<l;s++)if(n=1===(i=this[s]).nodeType&&(i.className?(" "+i.className+" ").replace(xe," "):"")){for(o=0;r=t[o++];)for(;0<=n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");a=e?S.trim(n):"",i.className!==a&&(i.className=a)}return this},toggleClass:function(r,e){var o=typeof r;return"boolean"==typeof e&&"string"===o?e?this.addClass(r):this.removeClass(r):S.isFunction(r)?this.each(function(t){S(this).toggleClass(r.call(this,t,this.className,e),e)}):this.each(function(){if("string"===o)for(var t,e=0,i=S(this),n=r.match(P)||[];t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else o!==O&&"boolean"!==o||(this.className&&S._data(this,"__className__",this.className),this.className=this.className||!1===r?"":S._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(xe," ").indexOf(e))return!0;return!1}}),S.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,i){S.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}}),S.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var we=S.now(),Se=/\?/,Te=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;S.parseJSON=function(t){if(f.JSON&&f.JSON.parse)return f.JSON.parse(t+"");var r,o=null,e=S.trim(t+"");return e&&!S.trim(e.replace(Te,function(t,e,i,n){return r&&e&&(o=0),0===o?t:(r=i||e,o+=!n-!i,"")}))?Function("return "+e)():S.error("Invalid JSON: "+t)},S.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{f.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(t){e=void 0}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+t),e};var Ce,Ee,ke=/#.*$/,Ae=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Pe=/^(?:GET|HEAD)$/,ze=/^\/\//,Me=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,De={},Le={},Oe="*/".concat("*");try{Ee=location.href}catch(t){(Ee=T.createElement("a")).href="",Ee=Ee.href}function Re(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,r=t.toLowerCase().match(P)||[];if(S.isFunction(e))for(;i=r[n++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(e)):(o[i]=o[i]||[]).push(e)}}function Fe(e,r,o,a){var s={},l=e===Le;function u(t){var n;return s[t]=!0,S.each(e[t]||[],function(t,e){var i=e(r,o,a);return"string"!=typeof i||l||s[i]?l?!(n=i):void 0:(r.dataTypes.unshift(i),u(i),!1)}),n}return u(r.dataTypes[0])||!s["*"]&&u("*")}function Be(t,e){var i,n,r=S.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&S.extend(!0,t,i),t}Ce=Me.exec(Ee.toLowerCase())||[],S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ee,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":S.parseJSON,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Be(Be(t,S.ajaxSettings),e):Be(S.ajaxSettings,t)},ajaxPrefilter:Re(De),ajaxTransport:Re(Le),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,n,c,h,p,d,f,r,m=S.ajaxSetup({},e),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?S(g):S.event,y=S.Deferred(),_=S.Callbacks("once memory"),b=m.statusCode||{},o={},a={},x=0,s="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!r)for(r={};e=Ie.exec(h);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?h:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return x||(t=a[i]=a[i]||t,o[t]=e),this},overrideMimeType:function(t){return x||(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(x<2)for(e in t)b[e]=[b[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||s;return f&&f.abort(e),l(0,e),this}};if(y.promise(w).complete=_.add,w.success=w.done,w.error=w.fail,m.url=((t||m.url||Ee)+"").replace(ke,"").replace(ze,Ce[1]+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=S.trim(m.dataType||"*").toLowerCase().match(P)||[""],null==m.crossDomain&&(i=Me.exec(m.url.toLowerCase()),m.crossDomain=!(!i||i[1]===Ce[1]&&i[2]===Ce[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Ce[3]||("http:"===Ce[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=S.param(m.data,m.traditional)),Fe(De,m,e,w),2===x)return w;for(n in(d=S.event&&m.global)&&0==S.active++&&S.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Pe.test(m.type),c=m.url,m.hasContent||(m.data&&(c=m.url+=(Se.test(c)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=Ae.test(c)?c.replace(Ae,"$1_="+we++):c+(Se.test(c)?"&":"?")+"_="+we++)),m.ifModified&&(S.lastModified[c]&&w.setRequestHeader("If-Modified-Since",S.lastModified[c]),S.etag[c]&&w.setRequestHeader("If-None-Match",S.etag[c])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Oe+"; q=0.01":""):m.accepts["*"]),m.headers)w.setRequestHeader(n,m.headers[n]);if(m.beforeSend&&(!1===m.beforeSend.call(g,w,m)||2===x))return w.abort();for(n in s="abort",{success:1,error:1,complete:1})w[n](m[n]);if(f=Fe(Le,m,e,w)){w.readyState=1,d&&v.trigger("ajaxSend",[w,m]),m.async&&0<m.timeout&&(p=setTimeout(function(){w.abort("timeout")},m.timeout));try{x=1,f.send(o,l)}catch(t){if(!(x<2))throw t;l(-1,t)}}else l(-1,"No Transport");function l(t,e,i,n){var r,o,a,s,l,u=e;2!==x&&(x=2,p&&clearTimeout(p),f=void 0,h=n||"",w.readyState=0<t?4:0,r=200<=t&&t<300||304===t,i&&(s=function(t,e,i){for(var n,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in i)o=l[0];else{for(a in i){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}n||(n=a)}o=o||n}if(o)return o!==l[0]&&l.unshift(o),i[o]}(m,w,i)),s=function(t,e,i,n){var r,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(r in u)if((s=r.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[r]:!0!==u[r]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(m,s,w,r),r?(m.ifModified&&((l=w.getResponseHeader("Last-Modified"))&&(S.lastModified[c]=l),(l=w.getResponseHeader("etag"))&&(S.etag[c]=l)),204===t||"HEAD"===m.type?u="nocontent":304===t?u="notmodified":(u=s.state,o=s.data,r=!(a=s.error))):(a=u,!t&&u||(u="error",t<0&&(t=0))),w.status=t,w.statusText=(e||u)+"",r?y.resolveWith(g,[o,u,w]):y.rejectWith(g,[w,u,a]),w.statusCode(b),b=void 0,d&&v.trigger(r?"ajaxSuccess":"ajaxError",[w,m,r?o:a]),_.fireWith(g,[w,u]),d&&(v.trigger("ajaxComplete",[w,m]),--S.active||S.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,i){return S.get(t,e,i,"json")},getScript:function(t,e){return S.get(t,void 0,e,"script")}}),S.each(["get","post"],function(t,r){S[r]=function(t,e,i,n){return S.isFunction(e)&&(n=n||i,i=e,e=void 0),S.ajax({url:t,type:r,dataType:n,data:e,success:i})}}),S._evalUrl=function(t){return S.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},S.fn.extend({wrapAll:function(e){if(S.isFunction(e))return this.each(function(t){S(this).wrapAll(e.call(this,t))});if(this[0]){var t=S(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(i){return S.isFunction(i)?this.each(function(t){S(this).wrapInner(i.call(this,t))}):this.each(function(){var t=S(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=S.isFunction(e);return this.each(function(t){S(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){S.nodeName(this,"body")||S(this).replaceWith(this.childNodes)}).end()}}),S.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!v.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||S.css(t,"display"))},S.expr.filters.visible=function(t){return!S.expr.filters.hidden(t)};var Ne=/%20/g,je=/\[\]$/,$e=/\r?\n/g,Ue=/^(?:submit|button|image|reset|file)$/i,Ve=/^(?:input|select|textarea|keygen)/i;function qe(i,t,n,r){var e;if(S.isArray(t))S.each(t,function(t,e){n||je.test(i)?r(i,e):qe(i+"["+("object"==typeof e?t:"")+"]",e,n,r)});else if(n||"object"!==S.type(t))r(i,t);else for(e in t)qe(i+"["+e+"]",t[e],n,r)}S.param=function(t,e){var i,n=[],r=function(t,e){e=S.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=S.ajaxSettings&&S.ajaxSettings.traditional),S.isArray(t)||t.jquery&&!S.isPlainObject(t))S.each(t,function(){r(this.name,this.value)});else for(i in t)qe(i,t[i],e,r);return n.join("&").replace(Ne,"+")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=S.prop(this,"elements");return t?S.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!S(this).is(":disabled")&&Ve.test(this.nodeName)&&!Ue.test(t)&&(this.checked||!W.test(t))}).map(function(t,e){var i=S(this).val();return null==i?null:S.isArray(i)?S.map(i,function(t){return{name:e.name,value:t.replace($e,"\r\n")}}):{name:e.name,value:i.replace($e,"\r\n")}}).get()}}),S.ajaxSettings.xhr=void 0!==f.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Ge()||function(){try{return new f.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:Ge;var He=0,We={},Ze=S.ajaxSettings.xhr();function Ge(){try{return new f.XMLHttpRequest}catch(t){}}f.attachEvent&&f.attachEvent("onunload",function(){for(var t in We)We[t](void 0,!0)}),v.cors=!!Ze&&"withCredentials"in Ze,(Ze=v.ajax=!!Ze)&&S.ajaxTransport(function(l){var u;if(!l.crossDomain||v.cors)return{send:function(t,o){var e,a=l.xhr(),s=++He;if(a.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(e in l.xhrFields)a[e]=l.xhrFields[e];for(e in l.mimeType&&a.overrideMimeType&&a.overrideMimeType(l.mimeType),l.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)void 0!==t[e]&&a.setRequestHeader(e,t[e]+"");a.send(l.hasContent&&l.data||null),u=function(t,e){var i,n,r;if(u&&(e||4===a.readyState))if(delete We[s],u=void 0,a.onreadystatechange=S.noop,e)4!==a.readyState&&a.abort();else{r={},i=a.status,"string"==typeof a.responseText&&(r.text=a.responseText);try{n=a.statusText}catch(t){n=""}i||!l.isLocal||l.crossDomain?1223===i&&(i=204):i=r.text?200:404}r&&o(i,n,r,a.getAllResponseHeaders())},l.async?4===a.readyState?setTimeout(u):a.onreadystatechange=We[s]=u:u()},abort:function(){u&&u(void 0,!0)}}}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return S.globalEval(t),t}}}),S.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),S.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=T.head||S("head")[0]||T.documentElement;return{send:function(t,i){(n=T.createElement("script")).async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,e||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(void 0,!0)}}}});var Xe=[],Ye=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xe.pop()||S.expando+"_"+we++;return this[t]=!0,t}}),S.ajaxPrefilter("json jsonp",function(t,e,i){var n,r,o,a=!1!==t.jsonp&&(Ye.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=S.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ye,"$1"+n):!1!==t.jsonp&&(t.url+=(Se.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return o||S.error(n+" was not called"),o[0]},t.dataTypes[0]="json",r=f[n],f[n]=function(){o=arguments},i.always(function(){f[n]=r,t[n]&&(t.jsonpCallback=e.jsonpCallback,Xe.push(n)),o&&S.isFunction(r)&&r(o[0]),o=r=void 0}),"script"}),S.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||T;var n=_.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=S.buildFragment([t],e,r),r&&r.length&&S(r).remove(),S.merge([],n.childNodes))};var Ke=S.fn.load;S.fn.load=function(t,e,i){if("string"!=typeof t&&Ke)return Ke.apply(this,arguments);var n,r,o,a=this,s=t.indexOf(" ");return 0<=s&&(n=S.trim(t.slice(s,t.length)),t=t.slice(0,s)),S.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),0<a.length&&S.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,a.html(n?S("<div>").append(S.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){a.each(i,r||[t.responseText,e,t])}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){S.fn[e]=function(t){return this.on(e,t)}}),S.expr.filters.animated=function(e){return S.grep(S.timers,function(t){return e===t.elem}).length};var Je=f.document.documentElement;function Qe(t){return S.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}S.offset={setOffset:function(t,e,i){var n,r,o,a,s,l,u=S.css(t,"position"),c=S(t),h={};"static"===u&&(t.style.position="relative"),s=c.offset(),o=S.css(t,"top"),l=S.css(t,"left"),("absolute"===u||"fixed"===u)&&-1<S.inArray("auto",[o,l])?(a=(n=c.position()).top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),S.isFunction(e)&&(e=e.call(t,i,s)),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+r),"using"in e?e.using.call(t,h):c.css(h)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){S.offset.setOffset(this,e,t)});var t,i,n={top:0,left:0},r=this[0],o=r&&r.ownerDocument;return o?(t=o.documentElement,S.contains(t,r)?(typeof r.getBoundingClientRect!==O&&(n=r.getBoundingClientRect()),i=Qe(o),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===S.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),S.nodeName(t[0],"html")||(i=t.offset()),i.top+=S.css(t[0],"borderTopWidth",!0),i.left+=S.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-S.css(n,"marginTop",!0),left:e.left-i.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Je;t&&!S.nodeName(t,"html")&&"static"===S.css(t,"position");)t=t.offsetParent;return t||Je})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o=/Y/.test(r);S.fn[e]=function(t){return H(this,function(t,e,i){var n=Qe(t);if(void 0===i)return n?r in n?n[r]:n.document.documentElement[e]:t[e];n?n.scrollTo(o?S(n).scrollLeft():i,o?i:S(n).scrollTop()):t[e]=i},e,t,arguments.length,null)}}),S.each(["top","left"],function(t,i){S.cssHooks[i]=Ot(v.pixelPosition,function(t,e){if(e)return e=zt(t,i),Dt.test(e)?S(t).position()[i]+"px":e})}),S.each({Height:"height",Width:"width"},function(o,a){S.each({padding:"inner"+o,content:a,"":"outer"+o},function(n,t){S.fn[t]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),r=n||(!0===t||!0===e?"margin":"border");return H(this,function(t,e,i){var n;return S.isWindow(t)?t.document.documentElement["client"+o]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+o],n["scroll"+o],t.body["offset"+o],n["offset"+o],n["client"+o])):void 0===i?S.css(t,e,r):S.style(t,e,i,r)},a,i?t:void 0,i,null)}})}),S.fn.size=function(){return this.length},S.fn.andSelf=S.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var ti=f.jQuery,ei=f.$;return S.noConflict=function(t){return f.$===S&&(f.$=ei),t&&f.jQuery===S&&(f.jQuery=ti),S},typeof t===O&&(f.jQuery=f.$=S),S}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(s){var t,e,i,n;function r(t,e){var i,n,r,o=t.nodeName.toLowerCase();return"area"===o?(n=(i=t.parentNode).name,!(!t.href||!n||"map"!==i.nodeName.toLowerCase())&&(!!(r=s("img[usemap='#"+n+"']")[0])&&a(r))):(/^(input|select|textarea|button|object)$/.test(o)?!t.disabled:"a"===o&&t.href||e)&&a(t)}function a(t){return s.expr.filters.visible(t)&&!s(t).parents().addBack().filter(function(){return"hidden"===s.css(this,"visibility")}).length}s.ui=s.ui||{},s.extend(s.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),s.fn.extend({scrollParent:function(t){var e=this.css("position"),i="absolute"===e,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=s(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&r.length?r:s(this[0].ownerDocument||document)},uniqueId:(t=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&s(this).removeAttr("id")})}}),s.extend(s.expr[":"],{data:s.expr.createPseudo?s.expr.createPseudo(function(e){return function(t){return!!s.data(t,e)}}):function(t,e,i){return!!s.data(t,i[3])},focusable:function(t){return r(t,!isNaN(s.attr(t,"tabindex")))},tabbable:function(t){var e=s.attr(t,"tabindex"),i=isNaN(e);return(i||0<=e)&&r(t,!i)}}),s("<a>").outerWidth(1).jquery||s.each(["Width","Height"],function(t,i){var r="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),o={innerWidth:s.fn.innerWidth,innerHeight:s.fn.innerHeight,outerWidth:s.fn.outerWidth,outerHeight:s.fn.outerHeight};function a(t,e,i,n){return s.each(r,function(){e-=parseFloat(s.css(t,"padding"+this))||0,i&&(e-=parseFloat(s.css(t,"border"+this+"Width"))||0),n&&(e-=parseFloat(s.css(t,"margin"+this))||0)}),e}s.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){s(this).css(n,a(this,t)+"px")})},s.fn["outer"+i]=function(t,e){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){s(this).css(n,a(this,t,!0,e)+"px")})}}),s.fn.addBack||(s.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),s("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(s.fn.removeData=(e=s.fn.removeData,function(t){return arguments.length?e.call(this,s.camelCase(t)):e.call(this)})),s.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),s.fn.extend({focus:(n=s.fn.focus,function(e,i){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){s(t).focus(),i&&i.call(t)},e)}):n.apply(this,arguments)}),disableSelection:(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(i+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var e,i,n=s(this[0]);n.length&&n[0]!==document;){if(("absolute"===(e=n.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(n.css("zIndex"),10),!isNaN(i)&&0!==i))return i;n=n.parent()}return 0}}),s.ui.plugin={add:function(t,e,i){var n,r=s.ui[t].prototype;for(n in i)r.plugins[n]=r.plugins[n]||[],r.plugins[n].push([e,i[n]])},call:function(t,e,i,n){var r,o=t.plugins[e];if(o&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,i)}}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(c){var r,i=0,s=Array.prototype.slice;return c.cleanData=(r=c.cleanData,function(t){var e,i,n;for(n=0;null!=(i=t[n]);n++)try{(e=c._data(i,"events"))&&e.remove&&c(i).triggerHandler("remove")}catch(t){}r(t)}),c.widget=function(t,i,e){var n,r,o,a,s={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,e||(e=i,i=c.Widget),c.expr[":"][n.toLowerCase()]=function(t){return!!c.data(t,n)},c[l]=c[l]||{},r=c[l][t],o=c[l][t]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},c.extend(o,r,{version:e.version,_proto:c.extend({},e),_childConstructors:[]}),(a=new i).options=c.widget.extend({},a.options),c.each(e,function(e,n){var r,o;c.isFunction(n)?s[e]=(r=function(){return i.prototype[e].apply(this,arguments)},o=function(t){return i.prototype[e].apply(this,t)},function(){var t,e=this._super,i=this._superApply;return this._super=r,this._superApply=o,t=n.apply(this,arguments),this._super=e,this._superApply=i,t}):s[e]=n}),o.prototype=c.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||t},s,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),r?(c.each(r._childConstructors,function(t,e){var i=e.prototype;c.widget(i.namespace+"."+i.widgetName,o,e._proto)}),delete r._childConstructors):i._childConstructors.push(o),c.widget.bridge(t,o),o},c.widget.extend=function(t){for(var e,i,n=s.call(arguments,1),r=0,o=n.length;r<o;r++)for(e in n[r])i=n[r][e],n[r].hasOwnProperty(e)&&void 0!==i&&(c.isPlainObject(i)?t[e]=c.isPlainObject(t[e])?c.widget.extend({},t[e],i):c.widget.extend({},i):t[e]=i);return t},c.widget.bridge=function(o,e){var a=e.prototype.widgetFullName||o;c.fn[o]=function(i){var t="string"==typeof i,n=s.call(arguments,1),r=this;return t?this.each(function(){var t,e=c.data(this,a);return"instance"===i?(r=e,!1):e?c.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,n))!==e&&void 0!==t?(r=t&&t.jquery?r.pushStack(t.get()):t,!1):void 0:c.error("no such method '"+i+"' for "+o+" widget instance"):c.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+i+"'")}):(n.length&&(i=c.widget.extend.apply(null,[i].concat(n))),this.each(function(){var t=c.data(this,a);t?(t.option(i||{}),t._init&&t._init()):c.data(this,a,new e(i,this))})),r}},c.Widget=function(){},c.Widget._childConstructors=[],c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=c(e||this.defaultElement||this)[0],this.element=c(e),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=c(),this.hoverable=c(),this.focusable=c(),e!==this&&(c.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=c(e.style?e.ownerDocument:e.document||e),this.window=c(this.document[0].defaultView||this.document[0].parentWindow)),this.options=c.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:c.noop,_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:c.noop,widget:function(){return this.element},option:function(t,e){var i,n,r,o=t;if(0===arguments.length)return c.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(n=o[t]=c.widget.extend({},this.options[t]),r=0;r<i.length-1;r++)n[i[r]]=n[i[r]]||{},n=n[i[r]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(a,s,t){var l,u=this;"boolean"!=typeof a&&(t=s,s=a,a=!1),t?(s=l=c(s),this.bindings=this.bindings.add(s)):(t=s,s=this.element,l=this.widget()),c.each(t,function(t,e){function i(){if(a||!0!==u.options.disabled&&!c(this).hasClass("ui-state-disabled"))return("string"==typeof e?u[e]:e).apply(u,arguments)}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||c.guid++);var n=t.match(/^([\w:-]*)\s*(.*)$/),r=n[1]+u.eventNamespace,o=n[2];o?l.delegate(o,r,i):s.bind(r,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e),this.bindings=c(this.bindings.not(t).get()),this.focusable=c(this.focusable.not(t).get()),this.hoverable=c(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){c(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){c(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){c(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){c(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,i){var n,r,o=this.options[t];if(i=i||{},(e=c.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],r=e.originalEvent)for(n in r)n in e||(e[n]=r[n]);return this.element.trigger(e,i),!(c.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},c.each({show:"fadeIn",hide:"fadeOut"},function(o,a){c.Widget.prototype["_"+o]=function(e,t,i){"string"==typeof t&&(t={effect:t});var n,r=t?!0===t||"number"==typeof t?a:t.effect||a:o;"number"==typeof(t=t||{})&&(t={duration:t}),n=!c.isEmptyObject(t),t.complete=i,t.delay&&e.delay(t.delay),n&&c.effects&&c.effects.effect[r]?e[o](t):r!==o&&e[r]?e[r](t.duration,t.easing,i):e.queue(function(t){c(this)[o](),i&&i.call(e[0]),t()})}}),c.widget}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(A){return function(){A.ui=A.ui||{};var r,w,S=Math.max,T=Math.abs,C=Math.round,n=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,u=A.fn.position;function E(t,e,i){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?i/100:1)]}function k(t,e){return parseInt(A.css(t,e),10)||0}A.position={scrollbarWidth:function(){if(void 0!==r)return r;var t,e,i=A("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=i.children()[0];return A("body").append(i),t=n.offsetWidth,i.css("overflow","scroll"),t===(e=n.offsetWidth)&&(e=i[0].clientWidth),i.remove(),r=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?A.position.scrollbarWidth():0,height:n?A.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=A(t||window),i=A.isWindow(e[0]),n=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:i,isDocument:n,offset:e.offset()||{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:i||n?e.width():e.outerWidth(),height:i||n?e.height():e.outerHeight()}}},A.fn.position=function(h){if(!h||!h.of)return u.apply(this,arguments);h=A.extend({},h);var p,d,f,m,g,t,e,i,v=A(h.of),y=A.position.getWithinInfo(h.within),_=A.position.getScrollInfo(y),b=(h.collision||"flip").split(" "),x={};return t=9===(i=(e=v)[0]).nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:A.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()},v[0].preventDefault&&(h.at="left top"),d=t.width,f=t.height,m=t.offset,g=A.extend({},m),A.each(["my","at"],function(){var t,e,i=(h[this]||"").split(" ");1===i.length&&(i=n.test(i[0])?i.concat(["center"]):o.test(i[0])?["center"].concat(i):["center","center"]),i[0]=n.test(i[0])?i[0]:"center",i[1]=o.test(i[1])?i[1]:"center",t=a.exec(i[0]),e=a.exec(i[1]),x[this]=[t?t[0]:0,e?e[0]:0],h[this]=[s.exec(i[0])[0],s.exec(i[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===h.at[0]?g.left+=d:"center"===h.at[0]&&(g.left+=d/2),"bottom"===h.at[1]?g.top+=f:"center"===h.at[1]&&(g.top+=f/2),p=E(x.at,d,f),g.left+=p[0],g.top+=p[1],this.each(function(){var i,t,a=A(this),s=a.outerWidth(),l=a.outerHeight(),e=k(this,"marginLeft"),n=k(this,"marginTop"),r=s+e+k(this,"marginRight")+_.width,o=l+n+k(this,"marginBottom")+_.height,u=A.extend({},g),c=E(x.my,a.outerWidth(),a.outerHeight());"right"===h.my[0]?u.left-=s:"center"===h.my[0]&&(u.left-=s/2),"bottom"===h.my[1]?u.top-=l:"center"===h.my[1]&&(u.top-=l/2),u.left+=c[0],u.top+=c[1],w||(u.left=C(u.left),u.top=C(u.top)),i={marginLeft:e,marginTop:n},A.each(["left","top"],function(t,e){A.ui.position[b[t]]&&A.ui.position[b[t]][e](u,{targetWidth:d,targetHeight:f,elemWidth:s,elemHeight:l,collisionPosition:i,collisionWidth:r,collisionHeight:o,offset:[p[0]+c[0],p[1]+c[1]],my:h.my,at:h.at,within:y,elem:a})}),h.using&&(t=function(t){var e=m.left-u.left,i=e+d-s,n=m.top-u.top,r=n+f-l,o={target:{element:v,left:m.left,top:m.top,width:d,height:f},element:{element:a,left:u.left,top:u.top,width:s,height:l},horizontal:i<0?"left":0<e?"right":"center",vertical:r<0?"top":0<n?"bottom":"middle"};d<s&&T(e+i)<d&&(o.horizontal="center"),f<l&&T(n+r)<f&&(o.vertical="middle"),S(T(e),T(i))>S(T(n),T(r))?o.important="horizontal":o.important="vertical",h.using.call(this,t,o)}),a.offset(A.extend(u,{using:t}))})},A.ui.position={fit:{left:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=t.left-e.collisionPosition.marginLeft,s=r-a,l=a+e.collisionWidth-o-r;e.collisionWidth>o?0<s&&l<=0?(i=t.left+s+e.collisionWidth-o-r,t.left+=s-i):t.left=0<l&&s<=0?r:l<s?r+o-e.collisionWidth:r:0<s?t.left+=s:0<l?t.left-=l:t.left=S(t.left-a,t.left)},top:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,s=r-a,l=a+e.collisionHeight-o-r;e.collisionHeight>o?0<s&&l<=0?(i=t.top+s+e.collisionHeight-o-r,t.top+=s-i):t.top=0<l&&s<=0?r:l<s?r+o-e.collisionHeight:r:0<s?t.top+=s:0<l?t.top-=l:t.top=S(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,r=e.within,o=r.offset.left+r.scrollLeft,a=r.width,s=r.isWindow?r.scrollLeft:r.offset.left,l=t.left-e.collisionPosition.marginLeft,u=l-s,c=l+e.collisionWidth-a-s,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,d=-2*e.offset[0];u<0?((i=t.left+h+p+d+e.collisionWidth-a-o)<0||i<T(u))&&(t.left+=h+p+d):0<c&&(0<(n=t.left-e.collisionPosition.marginLeft+h+p+d-s)||T(n)<c)&&(t.left+=h+p+d)},top:function(t,e){var i,n,r=e.within,o=r.offset.top+r.scrollTop,a=r.height,s=r.isWindow?r.scrollTop:r.offset.top,l=t.top-e.collisionPosition.marginTop,u=l-s,c=l+e.collisionHeight-a-s,h="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,p="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,d=-2*e.offset[1];u<0?((n=t.top+h+p+d+e.collisionHeight-a-o)<0||n<T(u))&&(t.top+=h+p+d):0<c&&(0<(i=t.top-e.collisionPosition.marginTop+h+p+d-s)||T(i)<c)&&(t.top+=h+p+d)}},flipfit:{left:function(){A.ui.position.flip.left.apply(this,arguments),A.ui.position.fit.left.apply(this,arguments)},top:function(){A.ui.position.flip.top.apply(this,arguments),A.ui.position.fit.top.apply(this,arguments)}}},function(){var t,e,i,n,r,o=document.getElementsByTagName("body")[0],a=document.createElement("div");for(r in t=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&A.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)t.style[r]=i[r];t.appendChild(a),(e=o||document.documentElement).insertBefore(t,e.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",n=A(a).offset().left,w=10<n&&n<11,t.innerHTML="",e.removeChild(t)}()}(),A.ui.position}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],t):t(jQuery)}(function(o){var r,a="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=o(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},u=function(t){var e=t.name,i=t.form,n=o([]);return e&&(e=e.replace(/'/g,"\\'"),n=i?o(i).find("[name='"+e+"'][type=radio]"):o("[name='"+e+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};return o.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,i=this.options,t="checkbox"===this.type||"radio"===this.type,n=t?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===r&&o(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||o(this).removeClass(n)}).bind("click"+this.eventNamespace,function(t){i.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),t&&this.element.bind("change"+this.eventNamespace,function(){e.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;o(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var t=e.element[0];u(t).not(t).map(function(){return o(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(i.disabled)return!1;o(this).addClass("ui-state-active"),r=this,e.document.one("mouseup",function(){r=null})}).bind("mouseup"+this.eventNamespace,function(){if(i.disabled)return!1;o(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(i.disabled)return!1;t.keyCode!==o.ui.keyCode.SPACE&&t.keyCode!==o.ui.keyCode.ENTER||o(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){o(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===o.ui.keyCode.SPACE&&o(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" ui-state-active "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){if(this._super(t,e),"disabled"===t)return this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),void(e&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")));this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?u(this.element[0]).each(function(){o(this).is(":checked")?o(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):o(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(s),e=o("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,n=i.primary&&i.secondary,r=[];i.primary||i.secondary?(this.options.text&&r.push("ui-button-text-icon"+(n?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(r.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",o.trim(e)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),o.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var t="rtl"===this.element.css("direction"),e=this.element.find(this.options.items),i=e.filter(":ui-button");e.not(":ui-button").button(),i.button("refresh"),this.buttons=e.map(function(){return o(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return o(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),o.ui.button}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./button","./draggable","./mouse","./position","./resizable"],t):t(jQuery)}(function(l){return l.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=l(this).css(t).offset().top;e<0&&l(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&l.fn.draggable&&this._makeDraggable(),this.options.resizable&&l.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?l(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:l.noop,enable:l.noop,close:function(t){var e,i=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t)){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{(e=this.document[0].activeElement)&&"body"!==e.nodeName.toLowerCase()&&l(e).blur()}catch(t){}this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+l(this).css("z-index")}).get(),r=Math.max.apply(null,n);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),i=!0),i&&!e&&this._trigger("focus",t),i},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=l(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(t){function e(){var t=this.document[0].activeElement;this.uiDialog[0]===t||l.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=l("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===l.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===l.ui.keyCode.TAB&&!t.isDefaultPrevented()){var e=this.uiDialog.find(":tabbable"),i=e.filter(":first"),n=e.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){i.focus()}),t.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=l("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){l(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=l("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=l("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=l("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=l("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var r=this,t=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),l.isEmptyObject(t)||l.isArray(t)&&!t.length?this.uiDialog.removeClass("ui-dialog-buttons"):(l.each(t,function(t,e){var i,n;e=l.isFunction(e)?{click:e,text:t}:e,e=l.extend({type:"button"},e),i=e.click,e.click=function(){i.apply(r.element[0],arguments)},n={icons:e.icons,text:e.showText},delete e.icons,delete e.showText,l("<button></button>",e).button(n).appendTo(r.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var r=this,o=this.options;function a(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){l(this).addClass("ui-dialog-dragging"),r._blockFrames(),r._trigger("dragStart",t,a(e))},drag:function(t,e){r._trigger("drag",t,a(e))},stop:function(t,e){var i=e.offset.left-r.document.scrollLeft(),n=e.offset.top-r.document.scrollTop();o.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=n?"+":"")+n,of:r.window},l(this).removeClass("ui-dialog-dragging"),r._unblockFrames(),r._trigger("dragStop",t,a(e))}})},_makeResizable:function(){var o=this,a=this.options,t=a.resizable,e=this.uiDialog.css("position"),i="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";function s(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:i,start:function(t,e){l(this).addClass("ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",t,s(e))},resize:function(t,e){o._trigger("resize",t,s(e))},stop:function(t,e){var i=o.uiDialog.offset(),n=i.left-o.document.scrollLeft(),r=i.top-o.document.scrollTop();a.height=o.uiDialog.height(),a.width=o.uiDialog.width(),a.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=r?"+":"")+r,of:o.window},l(this).removeClass("ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",t,s(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=l(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=l.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var i=this,n=!1,r={};l.each(t,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(r[t]=e)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,e){var i,n,r=this.uiDialog;"dialogClass"===t&&r.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&((i=r.is(":data(ui-draggable)"))&&!e&&r.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((n=r.is(":data(ui-resizable)"))&&!e&&r.resizable("destroy"),n&&"string"==typeof e&&r.resizable("option","handles",e),n||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=l(this);return l("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!l(t.target).closest(".ui-dialog").length||!!l(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=l("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],t):t(jQuery)}(function(i){return i.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=i("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=i("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],t):t(jQuery)}(function(u){return u.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=u(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():u()}},_createIcons:function(){var t=this.options.icons;t&&(u("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&(this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e))):this._activate(e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=u.ui.keyCode,i=this.headers.length,n=this.headers.index(t.target),r=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:r=this.headers[(n+1)%i];break;case e.LEFT:case e.UP:r=this.headers[(n-1+i)%i];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:r=this.headers[0];break;case e.END:r=this.headers[i-1]}r&&(u(t.target).attr("tabIndex",-1),u(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===u.ui.keyCode.UP&&t.ctrlKey&&u(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=u()):!1===t.active?this._activate(0):this.active.length&&!u.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=u()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var i,t=this.options,e=t.heightStyle,n=this.element.parent();this.active=this._findActive(t.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=u(this),e=t.uniqueId().attr("id"),i=t.next(),n=i.uniqueId().attr("id");t.attr("aria-controls",n),i.attr("aria-labelledby",e)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(i=n.height(),this.element.siblings(":visible").each(function(){var t=u(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=u(this).outerHeight(!0)}),this.headers.next().each(function(){u(this).height(Math.max(0,i-u(this).innerHeight()+u(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.headers.next().each(function(){i=Math.max(i,u(this).css("height","").height())}).height(i))},_activate:function(t){var e=this._findActive(t)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:u.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):u()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&u.each(t.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e=this.options,i=this.active,n=u(t.currentTarget),r=n[0]===i[0],o=r&&e.collapsible,a=o?u():n.next(),s=i.next(),l={oldHeader:i,oldPanel:s,newHeader:o?u():n,newPanel:a};t.preventDefault(),r&&!e.collapsible||!1===this._trigger("beforeActivate",t,l)||(e.active=!o&&this.headers.index(n),this.active=r?u():n,this._toggle(l),i.removeClass("ui-accordion-header-active ui-state-active"),e.icons&&i.children(".ui-accordion-header-icon").removeClass(e.icons.activeHeader).addClass(e.icons.header),r||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),e.icons&&n.children(".ui-accordion-header-icon").removeClass(e.icons.header).addClass(e.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var e=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=i,this.options.animate?this._animate(e,i,t):(i.hide(),e.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),e.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===parseInt(u(this).attr("tabIndex"),10)}).attr("tabIndex",-1),e.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,i,e){var n,r,o,a=this,s=0,l=t.css("box-sizing"),u=t.length&&(!i.length||t.index()<i.index()),c=this.options.animate||{},h=u&&c.down||c,p=function(){a._toggleComplete(e)};return"number"==typeof h&&(o=h),"string"==typeof h&&(r=h),r=r||h.easing||c.easing,o=o||h.duration||c.duration,i.length?t.length?(n=t.show().outerHeight(),i.animate(this.hideProps,{duration:o,easing:r,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:o,easing:r,complete:p,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?"content-box"===l&&(s+=e.now):"content"!==a.options.heightStyle&&(e.now=Math.round(n-i.outerHeight()-s),s=0)}})):i.animate(this.hideProps,o,r,p):t.animate(this.showProps,o,r,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./widget"],t):t(jQuery)}(function(r){var o=!1;return r(document).mouseup(function(){o=!1}),r.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(!0===r.data(t.target,e.widgetName+".preventClickEvent"))return r.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,i=1===t.which,n=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&r(t.target).closest(this.options.cancel).length;return!(i&&!n&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===r.data(t.target,this.widgetName+".preventClickEvent")&&r.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0))}},_mouseMove:function(t){if(this._mouseMoved){if(r.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&r.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),o=!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(c){return c.widget("ui.slider",c.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e,i=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r=[];for(e=i.values&&i.values.length||1,n.length>e&&(n.slice(e).remove(),n=n.slice(0,e)),t=n.length;t<e;t++)r.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=n.add(c(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){c(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,e="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:c.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=c("<div></div>").appendTo(this.element),e="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(e+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var e,i,n,r,o,a,s,l=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(i-l.values(t));(e<n||n===e&&(t===l._lastChangedValue||l.values(t)===u.min))&&(n=e,r=c(this),o=t)}),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,r.addClass("ui-state-active").focus(),a=r.offset(),s=!c(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=s?{left:0,top:0}:{left:t.pageX-a.left-r.width()/2,top:t.pageY-a.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,r,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),1<(n=i/e)&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),o=this._valueMin()+n*r,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,r,o;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&n<i||1===e&&i<n)&&(i=n),i!==this.values(e)&&((r=this.values())[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:r}),n=this.values(e?0:1),!1!==o&&this.values(e,i))):i!==this.value()&&!1!==(o=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i)},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var i,n,r;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!c.isArray(t))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,n=t,r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(n[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,e){var i,n=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),c.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e),this._super(t,e),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<n;i+=1)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=0<i?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;t=Math.floor(+(t-e).toFixed(this._precision())/i)*i+e,this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var e,i,t,n,r,o=this.options.range,a=this.options,s=this,l=!this._animateOff&&a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(t){i=(s.values(t)-s._valueMin())/(s._valueMax()-s._valueMin())*100,u["horizontal"===s.orientation?"left":"bottom"]=i+"%",c(this).stop(1,1)[l?"animate":"css"](u,a.animate),!0===s.options.range&&("horizontal"===s.orientation?(0===t&&s.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},a.animate),1===t&&s.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===t&&s.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},a.animate),1===t&&s.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(t=this.value(),n=this._valueMin(),r=this._valueMax(),i=r!==n?(t-n)/(r-n)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(t){var e,i,n,r=c(t.target).data("ui-slider-handle-index");switch(t.keyCode){case c.ui.keyCode.HOME:case c.ui.keyCode.END:case c.ui.keyCode.PAGE_UP:case c.ui.keyCode.PAGE_DOWN:case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,c(t.target).addClass("ui-state-active"),!1===this._start(t,r)))return}switch(n=this.options.step,e=i=this.options.values&&this.options.values.length?this.values(r):this.value(),t.keyCode){case c.ui.keyCode.HOME:i=this._valueMin();break;case c.ui.keyCode.END:i=this._valueMax();break;case c.ui.keyCode.PAGE_UP:i=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case c.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:if(e===this._valueMax())return;i=this._trimAlignValue(e+n);break;case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(e===this._valueMin())return;i=this._trimAlignValue(e-n)}this._slide(t,r,i)},keyup:function(t){var e=c(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),c(t.target).removeClass("ui-state-active"))}}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position"],t):t(jQuery)}(function(u){return u.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=u(this).attr("title")||"";return u("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",u.trim(i.join(" ")))},_removeDescribedBy:function(t){var e=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),n=u.inArray(e,i);-1!==n&&i.splice(n,1),t.removeData("ui-tooltip-id"),(i=u.trim(i.join(" ")))?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=u("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,e){var i=this;if("disabled"===t)return this[e?"_disable":"_enable"](),void(this.options[t]=e);this._super(t,e),"content"===t&&u.each(this.tooltips,function(t,e){i._updateContent(e.element)})},_disable:function(){var n=this;u.each(this.tooltips,function(t,e){var i=u.Event("blur");i.target=i.currentTarget=e.element[0],n.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=u(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=u(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,e=u(t?t.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&e.parents().each(function(){var t,e=u(this);e.data("ui-tooltip-open")&&((t=u.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),e.attr("title")&&(e.uniqueId(),i.parents[this.id]={element:this,title:e.attr("title")},e.attr("title",""))}),this._registerCloseHandlers(t,e),this._updateContent(e,t))},_updateContent:function(e,i){var t,n=this.options.content,r=this,o=i?i.type:null;if("string"==typeof n)return this._open(i,e,n);(t=n.call(e[0],function(t){r._delay(function(){e.data("ui-tooltip-open")&&(i&&(i.type=o),this._open(i,e,t))})}))&&this._open(i,e,t)},_open:function(t,e,i){var n,r,o,a,s=u.extend({},this.options.position);function l(t){s.of=t,r.is(":hidden")||r.position(s)}i&&((n=this._find(e))?n.tooltip.find(".ui-tooltip-content").html(i):(e.is("[title]")&&(t&&"mouseover"===t.type?e.attr("title",""):e.removeAttr("title")),n=this._tooltip(e),r=n.tooltip,this._addDescribedBy(e,r.attr("id")),r.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),i.clone?(a=i.clone()).removeAttr("id").find("[id]").removeAttr("id"):a=i,u("<div>").html(a).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:l}),l(t)):r.position(u.extend({of:e},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){r.is(":visible")&&(l(s.of),clearInterval(o))},u.fx.interval)),this._trigger("open",t,{tooltip:r})))},_registerCloseHandlers:function(t,i){var e={keyup:function(t){if(t.keyCode===u.ui.keyCode.ESCAPE){var e=u.Event(t);e.currentTarget=i[0],this.close(e,!0)}}};i[0]!==this.element[0]&&(e.remove=function(){this._removeTooltip(this._find(i).tooltip)}),t&&"mouseover"!==t.type||(e.mouseleave="close"),t&&"focusin"!==t.type||(e.focusout="close"),this._on(!0,i,e)},close:function(t){var e,i=this,n=u(t?t.currentTarget:this.element),r=this._find(n);r?(e=r.tooltip,r.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),r.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){i._removeTooltip(u(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&u.each(this.parents,function(t,e){u(e.element).attr("title",e.title),delete i.parents[t]}),r.closing=!0,this._trigger("close",t,{tooltip:e}),r.hiding||(r.closing=!1))):n.removeData("ui-tooltip-open")},_tooltip:function(t){var e=u("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),i=e.uniqueId().attr("id");return u("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),this.tooltips[i]={element:t,tooltip:e}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var r=this;u.each(this.tooltips,function(t,e){var i=u.Event("blur"),n=e.element;i.target=i.currentTarget=n[0],r.close(i,!0),u("#"+t).remove(),n.data("ui-tooltip-title")&&(n.attr("title")||n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position"],t):t(jQuery)}(function(s){return s.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=s(t.target);!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&s(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var e=s(t.currentTarget);e.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,e)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(t){this._delay(function(){s.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=s(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var e,i,n,r,o=!0;switch(t.keyCode){case s.ui.keyCode.PAGE_UP:this.previousPage(t);break;case s.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case s.ui.keyCode.HOME:this._move("first","first",t);break;case s.ui.keyCode.END:this._move("last","last",t);break;case s.ui.keyCode.UP:this.previous(t);break;case s.ui.keyCode.DOWN:this.next(t);break;case s.ui.keyCode.LEFT:this.collapse(t);break;case s.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case s.ui.keyCode.ENTER:case s.ui.keyCode.SPACE:this._activate(t);break;case s.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,i=this.previousFilter||"",n=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),n===i?r=!0:n=i+n,e=this._filterMenuItems(n),(e=r&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(n=String.fromCharCode(t.keyCode),e=this._filterMenuItems(n)),e.length?(this.focus(t,e),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(t):this.select(t))},refresh:function(){var t,e=this,n=this.options.icons.submenu,i=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=s(this),e=t.parent(),i=s("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);e.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",e.attr("id"))}),(t=i.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=s(this);e._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!s.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,i,n,r,o,a;this._hasScroll()&&(e=parseFloat(s.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(s.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-e-i,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),a=t.outerHeight(),n<0?this.activeMenu.scrollTop(r+n):o<n+a&&this.activeMenu.scrollTop(r+n-o+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=s.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var t=i?this.element:s(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this.activeMenu=t},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!s(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(t){var e,i,n;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=s(this)).offset().top-i-n<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var e,i,n;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=s(this)).offset().top-i+n}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||s(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var e=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(s.trim(s(this).text()))})}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position","./menu"],t):t(jQuery)}(function(a){return a.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var i,n,r,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,o="input"===t;this.isMultiLine=!!e||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[e||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))n=r=i=!0;else{n=r=i=!1;var e=a.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:i=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:i=!0,this._move("nextPage",t);break;case e.UP:i=!0,this._keyEvent("previous",t);break;case e.DOWN:i=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(i=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:n=!0,this._searchTimeout(t)}}},keypress:function(t){if(i)return i=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||t.preventDefault());if(!n){var e=a.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){if(r)return r=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];a(t.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(t){t.target===e.element[0]||t.target===i||a.contains(i,t.target)||e.close()})})},menufocus:function(t,e){var i,n;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){a(t.target).trigger(t.originalEvent)});n=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),(i=e.item.attr("aria-label")||n.value)&&a.trim(i).length&&(this.liveRegion.children().hide(),a("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=a("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?a(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var i,n,r=this;a.isArray(this.options.source)?(i=this.options.source,this.source=function(t,e){e(a.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,e){r.xhr&&r.xhr.abort(),r.xhr=a.ajax({url:n,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),i=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;t&&(!t||e||i)||(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return a.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:a.map(t,function(t){return"string"==typeof t?{label:t,value:t}:a.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,t){var n=this;a.each(t,function(t,e){n._renderItemData(i,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return a("<li>").text(e.label).appendTo(t)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var i=new RegExp(a.ui.autocomplete.escapeRegex(e),"i");return a.grep(t,function(t){return i.test(t.label||t.value||t)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),a("<div>").text(e).appendTo(this.liveRegion))}}),a.ui.autocomplete}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(u){u.extend(u.fn,{validate:function(t){if(this.length){var n=u.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new u.validator(t,this[0]),u.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(t){n.settings.submitHandler&&(n.submitButton=t.target),u(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==u(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(i){function t(){var t,e;return!n.settings.submitHandler||(n.submitButton&&(t=u("<input type='hidden'/>").attr("name",n.submitButton.name).val(u(n.submitButton).val()).appendTo(n.currentForm)),e=n.settings.submitHandler.call(n,n.currentForm,i),n.submitButton&&t.remove(),void 0!==e&&e)}return n.settings.debug&&i.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,t()):n.form()?n.pendingRequest?!(n.formSubmitted=!0):t():(n.focusInvalid(),!1)})),n)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,e,i;return u(this[0]).is("form")?t=this.validate().form():(i=[],t=!0,e=u(this[0].form).validate(),this.each(function(){t=e.element(this)&&t,i=i.concat(e.errorList)}),e.errorList=i),t},rules:function(t,e){var i,n,r,o,a,s,l=this[0];if(t)switch(n=(i=u.data(l.form,"validator").settings).rules,r=u.validator.staticRules(l),t){case"add":u.extend(r,u.validator.normalizeRule(e)),delete r.messages,n[l.name]=r,e.messages&&(i.messages[l.name]=u.extend(i.messages[l.name],e.messages));break;case"remove":return e?(s={},u.each(e.split(/\s/),function(t,e){s[e]=r[e],delete r[e],"required"===e&&u(l).removeAttr("aria-required")}),s):(delete n[l.name],r)}return(o=u.validator.normalizeRules(u.extend({},u.validator.classRules(l),u.validator.attributeRules(l),u.validator.dataRules(l),u.validator.staticRules(l)),l)).required&&(a=o.required,delete o.required,o=u.extend({required:a},o),u(l).attr("aria-required","true")),o.remote&&(a=o.remote,delete o.remote,o=u.extend(o,{remote:a})),o}}),u.extend(u.expr[":"],{blank:function(t){return!u.trim(""+u(t).val())},filled:function(t){return!!u.trim(""+u(t).val())},unchecked:function(t){return!u(t).prop("checked")}}),u.validator=function(t,e){this.settings=u.extend(!0,{},u.validator.defaults,t),this.currentForm=e,this.init()},u.validator.format=function(i,t){return 1===arguments.length?function(){var t=u.makeArray(arguments);return t.unshift(i),u.validator.format.apply(this,t)}:(2<arguments.length&&t.constructor!==Array&&(t=u.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),u.each(t,function(t,e){i=i.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})}),i)},u.extend(u.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:u([]),errorLabelContainer:u([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||-1!==u.inArray(e.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,e,i){"radio"===t.type?this.findByName(t.name).addClass(e).removeClass(i):u(t).addClass(e).removeClass(i)},unhighlight:function(t,e,i){"radio"===t.type?this.findByName(t.name).removeClass(e).addClass(i):u(t).removeClass(e).addClass(i)}},setDefaults:function(t){u.extend(u.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:u.validator.format("Please enter no more than {0} characters."),minlength:u.validator.format("Please enter at least {0} characters."),rangelength:u.validator.format("Please enter a value between {0} and {1} characters long."),range:u.validator.format("Please enter a value between {0} and {1}."),max:u.validator.format("Please enter a value less than or equal to {0}."),min:u.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=u(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||u(this.currentForm),this.containers=u(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.groups={};function t(t){var e=u.data(this.form,"validator"),i="on"+t.type.replace(/^validate/,""),n=e.settings;n[i]&&!u(this).is(n.ignore)&&n[i].call(e,this,t)}u.each(this.settings.groups,function(i,t){"string"==typeof t&&(t=t.split(/\s/)),u.each(t,function(t,e){n[e]=i})}),i=this.settings.rules,u.each(i,function(t,e){i[t]=u.validator.normalizeRule(e)}),u(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&u(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),u(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),u.extend(this.submitted,this.errorMap),this.invalid=u.extend({},this.errorMap),this.valid()||u(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){var e=this.clean(t),i=this.validationTargetFor(e),n=!0;return void 0===(this.lastElement=i)?delete this.invalid[e.name]:(this.prepareElement(i),this.currentElements=u(i),(n=!1!==this.check(i))?delete this.invalid[i.name]:this.invalid[i.name]=!0),u(t).attr("aria-invalid",!n),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(e){if(e){for(var t in u.extend(this.errorMap,e),this.errorList=[],e)this.errorList.push({message:e[t],element:this.findByName(t)[0]});this.successList=u.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){u.fn.resetForm&&u(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var t,e=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,"");else e.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{u(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===u.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var t=this,e={};return u(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in e||!t.objectLength(u(this).rules()))&&(e[this.name]=!0)})},clean:function(t){return u(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return u(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=u([]),this.toHide=u([]),this.currentElements=u([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var e,i=u(t),n=t.type;return"radio"===n||"checkbox"===n?this.findByName(t.name).filter(":checked").val():"number"===n&&void 0!==t.validity?!t.validity.badInput&&i.val():"string"==typeof(e=i.val())?e.replace(/\r/g,""):e},check:function(e){e=this.validationTargetFor(this.clean(e));var t,i,n,r=u(e).rules(),o=u.map(r,function(t,e){return e}).length,a=!1,s=this.elementValue(e);for(i in r){n={method:i,parameters:r[i]};try{if("dependency-mismatch"===(t=u.validator.methods[i].call(this,s,e,n.parameters))&&1===o){a=!0;continue}if(a=!1,"pending"===t)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!t)return this.formatAndAdd(e,n),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+n.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+n.method+"' method."),t}}if(!a)return this.objectLength(r)&&this.successList.push(e),!0},customDataMessage:function(t,e){return u(t).data("msg"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())||u(t).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(t,e){return this.findDefined(this.customMessage(t.name,e),this.customDataMessage(t,e),!this.settings.ignoreTitle&&t.title||void 0,u.validator.messages[e],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,e){var i=this.defaultMessage(t,e.method),n=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,e.parameters,t):n.test(i)&&(i=u.validator.format(i.replace(n,"{$1}"),e.parameters)),this.errorList.push({message:i,element:t,method:e.method}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return u(this.errorList).map(function(){return this.element})},showLabel:function(t,e){var i,n,r,o=this.errorsFor(t),a=this.idOrName(t),s=u(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(e)):(i=o=u("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(e||""),this.settings.wrapper&&(i=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,u(t)):i.insertAfter(t),o.is("label")?o.attr("for",a):0===o.parents("label[for='"+a+"']").length&&(r=o.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),s?s.match(new RegExp("\\b"+r+"\\b"))||(s+=" "+r):s=r,u(t).attr("aria-describedby",s),(n=this.groups[t.name])&&u.each(this.groups,function(t,e){e===n&&u("[name='"+t+"']",this.currentForm).attr("aria-describedby",o.attr("id"))}))),!e&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var e=this.idOrName(t),i=u(t).attr("aria-describedby"),n="label[for='"+e+"'], label[for='"+e+"'] *";return i&&(n=n+", #"+i.replace(/\s+/g,", #")),this.errors().filter(n)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),u(t).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return u(this.currentForm).find("[name='"+t+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return u("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(t,e){return!!u(t,e.form).length},function:function(t,e){return t(e)}},optional:function(t){var e=this.elementValue(t);return!u.validator.methods.required.call(this,e,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(t,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(u(this.currentForm).submit(),this.formSubmitted=!1):!e&&0===this.pendingRequest&&this.formSubmitted&&(u(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return u.data(t,"previousValue")||u.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})},destroy:function(){this.resetForm(),u(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,e){t.constructor===String?this.classRuleSettings[t]=e:u.extend(this.classRuleSettings,t)},classRules:function(t){var e={},i=u(t).attr("class");return i&&u.each(i.split(" "),function(){this in u.validator.classRuleSettings&&u.extend(e,u.validator.classRuleSettings[this])}),e},normalizeAttributeRule:function(t,e,i,n){/min|max/.test(i)&&(null===e||/number|range|text/.test(e))&&(n=Number(n),isNaN(n)&&(n=void 0)),n||0===n?t[i]=n:e===i&&"range"!==e&&(t[i]=!0)},attributeRules:function(t){var e,i,n={},r=u(t),o=t.getAttribute("type");for(e in u.validator.methods)"required"===e?(""===(i=t.getAttribute(e))&&(i=!0),i=!!i):i=r.attr(e),this.normalizeAttributeRule(n,o,e,i);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var e,i,n={},r=u(t),o=t.getAttribute("type");for(e in u.validator.methods)i=r.data("rule"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()),this.normalizeAttributeRule(n,o,e,i);return n},staticRules:function(t){var e={},i=u.data(t.form,"validator");return i.settings.rules&&(e=u.validator.normalizeRule(i.settings.rules[t.name])||{}),e},normalizeRules:function(n,r){return u.each(n,function(t,e){if(!1!==e){if(e.param||e.depends){var i=!0;switch(typeof e.depends){case"string":i=!!u(e.depends,r.form).length;break;case"function":i=e.depends.call(r,r)}i?n[t]=void 0===e.param||e.param:delete n[t]}}else delete n[t]}),u.each(n,function(t,e){n[t]=u.isFunction(e)?e(r):e}),u.each(["minlength","maxlength"],function(){n[this]&&(n[this]=Number(n[this]))}),u.each(["rangelength","range"],function(){var t;n[this]&&(u.isArray(n[this])?n[this]=[Number(n[this][0]),Number(n[this][1])]:"string"==typeof n[this]&&(t=n[this].replace(/[\[\]]/g,"").split(/[\s,]+/),n[this]=[Number(t[0]),Number(t[1])]))}),u.validator.autoCreateRanges&&(null!=n.min&&null!=n.max&&(n.range=[n.min,n.max],delete n.min,delete n.max),null!=n.minlength&&null!=n.maxlength&&(n.rangelength=[n.minlength,n.maxlength],delete n.minlength,delete n.maxlength)),n},normalizeRule:function(t){if("string"==typeof t){var e={};u.each(t.split(/\s/),function(){e[this]=!0}),t=e}return t},addMethod:function(t,e,i){u.validator.methods[t]=e,u.validator.messages[t]=void 0!==i?i:u.validator.messages[t],e.length<3&&u.validator.addClassRules(t,u.validator.normalizeRule(t))},methods:{required:function(t,e,i){if(!this.depend(i,e))return"dependency-mismatch";if("select"===e.nodeName.toLowerCase()){var n=u(e).val();return n&&0<n.length}return this.checkable(e)?0<this.getLength(t,e):0<t.length},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,n,r=0,o=0,a=!1;if((t=t.replace(/\D/g,"")).length<13||19<t.length)return!1;for(i=t.length-1;0<=i;i--)n=t.charAt(i),o=parseInt(n,10),a&&9<(o*=2)&&(o-=9),r+=o,a=!a;return r%10==0},minlength:function(t,e,i){var n=u.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||i<=n},maxlength:function(t,e,i){var n=u.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n<=i},rangelength:function(t,e,i){var n=u.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n>=i[0]&&n<=i[1]},min:function(t,e,i){return this.optional(e)||i<=t},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(t,e,i){var n=u(i);return this.settings.onfocusout&&n.off(".validate-equalTo").on("blur.validate-equalTo",function(){u(e).valid()}),t===n.val()},remote:function(o,a,t){if(this.optional(a))return"dependency-mismatch";var s,e,l=this.previousValue(a);return this.settings.messages[a.name]||(this.settings.messages[a.name]={}),l.originalMessage=this.settings.messages[a.name].remote,this.settings.messages[a.name].remote=l.message,t="string"==typeof t&&{url:t}||t,l.old===o?l.valid:(l.old=o,(s=this).startRequest(a),(e={})[a.name]=o,u.ajax(u.extend(!0,{mode:"abort",port:"validate"+a.name,dataType:"json",data:e,context:s.currentForm,success:function(t){var e,i,n,r=!0===t||"true"===t;s.settings.messages[a.name].remote=l.originalMessage,r?(n=s.formSubmitted,s.prepareElement(a),s.formSubmitted=n,s.successList.push(a),delete s.invalid[a.name],s.showErrors()):(e={},i=t||s.defaultMessage(a,"remote"),e[a.name]=l.message=u.isFunction(i)?i(o):i,s.invalid[a.name]=!0,s.showErrors(e)),l.valid=r,s.stopRequest(a,r)}},t)),"pending")}}});var n,r={};u.ajaxPrefilter?u.ajaxPrefilter(function(t,e,i){var n=t.port;"abort"===t.mode&&(r[n]&&r[n].abort(),r[n]=i)}):(n=u.ajax,u.ajax=function(t){var e=("mode"in t?t:u.ajaxSettings).mode,i=("port"in t?t:u.ajaxSettings).port;return"abort"===e?(r[i]&&r[i].abort(),r[i]=n.apply(this,arguments),r[i]):n.apply(this,arguments)})}),function(s,r,l,u){var c=s(r);s.fn.lazyload=function(t){var e,o=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:r,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function i(){var e=0;o.each(function(){var t=s(this);if(!a.skip_invisible||t.is(":visible"))if(s.abovethetop(this,a)||s.leftofbegin(this,a));else if(s.belowthefold(this,a)||s.rightoffold(this,a)){if(++e>a.failure_limit)return!1}else t.trigger("appear"),e=0})}t&&(u!==t.failurelimit&&(t.failure_limit=t.failurelimit,delete t.failurelimit),u!==t.effectspeed&&(t.effect_speed=t.effectspeed,delete t.effectspeed),s.extend(a,t)),e=a.container===u||a.container===r?c:s(a.container);var n=null;return 0===a.event.indexOf("scroll")&&e.bind(a.event,function(){return null==n&&(n=setTimeout(function(){n=null,i()},150)),!1}),this.each(function(){var n=this,r=s(n);n.loaded=!1,r.attr("src")!==u&&!1!==r.attr("src")||r.is("img")&&r.attr("src",a.placeholder),r.one("appear",function(){if(!this.loaded){if(a.appear){var t=o.length;a.appear.call(n,t,a)}s("<img />").bind("load",function(){var t=r.attr("data-"+a.data_attribute);r.hide(),r.is("img")?r.attr("src",t):r.css("background-image","url('"+t+"')"),r[a.effect](a.effect_speed),n.loaded=!0;var e=s.grep(o,function(t){return!t.loaded});if(o=s(e),a.load){var i=o.length;a.load.call(n,i,a)}}).attr("src",r.attr("data-"+a.data_attribute))}}),0!==a.event.indexOf("scroll")&&r.bind(a.event,function(){n.loaded||r.trigger("appear")})}),c.bind("resize",function(){i()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&c.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&o.each(function(){s(this).trigger("appear")})}),s(l).ready(function(){i()}),this},s.belowthefold=function(t,e){return(e.container===u||e.container===r?(r.innerHeight?r.innerHeight:c.height())+c.scrollTop():s(e.container).offset().top+s(e.container).height())<=s(t).offset().top-e.threshold},s.rightoffold=function(t,e){return(e.container===u||e.container===r?c.width()+c.scrollLeft():s(e.container).offset().left+s(e.container).width())<=s(t).offset().left-e.threshold},s.abovethetop=function(t,e){return(e.container===u||e.container===r?c.scrollTop():s(e.container).offset().top)>=s(t).offset().top+e.threshold+s(t).height()},s.leftofbegin=function(t,e){return(e.container===u||e.container===r?c.scrollLeft():s(e.container).offset().left)>=s(t).offset().left+e.threshold+s(t).width()},s.inviewport=function(t,e){return!(s.rightoffold(t,e)||s.leftofbegin(t,e)||s.belowthefold(t,e)||s.abovethetop(t,e))},s.extend(s.expr[":"],{"below-the-fold":function(t){return s.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!s.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return s.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!s.rightoffold(t,{threshold:0})},"in-viewport":function(t){return s.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!s.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return s.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!s.rightoffold(t,{threshold:0})}})}(jQuery,window,document),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.lightbox=e(t.jQuery)}(this,function(h){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=h.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1},t.prototype.option=function(t){h.extend(this.options,t)},t.prototype.imageCountLabel=function(t,e){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,e)},t.prototype.init=function(){this.enable(),this.build()},t.prototype.enable=function(){var e=this;h("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox], .js-lightbox[data-lightbox]",function(t){return e.start(h(t.currentTarget)),!1})},t.prototype.build=function(){var e=this;h('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(h("body")),this.$lightbox=h("#lightbox"),this.$overlay=h("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(t){return"lightbox"===h(t.target).attr("id")&&e.end(),!1}),this.$outerContainer.on("click",function(t){return"lightbox"===h(t.target).attr("id")&&e.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===e.currentImageIndex?e.changeImage(e.album.length-1):e.changeImage(e.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return e.currentImageIndex===e.album.length-1?e.changeImage(0):e.changeImage(e.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})},t.prototype.start=function(t){var e=this,i=h(window);i.on("resize",h.proxy(this.sizeOverlay,this)),h("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var n=0;function r(t){e.album.push({link:t.attr("href")||t.data("href"),title:t.attr("data-title")||t.attr("title")})}var o,a=t.attr("data-lightbox");if(a){o=h(t.prop("tagName")+'[data-lightbox="'+a+'"]');for(var s=0;s<o.length;s=++s)r(h(o[s])),o[s]===t[0]&&(n=s)}else if("lightbox"===t.attr("rel"))r(t);else{o=h(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var l=0;l<o.length;l=++l)r(h(o[l])),o[l]===t[0]&&(n=l)}var u=i.scrollTop()+this.options.positionFromTop,c=i.scrollLeft();this.$lightbox.css({top:u+"px",left:c+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(n)},t.prototype.changeImage=function(a){var s=this;this.disableKeyboardNav();var l=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),h(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var u=new Image;u.onload=function(){var t,e,i,n,r,o;l.attr("src",s.album[a].link),h(u),l.width(u.width),l.height(u.height),s.options.fitImagesInViewport&&(o=h(window).width(),r=h(window).height(),n=o-s.containerLeftPadding-s.containerRightPadding-20,i=r-s.containerTopPadding-s.containerBottomPadding-120,s.options.maxWidth&&s.options.maxWidth<n&&(n=s.options.maxWidth),s.options.maxHeight&&s.options.maxHeight<n&&(i=s.options.maxHeight),(u.width>n||u.height>i)&&(u.width/n>u.height/i?(e=n,t=parseInt(u.height/(u.width/e),10)):(t=i,e=parseInt(u.width/(u.height/t),10)),l.width(e),l.height(t))),s.sizeContainer(l.width(),l.height())},u.src=this.album[a].link,this.currentImageIndex=a},t.prototype.sizeOverlay=function(){this.$overlay.width(h(window).width()).height(h(document).height())},t.prototype.sizeContainer=function(t,e){var i=this,n=this.$outerContainer.outerWidth(),r=this.$outerContainer.outerHeight(),o=t+this.containerLeftPadding+this.containerRightPadding,a=e+this.containerTopPadding+this.containerBottomPadding;function s(){i.$lightbox.find(".lb-dataContainer").width(o),i.$lightbox.find(".lb-prevLink").height(a),i.$lightbox.find(".lb-nextLink").height(a),i.showImage()}n!==o||r!==a?this.$outerContainer.animate({width:o,height:a},this.options.resizeDuration,"swing",function(){s()}):s()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),1<this.album.length&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(0<this.currentImageIndex&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var t=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(t){void 0!==h(this).attr("target")?window.open(h(this).attr("href"),h(this).attr("target")):location.href=h(this).attr("href")}),1<this.album.length&&this.options.showImageNumberLabel){var e=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(e).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link);0<this.currentImageIndex&&((new Image).src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){h(document).on("keyup.keyboard",h.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){h(document).off(".keyboard")},t.prototype.keyboardAction=function(t){var e=t.keyCode,i=String.fromCharCode(e).toLowerCase();27===e||i.match(/x|o|c/)?this.end():"p"===i||37===e?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&1<this.album.length&&this.changeImage(this.album.length-1):"n"!==i&&39!==e||(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&1<this.album.length&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),h(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),h("select, object, embed").css({visibility:"visible"})},new t}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(y){"use strict";var _=y.scrollTo=function(t,e,i){return y(window).scrollTo(t,e,i)};function b(t){return!t.nodeName||-1!==y.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])}function e(t){return y.isFunction(t)||y.isPlainObject(t)?t:{top:t,left:t}}return _.defaults={axis:"xy",duration:0,limit:!0},y.fn.scrollTo=function(t,i,g){"object"==typeof i&&(g=i,i=0),"function"==typeof g&&(g={onAfter:g}),"max"===t&&(t=9e9),g=y.extend({},_.defaults,g),i=i||g.duration;var v=g.queue&&1<g.axis.length;return v&&(i/=2),g.offset=e(g.offset),g.over=e(g.over),this.each(function(){if(null!==t){var l,u=b(this),c=u?this.contentWindow||window:this,h=y(c),p=t,d={};switch(typeof p){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(p)){p=e(p);break}p=u?y(p):y(p,c);case"object":if(0===p.length)return;(p.is||p.style)&&(l=(p=y(p)).offset())}var f=y.isFunction(g.offset)&&g.offset(c,p)||g.offset;y.each(g.axis.split(""),function(t,e){var i="x"===e?"Left":"Top",n=i.toLowerCase(),r="scroll"+i,o=h[r](),a=_.max(c,e);if(l)d[r]=l[n]+(u?0:o-h.offset()[n]),g.margin&&(d[r]-=parseInt(p.css("margin"+i),10)||0,d[r]-=parseInt(p.css("border"+i+"Width"),10)||0),d[r]+=f[n]||0,g.over[n]&&(d[r]+=p["x"===e?"width":"height"]()*g.over[n]);else{var s=p[n];d[r]=s.slice&&"%"===s.slice(-1)?parseFloat(s)/100*a:s}g.limit&&/^\d+$/.test(d[r])&&(d[r]=d[r]<=0?0:Math.min(d[r],a)),!t&&1<g.axis.length&&(o===d[r]?d={}:v&&(m(g.onAfterFirst),d={}))}),m(g.onAfter)}function m(t){var e=y.extend({},g,{queue:!0,duration:i,complete:t&&function(){t.call(c,p,g)}});h.animate(d,e)}})},_.max=function(t,e){var i="x"===e?"Width":"Height",n="scroll"+i;if(!b(t))return t[n]-y(t)[i.toLowerCase()]();var r="client"+i,o=t.ownerDocument||t.document,a=o.documentElement,s=o.body;return Math.max(a[n],s[n])-Math.min(a[r],s[r])},y.Tween.propHooks.scrollLeft=y.Tween.propHooks.scrollTop={get:function(t){return y(t.elem)[t.prop]()},set:function(t){var e=this.get(t);if(t.options.interrupt&&t._last&&t._last!==e)return y(t.elem).stop();var i=Math.round(t.now);e!==i&&(y(t.elem)[t.prop](i),t._last=this.get(t))}},_}),function(s){var e={columns:4,classname:"column",min:1};s.fn.autocolumnlist=function(t){var a=s.extend({},e,t);return this.each(function(){var t=s(this).find("> li"),e=t.size();if(0<e){var n=Math.ceil(e/a.columns);n<a.min&&(n=a.min);var r=0,o=n;for(i=0;i<a.columns;i++)i+1==a.columns?t.slice(r,o).wrapAll('<div class="'+a.classname+' last" />'):t.slice(r,o).wrapAll('<div class="'+a.classname+'" />'),r+=n,o+=n}})}}(jQuery),function(){"use strict";function o(t){return"status"===t?c:b[t]?b[t].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof t&&"string"!=typeof t&&t?void y.error("Method "+t+" does not exist on jQuery.sidr"):b.toggle.apply(this,arguments)}var e={classCallCheck:function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}};e.createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();var t,i,n,r,a,s,l,u,c={moving:!1,opened:!1},h={isUrl:function(t){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)},addPrefixes:function(t){this.addPrefix(t,"id"),this.addPrefix(t,"class"),t.removeAttr("style")},addPrefix:function(t,e){var i=t.attr(e);"string"==typeof i&&""!==i&&"sidr-inner"!==i&&t.attr(e,i.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-"+e+"-$1"))},transitions:(s=(document.body||document.documentElement).style,l=!1,u="transition",u in s?l=!0:(n=["moz","webkit","o","ms"],a=r=void 0,u=u.charAt(0).toUpperCase()+u.substr(1),l=function(){for(a=0;a<n.length;a++)if((r=n[a])+u in s)return!0;return!1}(),u=l?"-"+r.toLowerCase()+"-"+u.toLowerCase():null),{supported:l,property:u})},p=jQuery,d="sidr-animating",f="open",m="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",g=function(){function i(t){e.classCallCheck(this,i),this.name=t,this.item=p("#"+t),this.openClass="sidr"===t?"sidr-open":"sidr-open "+t+"-open",this.menuWidth=this.item.outerWidth(!0),this.speed=this.item.data("speed"),this.side=this.item.data("side"),this.displace=this.item.data("displace"),this.timing=this.item.data("timing"),this.method=this.item.data("method"),this.onOpenCallback=this.item.data("onOpen"),this.onCloseCallback=this.item.data("onClose"),this.onOpenEndCallback=this.item.data("onOpenEnd"),this.onCloseEndCallback=this.item.data("onCloseEnd"),this.body=p(this.item.data("body"))}return e.createClass(i,[{key:"getAnimation",value:function(t,e){var i={},n=this.side;return i[n]="open"===t&&"body"===e?this.menuWidth+"px":"close"===t&&"menu"===e?"-"+this.menuWidth+"px":0,i}},{key:"prepareBody",value:function(t){var e="open"===t?"hidden":"";if(this.body.is("body")){var i=p("html"),n=i.scrollTop();i.css("overflow-x",e).scrollTop(n)}}},{key:"openBody",value:function(){if(this.displace){var t=h.transitions,e=this.body;if(t.supported)e.css(t.property,this.side+" "+this.speed/1e3+"s "+this.timing).css(this.side,0).css({width:e.width(),position:"absolute"}),e.css(this.side,this.menuWidth+"px");else{var i=this.getAnimation(f,"body");e.css({width:e.width(),position:"absolute"}).animate(i,{queue:!1,duration:this.speed})}}}},{key:"onCloseBody",value:function(){var t=h.transitions,e={width:"",position:"",right:"",left:""};t.supported&&(e[t.property]=""),this.body.css(e).unbind(m)}},{key:"closeBody",value:function(){var t=this;if(this.displace)if(h.transitions.supported)this.body.css(this.side,0).one(m,function(){t.onCloseBody()});else{var e=this.getAnimation("close","body");this.body.animate(e,{queue:!1,duration:this.speed,complete:function(){t.onCloseBody()}})}}},{key:"moveBody",value:function(t){t===f?this.openBody():this.closeBody()}},{key:"onOpenMenu",value:function(t){var e=this.name;c.moving=!1,c.opened=e,this.item.unbind(m),this.body.removeClass(d).addClass(this.openClass),this.onOpenEndCallback(),"function"==typeof t&&t(e)}},{key:"openMenu",value:function(t){var e=this,i=this.item;if(h.transitions.supported)i.css(this.side,0).one(m,function(){e.onOpenMenu(t)});else{var n=this.getAnimation(f,"menu");i.css("display","block").animate(n,{queue:!1,duration:this.speed,complete:function(){e.onOpenMenu(t)}})}}},{key:"onCloseMenu",value:function(t){this.item.css({left:"",right:""}).unbind(m),p("html").css("overflow-x",""),c.moving=!1,c.opened=!1,this.body.removeClass(d).removeClass(this.openClass),this.onCloseEndCallback(),"function"==typeof t&&t(name)}},{key:"closeMenu",value:function(t){var e=this,i=this.item;if(h.transitions.supported)i.css(this.side,"").one(m,function(){e.onCloseMenu(t)});else{var n=this.getAnimation("close","menu");i.animate(n,{queue:!1,duration:this.speed,complete:function(){e.onCloseMenu()}})}}},{key:"moveMenu",value:function(t,e){this.body.addClass(d),t===f?this.openMenu(e):this.closeMenu(e)}},{key:"move",value:function(t,e){c.moving=!0,this.prepareBody(t),this.moveBody(t),this.moveMenu(t,e)}},{key:"open",value:function(t){var e=this;if(c.opened!==this.name&&!c.moving){if(!1!==c.opened)return void new i(c.opened).close(function(){e.open(t)});this.move("open",t),this.onOpenCallback()}}},{key:"close",value:function(t){c.opened!==this.name||c.moving||(this.move("close",t),this.onCloseCallback())}},{key:"toggle",value:function(t){c.opened===this.name?this.close(t):this.open(t)}}]),i}(),v=jQuery,y=jQuery,_=["open","close","toggle"],b={},x=function(i){return function(t,e){"function"==typeof t?(e=t,t="sidr"):t||(t="sidr"),function(t,e,i){var n=new g(e);switch(t){case"open":n.open(i);break;case"close":n.close(i);break;case"toggle":n.toggle(i);break;default:v.error("Method "+t+" does not exist on jQuery.sidr")}}(i,t,e)}};for(t=0;t<_.length;t++)b[i=_[t]]=x(i);var w=jQuery;jQuery.sidr=o,jQuery.fn.sidr=function(t){var e=h.transitions,n=w.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body",displace:!0,timing:"ease",method:"toggle",bind:"touchstart click",onOpen:function(){},onClose:function(){},onOpenEnd:function(){},onCloseEnd:function(){}},t),r=n.name,i=w("#"+r);return 0===i.length&&(i=w("<div />").attr("id",r).appendTo(w("body"))),e.supported&&i.css(e.property,n.side+" "+n.speed/1e3+"s "+n.timing),i.addClass("sidr").addClass(n.side).data({speed:n.speed,side:n.side,body:n.body,displace:n.displace,timing:n.timing,method:n.method,onOpen:n.onOpen,onClose:n.onClose,onOpenEnd:n.onOpenEnd,onCloseEnd:n.onCloseEnd}),i=function(e,t){if("function"==typeof t.source){var i=t.source(name);e.html(i)}else if("string"==typeof t.source&&h.isUrl(t.source))w.get(t.source,function(t){e.html(t)});else if("string"==typeof t.source){var n="",r=t.source.split(",");if(w.each(r,function(t,e){n+='<div class="sidr-inner">'+w(e).html()+"</div>"}),t.renaming){var o=w("<div />").html(n);o.find("*").each(function(t,e){var i=w(e);h.addPrefixes(i)}),n=o.html()}e.html(n)}else null!==t.source&&w.error("Invalid Sidr Source");return e}(i,n),this.each(function(){var t=w(this),e=t.data("sidr"),i=!1;e||(c.moving=!1,c.opened=!1,t.data("sidr",r),t.bind(n.bind,function(t){t.preventDefault(),i||(i=!0,o(n.method,r),setTimeout(function(){i=!1},100))}))})}}(),function($){function sc_setScroll(t,e,i){return"transition"==i.transition&&"swing"==e&&(e="ease"),{anims:[],duration:t,orgDuration:t,easing:e,startTime:getTime()}}function sc_startScroll(t,e){for(var i=0,n=t.anims.length;i<n;i++){var r=t.anims[i];r&&r[0][e.transition](r[1],t.duration,t.easing,r[2])}}function sc_stopScroll(t,e){is_boolean(e)||(e=!0),is_object(t.pre)&&sc_stopScroll(t.pre,e);for(var i=0,n=t.anims.length;i<n;i++){var r=t.anims[i];r[0].stop(!0),e&&(r[0].css(r[1]),is_function(r[2])&&r[2]())}is_object(t.post)&&sc_stopScroll(t.post,e)}function sc_afterScroll(t,e,i){switch(e&&e.remove(),i.fx){case"fade":case"crossfade":case"cover-fade":case"uncover-fade":t.css("opacity",1),t.css("filter","")}}function sc_fireCallbacks(t,e,i,n,r){if(e[i]&&e[i].call(t,n),r[i].length)for(var o=0,a=r[i].length;o<a;o++)r[i][o].call(t,n);return[]}function sc_fireQueue(t,e,i){return e.length&&(t.trigger(cf_e(e[0][0],i),e[0][1]),e.shift()),e}function sc_hideHiddenItems(t){t.each(function(){var t=$(this);t.data("_cfs_isHidden",t.is(":hidden")).hide()})}function sc_showHiddenItems(t){t&&t.each(function(){var t=$(this);t.data("_cfs_isHidden")||t.show()})}function sc_clearTimers(t){return t.auto&&clearTimeout(t.auto),t.progress&&clearInterval(t.progress),t}function sc_mapCallbackArguments(t,e,i,n,r,o,a){return{width:a.width,height:a.height,items:{old:t,skipped:e,visible:i},scroll:{items:n,direction:r,duration:o}}}function sc_getDuration(t,e,i,n){var r=t.duration;return"none"==t.fx?0:("auto"==r?r=e.scroll.duration/e.scroll.items*i:r<10&&(r=n/r),r<1?0:("fade"==t.fx&&(r/=2),Math.round(r)))}function nv_showNavi(t,e,i){var n=is_number(t.items.minimum)?t.items.minimum:t.items.visible+1;if("show"==e||"hide"==e)var r=e;else if(e<n){debug(i,"Not enough items ("+e+" total, "+n+" needed): Hiding navigation.");r="hide"}else r="show";var o="show"==r?"removeClass":"addClass",a=cf_c("hidden",i);t.auto.button&&t.auto.button[r]()[o](a),t.prev.button&&t.prev.button[r]()[o](a),t.next.button&&t.next.button[r]()[o](a),t.pagination.container&&t.pagination.container[r]()[o](a)}function nv_enableNavi(t,e,i){if(!t.circular&&!t.infinite){var n=("removeClass"==e||"addClass"==e)&&e,r=cf_c("disabled",i);if(t.auto.button&&n&&t.auto.button[n](r),t.prev.button){var o=n||0==e?"addClass":"removeClass";t.prev.button[o](r)}if(t.next.button){o=n||e==t.items.visible?"addClass":"removeClass";t.next.button[o](r)}}}function go_getObject(t,e){return is_function(e)?e=e.call(t):is_undefined(e)&&(e={}),e}function go_getItemsObject(t,e){return is_number(e=go_getObject(t,e))?e={visible:e}:"variable"==e?e={visible:e,width:e,height:e}:is_object(e)||(e={}),e}function go_getScrollObject(t,e){return is_number(e=go_getObject(t,e))?e=e<=50?{items:e}:{duration:e}:is_string(e)?e={easing:e}:is_object(e)||(e={}),e}function go_getNaviObject(t,e){if(is_string(e=go_getObject(t,e))){var i=cf_getKeyCode(e);e=-1==i?$(e):i}return e}function go_getAutoObject(t,e){return is_jquery(e=go_getNaviObject(t,e))?e={button:e}:is_boolean(e)?e={play:e}:is_number(e)&&(e={timeoutDuration:e}),e.progress&&(is_string(e.progress)||is_jquery(e.progress))&&(e.progress={bar:e.progress}),e}function go_complementAutoObject(t,e){return is_function(e.button)&&(e.button=e.button.call(t)),is_string(e.button)&&(e.button=$(e.button)),is_boolean(e.play)||(e.play=!0),is_number(e.delay)||(e.delay=0),is_undefined(e.pauseOnEvent)&&(e.pauseOnEvent=!0),is_boolean(e.pauseOnResize)||(e.pauseOnResize=!0),is_number(e.timeoutDuration)||(e.timeoutDuration=e.duration<10?2500:5*e.duration),e.progress&&(is_function(e.progress.bar)&&(e.progress.bar=e.progress.bar.call(t)),is_string(e.progress.bar)&&(e.progress.bar=$(e.progress.bar)),e.progress.bar?(is_function(e.progress.updater)||(e.progress.updater=$.fn.carouFredSel.progressbarUpdater),is_number(e.progress.interval)||(e.progress.interval=50)):e.progress=!1),e}function go_getPrevNextObject(t,e){return is_jquery(e=go_getNaviObject(t,e))?e={button:e}:is_number(e)&&(e={key:e}),e}function go_complementPrevNextObject(t,e){return is_function(e.button)&&(e.button=e.button.call(t)),is_string(e.button)&&(e.button=$(e.button)),is_string(e.key)&&(e.key=cf_getKeyCode(e.key)),e}function go_getPaginationObject(t,e){return is_jquery(e=go_getNaviObject(t,e))?e={container:e}:is_boolean(e)&&(e={keys:e}),e}function go_complementPaginationObject(t,e){return is_function(e.container)&&(e.container=e.container.call(t)),is_string(e.container)&&(e.container=$(e.container)),is_number(e.items)||(e.items=!1),is_boolean(e.keys)||(e.keys=!1),is_function(e.anchorBuilder)||is_false(e.anchorBuilder)||(e.anchorBuilder=$.fn.carouFredSel.pageAnchorBuilder),is_number(e.deviation)||(e.deviation=0),e}function go_getSwipeObject(t,e){return is_function(e)&&(e=e.call(t)),is_undefined(e)&&(e={onTouch:!1}),is_true(e)?e={onTouch:e}:is_number(e)&&(e={items:e}),e}function go_complementSwipeObject(t,e){return is_boolean(e.onTouch)||(e.onTouch=!0),is_boolean(e.onMouse)||(e.onMouse=!1),is_object(e.options)||(e.options={}),is_boolean(e.options.triggerOnTouchEnd)||(e.options.triggerOnTouchEnd=!1),e}function go_getMousewheelObject(t,e){return is_function(e)&&(e=e.call(t)),is_true(e)?e={}:is_number(e)?e={items:e}:is_undefined(e)&&(e=!1),e}function go_complementMousewheelObject(t,e){return e}function gn_getItemIndex(t,e,i,n,r){if(is_string(t)&&(t=$(t,r)),is_object(t)&&(t=$(t,r)),is_jquery(t)?(t=r.children().index(t),is_boolean(i)||(i=!1)):is_boolean(i)||(i=!0),is_number(t)||(t=0),is_number(e)||(e=0),i&&(t+=n.first),t+=e,0<n.total){for(;t>=n.total;)t-=n.total;for(;t<0;)t+=n.total}return t}function gn_getVisibleItemsPrev(t,e,i){for(var n=0,r=0,o=i;0<=o;o--){var a=t.eq(o);if((n+=a.is(":visible")?a[e.d.outerWidth](!0):0)>e.maxDimension)return r;0==o&&(o=t.length),r++}}function gn_getVisibleItemsPrevFilter(t,e,i){return gn_getItemsPrevFilter(t,e.items.filter,e.items.visibleConf.org,i)}function gn_getScrollItemsPrevFilter(t,e,i,n){return gn_getItemsPrevFilter(t,e.items.filter,n,i)}function gn_getItemsPrevFilter(t,e,i,n){for(var r=0,o=0,a=n,s=t.length;0<=a;a--){if(++o==s)return o;if(t.eq(a).is(e)&&++r==i)return o;0==a&&(a=s)}}function gn_getVisibleOrg(t,e){return e.items.visibleConf.org||t.children().slice(0,e.items.visible).filter(e.items.filter).length}function gn_getVisibleItemsNext(t,e,i){for(var n=0,r=0,o=i,a=t.length-1;o<=a;o++){var s=t.eq(o);if((n+=s.is(":visible")?s[e.d.outerWidth](!0):0)>e.maxDimension)return r;if(++r==a+1)return r;o==a&&(o=-1)}}function gn_getVisibleItemsNextTestCircular(t,e,i,n){var r=gn_getVisibleItemsNext(t,e,i);return e.circular||n<i+r&&(r=n-i),r}function gn_getVisibleItemsNextFilter(t,e,i){return gn_getItemsNextFilter(t,e.items.filter,e.items.visibleConf.org,i,e.circular)}function gn_getScrollItemsNextFilter(t,e,i,n){return gn_getItemsNextFilter(t,e.items.filter,n+1,i,e.circular)-1}function gn_getItemsNextFilter(t,e,i,n,r){for(var o=0,a=0,s=n,l=t.length-1;s<=l;s++){if(l<=++a)return a;if(t.eq(s).is(e)&&++o==i)return a;s==l&&(s=-1)}}function gi_getCurrentItems(t,e){return t.slice(0,e.items.visible)}function gi_getOldItemsPrev(t,e,i){return t.slice(i,e.items.visibleConf.old+i)}function gi_getNewItemsPrev(t,e){return t.slice(0,e.items.visible)}function gi_getOldItemsNext(t,e){return t.slice(0,e.items.visibleConf.old)}function gi_getNewItemsNext(t,e,i){return t.slice(i,e.items.visible+i)}function sz_storeMargin(t,i,n){i.usePadding&&(is_string(n)||(n="_cfs_origCssMargin"),t.each(function(){var t=$(this),e=parseInt(t.css(i.d.marginRight),10);is_number(e)||(e=0),t.data(n,e)}))}function sz_resetMargin(t,e,i){if(e.usePadding){var n=!!is_boolean(i)&&i;is_number(i)||(i=0),sz_storeMargin(t,e,"_cfs_tempCssMargin"),t.each(function(){var t=$(this);t.css(e.d.marginRight,n?t.data("_cfs_tempCssMargin"):i+t.data("_cfs_origCssMargin"))})}}function sz_storeOrigCss(t){t.each(function(){var t=$(this);t.data("_cfs_origCss",t.attr("style")||"")})}function sz_restoreOrigCss(t){t.each(function(){var t=$(this);t.attr("style",t.data("_cfs_origCss")||"")})}function sz_setResponsiveSizes(i,t){i.items.visible;var n=i.items[i.d.width],r=i[i.d.height],o=is_percentage(r);t.each(function(){var t=$(this),e=n-ms_getPaddingBorderMargin(t,i,"Width");t[i.d.width](e),o&&t[i.d.height](ms_getPercentage(e,r))})}function sz_setSizes(t,e){var i=t.parent(),n=t.children(),r=gi_getCurrentItems(n,e),o=cf_mapWrapperSizes(ms_getSizes(r,e,!0),e,!1);if(i.css(o),e.usePadding){var a=e.padding,s=a[e.d[1]];e.align&&s<0&&(s=0);var l=r.last();l.css(e.d.marginRight,l.data("_cfs_origCssMargin")+s),t.css(e.d.top,a[e.d[0]]),t.css(e.d.left,a[e.d[3]])}return t.css(e.d.width,o[e.d.width]+2*ms_getTotalSize(n,e,"width")),t.css(e.d.height,ms_getLargestSize(n,e,"height")),o}function ms_getSizes(t,e,i){return[ms_getTotalSize(t,e,"width",i),ms_getLargestSize(t,e,"height",i)]}function ms_getLargestSize(t,e,i,n){return is_boolean(n)||(n=!1),is_number(e[e.d[i]])&&n?e[e.d[i]]:is_number(e.items[e.d[i]])?e.items[e.d[i]]:ms_getTrueLargestSize(t,e,i=-1<i.toLowerCase().indexOf("width")?"outerWidth":"outerHeight")}function ms_getTrueLargestSize(t,e,i){for(var n=0,r=0,o=t.length;r<o;r++){var a=t.eq(r),s=a.is(":visible")?a[e.d[i]](!0):0;n<s&&(n=s)}return n}function ms_getTotalSize(t,e,i,n){if(is_boolean(n)||(n=!1),is_number(e[e.d[i]])&&n)return e[e.d[i]];if(is_number(e.items[e.d[i]]))return e.items[e.d[i]]*t.length;for(var r=-1<i.toLowerCase().indexOf("width")?"outerWidth":"outerHeight",o=0,a=0,s=t.length;a<s;a++){var l=t.eq(a);o+=l.is(":visible")?l[e.d[r]](!0):0}return o}function ms_getParentSize(t,e,i){var n=t.is(":visible");n&&t.hide();var r=t.parent()[e.d[i]]();return n&&t.show(),r}function ms_getMaxDimension(t,e){return is_number(t[t.d.width])?t[t.d.width]:e}function ms_hasVariableSizes(t,e,i){for(var n=!1,r=!1,o=0,a=t.length;o<a;o++){var s=t.eq(o),l=s.is(":visible")?s[e.d[i]](!0):0;!1===n?n=l:n!=l&&(r=!0),0==n&&(r=!0)}return r}function ms_getPaddingBorderMargin(t,e,i){return t[e.d["outer"+i]](!0)-t[e.d[i.toLowerCase()]]()}function ms_getPercentage(t,e){if(is_percentage(e)){if(!is_number(e=parseInt(e.slice(0,-1),10)))return t;t*=e/100}return t}function cf_e(t,e,i,n,r){return is_boolean(i)||(i=!0),is_boolean(n)||(n=!0),is_boolean(r)||(r=!1),i&&(t=e.events.prefix+t),n&&(t=t+"."+e.events.namespace),n&&r&&(t+=e.serialNumber),t}function cf_c(t,e){return is_string(e.classnames[t])?e.classnames[t]:t}function cf_mapWrapperSizes(t,e,i){is_boolean(i)||(i=!0);var n=e.usePadding&&i?e.padding:[0,0,0,0],r={};return r[e.d.width]=t[0]+n[1]+n[3],r[e.d.height]=t[1]+n[0]+n[2],r}function cf_sortParams(t,e){for(var i=[],n=0,r=t.length;n<r;n++)for(var o=0,a=e.length;o<a;o++)if(-1<e[o].indexOf(typeof t[n])&&is_undefined(i[o])){i[o]=t[n];break}return i}function cf_getPadding(t){if(is_undefined(t))return[0,0,0,0];if(is_number(t))return[t,t,t,t];if(is_string(t)&&(t=t.split("px").join("").split("em").join("").split(" ")),!is_array(t))return[0,0,0,0];for(var e=0;e<4;e++)t[e]=parseInt(t[e],10);switch(t.length){case 0:return[0,0,0,0];case 1:return[t[0],t[0],t[0],t[0]];case 2:return[t[0],t[1],t[0],t[1]];case 3:return[t[0],t[1],t[2],t[1]];default:return[t[0],t[1],t[2],t[3]]}}function cf_getAlignPadding(t,e){var i=is_number(e[e.d.width])?Math.ceil(e[e.d.width]-ms_getTotalSize(t,e,"width")):0;switch(e.align){case"left":return[0,i];case"right":return[i,0];case"center":default:return[Math.ceil(i/2),Math.floor(i/2)]}}function cf_getDimensions(t){for(var e=[["width","innerWidth","outerWidth","height","innerHeight","outerHeight","left","top","marginRight",0,1,2,3],["height","innerHeight","outerHeight","width","innerWidth","outerWidth","top","left","marginBottom",3,2,1,0]],i=e[0].length,n="right"==t.direction||"left"==t.direction?0:1,r={},o=0;o<i;o++)r[e[0][o]]=e[n][o];return r}function cf_getAdjust(t,e,i,n){var r=t;if(is_function(i))r=i.call(n,r);else if(is_string(i)){var o=i.split("+"),a=i.split("-");if(a.length>o.length)var s=!0,l=a[0],u=a[1];else s=!1,l=o[0],u=o[1];switch(l){case"even":r=t%2==1?t-1:t;break;case"odd":r=t%2==0?t-1:t;break;default:r=t}is_number(u=parseInt(u,10))&&(s&&(u=-u),r+=u)}return(!is_number(r)||r<1)&&(r=1),r}function cf_getItemsAdjust(t,e,i,n){return cf_getItemAdjustMinMax(cf_getAdjust(t,e,i,n),e.items.visibleConf)}function cf_getItemAdjustMinMax(t,e){return is_number(e.min)&&t<e.min&&(t=e.min),is_number(e.max)&&t>e.max&&(t=e.max),t<1&&(t=1),t}function cf_getSynchArr(t){is_array(t)||(t=[[t]]),is_array(t[0])||(t=[t]);for(var e=0,i=t.length;e<i;e++)is_string(t[e][0])&&(t[e][0]=$(t[e][0])),is_boolean(t[e][1])||(t[e][1]=!0),is_boolean(t[e][2])||(t[e][2]=!0),is_number(t[e][3])||(t[e][3]=0);return t}function cf_getKeyCode(t){return"right"==t?39:"left"==t?37:"up"==t?38:"down"==t?40:-1}function cf_setCookie(t,e,i){if(t){var n=e.triggerHandler(cf_e("currentPosition",i));$.fn.carouFredSel.cookie.set(t,n)}}function cf_getCookie(t){var e=$.fn.carouFredSel.cookie.get(t);return""==e?0:e}function in_mapCss(t,e){for(var i={},n=0,r=e.length;n<r;n++)i[e[n]]=t.css(e[n]);return i}function in_complementItems(t,e,i,n){return is_object(t.visibleConf)||(t.visibleConf={}),is_object(t.sizesConf)||(t.sizesConf={}),0==t.start&&is_number(n)&&(t.start=n),is_object(t.visible)?(t.visibleConf.min=t.visible.min,t.visibleConf.max=t.visible.max,t.visible=!1):is_string(t.visible)?("variable"==t.visible?t.visibleConf.variable=!0:t.visibleConf.adjust=t.visible,t.visible=!1):is_function(t.visible)&&(t.visibleConf.adjust=t.visible,t.visible=!1),is_string(t.filter)||(t.filter=0<i.filter(":hidden").length?":visible":"*"),t[e.d.width]||(e.responsive?(debug(!0,"Set a "+e.d.width+" for the items!"),t[e.d.width]=ms_getTrueLargestSize(i,e,"outerWidth")):t[e.d.width]=ms_hasVariableSizes(i,e,"outerWidth")?"variable":i[e.d.outerWidth](!0)),t[e.d.height]||(t[e.d.height]=ms_hasVariableSizes(i,e,"outerHeight")?"variable":i[e.d.outerHeight](!0)),t.sizesConf.width=t.width,t.sizesConf.height=t.height,t}function in_complementVisibleItems(t,e){return"variable"==t.items[t.d.width]&&(t.items.visibleConf.variable=!0),t.items.visibleConf.variable||(is_number(t[t.d.width])?t.items.visible=Math.floor(t[t.d.width]/t.items[t.d.width]):(t.items.visible=Math.floor(e/t.items[t.d.width]),t[t.d.width]=t.items.visible*t.items[t.d.width],t.items.visibleConf.adjust||(t.align=!1)),("Infinity"==t.items.visible||t.items.visible<1)&&(debug(!0,'Not a valid number of visible items: Set to "variable".'),t.items.visibleConf.variable=!0)),t}function in_complementPrimarySize(t,e,i){return"auto"==t&&(t=ms_getTrueLargestSize(i,e,"outerWidth")),t}function in_complementSecondarySize(t,e,i){return"auto"==t&&(t=ms_getTrueLargestSize(i,e,"outerHeight")),t||(t=e.items[e.d.height]),t}function in_getAlignPadding(t,e){var i=cf_getAlignPadding(gi_getCurrentItems(e,t),t);return t.padding[t.d[1]]=i[1],t.padding[t.d[3]]=i[0],t}function in_getResponsiveValues(t,e,i){var n=cf_getItemAdjustMinMax(Math.ceil(t[t.d.width]/t.items[t.d.width]),t.items.visibleConf);n>e.length&&(n=e.length);var r=Math.floor(t[t.d.width]/n);return t.items.visible=n,t.items[t.d.width]=r,t[t.d.width]=n*r,t}function bt_pauseOnHoverConfig(t){if(is_string(t))var e=-1<t.indexOf("immediate"),i=-1<t.indexOf("resume");else e=i=!1;return[e,i]}function bt_mousesheelNumber(t){return is_number(t)?t:null}function is_null(t){return null===t}function is_undefined(t){return is_null(t)||void 0===t||""===t||"undefined"===t}function is_array(t){return t instanceof Array}function is_jquery(t){return t instanceof jQuery}function is_object(t){return(t instanceof Object||"object"==typeof t)&&!is_null(t)&&!is_jquery(t)&&!is_array(t)&&!is_function(t)}function is_number(t){return(t instanceof Number||"number"==typeof t)&&!isNaN(t)}function is_string(t){return(t instanceof String||"string"==typeof t)&&!is_undefined(t)&&!is_true(t)&&!is_false(t)}function is_function(t){return t instanceof Function||"function"==typeof t}function is_boolean(t){return t instanceof Boolean||"boolean"==typeof t||is_true(t)||is_false(t)}function is_true(t){return!0===t||"true"===t}function is_false(t){return!1===t||"false"===t}function is_percentage(t){return is_string(t)&&"%"==t.slice(-1)}function getTime(){return(new Date).getTime()}function deprecated(t,e){debug(!0,t+" is DEPRECATED, support for it will be removed. Use "+e+" instead.")}function debug(t,e){if(!is_undefined(window.console)&&!is_undefined(window.console.log)){if(is_object(t)){var i=" ("+t.selector+")";t=t.debug}else i="";if(!t)return!1;e=is_string(e)?"carouFredSel"+i+": "+e:["carouFredSel"+i+":",e],window.console.log(e)}return!1}$.fn.carouFredSel||($.fn.caroufredsel=$.fn.carouFredSel=function(options,configs){if(0==this.length)return debug(!0,'No element found for "'+this.selector+'".'),this;if(1<this.length)return this.each(function(){$(this).carouFredSel(options,configs)});var $cfs=this,$tt0=this[0],starting_position=!1;$cfs.data("_cfs_isCarousel")&&(starting_position=$cfs.triggerHandler("_cfs_triggerEvent","currentPosition"),$cfs.trigger("_cfs_triggerEvent",["destroy",!0]));var FN={_init:function(t,e,i){(t=go_getObject($tt0,t)).items=go_getItemsObject($tt0,t.items),t.scroll=go_getScrollObject($tt0,t.scroll),t.auto=go_getAutoObject($tt0,t.auto),t.prev=go_getPrevNextObject($tt0,t.prev),t.next=go_getPrevNextObject($tt0,t.next),t.pagination=go_getPaginationObject($tt0,t.pagination),t.swipe=go_getSwipeObject($tt0,t.swipe),t.mousewheel=go_getMousewheelObject($tt0,t.mousewheel),e&&(opts_orig=$.extend(!0,{},$.fn.carouFredSel.defaults,t)),(opts=$.extend(!0,{},$.fn.carouFredSel.defaults,t)).d=cf_getDimensions(opts),crsl.direction="up"==opts.direction||"left"==opts.direction?"next":"prev";var n=$cfs.children(),r=ms_getParentSize($wrp,opts,"width");if(is_true(opts.cookie)&&(opts.cookie="caroufredsel_cookie_"+conf.serialNumber),opts.maxDimension=ms_getMaxDimension(opts,r),opts.items=in_complementItems(opts.items,opts,n,i),opts[opts.d.width]=in_complementPrimarySize(opts[opts.d.width],opts,n),opts[opts.d.height]=in_complementSecondarySize(opts[opts.d.height],opts,n),opts.responsive&&(is_percentage(opts[opts.d.width])||(opts[opts.d.width]="100%")),is_percentage(opts[opts.d.width])&&(crsl.upDateOnWindowResize=!0,crsl.primarySizePercentage=opts[opts.d.width],opts[opts.d.width]=ms_getPercentage(r,crsl.primarySizePercentage),opts.items.visible||(opts.items.visibleConf.variable=!0)),opts.responsive?(opts.usePadding=!1,opts.padding=[0,0,0,0],opts.align=!1,opts.items.visibleConf.variable=!1):(opts.items.visible||(opts=in_complementVisibleItems(opts,r)),opts[opts.d.width]||(!opts.items.visibleConf.variable&&is_number(opts.items[opts.d.width])&&"*"==opts.items.filter?(opts[opts.d.width]=opts.items.visible*opts.items[opts.d.width],opts.align=!1):opts[opts.d.width]="variable"),is_undefined(opts.align)&&(opts.align=!!is_number(opts[opts.d.width])&&"center"),opts.items.visibleConf.variable&&(opts.items.visible=gn_getVisibleItemsNext(n,opts,0))),"*"==opts.items.filter||opts.items.visibleConf.variable||(opts.items.visibleConf.org=opts.items.visible,opts.items.visible=gn_getVisibleItemsNextFilter(n,opts,0)),opts.items.visible=cf_getItemsAdjust(opts.items.visible,opts,opts.items.visibleConf.adjust,$tt0),opts.items.visibleConf.old=opts.items.visible,opts.responsive)opts.items.visibleConf.min||(opts.items.visibleConf.min=opts.items.visible),opts.items.visibleConf.max||(opts.items.visibleConf.max=opts.items.visible),opts=in_getResponsiveValues(opts,n,r);else switch(opts.padding=cf_getPadding(opts.padding),"top"==opts.align?opts.align="left":"bottom"==opts.align&&(opts.align="right"),opts.align){case"center":case"left":case"right":"variable"!=opts[opts.d.width]&&((opts=in_getAlignPadding(opts,n)).usePadding=!0);break;default:opts.align=!1,opts.usePadding=0!=opts.padding[0]||0!=opts.padding[1]||0!=opts.padding[2]||0!=opts.padding[3]}is_number(opts.scroll.duration)||(opts.scroll.duration=500),is_undefined(opts.scroll.items)&&(opts.scroll.items=opts.responsive||opts.items.visibleConf.variable||"*"!=opts.items.filter?"visible":opts.items.visible),opts.auto=$.extend(!0,{},opts.scroll,opts.auto),opts.prev=$.extend(!0,{},opts.scroll,opts.prev),opts.next=$.extend(!0,{},opts.scroll,opts.next),opts.pagination=$.extend(!0,{},opts.scroll,opts.pagination),opts.auto=go_complementAutoObject($tt0,opts.auto),opts.prev=go_complementPrevNextObject($tt0,opts.prev),opts.next=go_complementPrevNextObject($tt0,opts.next),opts.pagination=go_complementPaginationObject($tt0,opts.pagination),opts.swipe=go_complementSwipeObject($tt0,opts.swipe),opts.mousewheel=go_complementMousewheelObject($tt0,opts.mousewheel),opts.synchronise&&(opts.synchronise=cf_getSynchArr(opts.synchronise)),opts.auto.onPauseStart&&(opts.auto.onTimeoutStart=opts.auto.onPauseStart,deprecated("auto.onPauseStart","auto.onTimeoutStart")),opts.auto.onPausePause&&(opts.auto.onTimeoutPause=opts.auto.onPausePause,deprecated("auto.onPausePause","auto.onTimeoutPause")),opts.auto.onPauseEnd&&(opts.auto.onTimeoutEnd=opts.auto.onPauseEnd,deprecated("auto.onPauseEnd","auto.onTimeoutEnd")),opts.auto.pauseDuration&&(opts.auto.timeoutDuration=opts.auto.pauseDuration,deprecated("auto.pauseDuration","auto.timeoutDuration"))},_build:function(){$cfs.data("_cfs_isCarousel",!0);var t=$cfs.children(),e=in_mapCss($cfs,["textAlign","float","position","top","right","bottom","left","zIndex","width","height","marginTop","marginRight","marginBottom","marginLeft"]),i="relative";switch(e.position){case"absolute":case"fixed":i=e.position}"parent"==conf.wrapper?sz_storeOrigCss($wrp):$wrp.css(e),$wrp.css({overflow:"hidden",position:i}),sz_storeOrigCss($cfs),$cfs.data("_cfs_origCssZindex",e.zIndex),$cfs.css({textAlign:"left",float:"none",position:"absolute",top:0,right:"auto",bottom:"auto",left:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0}),sz_storeMargin(t,opts),sz_storeOrigCss(t),opts.responsive&&sz_setResponsiveSizes(opts,t)},_bind_events:function(){FN._unbind_events(),$cfs.bind(cf_e("stop",conf),function(t,e){return t.stopPropagation(),crsl.isStopped||opts.auto.button&&opts.auto.button.addClass(cf_c("stopped",conf)),crsl.isStopped=!0,opts.auto.play&&(opts.auto.play=!1,$cfs.trigger(cf_e("pause",conf),e)),!0}),$cfs.bind(cf_e("finish",conf),function(t){return t.stopPropagation(),crsl.isScrolling&&sc_stopScroll(scrl),!0}),$cfs.bind(cf_e("pause",conf),function(t,e,i){if(t.stopPropagation(),tmrs=sc_clearTimers(tmrs),e&&crsl.isScrolling){scrl.isStopped=!0;var n=getTime()-scrl.startTime;scrl.duration-=n,scrl.pre&&(scrl.pre.duration-=n),scrl.post&&(scrl.post.duration-=n),sc_stopScroll(scrl,!1)}if(crsl.isPaused||crsl.isScrolling||i&&(tmrs.timePassed+=getTime()-tmrs.startTime),crsl.isPaused||opts.auto.button&&opts.auto.button.addClass(cf_c("paused",conf)),crsl.isPaused=!0,opts.auto.onTimeoutPause){var r=opts.auto.timeoutDuration-tmrs.timePassed,o=100-Math.ceil(100*r/opts.auto.timeoutDuration);opts.auto.onTimeoutPause.call($tt0,o,r)}return!0}),$cfs.bind(cf_e("play",conf),function(t,e,i,n){t.stopPropagation(),tmrs=sc_clearTimers(tmrs);var r=cf_sortParams([e,i,n],["string","number","boolean"]);if(e=r[0],i=r[1],n=r[2],"prev"!=e&&"next"!=e&&(e=crsl.direction),is_number(i)||(i=0),is_boolean(n)||(n=!1),n&&(crsl.isStopped=!1,opts.auto.play=!0),!opts.auto.play)return t.stopImmediatePropagation(),debug(conf,"Carousel stopped: Not scrolling.");crsl.isPaused&&opts.auto.button&&(opts.auto.button.removeClass(cf_c("stopped",conf)),opts.auto.button.removeClass(cf_c("paused",conf))),crsl.isPaused=!1,tmrs.startTime=getTime();var o=opts.auto.timeoutDuration+i;return dur2=o-tmrs.timePassed,perc=100-Math.ceil(100*dur2/o),opts.auto.progress&&(tmrs.progress=setInterval(function(){var t=getTime()-tmrs.startTime+tmrs.timePassed,e=Math.ceil(100*t/o);opts.auto.progress.updater.call(opts.auto.progress.bar[0],e)},opts.auto.progress.interval)),tmrs.auto=setTimeout(function(){opts.auto.progress&&opts.auto.progress.updater.call(opts.auto.progress.bar[0],100),opts.auto.onTimeoutEnd&&opts.auto.onTimeoutEnd.call($tt0,perc,dur2),crsl.isScrolling?$cfs.trigger(cf_e("play",conf),e):$cfs.trigger(cf_e(e,conf),opts.auto)},dur2),opts.auto.onTimeoutStart&&opts.auto.onTimeoutStart.call($tt0,perc,dur2),!0}),$cfs.bind(cf_e("resume",conf),function(t){return t.stopPropagation(),scrl.isStopped?(scrl.isStopped=!1,crsl.isPaused=!1,crsl.isScrolling=!0,scrl.startTime=getTime(),sc_startScroll(scrl,conf)):$cfs.trigger(cf_e("play",conf)),!0}),$cfs.bind(cf_e("prev",conf)+" "+cf_e("next",conf),function(t,e,i,n,r){if(t.stopPropagation(),crsl.isStopped||$cfs.is(":hidden"))return t.stopImmediatePropagation(),debug(conf,"Carousel stopped or hidden: Not scrolling.");var o=is_number(opts.items.minimum)?opts.items.minimum:opts.items.visible+1;if(o>itms.total)return t.stopImmediatePropagation(),debug(conf,"Not enough items ("+itms.total+" total, "+o+" needed): Not scrolling.");e=(l=cf_sortParams([e,i,n,r],["object","number/string","function","boolean"]))[0],i=l[1],n=l[2],r=l[3];var a=t.type.slice(conf.events.prefix.length);if(is_object(e)||(e={}),is_function(n)&&(e.onAfter=n),is_boolean(r)&&(e.queue=r),(e=$.extend(!0,{},opts[a],e)).conditions&&!e.conditions.call($tt0,a))return t.stopImmediatePropagation(),debug(conf,'Callback "conditions" returned false.');if(!is_number(i)){if("*"!=opts.items.filter)i="visible";else for(var s=[i,e.items,opts[a].items],l=0,u=s.length;l<u;l++)if(is_number(s[l])||"page"==s[l]||"visible"==s[l]){i=s[l];break}switch(i){case"page":return t.stopImmediatePropagation(),$cfs.triggerHandler(cf_e(a+"Page",conf),[e,n]);case"visible":opts.items.visibleConf.variable||"*"!=opts.items.filter||(i=opts.items.visible)}}if(scrl.isStopped)return $cfs.trigger(cf_e("resume",conf)),$cfs.trigger(cf_e("queue",conf),[a,[e,i,n]]),t.stopImmediatePropagation(),debug(conf,"Carousel resumed scrolling.");if(0<e.duration&&crsl.isScrolling)return e.queue&&("last"==e.queue&&(queu=[]),"first"==e.queue&&0!=queu.length||$cfs.trigger(cf_e("queue",conf),[a,[e,i,n]])),t.stopImmediatePropagation(),debug(conf,"Carousel currently scrolling.");if(tmrs.timePassed=0,$cfs.trigger(cf_e("slide_"+a,conf),[e,i]),opts.synchronise){var c=opts.synchronise,h=[e,i],p=0;for(u=c.length;p<u;p++){var d=a;c[p][2]||(d="prev"==d?"next":"prev"),c[p][1]||(h[0]=c[p][0].triggerHandler("_cfs_triggerEvent",["configuration",d])),h[1]=i+c[p][3],c[p][0].trigger("_cfs_triggerEvent",["slide_"+d,h])}}return!0}),$cfs.bind(cf_e("slide_prev",conf),function(t,e,i){t.stopPropagation();var n=$cfs.children();if(!opts.circular&&0==itms.first)return opts.infinite&&$cfs.trigger(cf_e("next",conf),itms.total-1),t.stopImmediatePropagation();if(sz_resetMargin(n,opts),!is_number(i)){if(opts.items.visibleConf.variable)i=gn_getVisibleItemsPrev(n,opts,itms.total-1);else if("*"!=opts.items.filter){var r=is_number(e.items)?e.items:gn_getVisibleOrg($cfs,opts);i=gn_getScrollItemsPrevFilter(n,opts,itms.total-1,r)}else i=opts.items.visible;i=cf_getAdjust(i,opts,e.items,$tt0)}if(opts.circular||itms.total-i<itms.first&&(i=itms.total-itms.first),opts.items.visibleConf.old=opts.items.visible,opts.items.visibleConf.variable){var o=cf_getItemsAdjust(gn_getVisibleItemsNext(n,opts,itms.total-i),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible+i<=o&&i<itms.total&&(i++,o=cf_getItemsAdjust(gn_getVisibleItemsNext(n,opts,itms.total-i),opts,opts.items.visibleConf.adjust,$tt0)),opts.items.visible=o}else if("*"!=opts.items.filter){o=gn_getVisibleItemsNextFilter(n,opts,itms.total-i);opts.items.visible=cf_getItemsAdjust(o,opts,opts.items.visibleConf.adjust,$tt0)}if(sz_resetMargin(n,opts,!0),0==i)return t.stopImmediatePropagation(),debug(conf,"0 items to scroll: Not scrolling.");for(debug(conf,"Scrolling "+i+" items backward."),itms.first+=i;itms.first>=itms.total;)itms.first-=itms.total;opts.circular||(0==itms.first&&e.onEnd&&e.onEnd.call($tt0,"prev"),opts.infinite||nv_enableNavi(opts,itms.first,conf)),$cfs.children().slice(itms.total-i,itms.total).prependTo($cfs),itms.total<opts.items.visible+i&&$cfs.children().slice(0,opts.items.visible+i-itms.total).clone(!0).appendTo($cfs);var a=gi_getOldItemsPrev(n=$cfs.children(),opts,i),s=gi_getNewItemsPrev(n,opts),l=n.eq(i-1),u=a.last(),c=s.last();sz_resetMargin(n,opts);var h=0,p=0;if(opts.align){var d=cf_getAlignPadding(s,opts);h=d[0],p=d[1]}var f=h<0?opts.padding[opts.d[3]]:0,m=!1,g=$();if(opts.items.visible<i&&(g=n.slice(opts.items.visibleConf.old,i),"directscroll"==e.fx)){var v=opts.items[opts.d.width];l=c,sc_hideHiddenItems(m=g),opts.items[opts.d.width]="variable"}var y=!1,_=ms_getTotalSize(n.slice(0,i),opts,"width"),b=cf_mapWrapperSizes(ms_getSizes(s,opts,!0),opts,!opts.usePadding),x=0,w={},S={},T={},C={},E={},k={},A={},I=sc_getDuration(e,opts,i,_);switch(e.fx){case"cover":case"cover-fade":x=ms_getTotalSize(n.slice(0,opts.items.visible),opts,"width")}m&&(opts.items[opts.d.width]=v),sz_resetMargin(n,opts,!0),0<=p&&sz_resetMargin(u,opts,opts.padding[opts.d[1]]),0<=h&&sz_resetMargin(l,opts,opts.padding[opts.d[3]]),opts.align&&(opts.padding[opts.d[1]]=p,opts.padding[opts.d[3]]=h),k[opts.d.left]=-(_-f),A[opts.d.left]=-(x-f),S[opts.d.left]=b[opts.d.width];var P,z,M,D=function(){},L=function(){},O=function(){},R=function(){},F=function(){},B=function(){},N=function(){},j=function(){};switch(e.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":y=$cfs.clone(!0).appendTo($wrp)}switch(e.fx){case"crossfade":case"uncover":case"uncover-fade":y.children().slice(0,i).remove(),y.children().slice(opts.items.visibleConf.old).remove();break;case"cover":case"cover-fade":y.children().slice(opts.items.visible).remove(),y.css(A)}if($cfs.css(k),scrl=sc_setScroll(I,e.easing,conf),w[opts.d.left]=opts.usePadding?opts.padding[opts.d[3]]:0,"variable"!=opts[opts.d.width]&&"variable"!=opts[opts.d.height]||(D=function(){$wrp.css(b)},L=function(){scrl.anims.push([$wrp,b])}),opts.usePadding){switch(c.not(l).length&&(T[opts.d.marginRight]=l.data("_cfs_origCssMargin"),h<0?l.css(T):(N=function(){l.css(T)},j=function(){scrl.anims.push([l,T])})),e.fx){case"cover":case"cover-fade":y.children().eq(i-1).css(T)}c.not(u).length&&(C[opts.d.marginRight]=u.data("_cfs_origCssMargin"),O=function(){u.css(C)},R=function(){scrl.anims.push([u,C])}),0<=p&&(E[opts.d.marginRight]=c.data("_cfs_origCssMargin")+opts.padding[opts.d[1]],F=function(){c.css(E)},B=function(){scrl.anims.push([c,E])})}M=function(){$cfs.css(w)};var U=opts.items.visible+i-itms.total;z=function(){if(0<U&&($cfs.children().slice(itms.total).remove(),a=$($cfs.children().slice(itms.total-(opts.items.visible-U)).get().concat($cfs.children().slice(0,U).get()))),sc_showHiddenItems(m),opts.usePadding){var t=$cfs.children().eq(opts.items.visible+i-1);t.css(opts.d.marginRight,t.data("_cfs_origCssMargin"))}};var V=sc_mapCallbackArguments(a,g,s,i,"prev",I,b);switch(P=function(){sc_afterScroll($cfs,y,e),crsl.isScrolling=!1,clbk.onAfter=sc_fireCallbacks($tt0,e,"onAfter",V,clbk),queu=sc_fireQueue($cfs,queu,conf),crsl.isPaused||$cfs.trigger(cf_e("play",conf))},crsl.isScrolling=!0,tmrs=sc_clearTimers(tmrs),clbk.onBefore=sc_fireCallbacks($tt0,e,"onBefore",V,clbk),e.fx){case"none":$cfs.css(w),D(),O(),F(),N(),M(),z(),P();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){D(),O(),F(),N(),M(),z(),(scrl=sc_setScroll(I,e.easing,conf)).anims.push([$cfs,{opacity:1},P]),sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0}),scrl.anims.push([y,{opacity:0}]),scrl.anims.push([$cfs,{opacity:1},P]),L(),O(),F(),N(),M(),z();break;case"cover":scrl.anims.push([y,w,function(){O(),F(),N(),M(),z(),P()}]),L();break;case"cover-fade":scrl.anims.push([$cfs,{opacity:0}]),scrl.anims.push([y,w,function(){O(),F(),N(),M(),z(),P()}]),L();break;case"uncover":scrl.anims.push([y,S,P]),L(),O(),F(),N(),M(),z();break;case"uncover-fade":$cfs.css({opacity:0}),scrl.anims.push([$cfs,{opacity:1}]),scrl.anims.push([y,S,P]),L(),O(),F(),N(),M(),z();break;default:scrl.anims.push([$cfs,w,function(){z(),P()}]),L(),R(),B(),j()}return sc_startScroll(scrl,conf),cf_setCookie(opts.cookie,$cfs,conf),$cfs.trigger(cf_e("updatePageStatus",conf),[!1,b]),!0}),$cfs.bind(cf_e("slide_next",conf),function(t,e,i){t.stopPropagation();var n=$cfs.children();if(!opts.circular&&itms.first==opts.items.visible)return opts.infinite&&$cfs.trigger(cf_e("prev",conf),itms.total-1),t.stopImmediatePropagation();if(sz_resetMargin(n,opts),!is_number(i)){if("*"!=opts.items.filter){var r=is_number(e.items)?e.items:gn_getVisibleOrg($cfs,opts);i=gn_getScrollItemsNextFilter(n,opts,0,r)}else i=opts.items.visible;i=cf_getAdjust(i,opts,e.items,$tt0)}var o=0==itms.first?itms.total:itms.first;if(!opts.circular){if(opts.items.visibleConf.variable){var a=gn_getVisibleItemsNext(n,opts,i);r=gn_getVisibleItemsPrev(n,opts,o-1)}else a=opts.items.visible,r=opts.items.visible;o<i+a&&(i=o-r)}if(opts.items.visibleConf.old=opts.items.visible,opts.items.visibleConf.variable){for(a=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(n,opts,i,o),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible-i>=a&&i<itms.total;)a=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(n,opts,++i,o),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible=a}else if("*"!=opts.items.filter){a=gn_getVisibleItemsNextFilter(n,opts,i);opts.items.visible=cf_getItemsAdjust(a,opts,opts.items.visibleConf.adjust,$tt0)}if(sz_resetMargin(n,opts,!0),0==i)return t.stopImmediatePropagation(),debug(conf,"0 items to scroll: Not scrolling.");for(debug(conf,"Scrolling "+i+" items forward."),itms.first-=i;itms.first<0;)itms.first+=itms.total;opts.circular||(itms.first==opts.items.visible&&e.onEnd&&e.onEnd.call($tt0,"next"),opts.infinite||nv_enableNavi(opts,itms.first,conf)),itms.total<opts.items.visible+i&&$cfs.children().slice(0,opts.items.visible+i-itms.total).clone(!0).appendTo($cfs);var s=gi_getOldItemsNext(n=$cfs.children(),opts),l=gi_getNewItemsNext(n,opts,i),u=n.eq(i-1),c=s.last(),h=l.last();sz_resetMargin(n,opts);var p=0,d=0;if(opts.align){var f=cf_getAlignPadding(l,opts);p=f[0],d=f[1]}var m=!1,g=$();if(opts.items.visibleConf.old<i&&(g=n.slice(opts.items.visibleConf.old,i),"directscroll"==e.fx)){var v=opts.items[opts.d.width];u=c,sc_hideHiddenItems(m=g),opts.items[opts.d.width]="variable"}var y=!1,_=ms_getTotalSize(n.slice(0,i),opts,"width"),b=cf_mapWrapperSizes(ms_getSizes(l,opts,!0),opts,!opts.usePadding),x=0,w={},S={},T={},C={},E={},k=sc_getDuration(e,opts,i,_);switch(e.fx){case"uncover":case"uncover-fade":x=ms_getTotalSize(n.slice(0,opts.items.visibleConf.old),opts,"width")}m&&(opts.items[opts.d.width]=v),opts.align&&opts.padding[opts.d[1]]<0&&(opts.padding[opts.d[1]]=0),sz_resetMargin(n,opts,!0),sz_resetMargin(c,opts,opts.padding[opts.d[1]]),opts.align&&(opts.padding[opts.d[1]]=d,opts.padding[opts.d[3]]=p),E[opts.d.left]=opts.usePadding?opts.padding[opts.d[3]]:0;var A,I,P,z=function(){},M=function(){},D=function(){},L=function(){},O=function(){},R=function(){};switch(e.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":(y=$cfs.clone(!0).appendTo($wrp)).children().slice(opts.items.visibleConf.old).remove()}switch(e.fx){case"crossfade":case"cover":case"cover-fade":$cfs.css("zIndex",1),y.css("zIndex",0)}if(scrl=sc_setScroll(k,e.easing,conf),w[opts.d.left]=-_,S[opts.d.left]=-x,p<0&&(w[opts.d.left]+=p),"variable"!=opts[opts.d.width]&&"variable"!=opts[opts.d.height]||(z=function(){$wrp.css(b)},M=function(){scrl.anims.push([$wrp,b])}),opts.usePadding){var F=h.data("_cfs_origCssMargin");0<=d&&(F+=opts.padding[opts.d[1]]),h.css(opts.d.marginRight,F),u.not(c).length&&(C[opts.d.marginRight]=c.data("_cfs_origCssMargin")),D=function(){c.css(C)},L=function(){scrl.anims.push([c,C])};var B=u.data("_cfs_origCssMargin");0<p&&(B+=opts.padding[opts.d[3]]),T[opts.d.marginRight]=B,O=function(){u.css(T)},R=function(){scrl.anims.push([u,T])}}P=function(){$cfs.css(E)};var N=opts.items.visible+i-itms.total;I=function(){0<N&&$cfs.children().slice(itms.total).remove();var t=$cfs.children().slice(0,i).appendTo($cfs).last();if(0<N&&(l=gi_getCurrentItems(n,opts)),sc_showHiddenItems(m),opts.usePadding){if(itms.total<opts.items.visible+i){var e=$cfs.children().eq(opts.items.visible-1);e.css(opts.d.marginRight,e.data("_cfs_origCssMargin")+opts.padding[opts.d[1]])}t.css(opts.d.marginRight,t.data("_cfs_origCssMargin"))}};var j=sc_mapCallbackArguments(s,g,l,i,"next",k,b);switch(A=function(){$cfs.css("zIndex",$cfs.data("_cfs_origCssZindex")),sc_afterScroll($cfs,y,e),crsl.isScrolling=!1,clbk.onAfter=sc_fireCallbacks($tt0,e,"onAfter",j,clbk),queu=sc_fireQueue($cfs,queu,conf),crsl.isPaused||$cfs.trigger(cf_e("play",conf))},crsl.isScrolling=!0,tmrs=sc_clearTimers(tmrs),clbk.onBefore=sc_fireCallbacks($tt0,e,"onBefore",j,clbk),e.fx){case"none":$cfs.css(w),z(),D(),O(),P(),I(),A();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){z(),D(),O(),P(),I(),(scrl=sc_setScroll(k,e.easing,conf)).anims.push([$cfs,{opacity:1},A]),sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0}),scrl.anims.push([y,{opacity:0}]),scrl.anims.push([$cfs,{opacity:1},A]),M(),D(),O(),P(),I();break;case"cover":$cfs.css(opts.d.left,$wrp[opts.d.width]()),scrl.anims.push([$cfs,E,A]),M(),D(),O(),I();break;case"cover-fade":$cfs.css(opts.d.left,$wrp[opts.d.width]()),scrl.anims.push([y,{opacity:0}]),scrl.anims.push([$cfs,E,A]),M(),D(),O(),I();break;case"uncover":scrl.anims.push([y,S,A]),M(),D(),O(),P(),I();break;case"uncover-fade":$cfs.css({opacity:0}),scrl.anims.push([$cfs,{opacity:1}]),scrl.anims.push([y,S,A]),M(),D(),O(),P(),I();break;default:scrl.anims.push([$cfs,w,function(){P(),I(),A()}]),M(),L(),R()}return sc_startScroll(scrl,conf),cf_setCookie(opts.cookie,$cfs,conf),$cfs.trigger(cf_e("updatePageStatus",conf),[!1,b]),!0}),$cfs.bind(cf_e("slideTo",conf),function(t,e,i,n,r,o,a){t.stopPropagation();var s=cf_sortParams([e,i,n,r,o,a],["string/number/object","number","boolean","object","string","function"]);return r=s[3],o=s[4],a=s[5],0!=(e=gn_getItemIndex(s[0],s[1],s[2],itms,$cfs))&&(is_object(r)||(r=!1),"prev"!=o&&"next"!=o&&(o=opts.circular?e<=itms.total/2?"next":"prev":0==itms.first||itms.first>e?"next":"prev"),"prev"==o&&(e=itms.total-e),$cfs.trigger(cf_e(o,conf),[r,e,a]),!0)}),$cfs.bind(cf_e("prevPage",conf),function(t,e,i){t.stopPropagation();var n=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[n-1,e,"prev",i])}),$cfs.bind(cf_e("nextPage",conf),function(t,e,i){t.stopPropagation();var n=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[n+1,e,"next",i])}),$cfs.bind(cf_e("slideToPage",conf),function(t,e,i,n,r){t.stopPropagation(),is_number(e)||(e=$cfs.triggerHandler(cf_e("currentPage",conf)));var o=opts.pagination.items||opts.items.visible,a=Math.ceil(itms.total/o)-1;return e<0&&(e=a),a<e&&(e=0),$cfs.triggerHandler(cf_e("slideTo",conf),[e*o,0,!0,i,n,r])}),$cfs.bind(cf_e("jumpToStart",conf),function(t,e){if(t.stopPropagation(),e=e?gn_getItemIndex(e,0,!0,itms,$cfs):0,0!=(e+=itms.first)){if(0<itms.total)for(;e>itms.total;)e-=itms.total;$cfs.prepend($cfs.children().slice(e,itms.total))}return!0}),$cfs.bind(cf_e("synchronise",conf),function(t,e){if(t.stopPropagation(),e)e=cf_getSynchArr(e);else{if(!opts.synchronise)return debug(conf,"No carousel to synchronise.");e=opts.synchronise}for(var i=$cfs.triggerHandler(cf_e("currentPosition",conf)),n=!0,r=0,o=e.length;r<o;r++)e[r][0].triggerHandler(cf_e("slideTo",conf),[i,e[r][3],!0])||(n=!1);return n}),$cfs.bind(cf_e("queue",conf),function(t,e,i){return t.stopPropagation(),is_function(e)?e.call($tt0,queu):is_array(e)?queu=e:is_undefined(e)||queu.push([e,i]),queu}),$cfs.bind(cf_e("insertItem",conf),function(t,e,i,n,r){t.stopPropagation();var o=cf_sortParams([e,i,n,r],["string/object","string/number/object","boolean","number"]);if(e=o[0],i=o[1],n=o[2],r=o[3],is_object(e)&&!is_jquery(e)?e=$(e):is_string(e)&&(e=$(e)),!is_jquery(e)||0==e.length)return debug(conf,"Not a valid object.");is_undefined(i)&&(i="end"),sz_storeMargin(e,opts),sz_storeOrigCss(e);var a=i,s="before";"end"==i?n?(0==itms.first?(i=itms.total-1,s="after"):(i=itms.first,itms.first+=e.length),i<0&&(i=0)):(i=itms.total-1,s="after"):i=gn_getItemIndex(i,r,n,itms,$cfs);var l=$cfs.children().eq(i);return l.length?l[s](e):(debug(conf,"Correct insert-position not found! Appending item to the end."),$cfs.append(e)),"end"==a||n||i<itms.first&&(itms.first+=e.length),itms.total=$cfs.children().length,itms.first>=itms.total&&(itms.first-=itms.total),$cfs.trigger(cf_e("updateSizes",conf)),$cfs.trigger(cf_e("linkAnchors",conf)),!0}),$cfs.bind(cf_e("removeItem",conf),function(t,e,n,r){t.stopPropagation();var i=cf_sortParams([e,n,r],["string/number/object","boolean","number"]);e=i[0],n=i[1],r=i[2];if(e instanceof $&&1<e.length)return o=$(),e.each(function(t,e){var i=$cfs.trigger(cf_e("removeItem",conf),[$(this),n,r]);i&&(o=o.add(i))}),o;if(is_undefined(e)||"end"==e)o=$cfs.children().last();else{e=gn_getItemIndex(e,r,n,itms,$cfs);var o=$cfs.children().eq(e);o.length&&e<itms.first&&(itms.first-=o.length)}return o&&o.length&&(o.detach(),itms.total=$cfs.children().length,$cfs.trigger(cf_e("updateSizes",conf))),o}),$cfs.bind(cf_e("onBefore",conf)+" "+cf_e("onAfter",conf),function(t,e){t.stopPropagation();var i=t.type.slice(conf.events.prefix.length);return is_array(e)&&(clbk[i]=e),is_function(e)&&clbk[i].push(e),clbk[i]}),$cfs.bind(cf_e("currentPosition",conf),function(t,e){if(t.stopPropagation(),0==itms.first)var i=0;else i=itms.total-itms.first;return is_function(e)&&e.call($tt0,i),i}),$cfs.bind(cf_e("currentPage",conf),function(t,e){t.stopPropagation();var i,n=opts.pagination.items||opts.items.visible,r=Math.ceil(itms.total/n-1);return(i=0==itms.first?0:itms.first<itms.total%n?0:itms.first!=n||opts.circular?Math.round((itms.total-itms.first)/n):r)<0&&(i=0),r<i&&(i=r),is_function(e)&&e.call($tt0,i),i}),$cfs.bind(cf_e("currentVisible",conf),function(t,e){t.stopPropagation();var i=gi_getCurrentItems($cfs.children(),opts);return is_function(e)&&e.call($tt0,i),i}),$cfs.bind(cf_e("slice",conf),function(t,e,i,n){if(t.stopPropagation(),0==itms.total)return!1;var r=cf_sortParams([e,i,n],["number","number","function"]);if(e=is_number(r[0])?r[0]:0,i=is_number(r[1])?r[1]:itms.total,n=r[2],e+=itms.first,i+=itms.first,0<items.total){for(;e>itms.total;)e-=itms.total;for(;i>itms.total;)i-=itms.total;for(;e<0;)e+=itms.total;for(;i<0;)i+=itms.total}var o,a=$cfs.children();return o=e<i?a.slice(e,i):$(a.slice(e,itms.total).get().concat(a.slice(0,i).get())),is_function(n)&&n.call($tt0,o),o}),$cfs.bind(cf_e("isPaused",conf)+" "+cf_e("isStopped",conf)+" "+cf_e("isScrolling",conf),function(t,e){t.stopPropagation();var i=t.type.slice(conf.events.prefix.length),n=crsl[i];return is_function(e)&&e.call($tt0,n),n}),$cfs.bind(cf_e("configuration",conf),function(e,a,b,c){e.stopPropagation();var reInit=!1;if(is_function(a))a.call($tt0,opts);else if(is_object(a))opts_orig=$.extend(!0,{},opts_orig,a),!1!==b?reInit=!0:opts=$.extend(!0,{},opts,a);else if(!is_undefined(a))if(is_function(b)){var val=eval("opts."+a);is_undefined(val)&&(val=""),b.call($tt0,val)}else{if(is_undefined(b))return eval("opts."+a);"boolean"!=typeof c&&(c=!0),eval("opts_orig."+a+" = b"),!1!==c?reInit=!0:eval("opts."+a+" = b")}if(reInit){sz_resetMargin($cfs.children(),opts),FN._init(opts_orig),FN._bind_buttons();var sz=sz_setSizes($cfs,opts);$cfs.trigger(cf_e("updatePageStatus",conf),[!0,sz])}return opts}),$cfs.bind(cf_e("linkAnchors",conf),function(t,e,i){return t.stopPropagation(),is_undefined(e)?e=$("body"):is_string(e)&&(e=$(e)),is_jquery(e)&&0!=e.length?(is_string(i)||(i="a.caroufredsel"),e.find(i).each(function(){var e=this.hash||"";0<e.length&&-1!=$cfs.children().index($(e))&&$(this).unbind("click").click(function(t){t.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),e)})}),!0):debug(conf,"Not a valid object.")}),$cfs.bind(cf_e("updatePageStatus",conf),function(t,e,i){if(t.stopPropagation(),opts.pagination.container){var n=opts.pagination.items||opts.items.visible,r=Math.ceil(itms.total/n);e&&(opts.pagination.anchorBuilder&&(opts.pagination.container.children().remove(),opts.pagination.container.each(function(){for(var t=0;t<r;t++){var e=$cfs.children().eq(gn_getItemIndex(t*n,0,!0,itms,$cfs));$(this).append(opts.pagination.anchorBuilder.call(e[0],t+1))}})),opts.pagination.container.each(function(){$(this).children().unbind(opts.pagination.event).each(function(e){$(this).bind(opts.pagination.event,function(t){t.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),[e*n,-opts.pagination.deviation,!0,opts.pagination])})})}));var o=$cfs.triggerHandler(cf_e("currentPage",conf))+opts.pagination.deviation;return r<=o&&(o=0),o<0&&(o=r-1),opts.pagination.container.each(function(){$(this).children().removeClass(cf_c("selected",conf)).eq(o).addClass(cf_c("selected",conf))}),!0}}),$cfs.bind(cf_e("updateSizes",conf),function(t){var e=opts.items.visible,i=$cfs.children(),n=ms_getParentSize($wrp,opts,"width");if(itms.total=i.length,crsl.primarySizePercentage?(opts.maxDimension=n,opts[opts.d.width]=ms_getPercentage(n,crsl.primarySizePercentage)):opts.maxDimension=ms_getMaxDimension(opts,n),opts.responsive?(opts.items.width=opts.items.sizesConf.width,opts.items.height=opts.items.sizesConf.height,e=(opts=in_getResponsiveValues(opts,i,n)).items.visible,sz_setResponsiveSizes(opts,i)):opts.items.visibleConf.variable?e=gn_getVisibleItemsNext(i,opts,0):"*"!=opts.items.filter&&(e=gn_getVisibleItemsNextFilter(i,opts,0)),!opts.circular&&0!=itms.first&&e>itms.first){if(opts.items.visibleConf.variable)var r=gn_getVisibleItemsPrev(i,opts,itms.first)-itms.first;else if("*"!=opts.items.filter)r=gn_getVisibleItemsPrevFilter(i,opts,itms.first)-itms.first;else r=opts.items.visible-itms.first;debug(conf,"Preventing non-circular: sliding "+r+" items backward."),$cfs.trigger(cf_e("prev",conf),r)}opts.items.visible=cf_getItemsAdjust(e,opts,opts.items.visibleConf.adjust,$tt0),opts.items.visibleConf.old=opts.items.visible,opts=in_getAlignPadding(opts,i);var o=sz_setSizes($cfs,opts);return $cfs.trigger(cf_e("updatePageStatus",conf),[!0,o]),nv_showNavi(opts,itms.total,conf),nv_enableNavi(opts,itms.first,conf),o}),$cfs.bind(cf_e("destroy",conf),function(t,e){return t.stopPropagation(),tmrs=sc_clearTimers(tmrs),$cfs.data("_cfs_isCarousel",!1),$cfs.trigger(cf_e("finish",conf)),e&&$cfs.trigger(cf_e("jumpToStart",conf)),sz_restoreOrigCss($cfs.children()),sz_restoreOrigCss($cfs),FN._unbind_events(),FN._unbind_buttons(),"parent"==conf.wrapper?sz_restoreOrigCss($wrp):$wrp.replaceWith($cfs),!0}),$cfs.bind(cf_e("debug",conf),function(t){return debug(conf,"Carousel width: "+opts.width),debug(conf,"Carousel height: "+opts.height),debug(conf,"Item widths: "+opts.items.width),debug(conf,"Item heights: "+opts.items.height),debug(conf,"Number of items visible: "+opts.items.visible),opts.auto.play&&debug(conf,"Number of items scrolled automatically: "+opts.auto.items),opts.prev.button&&debug(conf,"Number of items scrolled backward: "+opts.prev.items),opts.next.button&&debug(conf,"Number of items scrolled forward: "+opts.next.items),conf.debug}),$cfs.bind("_cfs_triggerEvent",function(t,e,i){return t.stopPropagation(),$cfs.triggerHandler(cf_e(e,conf),i)})},_unbind_events:function(){$cfs.unbind(cf_e("",conf)),$cfs.unbind(cf_e("",conf,!1)),$cfs.unbind("_cfs_triggerEvent")},_bind_buttons:function(){if(FN._unbind_buttons(),nv_showNavi(opts,itms.total,conf),nv_enableNavi(opts,itms.first,conf),opts.auto.pauseOnHover){var t=bt_pauseOnHoverConfig(opts.auto.pauseOnHover);$wrp.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),t)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.auto.button&&opts.auto.button.bind(cf_e(opts.auto.event,conf,!1),function(t){t.preventDefault();var e=!1,i=null;crsl.isPaused?e="play":opts.auto.pauseOnEvent&&(e="pause",i=bt_pauseOnHoverConfig(opts.auto.pauseOnEvent)),e&&$cfs.trigger(cf_e(e,conf),i)}),opts.prev.button&&(opts.prev.button.bind(cf_e(opts.prev.event,conf,!1),function(t){t.preventDefault(),$cfs.trigger(cf_e("prev",conf))}),opts.prev.pauseOnHover)){t=bt_pauseOnHoverConfig(opts.prev.pauseOnHover);opts.prev.button.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),t)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.next.button&&(opts.next.button.bind(cf_e(opts.next.event,conf,!1),function(t){t.preventDefault(),$cfs.trigger(cf_e("next",conf))}),opts.next.pauseOnHover)){t=bt_pauseOnHoverConfig(opts.next.pauseOnHover);opts.next.button.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),t)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.pagination.container&&opts.pagination.pauseOnHover){t=bt_pauseOnHoverConfig(opts.pagination.pauseOnHover);opts.pagination.container.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),t)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if((opts.prev.key||opts.next.key)&&$(document).bind(cf_e("keyup",conf,!1,!0,!0),function(t){var e=t.keyCode;e==opts.next.key&&(t.preventDefault(),$cfs.trigger(cf_e("next",conf))),e==opts.prev.key&&(t.preventDefault(),$cfs.trigger(cf_e("prev",conf)))}),opts.pagination.keys&&$(document).bind(cf_e("keyup",conf,!1,!0,!0),function(t){var e=t.keyCode;49<=e&&e<58&&(e=(e-49)*opts.items.visible)<=itms.total&&(t.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),[e,0,!0,opts.pagination]))}),$.fn.swipe){var e="ontouchstart"in window;if(e&&opts.swipe.onTouch||!e&&opts.swipe.onMouse){var i=$.extend(!0,{},opts.prev,opts.swipe),n=$.extend(!0,{},opts.next,opts.swipe),r=function(){$cfs.trigger(cf_e("prev",conf),[i])},o=function(){$cfs.trigger(cf_e("next",conf),[n])};switch(opts.direction){case"up":case"down":opts.swipe.options.swipeUp=o,opts.swipe.options.swipeDown=r;break;default:opts.swipe.options.swipeLeft=o,opts.swipe.options.swipeRight=r}crsl.swipe&&$cfs.swipe("destroy"),$wrp.swipe(opts.swipe.options),$wrp.css("cursor","move"),crsl.swipe=!0}}if($.fn.mousewheel&&opts.mousewheel){var a=$.extend(!0,{},opts.prev,opts.mousewheel),s=$.extend(!0,{},opts.next,opts.mousewheel);crsl.mousewheel&&$wrp.unbind(cf_e("mousewheel",conf,!1)),$wrp.bind(cf_e("mousewheel",conf,!1),function(t,e){t.preventDefault(),0<e?$cfs.trigger(cf_e("prev",conf),[a]):$cfs.trigger(cf_e("next",conf),[s])}),crsl.mousewheel=!0}if(opts.auto.play&&$cfs.trigger(cf_e("play",conf),opts.auto.delay),crsl.upDateOnWindowResize){var l=function(t){$cfs.trigger(cf_e("finish",conf)),opts.auto.pauseOnResize&&!crsl.isPaused&&$cfs.trigger(cf_e("play",conf)),sz_resetMargin($cfs.children(),opts),$cfs.trigger(cf_e("updateSizes",conf))},u=$(window),c=null;if($.debounce&&"debounce"==conf.onWindowResize)c=$.debounce(200,l);else if($.throttle&&"throttle"==conf.onWindowResize)c=$.throttle(300,l);else{var h=0,p=0;c=function(){var t=u.width(),e=u.height();t==h&&e==p||(l(),h=t,p=e)}}u.bind(cf_e("resize",conf,!1,!0,!0),c)}},_unbind_buttons:function(){cf_e("",conf);var t=cf_e("",conf,!1);ns3=cf_e("",conf,!1,!0,!0),$(document).unbind(ns3),$(window).unbind(ns3),$wrp.unbind(t),opts.auto.button&&opts.auto.button.unbind(t),opts.prev.button&&opts.prev.button.unbind(t),opts.next.button&&opts.next.button.unbind(t),opts.pagination.container&&(opts.pagination.container.unbind(t),opts.pagination.anchorBuilder&&opts.pagination.container.children().remove()),crsl.swipe&&($cfs.swipe("destroy"),$wrp.css("cursor","default"),crsl.swipe=!1),crsl.mousewheel&&(crsl.mousewheel=!1),nv_showNavi(opts,"hide",conf),nv_enableNavi(opts,"removeClass",conf)}};is_boolean(configs)&&(configs={debug:configs});var crsl={direction:"next",isPaused:!0,isScrolling:!1,isStopped:!1,mousewheel:!1,swipe:!1},itms={total:$cfs.children().length,first:0},tmrs={auto:null,progress:null,startTime:getTime(),timePassed:0},scrl={isStopped:!1,duration:0,startTime:0,easing:"",anims:[]},clbk={onBefore:[],onAfter:[]},queu=[],conf=$.extend(!0,{},$.fn.carouFredSel.configs,configs),opts={},opts_orig=$.extend(!0,{},options),$wrp="parent"==conf.wrapper?$cfs.parent():$cfs.wrap("<"+conf.wrapper.element+' class="'+conf.wrapper.classname+'" />').parent();if(conf.selector=$cfs.selector,conf.serialNumber=$.fn.carouFredSel.serialNumber++,conf.transition=conf.transition&&$.fn.transition?"transition":"animate",FN._init(opts_orig,!0,starting_position),FN._build(),FN._bind_events(),FN._bind_buttons(),is_array(opts.items.start))var start_arr=opts.items.start;else{var start_arr=[];0!=opts.items.start&&start_arr.push(opts.items.start)}if(opts.cookie&&start_arr.unshift(parseInt(cf_getCookie(opts.cookie),10)),0<start_arr.length)for(var a=0,l=start_arr.length;a<l;a++){var s=start_arr[a];if(0!=s){if(!0===s){if(s=window.location.hash,s.length<1)continue}else"random"===s&&(s=Math.floor(Math.random()*itms.total));if($cfs.triggerHandler(cf_e("slideTo",conf),[s,0,!0,{fx:"none"}]))break}}var siz=sz_setSizes($cfs,opts),itm=gi_getCurrentItems($cfs.children(),opts);return opts.onCreate&&opts.onCreate.call($tt0,{width:siz.width,height:siz.height,items:itm}),$cfs.trigger(cf_e("updatePageStatus",conf),[!0,siz]),$cfs.trigger(cf_e("linkAnchors",conf)),conf.debug&&$cfs.trigger(cf_e("debug",conf)),$cfs},$.fn.carouFredSel.serialNumber=1,$.fn.carouFredSel.defaults={synchronise:!1,infinite:!0,circular:!0,responsive:!1,direction:"left",items:{start:0},scroll:{easing:"swing",duration:500,pauseOnHover:!1,event:"click",queue:!1}},$.fn.carouFredSel.configs={debug:!1,transition:!1,onWindowResize:"throttle",events:{prefix:"",namespace:"cfs"},wrapper:{element:"div",classname:"caroufredsel_wrapper"},classnames:{}},$.fn.carouFredSel.pageAnchorBuilder=function(t){return'<a href="#"><span>'+t+"</span></a>"},$.fn.carouFredSel.progressbarUpdater=function(t){$(this).css("width",t+"%")},$.fn.carouFredSel.cookie={get:function(t){t+="=";for(var e=document.cookie.split(";"),i=0,n=e.length;i<n;i++){for(var r=e[i];" "==r.charAt(0);)r=r.slice(1);if(0==r.indexOf(t))return r.slice(t.length)}return 0},set:function(t,e,i){var n="";if(i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3),n="; expires="+r.toGMTString()}document.cookie=t+"="+e+n+"; path=/"},remove:function(t){$.fn.carouFredSel.cookie.set(t,"",-1)}},$.extend($.easing,{quadratic:function(t){var e=t*t;return t*(-e*t+4*e-6*t+4)},cubic:function(t){return t*(4*t*t-9*t+6)},elastic:function(t){var e=t*t;return t*(33*e*e-106*e*t+126*e-67*t+15)}}))}(jQuery),function(A){function n(t,o){var a,s,n,r;function e(t){t=t.originalEvent;var e,i=U?t.touches[0]:t;if(T=B,U?C=t.touches.length:t.preventDefault(),x=null,w=b=0,U&&C!==o.fingers&&o.fingers!==F?c():(n=a=i.pageX,r=s=i.pageY,E=(new Date).getTime(),o.swipeStatus&&(e=h(t,T))),!1===e)return h(t,T=$),e;S.bind(v,l),S.bind(y,u)}function l(t){if(t=t.originalEvent,T!==j&&T!==$){var e,i=U?t.touches[0]:t;a=i.pageX,s=i.pageY,k=(new Date).getTime(),x=f(),U&&(C=t.touches.length),T=N;i=t;var n=x;if(o.allowPageScroll===D)i.preventDefault();else{var r=o.allowPageScroll===L;switch(n){case I:(o.swipeLeft&&r||!r&&o.allowPageScroll!=O)&&i.preventDefault();break;case P:(o.swipeRight&&r||!r&&o.allowPageScroll!=O)&&i.preventDefault();break;case z:(o.swipeUp&&r||!r&&o.allowPageScroll!=R)&&i.preventDefault();break;case M:(o.swipeDown&&r||!r&&o.allowPageScroll!=R)&&i.preventDefault()}}C!==o.fingers&&o.fingers!==F&&U?h(t,T=$):(b=d(),w=k-E,o.swipeStatus&&(e=h(t,T)),o.triggerOnTouchEnd||(i=!(!o.maxTimeThreshold||!(w>=o.maxTimeThreshold)),!0===p()?e=h(t,T=j):i&&h(t,T=$))),!1===e&&h(t,T=$)}}function u(t){if((t=t.originalEvent).preventDefault(),k=(new Date).getTime(),b=d(),x=f(),w=k-E,o.triggerOnTouchEnd||!1===o.triggerOnTouchEnd&&T===N)if(T=j,C!==o.fingers&&o.fingers!==F&&U||0===a)h(t,T=$);else{var e=!(!o.maxTimeThreshold||!(w>=o.maxTimeThreshold));!0!==p()&&null!==p()||e?(e||!1===p())&&h(t,T=$):h(t,T)}else T===N&&h(t,T=$);S.unbind(v,l,!1),S.unbind(y,u,!1)}function c(){E=k=s=a=r=n=C=0}function h(t,e){var i=void 0;if(o.swipeStatus&&(i=o.swipeStatus.call(S,t,e,x||null,b||0,w||0,C)),e!==$||!o.click||1!==C&&U||!isNaN(b)&&0!==b||(i=o.click.call(S,t,t.target)),e==j)switch(o.swipe&&(i=o.swipe.call(S,t,x,b,w,C)),x){case I:o.swipeLeft&&(i=o.swipeLeft.call(S,t,x,b,w,C));break;case P:o.swipeRight&&(i=o.swipeRight.call(S,t,x,b,w,C));break;case z:o.swipeUp&&(i=o.swipeUp.call(S,t,x,b,w,C));break;case M:o.swipeDown&&(i=o.swipeDown.call(S,t,x,b,w,C))}return(e===$||e===j)&&c(),i}function p(){return null!==o.threshold?b>=o.threshold:null}function d(){return Math.round(Math.sqrt(Math.pow(a-n,2)+Math.pow(s-r,2)))}function f(){var t;return t=Math.atan2(s-r,n-a),(t=Math.round(180*t/Math.PI))<0&&(t=360-Math.abs(t)),t<=45&&0<=t?I:t<=360&&315<=t?I:135<=t&&t<=225?P:45<t&&t<135?M:z}function i(){S.unbind(g,e),S.unbind(_,c),S.unbind(v,l),S.unbind(y,u)}var m=U||!o.fallbackToMouseEvents,g=m?"touchstart":"mousedown",v=m?"touchmove":"mousemove",y=m?"touchend":"mouseup",_="touchcancel",b=0,x=null,w=0,S=A(t),T="start",C=0,E=s=a=r=n=0,k=0;try{S.bind(g,e),S.bind(_,c)}catch(t){A.error("events not supported "+g+","+_+" on jQuery.swipe")}this.enable=function(){return S.bind(g,e),S.bind(_,c),S},this.disable=function(){return i(),S},this.destroy=function(){return i(),S.data(V,null),S}}var I="left",P="right",z="up",M="down",D="none",L="auto",O="horizontal",R="vertical",F="all",B="start",N="move",j="end",$="cancel",U="ontouchstart"in window,V="TouchSwipe";A.fn.swipe=function(t){var e=A(this),i=e.data(V);if(i&&"string"==typeof t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));A.error("Method "+t+" does not exist on jQuery.swipe")}else if(!(i||"object"!=typeof t&&t))return function(i){return!i||void 0!==i.allowPageScroll||void 0===i.swipe&&void 0===i.swipeStatus||(i.allowPageScroll=D),i||(i={}),i=A.extend({},A.fn.swipe.defaults,i),this.each(function(){var t=A(this),e=t.data(V);e||(e=new n(this,i),t.data(V,e))})}.apply(this,arguments);return e},A.fn.swipe.defaults={fingers:1,threshold:75,maxTimeThreshold:null,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:!0,allowPageScroll:"auto",fallbackToMouseEvents:!0},A.fn.swipe.phases={PHASE_START:B,PHASE_MOVE:N,PHASE_END:j,PHASE_CANCEL:$},A.fn.swipe.directions={LEFT:I,RIGHT:P,UP:z,DOWN:M},A.fn.swipe.pageScroll={NONE:D,HORIZONTAL:O,VERTICAL:R,AUTO:L},A.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:F}}(jQuery),function(a){function e(t){var e=t||window.event,i=[].slice.call(arguments,1),n=0,r=0,o=0;return(t=a.event.fix(e)).type="mousewheel",e.wheelDelta&&(n=e.wheelDelta/120),e.detail&&(n=-e.detail/3),o=n,void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS&&(o=0,r=-1*n),void 0!==e.wheelDeltaY&&(o=e.wheelDeltaY/120),void 0!==e.wheelDeltaX&&(r=-1*e.wheelDeltaX/120),i.unshift(t,n,r,o),(a.event.dispatch||a.event.handle).apply(this,i)}var i=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var t=i.length;t;)a.event.fixHooks[i[--t]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],e,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(f){var n=/\+/g;function m(t){return v.raw?t:encodeURIComponent(t)}function g(t,e){var i=v.raw?t:function(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(n," ")),v.json?JSON.parse(t):t}catch(t){}}(t);return f.isFunction(e)?e(i):i}var v=f.cookie=function(t,e,i){if(void 0!==e&&!f.isFunction(e)){if("number"==typeof(i=f.extend({},v.defaults,i)).expires){var n=i.expires,r=i.expires=new Date;r.setTime(+r+864e5*n)}return document.cookie=[m(t),"=",(o=e,m(v.json?JSON.stringify(o):String(o))),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var o,a,s=t?void 0:{},l=document.cookie?document.cookie.split("; "):[],u=0,c=l.length;u<c;u++){var h=l[u].split("="),p=(a=h.shift(),v.raw?a:decodeURIComponent(a)),d=h.join("=");if(t&&t===p){s=g(d,e);break}t||void 0===(d=g(d))||(s[p]=d)}return s};v.defaults={},f.removeCookie=function(t,e){return void 0!==f.cookie(t)&&(f.cookie(t,"",f.extend({},e,{expires:-1})),!f.cookie(t))}}),window.yepnope=function(l,u,t){var c,h=l.setTimeout,p=0,e={}.toString,d=!(!u.attachEvent||l.opera&&"[object Opera]"==e.call(l.opera));function f(){}function m(t){return Object(t)===t}function g(t){return"string"==typeof t}function v(){c&&c.parentNode||(c=u.getElementsByTagName("script")[0])}function a(t,e){var i,n,r;g(t)?i=t:m(t)&&(i=t._url||t.src,n=t.attrs,r=t.timeout),e=e||f,n=n||{};var o,a,s=u.createElement("script");for(a in r=r||y.errorTimeout,s.src=i,d&&(s.event="onclick",s.id=s.htmlFor=n.id||"yn_"+p++),n)s.setAttribute(a,n[a]);s.onreadystatechange=s.onload=function(){if(!o&&(!(t=s.readyState)||"loaded"==t||"complete"==t||"uninitialized"==t)){if(o=1,d)try{s.onclick()}catch(t){}e.call(l)}var t;s.onload=s.onreadystatechange=s.onerror=null},s.onerror=function(){o=1,e(new Error("Script Error: "+i))},h(function(){o||(o=1,e(new Error("Timeout: "+i)),s.parentNode.removeChild(s))},r),v(),c.parentNode.insertBefore(s,c)}function s(t,e){var i,n,r={};m(t)?(i=t._url||t.href,r=t.attrs||{}):g(t)&&(i=t);var o=u.createElement("link");for(n in e=e||f,o.href=i,o.rel="stylesheet",o.media="only x",o.type="text/css",h(function(){o.media=r.media||"all"}),r)o.setAttribute(n,r[n]);v(),c.parentNode.appendChild(o),h(function(){e.call(l)})}function y(t,e,i){var n;m(t)&&(t=(n=t).src||n.href),t=y.urlFormatter(t,e),n?n._url=t:n={_url:t};var r,o=(r=t.split("?")[0]).substr(r.lastIndexOf(".")+1);if("js"===o)a(n,i);else{if("css"!==o)throw new Error("Unable to determine filetype.");s(n,i)}}return y.errorTimeout=1e4,y.injectJs=a,y.injectCss=s,y.urlFormatter=function(t,e){var i=t,n=[],r=[];for(var o in e)e.hasOwnProperty(o)&&(e[o]?n.push(encodeURIComponent(o)):r.push(encodeURIComponent(o)));return(n.length||r.length)&&(i+="?"),n.length&&(i+="yep="+n.join(",")),r.length&&(i+=(n.length?"&":"")+"nope="+r.join(",")),i},y}(window,document),function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.svg4everybody=e()}):"object"==typeof module&&module.exports?module.exports=e():t.svg4everybody=e()}(this,function(){function g(t,e,i){if(i){var n=document.createDocumentFragment(),r=!e.hasAttribute("viewBox")&&i.getAttribute("viewBox");r&&e.setAttribute("viewBox",r);for(var o=i.cloneNode(!0);o.childNodes.length;)n.appendChild(o.firstChild);t.appendChild(n)}}function v(n){n.onreadystatechange=function(){if(4===n.readyState){var i=n._cachedDocument;i||((i=n._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=n.responseText,n._cachedTarget={}),n._embeds.splice(0).map(function(t){var e=n._cachedTarget[t.id];e||(e=n._cachedTarget[t.id]=i.getElementById(t.id)),g(t.parent,t.svg,e)})}},n.onreadystatechange()}function y(t){for(var e=t;"svg"!==e.nodeName.toLowerCase()&&(e=e.parentNode););return e}return function(t){var c,h=Object(t),e=window.top!==window.self;c="polyfill"in h?h.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||/\bEdge\/.(\d+)\b/.test(navigator.userAgent)&&e;var p={},d=window.requestAnimationFrame||setTimeout,f=document.getElementsByTagName("use"),m=0;c&&function t(){for(var e=0;e<f.length;){var i=f[e],n=i.parentNode,r=y(n);if(r){var o=i.getAttribute("xlink:href")||i.getAttribute("href");if(!o&&h.attributeName&&(o=i.getAttribute(h.attributeName)),c)if(!h.validate||h.validate(o,r,i)){n.removeChild(i);var a=o.split("#"),s=a.shift(),l=a.join("#");if(s.length){var u=p[s];u||((u=p[s]=new XMLHttpRequest).open("GET",s),u.send(),u._embeds=[]),u._embeds.push({parent:n,svg:r,id:l}),v(u)}else g(n,r,document.getElementById(l))}else++e,++m}else++e}(!f.length||0<f.length-m)&&d(t,67)}()}}),function(l){var u={init:function(t){var e=l.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,useAnchors:!0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",ellipsePageSet:!0,cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(t,e){},onInit:function(){}},t||{}),i=this;return e.pages=e.pages?e.pages:Math.ceil(e.items/e.itemsOnPage)?Math.ceil(e.items/e.itemsOnPage):1,e.currentPage?e.currentPage=e.currentPage-1:e.currentPage=e.invertPageOrder?e.pages-1:0,e.halfDisplayed=e.displayedPages/2,this.each(function(){i.addClass(e.cssStyle+" simple-pagination").data("pagination",e),u._draw.call(i)}),e.onInit(),this},selectPage:function(t){return u._selectPage.call(this,t-1),this},prevPage:function(){var t=this.data("pagination");return t.invertPageOrder?t.currentPage<t.pages-1&&u._selectPage.call(this,t.currentPage+1):0<t.currentPage&&u._selectPage.call(this,t.currentPage-1),this},nextPage:function(){var t=this.data("pagination");return t.invertPageOrder?0<t.currentPage&&u._selectPage.call(this,t.currentPage-1):t.currentPage<t.pages-1&&u._selectPage.call(this,t.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(t){this.data("pagination").pages=t},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(t){var e=this.data("pagination");return e.currentPage=t-1,this.data("pagination",e),u._draw.call(this),this},redraw:function(){return u._draw.call(this),this},disable:function(){var t=this.data("pagination");return t.disabled=!0,this.data("pagination",t),u._draw.call(this),this},enable:function(){var t=this.data("pagination");return t.disabled=!1,this.data("pagination",t),u._draw.call(this),this},updateItems:function(t){var e=this.data("pagination");e.items=t,e.pages=u._getPages(e),this.data("pagination",e),u._draw.call(this)},updateItemsOnPage:function(t){var e=this.data("pagination");return e.itemsOnPage=t,e.pages=u._getPages(e),this.data("pagination",e),u._selectPage.call(this,0),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var t,e=this.data("pagination"),i=u._getInterval(e);u.destroy.call(this);var n="UL"===("function"==typeof this.prop?this.prop("tagName"):this.attr("tagName"))?this:l("<ul"+(e.listStyle?' class="'+e.listStyle+'"':"")+"></ul>").appendTo(this);if(e.prevText&&u._appendItem.call(this,e.invertPageOrder?e.currentPage+1:e.currentPage-1,{text:e.prevText,classes:"prev"}),e.nextText&&e.nextAtFront&&u._appendItem.call(this,e.invertPageOrder?e.currentPage-1:e.currentPage+1,{text:e.nextText,classes:"next"}),e.invertPageOrder){if(i.end<e.pages&&0<e.edges){if(e.useStartEdge){var r=Math.max(e.pages-e.edges,i.end);for(t=e.pages-1;r<=t;t--)u._appendItem.call(this,t)}e.pages-e.edges>i.end&&e.pages-e.edges-i.end!=1?n.append('<li class="disabled"><span class="ellipse">'+e.ellipseText+"</span></li>"):e.pages-e.edges-i.end==1&&u._appendItem.call(this,i.end)}}else if(0<i.start&&0<e.edges){if(e.useStartEdge){var o=Math.min(e.edges,i.start);for(t=0;t<o;t++)u._appendItem.call(this,t)}e.edges<i.start&&i.start-e.edges!=1?n.append('<li class="disabled"><span class="ellipse">'+e.ellipseText+"</span></li>"):i.start-e.edges==1&&u._appendItem.call(this,e.edges)}if(e.invertPageOrder)for(t=i.end-1;t>=i.start;t--)u._appendItem.call(this,t);else for(t=i.start;t<i.end;t++)u._appendItem.call(this,t);if(e.invertPageOrder){if(0<i.start&&0<e.edges&&(e.edges<i.start&&i.start-e.edges!=1?n.append('<li class="disabled"><span class="ellipse">'+e.ellipseText+"</span></li>"):i.start-e.edges==1&&u._appendItem.call(this,e.edges),e.useEndEdge))for(t=(o=Math.min(e.edges,i.start))-1;0<=t;t--)u._appendItem.call(this,t)}else if(i.end<e.pages&&0<e.edges&&(e.pages-e.edges>i.end&&e.pages-e.edges-i.end!=1?n.append('<li class="disabled"><span class="ellipse">'+e.ellipseText+"</span></li>"):e.pages-e.edges-i.end==1&&u._appendItem.call(this,i.end),e.useEndEdge))for(t=r=Math.max(e.pages-e.edges,i.end);t<e.pages;t++)u._appendItem.call(this,t);e.nextText&&!e.nextAtFront&&u._appendItem.call(this,e.invertPageOrder?e.currentPage-1:e.currentPage+1,{text:e.nextText,classes:"next"}),e.ellipsePageSet&&!e.disabled&&u._ellipseClick.call(this,n)},_getPages:function(t){return Math.ceil(t.items/t.itemsOnPage)||1},_getInterval:function(t){return{start:Math.ceil(t.currentPage>t.halfDisplayed?Math.max(Math.min(t.currentPage-t.halfDisplayed,t.pages-t.displayedPages),0):0),end:Math.ceil(t.currentPage>t.halfDisplayed?Math.min(t.currentPage+t.halfDisplayed,t.pages):Math.min(t.displayedPages,t.pages))}},_appendItem:function(e,t){var i,n,r=this,o=r.data("pagination"),a=l("<li></li>"),s=r.find("ul");i={text:(e=e<0?0:e<o.pages?e:o.pages-1)+1,classes:""},o.labelMap.length&&o.labelMap[e]&&(i.text=o.labelMap[e]),i=l.extend(i,t||{}),e==o.currentPage||o.disabled?(o.disabled||"prev"===i.classes||"next"===i.classes?a.addClass("disabled"):a.addClass("active"),n=l('<span class="current">'+i.text+"</span>")):(n=o.useAnchors?l('<a href="'+o.hrefTextPrefix+(e+1)+o.hrefTextSuffix+'" class="page-link">'+i.text+"</a>"):l("<span >"+i.text+"</span>")).click(function(t){return u._selectPage.call(r,e,t)}),i.classes&&n.addClass(i.classes),a.append(n),s.length?s.append(a):r.append(a)},_selectPage:function(t,e){var i=this.data("pagination");return i.currentPage=t,i.selectOnClick&&u._draw.call(this),i.onPageClick(t+1,e)},_ellipseClick:function(t){var n=this,r=this.data("pagination"),o=t.find(".ellipse");o.addClass("clickable").parent().removeClass("disabled"),o.click(function(t){if(!r.disable){var e=l(this),i=(parseInt(e.parent().prev().text(),10)||0)+1;e.html('<input type="number" min="1" max="'+r.pages+'" step="1" value="'+i+'">').find("input").focus().click(function(t){t.stopPropagation()}).keyup(function(t){var e=l(this).val();13===t.which&&""!==e?0<e&&e<=r.pages&&u._selectPage.call(n,e-1):27===t.which&&o.empty().html(r.ellipseText)}).bind("blur",function(t){var e=l(this).val();return""!==e&&u._selectPage.call(n,e-1),o.empty().html(r.ellipseText),!1})}return!1})}};l.fn.pagination=function(t){return u[t]&&"_"!=t.charAt(0)?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void l.error("Method "+t+" does not exist on jQuery.pagination"):u.init.apply(this,arguments)}}(jQuery),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).mapboxgl=e()}(this,function(){"use strict";var r,o,a;function t(t,e){if(r)if(o){var i="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",n={};r(n),(a=e(n)).workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}else o=e;else r=e}return t(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var a=i;function i(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var i,n,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(i=0))return i;if(r>(n=1))return n;for(;i<n;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;o<t?i=r:n=r,r=.5*(n-i)+i}return r},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var ht=n;function n(t,e){this.x=t,this.y=e}function r(t,e,i,n){var r=new a(t,e,i,n);return function(t){return r.solve(t)}}n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),n=Math.sin(t),r=e.y+n*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-n*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t};var o=r(.25,.1,.25,1);function s(t,e,i){return Math.min(i,Math.max(e,t))}function l(t,e,i){var n=i-e,r=((t-e)%n+n)%n+e;return r===e?i:r}function d(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];for(var n=0,r=e;n<r.length;n+=1){var o=r[n];for(var a in o)t[a]=o[a]}return t}var u=1;function c(){return u++}function h(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function p(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function f(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function m(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g(t,e,i){var n={};for(var r in t)n[r]=e.call(i||this,t[r],r,t);return n}function v(t,e,i){var n={};for(var r in t)e.call(i||this,t[r],r,t)&&(n[r]=t[r]);return n}function y(t){return Array.isArray(t)?t.map(y):"object"==typeof t&&t?g(t,y):t}var _={};function pt(t){_[t]||("undefined"!=typeof console&&console.warn(t),_[t]=!0)}function b(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function x(t){for(var e=0,i=0,n=t.length,r=n-1,o=void 0,a=void 0;i<n;r=i++)e+=((a=t[r]).x-(o=t[i]).x)*(o.y+a.y);return e}function w(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function S(t){var o={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,e,i,n){var r=i||n;return o[e]=!r||r.toLowerCase(),""}),o["max-age"]){var e=parseInt(o["max-age"],10);isNaN(e)?delete o["max-age"]:o["max-age"]=e}return o}var T=null;function C(t){if(null==T){var e=t.navigator?t.navigator.userAgent:null;T=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return T}function E(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var k,A,I,P,z=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),M=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,D=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,L={now:z,frame:function(t){var e=M(t);return{cancel:function(){return D(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=self.document.createElement("canvas"),n=i.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return k||(k=self.document.createElement("a")),k.href=t,k.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==A&&(A=self.matchMedia("(prefers-reduced-motion: reduce)")),A.matches)}},O={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},R={supported:!1,testSupport:function(t){!F&&P&&(B?N(t):I=t)}},F=!1,B=!1;function N(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,P),t.isContextLost())return;R.supported=!0}catch(t){}t.deleteTexture(e),F=!0}self.document&&((P=self.document.createElement("img")).onload=function(){I&&N(I),B=!(I=null)},P.onerror=function(){F=!0,I=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var j="01",$=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function U(t){return 0===t.indexOf("mapbox:")}$.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",j,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},$.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},$.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},$.prototype.normalizeStyleURL=function(t,e){if(!U(t))return t;var i=W(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},$.prototype.normalizeGlyphsURL=function(t,e){if(!U(t))return t;var i=W(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},$.prototype.normalizeSourceURL=function(t,e){if(!U(t))return t;var i=W(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},$.prototype.normalizeSpriteURL=function(t,e,i,n){var r=W(t);return U(t)?(r.path="/styles/v1"+r.path+"/sprite"+e+i,this._makeAPIURL(r,this._customAccessToken||n)):(r.path+=""+e+i,Z(r))},$.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!U(t))return t;var r=W(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=L.devicePixelRatio||512===e?"@2x":"")+(R.supported?".webp":"$1")),r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/v4"+r.path;var i=this._customAccessToken||function(t){for(var e=0,i=r.params;e<i.length;e+=1){var n=i[e].match(/^access_token=(.*)$/);if(n)return n[1]}return null}()||O.ACCESS_TOKEN;return O.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku="+this._skuToken),this._makeAPIURL(r,i)},$.prototype.canonicalizeTileURL=function(t,e){var i=W(t);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return t;var n="mapbox://tiles/";n+=i.path.replace("/v4/","");var r=i.params;return e&&(r=r.filter(function(t){return!t.match(/^access_token=/)})),r.length&&(n+="?"+r.join("&")),n},$.prototype.canonicalizeTileset=function(t,e){for(var i=!!e&&U(e),n=[],r=0,o=t.tiles||[];r<o.length;r+=1){var a=o[r];q(a)?n.push(this.canonicalizeTileURL(a,i)):n.push(a)}return n},$.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=W(O.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!O.REQUIRE_ACCESS_TOKEN)return Z(t);if(!(e=e||O.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter(function(t){return-1===t.indexOf("access_token")}),t.params.push("access_token="+e),Z(t)};var V=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function q(t){return V.test(t)}var H=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function W(t){var e=t.match(H);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Z(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function G(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(e[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(t){return null}}var X=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};X.prototype.getStorageKey=function(t){var e,i=G(O.ACCESS_TOKEN);return e=i&&i.u?self.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))})):O.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},X.prototype.fetchEventData=function(){var t=E("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var n=self.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var r=self.localStorage.getItem(i);r&&(this.anonId=r)}catch(t){pt("Unable to read from LocalStorage")}},X.prototype.saveEventData=function(){var t=E("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(i,this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){pt("Unable to write to LocalStorage")}},X.prototype.processRequests=function(t){},X.prototype.postEvent=function(t,e,i,n){var r=this;if(O.EVENTS_URL){var o=W(O.EVENTS_URL);o.params.push("access_token="+(n||O.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.9.0",skuId:j,userId:this.anonId},s=e?d(a,e):a,l={url:Z(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=bt(l,function(t){r.pendingRequest=null,i(t),r.saveEventData(),r.processRequests(n)})}},X.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var Y,K,J=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.postMapLoadEvent=function(t,e,i,n){this.skuToken=i,(O.EVENTS_URL&&n||O.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return U(t)||q(t)}))&&this.queueRequest({id:e,timestamp:Date.now()},n)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),n=i.id,r=i.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),p(this.anonId)||(this.anonId=h()),this.postEvent(r,{skuToken:this.skuToken},function(t){t||n&&(e.success[n]=!0)},t))}},e}(X),Q=new(function(e){function t(t){e.call(this,"appUserTurnstile"),this._customAccessToken=t}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.postTurnstileEvent=function(t,e){O.EVENTS_URL&&O.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return U(t)||q(t)})&&this.queueRequest(Date.now(),e)},t.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=G(O.ACCESS_TOKEN),n=i?i.u:O.ACCESS_TOKEN,r=n!==this.eventData.tokenU;p(this.anonId)||(this.anonId=h(),r=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),l=(o-this.eventData.lastSuccess)/864e5;r=r||1<=l||l<-1||a.getDate()!==s.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=n)},t)}},t}(X)),tt=Q.postTurnstileEvent.bind(Q),et=new J,it=et.postMapLoadEvent.bind(et),nt="mapbox-tiles",rt=500,ot=50;function at(){self.caches&&!Y&&(Y=self.caches.open(nt))}function st(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var lt,ut=1/0;function ct(){return null==lt&&(lt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),lt}var dt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(dt);var ft,mt,gt=function(n){function t(t,e,i){401===e&&q(i)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),n.call(this,t),this.status=e,this.url=i,this.name=this.constructor.name,this.message=t}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),vt=w()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},yt=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(vt())&&!/^\w+:/.test(i))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(r,o){var t,e=new self.AbortController,a=new self.Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:vt(),signal:e.signal}),s=!1,l=!1,u=0<(t=a.url).indexOf("sku=")&&q(t);"json"===r.type&&a.headers.set("Accept","application/json");var i=function(t,e,i){if(!l){if(t&&"SecurityError"!==t.message&&pt(t),e&&i)return c(e);var n=Date.now();self.fetch(a).then(function(t){if(t.ok){var e=u?t.clone():null;return c(t,e,n)}return o(new gt(t.statusText,t.status,r.url))}).catch(function(t){20!==t.code&&o(new Error(t.message))})}},c=function(e,i,n){("arrayBuffer"===r.type?e.arrayBuffer():"json"===r.type?e.json():e.text()).then(function(t){l||(i&&n&&function(i,t,e){if(at(),Y){var n={status:t.status,statusText:t.statusText,headers:new self.Headers};t.headers.forEach(function(t,e){return n.headers.set(e,t)});var r=S(t.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&n.headers.set("Expires",new Date(e+1e3*r["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-e<42e4||function(t,e){if(void 0===K)try{new Response(new ReadableStream),K=!0}catch(t){K=!1}K?e(t.body):t.blob().then(e)}(t,function(t){var e=new self.Response(t,n);at(),Y&&Y.then(function(t){return t.put(st(i.url),e)}).catch(function(t){return pt(t.message)})}))}}(a,i,n),s=!0,o(null,t,e.headers.get("Cache-Control"),e.headers.get("Expires")))}).catch(function(t){l||o(new Error(t.message))})};return u?function(t,n){if(at(),!Y)return n(null);var r=st(t.url);Y.then(function(i){i.match(r).then(function(t){var e=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),i=S(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(t);i.delete(r),e&&i.put(r,t.clone()),n(null,t,e)}).catch(n)}).catch(n)}(a,i):i(null,null),{cancel:function(){l=!0,s||e.abort()}}}(t,e);if(w()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(e,i){var n=new self.XMLHttpRequest;for(var t in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){i(new Error(n.statusText))},n.onload=function(){if((200<=n.status&&n.status<300||0===n.status)&&null!==n.response){var t=n.response;if("json"===e.type)try{t=JSON.parse(n.response)}catch(t){return i(t)}i(null,t,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else i(new gt(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(t,e)},_t=function(t,e){return yt(d(t,{type:"arrayBuffer"}),e)},bt=function(t,e){return yt(d(t,{method:"POST"}),e)};ft=[],mt=0;var xt=function(t,s){if(R.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),mt>=O.MAX_PARALLEL_IMAGE_REQUESTS){var e={requestParameters:t,callback:s,cancelled:!1,cancel:function(){this.cancelled=!0}};return ft.push(e),e}mt++;var i=!1,l=function(){if(!i)for(i=!0,mt--;ft.length&&mt<O.MAX_PARALLEL_IMAGE_REQUESTS;){var t=ft.shift();t.cancelled||(t.cancel=xt(t.requestParameters,t.callback).cancel)}},n=_t(t,function(t,e,i,n){var r,o,a;l(),t?s(t):e&&(ct()?(r=e,o=s,a=new self.Blob([new Uint8Array(r)],{type:"image/png"}),self.createImageBitmap(a).then(function(t){o(null,t)}).catch(function(t){o(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(t,e,i,n){var r=new self.Image,o=self.URL;r.onload=function(){e(null,r),o.revokeObjectURL(r.src)},r.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new self.Blob([new Uint8Array(t)],{type:"image/png"});r.cacheControl=i,r.expires=n,r.src=t.byteLength?o.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(e,s,i,n))});return{cancel:function(){n.cancel(),l()}}};function wt(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function St(t,e,i){if(i&&i[t]){var n=i[t].indexOf(e);-1!==n&&i[t].splice(n,1)}}var Tt=function(t,e){void 0===e&&(e={}),d(this,e),this.type=t},Ct=function(i){function t(t,e){void 0===e&&(e={}),i.call(this,"error",d({error:t},e))}return i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t}(Tt),Et=function(){};Et.prototype.on=function(t,e){return this._listeners=this._listeners||{},wt(t,e,this._listeners),this},Et.prototype.off=function(t,e){return St(t,e,this._listeners),St(t,e,this._oneTimeListeners),this},Et.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},wt(t,e,this._oneTimeListeners),this},Et.prototype.fire=function(t,e){"string"==typeof t&&(t=new Tt(t,e||{}));var i=t.type;if(this.listens(i)){for(var n=0,r=(t.target=this)._listeners&&this._listeners[i]?this._listeners[i].slice():[];n<r.length;n+=1)r[n].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];o<a.length;o+=1){var s=a[o];St(i,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(d(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof Ct&&console.error(t.error);return this},Et.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&0<this._listeners[t].length||this._oneTimeListeners&&this._oneTimeListeners[t]&&0<this._oneTimeListeners[t].length||this._eventedParent&&this._eventedParent.listens(t)};var kt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!(Et.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this})},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},At=function(t,e,i,n){this.message=(t?t+": ":"")+i,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)};function It(t){var e=t.value;return e?[new At(t.key,e,"constants have been deprecated as of v8")]:[]}function Pt(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];for(var n=0,r=e;n<r.length;n+=1){var o=r[n];for(var a in o)t[a]=o[a]}return t}function zt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Mt(t){if(Array.isArray(t))return t.map(Mt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=Mt(t[i]);return e}return zt(t)}var Dt=function(i){function t(t,e){i.call(this,e),this.message=e,this.key=t}return i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t}(Error),Lt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,n=e;i<n.length;i+=1){var r=n[i];this.bindings[r[0]]=r[1]}};Lt.prototype.concat=function(t){return new Lt(this,t)},Lt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Lt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Ot={kind:"null"},Rt={kind:"number"},Ft={kind:"string"},Bt={kind:"boolean"},Nt={kind:"color"},jt={kind:"object"},$t={kind:"value"},Ut={kind:"collator"},Vt={kind:"formatted"},qt={kind:"resolvedImage"};function Ht(t,e){return{kind:"array",itemType:t,N:e}}function Wt(t){if("array"===t.kind){var e=Wt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Zt=[Ot,Rt,Ft,Bt,Nt,Vt,jt,Ht($t),qt];function Gt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Gt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,n=Zt;i<n.length;i+=1)if(!Gt(n[i],e))return null}return"Expected "+Wt(t)+" but found "+Wt(e)+" instead."}var Xt=e(function(t,e){var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function f(t){return(t=Math.round(t))<0?0:255<t?255:t}function m(t){return f("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function g(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:1<e?1:e;var e}function v(t,e,i){return i<0?i+=1:1<i&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in d)return d[i].slice();if("#"===i[0])return 4===i.length?0<=(e=parseInt(i.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&0<=(e=parseInt(i.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=i.indexOf("("),r=i.indexOf(")");if(-1!==n&&r+1===i.length){var o=i.substr(0,n),a=i.substr(n+1,r-(n+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=g(a.pop());case"rgb":return 3!==a.length?null:[m(a[0]),m(a[1]),m(a[2]),s];case"hsla":if(4!==a.length)return null;s=g(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=g(a[1]),c=g(a[2]),h=c<=.5?c*(u+1):c+u-c*u,p=2*c-h;return[f(255*v(p,h,l+1/3)),f(255*v(p,h,l)),f(255*v(p,h,l-1/3)),s];default:return null}}return null}}catch(t){}}).parseCSSColor,Yt=function(t,e,i,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=i,this.a=n};Yt.parse=function(t){if(t){if(t instanceof Yt)return t;if("string"==typeof t){var e=Xt(t);if(e)return new Yt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Yt.prototype.toString=function(){var t=this.toArray(),e=t[1],i=t[2],n=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(i)+","+n+")"},Yt.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},Yt.black=new Yt(0,0,0,1),Yt.white=new Yt(1,1,1,1),Yt.transparent=new Yt(0,0,0,0),Yt.red=new Yt(1,0,0,1);var Kt=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Kt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Kt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Jt=function(t,e,i,n,r){this.text=t,this.image=e,this.scale=i,this.fontStack=n,this.textColor=r},Qt=function(t){this.sections=t};Qt.fromString=function(t){return new Qt([new Jt(t,null,null,null,null)])},Qt.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},Qt.factory=function(t){return t instanceof Qt?t:Qt.fromString(t)},Qt.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},Qt.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var n=i[e];if(n.image)t.push(["image",n.image.name]);else{t.push(n.text);var r={};n.fontStack&&(r["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(r["font-scale"]=n.scale),n.textColor&&(r["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(r)}}return t};var te=function(t){this.name=t.name,this.available=t.available};function ee(t,e,i,n){return"number"==typeof t&&0<=t&&t<=255&&"number"==typeof e&&0<=e&&e<=255&&"number"==typeof i&&0<=i&&i<=255?void 0===n||"number"==typeof n&&0<=n&&n<=1?null:"Invalid rgba value ["+[t,e,i,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,i,n]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ie(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Yt)return!0;if(t instanceof Kt)return!0;if(t instanceof Qt)return!0;if(t instanceof te)return!0;if(Array.isArray(t)){for(var e=0,i=t;e<i.length;e+=1)if(!ie(i[e]))return!1;return!0}if("object"==typeof t){for(var n in t)if(!ie(t[n]))return!1;return!0}return!1}function ne(t){if(null===t)return Ot;if("string"==typeof t)return Ft;if("boolean"==typeof t)return Bt;if("number"==typeof t)return Rt;if(t instanceof Yt)return Nt;if(t instanceof Kt)return Ut;if(t instanceof Qt)return Vt;if(t instanceof te)return qt;if(Array.isArray(t)){for(var e,i=t.length,n=0,r=t;n<r.length;n+=1){var o=ne(r[n]);if(e){if(e===o)continue;e=$t;break}e=o}return Ht(e||$t,i)}return jt}function re(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Yt||t instanceof Qt||t instanceof te?t.toString():JSON.stringify(t)}te.prototype.toString=function(){return this.name},te.fromString=function(t){return t?new te({name:t,available:!1}):null},te.prototype.serialize=function(){return["image",this.name]};var oe=function(t,e){this.type=t,this.value=e};oe.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!ie(t[1]))return e.error("invalid value");var i=t[1],n=ne(i),r=e.expectedType;return"array"!==n.kind||0!==n.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(n=r),new oe(n,i)},oe.prototype.evaluate=function(){return this.value},oe.prototype.eachChild=function(){},oe.prototype.outputDefined=function(){return!0},oe.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Yt?["rgba"].concat(this.value.toArray()):this.value instanceof Qt?this.value.serialize():this.value};var ae=function(t){this.name="ExpressionEvaluationError",this.message=t};ae.prototype.toJSON=function(){return this.message};var se={string:Ft,number:Rt,boolean:Bt,object:jt},le=function(t,e){this.type=t,this.args=e};le.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,n=1,r=t[0];if("array"===r){var o,a;if(2<t.length){var s=t[1];if("string"!=typeof s||!(s in se)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=se[s],n++}else o=$t;if(3<t.length){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],n++}i=Ht(o,a)}else i=se[r];for(var l=[];n<t.length;n++){var u=e.parse(t[n],n,$t);if(!u)return null;l.push(u)}return new le(i,l)},le.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!Gt(this.type,ne(i)))return i;if(e===this.args.length-1)throw new ae("Expected value to be of type "+Wt(this.type)+", but found "+Wt(ne(i))+" instead.")}return null},le.prototype.eachChild=function(t){this.args.forEach(t)},le.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},le.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var n=t.N;("number"==typeof n||1<this.args.length)&&e.push(n)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var ue=function(t){this.type=Vt,this.sections=t};ue.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var n=[],r=!1,o=1;o<=t.length-1;++o){var a=t[o];if(r&&"object"==typeof a&&!Array.isArray(a)){r=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Rt)))return null;var l=null;if(a["text-font"]&&!(l=e.parse(a["text-font"],1,Ht(Ft))))return null;var u=null;if(a["text-color"]&&!(u=e.parse(a["text-color"],1,Nt)))return null;var c=n[n.length-1];c.scale=s,c.font=l,c.textColor=u}else{var h=e.parse(t[o],1,$t);if(!h)return null;var p=h.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,n.push({content:h,scale:null,font:null,textColor:null})}}return new ue(n)},ue.prototype.evaluate=function(i){return new Qt(this.sections.map(function(t){var e=t.content.evaluate(i);return ne(e)===qt?new Jt("",e,null,null,null):new Jt(re(e),null,t.scale?t.scale.evaluate(i):null,t.font?t.font.evaluate(i).join(","):null,t.textColor?t.textColor.evaluate(i):null)}))},ue.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var n=i[e];t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}},ue.prototype.outputDefined=function(){return!1},ue.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var n=i[e];t.push(n.content.serialize());var r={};n.scale&&(r["font-scale"]=n.scale.serialize()),n.font&&(r["text-font"]=n.font.serialize()),n.textColor&&(r["text-color"]=n.textColor.serialize()),t.push(r)}return t};var ce=function(t){this.type=qt,this.input=t};ce.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Ft);return i?new ce(i):e.error("No image name provided.")},ce.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=te.fromString(e);return i&&t.availableImages&&(i.available=-1<t.availableImages.indexOf(e)),i},ce.prototype.eachChild=function(t){t(this.input)},ce.prototype.outputDefined=function(){return!1},ce.prototype.serialize=function(){return["image",this.input.serialize()]};var he={"to-boolean":Bt,"to-color":Nt,"to-number":Rt,"to-string":Ft},pe=function(t,e){this.type=t,this.args=e};pe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var n=he[i],r=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,$t);if(!a)return null;r.push(a)}return new pe(n,r)},pe.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,n=0,r=this.args;n<r.length;n+=1){if(i=null,(e=r[n].evaluate(t))instanceof Yt)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(i=e.length<3||4<e.length?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ee(e[0],e[1],e[2],e[3])))return new Yt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ae(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(t)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new ae("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?Qt.fromString(re(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?te.fromString(re(this.args[0].evaluate(t))):re(this.args[0].evaluate(t))},pe.prototype.eachChild=function(t){this.args.forEach(t)},pe.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},pe.prototype.serialize=function(){if("formatted"===this.type.kind)return new ue([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ce(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var de=["Unknown","Point","LineString","Polygon"],fe=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};fe.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},fe.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?de[this.feature.type]:this.feature.type:null},fe.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},fe.prototype.canonicalID=function(){return this.canonical},fe.prototype.properties=function(){return this.feature&&this.feature.properties||{}},fe.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Yt.parse(t)),e};var me=function(t,e,i,n){this.name=t,this.type=e,this._evaluate=i,this.args=n};me.prototype.evaluate=function(t){return this._evaluate(t,this.args)},me.prototype.eachChild=function(t){this.args.forEach(t)},me.prototype.outputDefined=function(){return!1},me.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},me.parse=function(i,t){var e,n=i[0],r=me.definitions[n];if(!r)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(r)?r[0]:r.type,a=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=a.filter(function(t){var e=t[0];return!Array.isArray(e)||e.length===i.length-1}),l=null,u=0,c=s;u<c.length;u+=1){var h=c[u],p=h[0],d=h[1];l=new Ue(t.registry,t.path,null,t.scope);for(var f=[],m=!1,g=1;g<i.length;g++){var v=i[g],y=Array.isArray(p)?p[g-1]:p.type,_=l.parse(v,1+f.length,y);if(!_){m=!0;break}f.push(_)}if(!m)if(Array.isArray(p)&&p.length!==f.length)l.error("Expected "+p.length+" arguments, but found "+f.length+" instead.");else{for(var b=0;b<f.length;b++){var x=Array.isArray(p)?p[b]:p.type,w=f[b];l.concat(b+1).checkSubtype(x,w.type)}if(0===l.errors.length)return new me(n,o,d,f)}}if(1===s.length)(e=t.errors).push.apply(e,l.errors);else{for(var S=(s.length?s:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Wt).join(", ")+")":"("+Wt(e.type)+"...)"}).join(" | "),T=[],C=1;C<i.length;C++){var E=t.parse(i[C],1+T.length);if(!E)return null;T.push(Wt(E.type))}t.error("Expected arguments of type "+S+", but found ("+T.join(", ")+") instead.")}return null},me.register=function(t,e){for(var i in me.definitions=e)t[i]=me};var ge=function(t,e,i){this.type=Ut,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};ge.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Bt);if(!n)return null;var r=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Bt);if(!r)return null;var o=null;return i.locale&&!(o=e.parse(i.locale,1,Ft))?null:new ge(n,r,o)},ge.prototype.evaluate=function(t){return new Kt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ge.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ge.prototype.outputDefined=function(){return!1},ge.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var ve=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};ve.prototype.setNorthEast=function(t){return this._ne=t instanceof ye?new ye(t.lng,t.lat):ye.convert(t),this},ve.prototype.setSouthWest=function(t){return this._sw=t instanceof ye?new ye(t.lng,t.lat):ye.convert(t),this},ve.prototype.extend=function(t){var e,i,n=this._sw,r=this._ne;if(t instanceof ye)i=e=t;else{if(!(t instanceof ve))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(ve.convert(t)):this.extend(ye.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return n||r?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),r.lng=Math.max(i.lng,r.lng),r.lat=Math.max(i.lat,r.lat)):(this._sw=new ye(e.lng,e.lat),this._ne=new ye(i.lng,i.lat)),this},ve.prototype.getCenter=function(){return new ye((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ve.prototype.getSouthWest=function(){return this._sw},ve.prototype.getNorthEast=function(){return this._ne},ve.prototype.getNorthWest=function(){return new ye(this.getWest(),this.getNorth())},ve.prototype.getSouthEast=function(){return new ye(this.getEast(),this.getSouth())},ve.prototype.getWest=function(){return this._sw.lng},ve.prototype.getSouth=function(){return this._sw.lat},ve.prototype.getEast=function(){return this._ne.lng},ve.prototype.getNorth=function(){return this._ne.lat},ve.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ve.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ve.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ve.prototype.contains=function(t){var e=ye.convert(t),i=e.lng,n=e.lat,r=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r},ve.convert=function(t){return!t||t instanceof ve?t:new ve(t)};var ye=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ye.prototype.wrap=function(){return new ye(l(this.lng,-180,180),this.lat)},ye.prototype.toArray=function(){return[this.lng,this.lat]},ye.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ye.prototype.distanceTo=function(t){var e=Math.PI/180,i=this.lat*e,n=t.lat*e,r=Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(r,1))},ye.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new ve(new ye(this.lng-i,this.lat-e),new ye(this.lng+i,this.lat+e))},ye.convert=function(t){if(t instanceof ye)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new ye(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new ye(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var _e=2*Math.PI*6371008.8;function be(t){return _e*Math.cos(t*Math.PI/180)}function xe(t){return(180+t)/360}function we(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Se(t,e){return t/be(e)}function Te(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Ce=function(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i};Ce.fromLngLat=function(t,e){void 0===e&&(e=0);var i=ye.convert(t);return new Ce(xe(i.lng),we(i.lat),Se(e,i.lat))},Ce.prototype.toLngLat=function(){return new ye(360*this.x-180,Te(this.y))},Ce.prototype.toAltitude=function(){return this.z*be(Te(this.y))},Ce.prototype.meterInMercatorCoordinateUnits=function(){return 1/_e*(t=Te(this.y),1/Math.cos(t*Math.PI/180));var t};var Ee=8192;function ke(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Ae(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ie(t,e){for(var i,n,r,o,a,s,l,u=!1,c=0,h=e.length;c<h;c++)for(var p=e[c],d=0,f=p.length;d<f-1;d++){if((o=(i=t)[0]-(n=p[d])[0])*(l=i[1]-(r=p[d+1])[1])-(s=i[0]-r[0])*(a=i[1]-n[1])==0&&o*s<=0&&a*l<=0)return!1;m=t,g=p[d],v=p[d+1],g[1]>m[1]!=v[1]>m[1]&&m[0]<(v[0]-g[0])*(m[1]-g[1])/(v[1]-g[1])+g[0]&&(u=!u)}var m,g,v;return u}function Pe(t,e){for(var i=0;i<e.length;i++)if(Ie(t,e[i]))return!0;return!1}function ze(t,e,i,n){var r=n[0]-i[0],o=n[1]-i[1];return((t[0]-i[0])*o-r*(t[1]-i[1]))*((e[0]-i[0])*o-r*(e[1]-i[1]))<0}function Me(t,e,i){for(var n=0,r=i;n<r.length;n+=1)for(var o=r[n],a=0;a<o.length-1;++a)if(0!=(h=[(c=o[a+1])[0]-(u=o[a])[0],c[1]-u[1]])[0]*(p=[(l=e)[0]-(s=t)[0],l[1]-s[1]])[1]-h[1]*p[0]&&ze(s,l,u,c)&&ze(u,c,s,l))return!0;var s,l,u,c,h,p;return!1}function De(t,e){for(var i=0;i<t.length;++i)if(!Ie(t[i],e))return!1;for(var n=0;n<t.length-1;++n)if(Me(t[n],t[n+1],e))return!1;return!0}function Le(t,e){for(var i=0;i<e.length;i++)if(De(t,e[i]))return!0;return!1}function Oe(t,e,i){for(var n=[],r=0;r<t.length;r++){for(var o=[],a=0;a<t[r].length;a++){var s=(l=t[r][a],u=i,void 0,c=Ce.fromLngLat({lng:l[0],lat:l[1]},0),h=Math.pow(2,u.z),[Math.round(c.x*h*Ee),Math.round(c.y*h*Ee)]);ke(e,s),o.push(s)}n.push(o)}var l,u,c,h;return n}function Re(t,e,i){for(var n=[],r=0;r<t.length;r++){var o=Oe(t[r],e,i);n.push(o)}return n}var Fe=function(t,e){this.type=Bt,this.geojson=t,this.geometries=e};function Be(t){if(t instanceof me){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Fe)return!1;var e=!0;return t.eachChild(function(t){e&&!Be(t)&&(e=!1)}),e}function Ne(t){if(t instanceof me&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!Ne(t)&&(e=!1)}),e}function je(t,e){if(t instanceof me&&0<=e.indexOf(t.name))return!1;var i=!0;return t.eachChild(function(t){i&&!je(t,e)&&(i=!1)}),i}Fe.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(ie(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var n=0;n<i.features.length;++n){var r=i.features[n].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new Fe(i,i.features[n].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Fe(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Fe(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Fe.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){for(var i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID(),o=[r.x*Ee,r.y*Ee],a=[],s=0,l=t.geometry();s<l.length;s+=1)for(var u=0,c=l[s];u<c.length;u+=1){var h=c[u],p=[h.x+o[0],h.y+o[1]];ke(i,p),a.push(p)}if("Polygon"===e.type){var d=Oe(e.coordinates,n,r);if(!Ae(i,n))return!1;for(var f=0,m=a;f<m.length;f+=1)if(!Ie(m[f],d))return!1}if("MultiPolygon"===e.type){var g=Re(e.coordinates,n,r);if(!Ae(i,n))return!1;for(var v=0,y=a;v<y.length;v+=1)if(!Pe(y[v],g))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){for(var i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID(),o=[r.x*Ee,r.y*Ee],a=[],s=0,l=t.geometry();s<l.length;s+=1){for(var u=[],c=0,h=l[s];c<h.length;c+=1){var p=h[c],d=[p.x+o[0],p.y+o[1]];ke(i,d),u.push(d)}a.push(u)}if("Polygon"===e.type){var f=Oe(e.coordinates,n,r);if(!Ae(i,n))return!1;for(var m=0,g=a;m<g.length;m+=1)if(!De(g[m],f))return!1}if("MultiPolygon"===e.type){var v=Re(e.coordinates,n,r);if(!Ae(i,n))return!1;for(var y=0,_=a;y<_.length;y+=1)if(!Le(_[y],v))return!1}return!0}(t,this.geometries)}return!1},Fe.prototype.eachChild=function(){},Fe.prototype.outputDefined=function(){return!0},Fe.prototype.serialize=function(){return["within",this.geojson]};var $e=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};$e.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new $e(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},$e.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},$e.prototype.eachChild=function(){},$e.prototype.outputDefined=function(){return!1},$e.prototype.serialize=function(){return["var",this.name]};var Ue=function(t,e,i,n,r){void 0===e&&(e=[]),void 0===n&&(n=new Lt),void 0===r&&(r=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=n,this.errors=r,this.expectedType=i};function Ve(t,e){for(var i,n=t.length-1,r=0,o=n,a=0;r<=o;)if((i=t[a=Math.floor((r+o)/2)])<=e){if(a===n||e<t[a+1])return a;r=a+1}else{if(!(e<i))throw new ae("Input is not a number.");o=a-1}return 0}Ue.prototype.parse=function(t,e,i,n,r){return void 0===r&&(r={}),e?this.concat(e,i,n)._parse(t,r):this._parse(t,r)},Ue.prototype._parse=function(t,e){function i(t,e,i){return"assert"===i?new le(e,[t]):"coerce"===i?new pe(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[n];if(r){var o=r.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=i(o,a,e.typeAnnotation||"coerce");else o=i(o,a,e.typeAnnotation||"assert")}if(!(o instanceof oe)&&"resolvedImage"!==o.type.kind&&function e(t){if(t instanceof $e)return e(t.boundExpression);if(t instanceof me&&"error"===t.name)return!1;if(t instanceof ge)return!1;if(t instanceof Fe)return!1;var i=t instanceof pe||t instanceof le,n=!0;return t.eachChild(function(t){n=i?n&&e(t):n&&t instanceof oe}),!!n&&Be(t)&&je(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var l=new fe;try{o=new oe(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Ue.prototype.concat=function(t,e,i){var n="number"==typeof t?this.path.concat(t):this.path,r=i?this.scope.concat(i):this.scope;return new Ue(this.registry,n,e||null,r,this.errors)},Ue.prototype.error=function(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];var n=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new Dt(n,t))},Ue.prototype.checkSubtype=function(t,e){var i=Gt(t,e);return i&&this.error(i),i};var qe=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,r=i;n<r.length;n+=1){var o=r[n],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function He(t,e,i){return t*(1-i)+e*i}qe.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,Rt);if(!i)return null;var n=[],r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],l=o,u=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(n.length&&n[n.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(s,u,r);if(!c)return null;r=r||c.type,n.push([a,c])}return new qe(r,i,n)},qe.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);var r=e.length;return n>=e[r-1]?i[r-1].evaluate(t):i[Ve(e,n)].evaluate(t)},qe.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},qe.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},qe.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)0<e&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var We=Object.freeze({__proto__:null,number:He,color:function(t,e,i){return new Yt(He(t.r,e.r,i),He(t.g,e.g,i),He(t.b,e.b,i),He(t.a,e.a,i))},array:function(t,i,n){return t.map(function(t,e){return He(t,i[e],n)})}}),Ze=4/29,Ge=6/29,Xe=3*Ge*Ge,Ye=Ge*Ge*Ge,Ke=Math.PI/180,Je=180/Math.PI;function Qe(t){return Ye<t?Math.pow(t,1/3):t/Xe+Ze}function ti(t){return Ge<t?t*t*t:Xe*(t-Ze)}function ei(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ii(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ni(t){var e=ii(t.r),i=ii(t.g),n=ii(t.b),r=Qe((.4124564*e+.3575761*i+.1804375*n)/.95047),o=Qe((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-Qe((.0193339*e+.119192*i+.9503041*n)/1.08883)),alpha:t.a}}function ri(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*ti(e),i=.95047*ti(i),n=1.08883*ti(n),new Yt(ei(3.2404542*i-1.5371385*e-.4985314*n),ei(-.969266*i+1.8760108*e+.041556*n),ei(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}var oi={forward:ni,reverse:ri,interpolate:function(t,e,i){return{l:He(t.l,e.l,i),a:He(t.a,e.a,i),b:He(t.b,e.b,i),alpha:He(t.alpha,e.alpha,i)}}},ai={forward:function(t){var e=ni(t),i=e.l,n=e.a,r=e.b,o=Math.atan2(r,n)*Je;return{h:o<0?o+360:o,c:Math.sqrt(n*n+r*r),l:i,alpha:t.a}},reverse:function(t){var e=t.h*Ke,i=t.c;return ri({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:(n=t.h,r=e.h,o=i,a=r-n,n+o*(180<a||a<-180?a-360*Math.round(a/360):a)),c:He(t.c,e.c,i),l:He(t.l,e.l,i),alpha:He(t.alpha,e.alpha,i)};var n,r,o,a}},si=Object.freeze({__proto__:null,lab:oi,hcl:ai}),li=function(t,e,i,n,r){this.type=t,this.operator=e,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(var o=0,a=r;o<a.length;o+=1){var s=a[o],l=s[1];this.labels.push(s[0]),this.outputs.push(l)}};function ui(t,e,i,n){var r=n-i,o=t-i;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}li.interpolationFactor=function(t,e,i,n){var r=0;if("exponential"===t.name)r=ui(e,t.base,i,n);else if("linear"===t.name)r=ui(e,1,i,n);else if("cubic-bezier"===t.name){var o=t.controlPoints;r=new a(o[0],o[1],o[2],o[3]).solve(ui(e,1,i,n))}return r},li.parse=function(t,e){var i=t[0],n=t[1],r=t[2],o=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var a=n[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:a}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||1<t}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,Rt)))return null;var l=[],u=null;"interpolate-hcl"===i||"interpolate-lab"===i?u=Nt:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<o.length;c+=2){var h=o[c],p=o[c+1],d=c+3,f=c+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(l.length&&l[l.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=e.parse(p,f,u);if(!m)return null;u=u||m.type,l.push([h,m])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new li(u,i,n,r,l):e.error("Type "+Wt(u)+" is not interpolatable.")},li.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);var r=e.length;if(n>=e[r-1])return i[r-1].evaluate(t);var o=Ve(e,n),a=li.interpolationFactor(this.interpolation,n,e[o],e[o+1]),s=i[o].evaluate(t),l=i[o+1].evaluate(t);return"interpolate"===this.operator?We[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?ai.reverse(ai.interpolate(ai.forward(s),ai.forward(l),a)):oi.reverse(oi.interpolate(oi.forward(s),oi.forward(l),a))},li.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},li.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},li.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var ci=function(t,e){this.type=t,this.args=e};ci.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,n=e.expectedType;n&&"value"!==n.kind&&(i=n);for(var r=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+r.length,i,void 0,{typeAnnotation:"omit"});if(!s)return null;i=i||s.type,r.push(s)}var l=n&&r.some(function(t){return Gt(n,t.type)});return new ci(l?$t:i,r)},ci.prototype.evaluate=function(t){for(var e,i=null,n=0,r=0,o=this.args;r<o.length&&(n++,(i=o[r].evaluate(t))&&i instanceof te&&!i.available&&(e||(e=i.name),i=null,n===this.args.length&&(i=e)),null===i);r+=1);return i},ci.prototype.eachChild=function(t){this.args.forEach(t)},ci.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},ci.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var hi=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};hi.prototype.evaluate=function(t){return this.result.evaluate(t)},hi.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},hi.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],n=1;n<t.length-1;n+=2){var r=t[n];if("string"!=typeof r)return e.error("Expected string, but found "+typeof r+" instead.",n);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var o=e.parse(t[n+1],n+1);if(!o)return null;i.push([r,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return a?new hi(i,a):null},hi.prototype.outputDefined=function(){return this.result.outputDefined()},hi.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var n=i[e];t.push(n[0],n[1].serialize())}return t.push(this.result.serialize()),t};var pi=function(t,e,i){this.type=t,this.index=e,this.input=i};pi.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Rt),n=e.parse(t[2],2,Ht(e.expectedType||$t));return i&&n?new pi(n.type.itemType,i,n):null},pi.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new ae("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new ae("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new ae("Array index must be an integer, but found "+e+" instead.");return i[e]},pi.prototype.eachChild=function(t){t(this.index),t(this.input)},pi.prototype.outputDefined=function(){return!1},pi.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var di=function(t,e){this.type=Bt,this.needle=t,this.haystack=e};di.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i,n=e.parse(t[1],1,$t),r=e.parse(t[2],2,$t);return n&&r?"boolean"!==(i=n.type).kind&&"string"!==i.kind&&"number"!==i.kind&&"null"!==i.kind&&"value"!==i.kind?e.error("Expected first argument to be of type boolean, string, number or null, but found "+Wt(n.type)+" instead"):new di(n,r):null},di.prototype.evaluate=function(t){var e,i=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==i||!n)return!1;if("boolean"!=typeof i&&"string"!=typeof i&&"number"!=typeof i)throw new ae("Expected first argument to be of type boolean, string or number, but found "+Wt(ne(i))+" instead.");if(e=n,!Array.isArray(e)&&"string"!=typeof e)throw new ae("Expected second argument to be of type array or string, but found "+Wt(ne(n))+" instead.");return 0<=n.indexOf(i)},di.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},di.prototype.outputDefined=function(){return!0},di.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var fi=function(t,e,i,n,r,o){this.inputType=t,this.type=e,this.input=i,this.cases=n,this.outputs=r,this.otherwise=o};fi.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return u.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return u.error("Numeric branch labels must be integer values.");if(i){if(u.checkSubtype(i,ne(p)))return null}else i=ne(p);if(void 0!==r[String(p)])return u.error("Branch labels must be unique.");r[String(p)]=o.length}var d=e.parse(l,a,n);if(!d)return null;n=n||d.type,o.push(d)}var f=e.parse(t[1],1,$t);if(!f)return null;var m=e.parse(t[t.length-1],t.length-1,n);return m?"value"!==f.type.kind&&e.concat(1).checkSubtype(i,f.type)?null:new fi(i,n,f,r,o,m):null},fi.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(ne(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},fi.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},fi.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},fi.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],n={},r=0,o=Object.keys(this.cases).sort();r<o.length;r+=1){var a=o[r];void 0===(h=n[this.cases[a]])?(n[this.cases[a]]=i.length,i.push([this.cases[a],[a]])):i[h][1].push(a)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,u=i;l<u.length;l+=1){var c=u[l],h=c[0],p=c[1];t.push(1===p.length?s(p[0]):p.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var mi=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};function gi(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function vi(t,e,i,n){return 0===n.compare(e,i)}function yi(s,l,u){var c="=="!==s&&"!="!==s;return function(){function a(t,e,i){this.type=Bt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return a.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var i=t[0],n=e.parse(t[1],1,$t);if(!n)return null;if(!gi(i,n.type))return e.concat(1).error('"'+i+"\" comparisons are not supported for type '"+Wt(n.type)+"'.");var r=e.parse(t[2],2,$t);if(!r)return null;if(!gi(i,r.type))return e.concat(2).error('"'+i+"\" comparisons are not supported for type '"+Wt(r.type)+"'.");if(n.type.kind!==r.type.kind&&"value"!==n.type.kind&&"value"!==r.type.kind)return e.error("Cannot compare types '"+Wt(n.type)+"' and '"+Wt(r.type)+"'.");c&&("value"===n.type.kind&&"value"!==r.type.kind?n=new le(r.type,[n]):"value"!==n.type.kind&&"value"===r.type.kind&&(r=new le(n.type,[r])));var o=null;if(4===t.length){if("string"!==n.type.kind&&"string"!==r.type.kind&&"value"!==n.type.kind&&"value"!==r.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(o=e.parse(t[3],3,Ut)))return null}return new a(n,r,o)},a.prototype.evaluate=function(t){var e=this.lhs.evaluate(t),i=this.rhs.evaluate(t);if(c&&this.hasUntypedArgument){var n=ne(e),r=ne(i);if(n.kind!==r.kind||"string"!==n.kind&&"number"!==n.kind)throw new ae('Expected arguments for "'+s+'" to be (string, string) or (number, number), but found ('+n.kind+", "+r.kind+") instead.")}if(this.collator&&!c&&this.hasUntypedArgument){var o=ne(e),a=ne(i);if("string"!==o.kind||"string"!==a.kind)return l(t,e,i)}return this.collator?u(t,e,i,this.collator.evaluate(t)):l(t,e,i)},a.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var e=[s];return this.eachChild(function(t){e.push(t.serialize())}),e},a}()}mi.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var n=[],r=1;r<t.length-1;r+=2){var o=e.parse(t[r],r,Bt);if(!o)return null;var a=e.parse(t[r+1],r+1,i);if(!a)return null;n.push([o,a]),i=i||a.type}var s=e.parse(t[t.length-1],t.length-1,i);return s?new mi(i,n,s):null},mi.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var n=i[e],r=n[1];if(n[0].evaluate(t))return r.evaluate(t)}return this.otherwise.evaluate(t)},mi.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var n=i[e],r=n[1];t(n[0]),t(r)}t(this.otherwise)},mi.prototype.outputDefined=function(){return this.branches.every(function(t){return t[1].outputDefined()})&&this.otherwise.outputDefined()},mi.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var _i=yi("==",function(t,e,i){return e===i},vi),bi=yi("!=",function(t,e,i){return e!==i},function(t,e,i,n){return!vi(0,e,i,n)}),xi=yi("<",function(t,e,i){return e<i},function(t,e,i,n){return n.compare(e,i)<0}),wi=yi(">",function(t,e,i){return i<e},function(t,e,i,n){return 0<n.compare(e,i)}),Si=yi("<=",function(t,e,i){return e<=i},function(t,e,i,n){return n.compare(e,i)<=0}),Ti=yi(">=",function(t,e,i){return i<=e},function(t,e,i,n){return 0<=n.compare(e,i)}),Ci=function(t,e,i,n,r){this.type=Ft,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=r};Ci.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Rt);if(!i)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var r=null;if(n.locale&&!(r=e.parse(n.locale,1,Ft)))return null;var o=null;if(n.currency&&!(o=e.parse(n.currency,1,Ft)))return null;var a=null;if(n["min-fraction-digits"]&&!(a=e.parse(n["min-fraction-digits"],1,Rt)))return null;var s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,Rt))?null:new Ci(i,r,o,a,s)},Ci.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Ci.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Ci.prototype.outputDefined=function(){return!1},Ci.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Ei=function(t){this.type=Rt,this.input=t};Ei.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+Wt(i.type)+" instead."):new Ei(i):null},Ei.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ae("Expected value to be of type string or array, but found "+Wt(ne(e))+" instead.")},Ei.prototype.eachChild=function(t){t(this.input)},Ei.prototype.outputDefined=function(){return!1},Ei.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ki={"==":_i,"!=":bi,">":wi,"<":xi,">=":Ti,"<=":Si,array:le,at:pi,boolean:le,case:mi,coalesce:ci,collator:ge,format:ue,image:ce,in:di,interpolate:li,"interpolate-hcl":li,"interpolate-lab":li,length:Ei,let:hi,literal:oe,match:fi,number:le,"number-format":Ci,object:le,step:qe,string:le,"to-boolean":pe,"to-color":pe,"to-number":pe,"to-string":pe,var:$e,within:Fe};function Ai(t,e){var i=e[0],n=e[1],r=e[2],o=e[3];i=i.evaluate(t),n=n.evaluate(t),r=r.evaluate(t);var a=o?o.evaluate(t):1,s=ee(i,n,r,a);if(s)throw new ae(s);return new Yt(i/255*a,n/255*a,r/255*a,a)}function Ii(t,e){return t in e}function Pi(t,e){var i=e[t];return void 0===i?null:i}function zi(t){return{type:t}}function Mi(t){return{result:"success",value:t}}function Di(t){return{result:"error",value:t}}function Li(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Oi(t){return!!t.expression&&-1<t.expression.parameters.indexOf("zoom")}function Ri(t){return!!t.expression&&t.expression.interpolated}function Fi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Bi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Ni(t){return t}function ji(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function $i(t,e,i,n,r){return ji(typeof i===r?n[i]:void 0,t.default,e.default)}function Ui(t,e,i){if("number"!==Fi(i))return ji(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];var r=Ve(t.stops.map(function(t){return t[0]}),i);return t.stops[r][1]}function Vi(t,e,i){var n=void 0!==t.base?t.base:1;if("number"!==Fi(i))return ji(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];var o,a,s,l,u,c=Ve(t.stops.map(function(t){return t[0]}),i),h=(o=i,a=n,s=t.stops[c][0],l=t.stops[c+1][0]-s,u=o-s,0===l?0:1===a?u/l:(Math.pow(a,u)-1)/(Math.pow(a,l)-1)),p=t.stops[c][1],d=t.stops[c+1][1],f=We[e.type]||Ni;if(t.colorSpace&&"rgb"!==t.colorSpace){var m=si[t.colorSpace];f=function(t,e){return m.reverse(m.interpolate(m.forward(t),m.forward(e),h))}}return"function"==typeof p.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=p.evaluate.apply(void 0,t),n=d.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==n)return f(i,n,h)}}:f(p,d,h)}function qi(t,e,i){return"color"===e.type?i=Yt.parse(i):"formatted"===e.type?i=Qt.fromString(i.toString()):"resolvedImage"===e.type?i=te.fromString(i.toString()):Fi(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),ji(i,t.default,e.default)}me.register(ki,{error:[{kind:"error"},[Ft],function(t,e){throw new ae(e[0].evaluate(t))}],typeof:[Ft,[$t],function(t,e){return Wt(ne(e[0].evaluate(t)))}],"to-rgba":[Ht(Rt,4),[Nt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Nt,[Rt,Rt,Rt],Ai],rgba:[Nt,[Rt,Rt,Rt,Rt],Ai],has:{type:Bt,overloads:[[[Ft],function(t,e){return Ii(e[0].evaluate(t),t.properties())}],[[Ft,jt],function(t,e){var i=e[1];return Ii(e[0].evaluate(t),i.evaluate(t))}]]},get:{type:$t,overloads:[[[Ft],function(t,e){return Pi(e[0].evaluate(t),t.properties())}],[[Ft,jt],function(t,e){var i=e[1];return Pi(e[0].evaluate(t),i.evaluate(t))}]]},"feature-state":[$t,[Ft],function(t,e){return Pi(e[0].evaluate(t),t.featureState||{})}],properties:[jt,[],function(t){return t.properties()}],"geometry-type":[Ft,[],function(t){return t.geometryType()}],id:[$t,[],function(t){return t.id()}],zoom:[Rt,[],function(t){return t.globals.zoom}],"heatmap-density":[Rt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Rt,[],function(t){return t.globals.lineProgress||0}],accumulated:[$t,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Rt,zi(Rt),function(t,e){for(var i=0,n=0,r=e;n<r.length;n+=1)i+=r[n].evaluate(t);return i}],"*":[Rt,zi(Rt),function(t,e){for(var i=1,n=0,r=e;n<r.length;n+=1)i*=r[n].evaluate(t);return i}],"-":{type:Rt,overloads:[[[Rt,Rt],function(t,e){var i=e[1];return e[0].evaluate(t)-i.evaluate(t)}],[[Rt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Rt,[Rt,Rt],function(t,e){var i=e[1];return e[0].evaluate(t)/i.evaluate(t)}],"%":[Rt,[Rt,Rt],function(t,e){var i=e[1];return e[0].evaluate(t)%i.evaluate(t)}],ln2:[Rt,[],function(){return Math.LN2}],pi:[Rt,[],function(){return Math.PI}],e:[Rt,[],function(){return Math.E}],"^":[Rt,[Rt,Rt],function(t,e){var i=e[1];return Math.pow(e[0].evaluate(t),i.evaluate(t))}],sqrt:[Rt,[Rt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Rt,[Rt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Rt,[Rt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Rt,[Rt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Rt,[Rt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Rt,[Rt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Rt,[Rt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Rt,[Rt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Rt,[Rt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Rt,[Rt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Rt,zi(Rt),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[Rt,zi(Rt),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[Rt,[Rt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Rt,[Rt],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Rt,[Rt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Rt,[Rt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Bt,[Ft,$t],function(t,e){var i=e[0],n=e[1];return t.properties()[i.value]===n.value}],"filter-id-==":[Bt,[$t],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[Bt,[Ft],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[Bt,[Ft,$t],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],o=n.value;return typeof r==typeof o&&r<o}],"filter-id-<":[Bt,[$t],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&n<r}],"filter->":[Bt,[Ft,$t],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],o=n.value;return typeof r==typeof o&&o<r}],"filter-id->":[Bt,[$t],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&r<n}],"filter-<=":[Bt,[Ft,$t],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],o=n.value;return typeof r==typeof o&&r<=o}],"filter-id-<=":[Bt,[$t],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&n<=r}],"filter->=":[Bt,[Ft,$t],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],o=n.value;return typeof r==typeof o&&o<=r}],"filter-id->=":[Bt,[$t],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&r<=n}],"filter-has":[Bt,[$t],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Bt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Bt,[Ht(Ft)],function(t,e){return 0<=e[0].value.indexOf(t.geometryType())}],"filter-id-in":[Bt,[Ht($t)],function(t,e){return 0<=e[0].value.indexOf(t.id())}],"filter-in-small":[Bt,[Ft,Ht($t)],function(t,e){var i=e[0];return 0<=e[1].value.indexOf(t.properties()[i.value])}],"filter-in-large":[Bt,[Ft,Ht($t)],function(t,e){var i=e[0],n=e[1];return function(t,e,i,n){for(;i<=n;){var r=i+n>>1;if(e[r]===t)return!0;e[r]>t?n=r-1:i=r+1}return!1}(t.properties()[i.value],n.value,0,n.value.length-1)}],all:{type:Bt,overloads:[[[Bt,Bt],function(t,e){var i=e[1];return e[0].evaluate(t)&&i.evaluate(t)}],[zi(Bt),function(t,e){for(var i=0,n=e;i<n.length;i+=1)if(!n[i].evaluate(t))return!1;return!0}]]},any:{type:Bt,overloads:[[[Bt,Bt],function(t,e){var i=e[1];return e[0].evaluate(t)||i.evaluate(t)}],[zi(Bt),function(t,e){for(var i=0,n=e;i<n.length;i+=1)if(n[i].evaluate(t))return!0;return!1}]]},"!":[Bt,[Bt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Bt,[Ft],function(t,e){var i=t.globals&&t.globals.isSupportedScript;return!i||i(e[0].evaluate(t))}],upcase:[Ft,[Ft],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Ft,[Ft],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Ft,zi($t),function(e,t){return t.map(function(t){return re(t.evaluate(e))}).join("")}],"resolved-locale":[Ft,[Ut],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Hi=function(t,e){var i;this.expression=t,this._warningHistory={},this._evaluator=new fe,this._defaultValue=e?"color"===(i=e).type&&Bi(i.default)?new Yt(0,0,0,0):"color"===i.type?Yt.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function Wi(t){return Array.isArray(t)&&0<t.length&&"string"==typeof t[0]&&t[0]in ki}function Zi(t,e){var i,n,r=new Ue(ki,[],e?(n={color:Nt,string:Ft,number:Rt,enum:Ft,boolean:Bt,formatted:Vt,resolvedImage:qt},"array"===(i=e).type?Ht(n[i.value]||$t,i.length):n[i.type]):void 0),o=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return o?Mi(new Hi(o,e)):Di(r.errors)}Hi.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,r,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Hi.prototype.evaluate=function(t,e,i,n,r,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ae("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Gi=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Ne(e.expression)};Gi.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,o)},Gi.prototype.evaluate=function(t,e,i,n,r,o){return this._styleExpression.evaluate(t,e,i,n,r,o)};var Xi=function(t,e,i,n){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Ne(e.expression),this.interpolationType=n};function Yi(t,e){if("error"===(t=Zi(t,e)).result)return t;var i=t.value.expression,n=Be(i);if(!n&&!Li(e))return Di([new Dt("","data expressions not supported")]);var r=je(i,["zoom"]);if(!r&&!Oi(e))return Di([new Dt("","zoom expressions not supported")]);var o=function i(t){var n=null;if(t instanceof hi)n=i(t.result);else if(t instanceof ci)for(var e=0,r=t.args;e<r.length&&!(n=i(r[e]));e+=1);else(t instanceof qe||t instanceof li)&&t.input instanceof me&&"zoom"===t.input.name&&(n=t);return n instanceof Dt||t.eachChild(function(t){var e=i(t);e instanceof Dt?n=e:!n&&e?n=new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&e&&n!==e&&(n=new Dt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}(i);return o||r?o instanceof Dt?Di([o]):o instanceof li&&!Ri(e)?Di([new Dt("",'"interpolate" expressions cannot be used with this property')]):Mi(o?new Xi(n?"camera":"composite",t.value,o.labels,o instanceof li?o.interpolation:void 0):new Gi(n?"constant":"source",t.value)):Di([new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Xi.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,o)},Xi.prototype.evaluate=function(t,e,i,n,r,o){return this._styleExpression.evaluate(t,e,i,n,r,o)},Xi.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?li.interpolationFactor(this.interpolationType,t,e,i):0};var Ki=function(t,e){this._parameters=t,this._specification=e,Pt(this,function t(n,r){var o,a,s,e="color"===r.type,i=n.stops&&"object"==typeof n.stops[0][0],l=i||!(i||void 0!==n.property),u=n.type||(Ri(r)?"exponential":"interval");if(e&&((n=Pt({},n)).stops&&(n.stops=n.stops.map(function(t){return[t[0],Yt.parse(t[1])]})),n.default=Yt.parse(n.default?n.default:r.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!si[n.colorSpace])throw new Error("Unknown color space: "+n.colorSpace);if("exponential"===u)o=Vi;else if("interval"===u)o=Ui;else if("categorical"===u){o=$i,a=Object.create(null);for(var c=0,h=n.stops;c<h.length;c+=1){var p=h[c];a[p[0]]=p[1]}s=typeof n.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');o=qi}if(i){for(var d={},f=[],m=0;m<n.stops.length;m++){var g=n.stops[m],v=g[0].zoom;void 0===d[v]&&(d[v]={zoom:v,type:n.type,property:n.property,default:n.default,stops:[]},f.push(v)),d[v].stops.push([g[0].value,g[1]])}for(var y=[],_=0,b=f;_<b.length;_+=1){var x=b[_];y.push([d[x].zoom,t(d[x],r)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:li.interpolationFactor.bind(void 0,w),zoomStops:y.map(function(t){return t[0]}),evaluate:function(t,e){var i=t.zoom;return Vi({stops:y,base:n.base},r,i).evaluate(i,e)}}}if(l){var S="exponential"===u?{name:"exponential",base:void 0!==n.base?n.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:li.interpolationFactor.bind(void 0,S),zoomStops:n.stops.map(function(t){return t[0]}),evaluate:function(t){return o(n,r,t.zoom,a,s)}}}return{kind:"source",evaluate:function(t,e){var i=e&&e.properties?e.properties[n.property]:void 0;return void 0===i?ji(n.default,r.default):o(n,r,i,a,s)}}}(this._parameters,this._specification))};function Ji(t){var e=t.key,i=t.value,n=t.valueSpec||{},r=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=Fi(i);if("object"!==l)return[new At(e,i,"object expected, "+l+" found")];for(var u in i){var c=u.split(".")[0],h=n[c]||n["*"],p=void 0;if(r[c])p=r[c];else if(n[c])p=Tn;else if(r["*"])p=r["*"];else{if(!n["*"]){s.push(new At(e,i[u],'unknown property "'+u+'"'));continue}p=Tn}s=s.concat(p({key:(e?e+".":e)+u,value:i[u],valueSpec:h,style:o,styleSpec:a,object:i,objectKey:u},i))}for(var d in n)r[d]||n[d].required&&void 0===n[d].default&&void 0===i[d]&&s.push(new At(e,i,'missing required property "'+d+'"'));return s}function Qi(t){var e=t.value,i=t.valueSpec,n=t.style,r=t.styleSpec,o=t.key,a=t.arrayElementValidator||Tn;if("array"!==Fi(e))return[new At(o,e,"array expected, "+Fi(e)+" found")];if(i.length&&e.length!==i.length)return[new At(o,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new At(o,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var s={type:i.value,values:i.values};r.$version<7&&(s.function=i.function),"object"===Fi(i.value)&&(s=i.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:n,styleSpec:r,key:o+"["+u+"]"}));return l}function tn(t){var e=t.key,i=t.value,n=t.valueSpec,r=Fi(i);return"number"===r&&i!=i&&(r="NaN"),"number"!==r?[new At(e,i,"number expected, "+r+" found")]:"minimum"in n&&i<n.minimum?[new At(e,i,i+" is less than the minimum value "+n.minimum)]:"maximum"in n&&i>n.maximum?[new At(e,i,i+" is greater than the maximum value "+n.maximum)]:[]}function en(t){var a,s,r,l=t.valueSpec,u=zt(t.value.type),c={},e="categorical"!==u&&void 0===t.value.property,i=!e,o="array"===Fi(t.value.stops)&&"array"===Fi(t.value.stops[0])&&"object"===Fi(t.value.stops[0][0]),n=Ji({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===u)return[new At(t.key,t.value,'identity function may not have a "stops" property')];var e=[],i=t.value;return e=e.concat(Qi({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Fi(i)&&0===i.length&&e.push(new At(t.key,i,"array must have at least one stop")),e},default:function(t){return Tn({key:t.key,value:t.value,valueSpec:l,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===u&&e&&n.push(new At(t.key,t.value,'missing required property "property"')),"identity"===u||t.value.stops||n.push(new At(t.key,t.value,'missing required property "stops"')),"exponential"===u&&t.valueSpec.expression&&!Ri(t.valueSpec)&&n.push(new At(t.key,t.value,"exponential functions not supported")),8<=t.styleSpec.$version&&(i&&!Li(t.valueSpec)?n.push(new At(t.key,t.value,"property functions not supported")):e&&!Oi(t.valueSpec)&&n.push(new At(t.key,t.value,"zoom functions not supported"))),"categorical"!==u&&!o||void 0!==t.value.property||n.push(new At(t.key,t.value,'"property" property is required')),n;function h(t){var e=[],i=t.value,n=t.key;if("array"!==Fi(i))return[new At(n,i,"array expected, "+Fi(i)+" found")];if(2!==i.length)return[new At(n,i,"array length 2 expected, length "+i.length+" found")];if(o){if("object"!==Fi(i[0]))return[new At(n,i,"object expected, "+Fi(i[0])+" found")];if(void 0===i[0].zoom)return[new At(n,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new At(n,i,"object stop key must have value")];if(r&&r>zt(i[0].zoom))return[new At(n,i[0].zoom,"stop zoom values must appear in ascending order")];zt(i[0].zoom)!==r&&(r=zt(i[0].zoom),s=void 0,c={}),e=e.concat(Ji({key:n+"[0]",value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:tn,value:p}}))}else e=e.concat(p({key:n+"[0]",value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return Wi(Mt(i[1]))?e.concat([new At(n+"[1]",i[1],"expressions are not allowed in function stops.")]):e.concat(Tn({key:n+"[1]",value:i[1],valueSpec:l,style:t.style,styleSpec:t.styleSpec}))}function p(t,e){var i=Fi(t.value),n=zt(t.value),r=null!==t.value?t.value:e;if(a){if(i!==a)return[new At(t.key,r,i+" stop domain type must match previous stop domain type "+a)]}else a=i;if("number"!==i&&"string"!==i&&"boolean"!==i)return[new At(t.key,r,"stop domain value must be a number, string, or boolean")];if("number"!==i&&"categorical"!==u){var o="number expected, "+i+" found";return Li(l)&&void 0===u&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new At(t.key,r,o)]}return"categorical"!==u||"number"!==i||isFinite(n)&&Math.floor(n)===n?"categorical"!==u&&"number"===i&&void 0!==s&&n<s?[new At(t.key,r,"stop domain values must appear in ascending order")]:(s=n,"categorical"===u&&n in c?[new At(t.key,r,"stop domain values must be unique")]:(c[n]=!0,[])):[new At(t.key,r,"integer expected, found "+n)]}}function nn(e){var t=("property"===e.expressionContext?Yi:Zi)(Mt(e.value),e.valueSpec);if("error"===t.result)return t.value.map(function(t){return new At(""+e.key+t.key,e.value,t.message)});var i=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!i.outputDefined())return[new At(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Ne(i))return[new At(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Ne(i))return[new At(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!je(i,["zoom","feature-state"]))return[new At(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Be(i))return[new At(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rn(t){var e=t.key,i=t.value,n=t.valueSpec,r=[];return Array.isArray(n.values)?-1===n.values.indexOf(zt(i))&&r.push(new At(e,i,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(n.values).indexOf(zt(i))&&r.push(new At(e,i,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(i)+" found")),r}function on(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return 2<=t.length&&"$id"!==t[1]&&"$type"!==t[1];case"in":return 3<=t.length&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var n=i[e];if(!on(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}Ki.deserialize=function(t){return new Ki(t._parameters,t._specification)};var an={type:"boolean",default:!(Ki.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sn(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};on(t)||(t=un(t));var n=Zi(t,an);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return{filter:function(t,e,i){return n.value.evaluate(t,e,{},i)},needGeometry:Array.isArray(t)&&0!==t.length&&"within"===t[0]}}function ln(t,e){return t<e?-1:e<t?1:0}function un(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?cn(t[1],t[2],"=="):"!="===i?dn(cn(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?cn(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(un))):"all"===i?["all"].concat(t.slice(1).map(un)):"none"===i?["all"].concat(t.slice(1).map(un).map(dn)):"in"===i?hn(t[1],t.slice(2)):"!in"===i?dn(hn(t[1],t.slice(2))):"has"===i?pn(t[1]):"!has"!==i||dn(pn(t[1]))}function cn(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function hn(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return 200<e.length&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(ln)]]:["filter-in-small",t,["literal",e]]}}function pn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function dn(t){return["!",t]}function fn(t){return on(Mt(t.value))?nn(Pt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var i=e.value,n=e.key;if("array"!==Fi(i))return[new At(n,i,"array expected, "+Fi(i)+" found")];var r,o=e.styleSpec,a=[];if(i.length<1)return[new At(n,i,"filter array must have at least 1 element")];switch(a=a.concat(rn({key:n+"[0]",value:i[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),zt(i[0])){case"<":case"<=":case">":case">=":2<=i.length&&"$type"===zt(i[1])&&a.push(new At(n,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&a.push(new At(n,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":2<=i.length&&"string"!==(r=Fi(i[1]))&&a.push(new At(n+"[1]",i[1],"string expected, "+r+" found"));for(var s=2;s<i.length;s++)r=Fi(i[s]),"$type"===zt(i[1])?a=a.concat(rn({key:n+"["+s+"]",value:i[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new At(n+"["+s+"]",i[s],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var l=1;l<i.length;l++)a=a.concat(t({key:n+"["+l+"]",value:i[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Fi(i[1]),2!==i.length?a.push(new At(n,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==r&&a.push(new At(n+"[1]",i[1],"string expected, "+r+" found"))}return a}(t)}function mn(t,e){var i=t.key,n=t.style,r=t.styleSpec,o=t.value,a=t.objectKey,s=r[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Tn({key:i,value:o,valueSpec:r.transition,style:n,styleSpec:r});var u,c=t.valueSpec||s[a];if(!c)return[new At(i,o,'unknown property "'+a+'"')];if("string"===Fi(o)&&Li(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new At(i,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&n&&!n.glyphs&&h.push(new At(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Bi(Mt(o))&&"identity"===zt(o.type)&&h.push(new At(i,o,'"text-font" does not support identity functions'))),h.concat(Tn({key:t.key,value:o,valueSpec:c,style:n,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function gn(t){return mn(t,"paint")}function vn(t){return mn(t,"layout")}function yn(t){var e=[],i=t.value,n=t.key,r=t.style,o=t.styleSpec;i.type||i.ref||e.push(new At(n,i,'either "type" or "ref" is required'));var a,s=zt(i.type),l=zt(i.ref);if(i.id)for(var u=zt(i.id),c=0;c<t.arrayIndex;c++){var h=r.layers[c];zt(h.id)===u&&e.push(new At(n,i.id,'duplicate layer id "'+i.id+'", previously used at line '+h.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(t){t in i&&e.push(new At(n,i[t],'"'+t+'" is prohibited for ref layers'))}),r.layers.forEach(function(t){zt(t.id)===l&&(a=t)}),a?a.ref?e.push(new At(n,i.ref,"ref cannot reference another ref layer")):s=zt(a.type):e.push(new At(n,i.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(i.source){var p=r.sources&&r.sources[i.source],d=p&&zt(p.type);p?"vector"===d&&"raster"===s?e.push(new At(n,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===d&&"raster"!==s?e.push(new At(n,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==d||i["source-layer"]?"raster-dem"===d&&"hillshade"!==s?e.push(new At(n,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===d&&p.lineMetrics||e.push(new At(n,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new At(n,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new At(n,i.source,'source "'+i.source+'" not found'))}else e.push(new At(n,i,'missing required property "source"'));return e=e.concat(Ji({key:n,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Tn({key:n+".type",value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:fn,layout:function(t){return Ji({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return vn(Pt({layerType:s},t))}}})},paint:function(t){return Ji({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return gn(Pt({layerType:s},t))}}})}}}))}function _n(t){var e=t.value,i=t.key,n=Fi(e);return"string"!==n?[new At(i,e,"string expected, "+n+" found")]:[]}var bn={promoteId:function(t){var e=t.key,i=t.value;if("string"===Fi(i))return _n({key:e,value:i});var n=[];for(var r in i)n.push.apply(n,_n({key:e+"."+r,value:i[r]}));return n}};function xn(t){var e=t.value,i=t.key,n=t.styleSpec,r=t.style;if(!e.type)return[new At(i,e,'"type" is required')];var o,a=zt(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Ji({key:i,value:e,valueSpec:n["source_"+a.replace("-","_")],style:t.style,styleSpec:n,objectElementValidators:bn});case"geojson":if(o=Ji({key:i,value:e,valueSpec:n.source_geojson,style:r,styleSpec:n,objectElementValidators:bn}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],u=l[0],c="string"==typeof u?[u,["accumulated"],["get",s]]:u;o.push.apply(o,nn({key:i+"."+s+".map",value:l[1],expressionContext:"cluster-map"})),o.push.apply(o,nn({key:i+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return Ji({key:i,value:e,valueSpec:n.source_video,style:r,styleSpec:n});case"image":return Ji({key:i,value:e,valueSpec:n.source_image,style:r,styleSpec:n});case"canvas":return[new At(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rn({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:n})}}function wn(t){var e=t.value,i=t.styleSpec,n=i.light,r=t.style,o=[],a=Fi(e);if(void 0===e)return o;if("object"!==a)return o.concat([new At("light",e,"object expected, "+a+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=o.concat(l&&n[l[1]]&&n[l[1]].transition?Tn({key:s,value:e[s],valueSpec:i.transition,style:r,styleSpec:i}):n[s]?Tn({key:s,value:e[s],valueSpec:n[s],style:r,styleSpec:i}):[new At(s,e[s],'unknown property "'+s+'"')])}return o}var Sn={"*":function(){return[]},array:Qi,boolean:function(t){var e=t.value,i=t.key,n=Fi(e);return"boolean"!==n?[new At(i,e,"boolean expected, "+n+" found")]:[]},number:tn,color:function(t){var e=t.key,i=t.value,n=Fi(i);return"string"!==n?[new At(e,i,"color expected, "+n+" found")]:null===Xt(i)?[new At(e,i,'color expected, "'+i+'" found')]:[]},constants:It,enum:rn,filter:fn,function:en,layer:yn,object:Ji,source:xn,light:wn,string:_n,formatted:function(t){return 0===_n(t).length?[]:nn(t)},resolvedImage:function(t){return 0===_n(t).length?[]:nn(t)}};function Tn(t){var e=t.value,i=t.valueSpec,n=t.styleSpec;return i.expression&&Bi(zt(e))?en(t):i.expression&&Wi(Mt(e))?nn(t):i.type&&Sn[i.type]?Sn[i.type](t):Ji(Pt({},t,{valueSpec:i.type?n[i.type]:i}))}function Cn(t){var e=t.value,i=t.key,n=_n(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new At(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new At(i,e,'"glyphs" url must include a "{range}" token'))),n}function En(t,e){void 0===e&&(e=kt);var i=[];return i=i.concat(Tn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Cn,"*":function(){return[]}}})),t.constants&&(i=i.concat(It({key:"constants",value:t.constants,style:t,styleSpec:e}))),kn(i)}function kn(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function An(i){return function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return kn(i.apply(this,t))}}En.source=An(xn),En.light=An(wn),En.layer=An(yn),En.filter=An(fn),En.paintProperty=An(gn),En.layoutProperty=An(vn);var In=En,Pn=In.light,zn=In.paintProperty,Mn=In.layoutProperty;function Dn(t,e){var i=!1;if(e&&e.length)for(var n=0,r=e;n<r.length;n+=1)t.fire(new Ct(new Error(r[n].message))),i=!0;return i}var Ln=Rn,On=3;function Rn(t,e,i){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(i=r[2]);for(var o=0;o<this.d*this.d;o++){var a=r[On+o],s=r[On+o+1];n.push(a===s?null:r.subarray(a,s))}var l=r[On+n.length+1];this.keys=r.subarray(r[On+n.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var u=0;u<this.d*this.d;u++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var c=i/e*t;this.min=-c,this.max=t+c}Rn.prototype.insert=function(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)},Rn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Rn.prototype._insertCell=function(t,e,i,n,r,o){this.cells[r].push(o)},Rn.prototype.query=function(t,e,i,n,r){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=i&&a<=n&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,i,n,this._queryCell,s,{},r),s},Rn.prototype._queryCell=function(t,e,i,n,r,o,a,s){var l=this.cells[r];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===a[p]){var d=4*p;(s?s(c[d+0],c[d+1],c[d+2],c[d+3]):t<=c[d+2]&&e<=c[d+3]&&i>=c[d+0]&&n>=c[d+1])?(a[p]=!0,o.push(u[p])):a[p]=!1}}},Rn.prototype._forEachCell=function(t,e,i,n,r,o,a,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(i),h=this._convertToCellCoord(n),p=l;p<=c;p++)for(var d=u;d<=h;d++){var f=this.d*d+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&r.call(this,t,e,i,n,f,o,a,s))return}},Rn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Rn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Rn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=On+this.cells.length+1+1,i=0,n=0;n<this.cells.length;n++)i+=this.cells[n].length;var r=new Int32Array(e+i+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];r[On+a]=o,r.set(s,o),o+=s.length}return r[On+t.length]=o,r.set(this.keys,o),r[On+t.length+1]=o+=this.keys.length,r.set(this.bboxes,o),o+=this.bboxes.length,r.buffer};var Fn=self.ImageData,Bn=self.ImageBitmap,Nn={};function jn(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Nn[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var $n in jn("Object",Object),Ln.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},Ln.deserialize=function(t){return new Ln(t.buffer)},jn("Grid",Ln),jn("Color",Yt),jn("Error",Error),jn("ResolvedImage",te),jn("StylePropertyFunction",Ki),jn("StyleExpression",Hi,{omit:["_evaluator"]}),jn("ZoomDependentExpression",Xi),jn("ZoomConstantExpression",Gi),jn("CompoundExpression",me,{omit:["_evaluate"]}),ki)ki[$n]._classRegistryKey||jn("Expression_"+$n,ki[$n]);function Un(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Vn(t){return Bn&&t instanceof Bn}function qn(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Un(t)||Vn(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof Fn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],r=0,o=t;r<o.length;r+=1)n.push(qn(o[r],e));return n}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var u in t)if(t.hasOwnProperty(u)&&!(0<=Nn[s].omit.indexOf(u))){var c=t[u];l[u]=0<=Nn[s].shallow.indexOf(u)?c:qn(c,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}throw new Error("can't serialize object of type "+typeof t)}function Hn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Un(t)||Vn(t)||ArrayBuffer.isView(t)||t instanceof Fn)return t;if(Array.isArray(t))return t.map(Hn);if("object"==typeof t){var e=t.$name||"Object",i=Nn[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var n=Object.create(i.prototype),r=0,o=Object.keys(t);r<o.length;r+=1){var a=o[r];if("$name"!==a){var s=t[a];n[a]=0<=Nn[e].shallow.indexOf(a)?s:Hn(s)}}return n}throw new Error("can't deserialize object of type "+typeof t)}var Wn=function(){this.first=!0};Wn.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var Zn={"Latin-1 Supplement":function(t){return 128<=t&&t<=255},Arabic:function(t){return 1536<=t&&t<=1791},"Arabic Supplement":function(t){return 1872<=t&&t<=1919},"Arabic Extended-A":function(t){return 2208<=t&&t<=2303},"Hangul Jamo":function(t){return 4352<=t&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return 5120<=t&&t<=5759},Khmer:function(t){return 6016<=t&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return 6320<=t&&t<=6399},"General Punctuation":function(t){return 8192<=t&&t<=8303},"Letterlike Symbols":function(t){return 8448<=t&&t<=8527},"Number Forms":function(t){return 8528<=t&&t<=8591},"Miscellaneous Technical":function(t){return 8960<=t&&t<=9215},"Control Pictures":function(t){return 9216<=t&&t<=9279},"Optical Character Recognition":function(t){return 9280<=t&&t<=9311},"Enclosed Alphanumerics":function(t){return 9312<=t&&t<=9471},"Geometric Shapes":function(t){return 9632<=t&&t<=9727},"Miscellaneous Symbols":function(t){return 9728<=t&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return 11008<=t&&t<=11263},"CJK Radicals Supplement":function(t){return 11904<=t&&t<=12031},"Kangxi Radicals":function(t){return 12032<=t&&t<=12255},"Ideographic Description Characters":function(t){return 12272<=t&&t<=12287},"CJK Symbols and Punctuation":function(t){return 12288<=t&&t<=12351},Hiragana:function(t){return 12352<=t&&t<=12447},Katakana:function(t){return 12448<=t&&t<=12543},Bopomofo:function(t){return 12544<=t&&t<=12591},"Hangul Compatibility Jamo":function(t){return 12592<=t&&t<=12687},Kanbun:function(t){return 12688<=t&&t<=12703},"Bopomofo Extended":function(t){return 12704<=t&&t<=12735},"CJK Strokes":function(t){return 12736<=t&&t<=12783},"Katakana Phonetic Extensions":function(t){return 12784<=t&&t<=12799},"Enclosed CJK Letters and Months":function(t){return 12800<=t&&t<=13055},"CJK Compatibility":function(t){return 13056<=t&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return 13312<=t&&t<=19903},"Yijing Hexagram Symbols":function(t){return 19904<=t&&t<=19967},"CJK Unified Ideographs":function(t){return 19968<=t&&t<=40959},"Yi Syllables":function(t){return 40960<=t&&t<=42127},"Yi Radicals":function(t){return 42128<=t&&t<=42191},"Hangul Jamo Extended-A":function(t){return 43360<=t&&t<=43391},"Hangul Syllables":function(t){return 44032<=t&&t<=55215},"Hangul Jamo Extended-B":function(t){return 55216<=t&&t<=55295},"Private Use Area":function(t){return 57344<=t&&t<=63743},"CJK Compatibility Ideographs":function(t){return 63744<=t&&t<=64255},"Arabic Presentation Forms-A":function(t){return 64336<=t&&t<=65023},"Vertical Forms":function(t){return 65040<=t&&t<=65055},"CJK Compatibility Forms":function(t){return 65072<=t&&t<=65103},"Small Form Variants":function(t){return 65104<=t&&t<=65135},"Arabic Presentation Forms-B":function(t){return 65136<=t&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return 65280<=t&&t<=65519}};function Gn(t){for(var e=0,i=t;e<i.length;e+=1)if(Xn(i[e].charCodeAt(0)))return!0;return!1}function Xn(t){return!(746!==t&&747!==t&&(t<4352||!(Zn["Bopomofo Extended"](t)||Zn.Bopomofo(t)||Zn["CJK Compatibility Forms"](t)&&!(65097<=t&&t<=65103)||Zn["CJK Compatibility Ideographs"](t)||Zn["CJK Compatibility"](t)||Zn["CJK Radicals Supplement"](t)||Zn["CJK Strokes"](t)||!(!Zn["CJK Symbols and Punctuation"](t)||12296<=t&&t<=12305||12308<=t&&t<=12319||12336===t)||Zn["CJK Unified Ideographs Extension A"](t)||Zn["CJK Unified Ideographs"](t)||Zn["Enclosed CJK Letters and Months"](t)||Zn["Hangul Compatibility Jamo"](t)||Zn["Hangul Jamo Extended-A"](t)||Zn["Hangul Jamo Extended-B"](t)||Zn["Hangul Jamo"](t)||Zn["Hangul Syllables"](t)||Zn.Hiragana(t)||Zn["Ideographic Description Characters"](t)||Zn.Kanbun(t)||Zn["Kangxi Radicals"](t)||Zn["Katakana Phonetic Extensions"](t)||Zn.Katakana(t)&&12540!==t||!(!Zn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||65306<=t&&t<=65310||65339===t||65341===t||65343===t||65371<=t&&t<=65503||65507===t||65512<=t&&t<=65519)||!(!Zn["Small Form Variants"](t)||65112<=t&&t<=65118||65123<=t&&t<=65126)||Zn["Unified Canadian Aboriginal Syllabics"](t)||Zn["Unified Canadian Aboriginal Syllabics Extended"](t)||Zn["Vertical Forms"](t)||Zn["Yijing Hexagram Symbols"](t)||Zn["Yi Syllables"](t)||Zn["Yi Radicals"](t))))}function Yn(t){return!(Xn(t)||(e=t,Zn["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Zn["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Zn["Letterlike Symbols"](e)||Zn["Number Forms"](e)||Zn["Miscellaneous Technical"](e)&&(8960<=e&&e<=8967||8972<=e&&e<=8991||8996<=e&&e<=9e3||9003===e||9085<=e&&e<=9114||9150<=e&&e<=9165||9167===e||9169<=e&&e<=9179||9186<=e&&e<=9215)||Zn["Control Pictures"](e)&&9251!==e||Zn["Optical Character Recognition"](e)||Zn["Enclosed Alphanumerics"](e)||Zn["Geometric Shapes"](e)||Zn["Miscellaneous Symbols"](e)&&!(9754<=e&&e<=9759)||Zn["Miscellaneous Symbols and Arrows"](e)&&(11026<=e&&e<=11055||11088<=e&&e<=11097||11192<=e&&e<=11243)||Zn["CJK Symbols and Punctuation"](e)||Zn.Katakana(e)||Zn["Private Use Area"](e)||Zn["CJK Compatibility Forms"](e)||Zn["Small Form Variants"](e)||Zn["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||9984<=e&&e<=10087||10102<=e&&e<=10131||65532===e||65533===e));var e}function Kn(t){return 1424<=t&&t<=2303||Zn["Arabic Presentation Forms-A"](t)||Zn["Arabic Presentation Forms-B"](t)}function Jn(t){for(var e=0,i=t;e<i.length;e+=1)if(Kn(i[e].charCodeAt(0)))return!0;return!1}var Qn=null,tr="unavailable",er=null,ir=function(t){Qn&&Qn(t)};function nr(){rr.fire(new Tt("pluginStateChange",{pluginStatus:tr,pluginURL:er}))}var rr=new Et,or=function(){return tr},ar=function(){if("deferred"!==tr||!er)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");tr="loading",nr(),er&&_t({url:er},function(t){t?ir(t):(tr="loaded",nr())})},sr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===tr||null!=sr.applyArabicShaping},isLoading:function(){return"loading"===tr},setState:function(t){tr=t.pluginStatus,er=t.pluginURL},isParsed:function(){return null!=sr.applyArabicShaping&&null!=sr.processBidirectionalText&&null!=sr.processStyledBidirectionalText},getPluginURL:function(){return er}},lr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Wn,this.transition={})};lr.prototype.isSupportedScript=function(t){return function(t,e){for(var i=0,n=t;i<n.length;i+=1)if(r=n[i].charCodeAt(0),!e&&Kn(r)||2304<=r&&r<=3583||3840<=r&&r<=4255||Zn.Khmer(r))return!1;var r;return!0}(t,sr.isLoaded())},lr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},lr.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};var ur=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Bi(t))return new Ki(t,e);if(Wi(t)){var i=Yi(t,e);if("error"===i.result)throw new Error(i.value.map(function(t){return t.key+": "+t.message}).join(", "));return i.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=Yt.parse(t)),{kind:"constant",evaluate:function(){return n}}}(void 0===e?t.specification.default:e,t.specification)};ur.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ur.prototype.possiblyEvaluate=function(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)};var cr=function(t){this.property=t,this.value=new ur(t,void 0)};cr.prototype.transitioned=function(t,e){return new pr(this.property,this.value,e,d({},t.transition,this.transition),t.now)},cr.prototype.untransitioned=function(){return new pr(this.property,this.value,null,{},0)};var hr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};hr.prototype.getValue=function(t){return y(this._values[t].value.value)},hr.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new cr(this._values[t].property)),this._values[t].value=new ur(this._values[t].property,null===e?void 0:y(e))},hr.prototype.getTransition=function(t){return y(this._values[t].transition)},hr.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new cr(this._values[t].property)),this._values[t].transition=y(e)||void 0},hr.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var n=i[e],r=this.getValue(n);void 0!==r&&(t[n]=r);var o=this.getTransition(n);void 0!==o&&(t[n+"-transition"]=o)}return t},hr.prototype.transitioned=function(t,e){for(var i=new dr(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var o=r[n];i._values[o]=this._values[o].transitioned(t,e._values[o])}return i},hr.prototype.untransitioned=function(){for(var t=new dr(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var n=i[e];t._values[n]=this._values[n].untransitioned()}return t};var pr=function(t,e,i,n,r){this.property=t,this.value=e,this.begin=r+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=i)};pr.prototype.possiblyEvaluate=function(t,e,i){var n=t.now||0,r=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(n>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(n<this.begin)return o.possiblyEvaluate(t,e,i);var a=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),r,function(t){if(a<=0)return 0;if(1<=a)return 1;var e=a*a,i=e*a;return 4*(a<.5?i:3*(a-e)+i-.75)}())}return r};var dr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};dr.prototype.possiblyEvaluate=function(t,e){for(var i=new gr(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var o=r[n];i._values[o]=this._values[o].possiblyEvaluate(t,e)}return i},dr.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var fr=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};fr.prototype.getValue=function(t){return y(this._values[t].value)},fr.prototype.setValue=function(t,e){this._values[t]=new ur(this._values[t].property,null===e?void 0:y(e))},fr.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var n=i[e],r=this.getValue(n);void 0!==r&&(t[n]=r)}return t},fr.prototype.possiblyEvaluate=function(t,e){for(var i=new gr(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var o=r[n];i._values[o]=this._values[o].possiblyEvaluate(t,e)}return i};var mr=function(t,e,i){this.property=t,this.value=e,this.parameters=i};mr.prototype.isConstant=function(){return"constant"===this.value.kind},mr.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},mr.prototype.evaluate=function(t,e,i,n){return this.property.evaluate(this.value,this.parameters,t,e,i,n)};var gr=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};gr.prototype.get=function(t){return this._values[t]};var vr=function(t){this.specification=t};vr.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},vr.prototype.interpolate=function(t,e,i){var n=We[this.specification.type];return n?n(t,e,i):t};var yr=function(t,e){this.specification=t,this.overrides=e};yr.prototype.possiblyEvaluate=function(t,e,i,n){return new mr(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,n)}:t.expression,e)},yr.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new mr(this,{kind:"constant",value:void 0},t.parameters);var n=We[this.specification.type];return n?new mr(this,{kind:"constant",value:n(t.value.value,e.value.value,i)},t.parameters):t},yr.prototype.evaluate=function(t,e,i,n,r,o){return"constant"===t.kind?t.value:t.evaluate(e,i,n,r,o)};var _r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.possiblyEvaluate=function(t,e,i,n){if(void 0===t.value)return new mr(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var r=t.expression.evaluate(e,null,{},i,n),o="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,a=this._calculate(o,o,o,e);return new mr(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new mr(this,{kind:"constant",value:s},e)}return new mr(this,t.expression,e)},e.prototype.evaluate=function(t,e,i,n,r,o){if("source"===t.kind){var a=t.evaluate(e,i,n,r,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,n),t.evaluate({zoom:Math.floor(e.zoom)},i,n),t.evaluate({zoom:Math.floor(e.zoom)+1},i,n),e):t.value},e.prototype._calculate=function(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},e.prototype.interpolate=function(t){return t},e}(yr),br=function(t){this.specification=t};br.prototype.possiblyEvaluate=function(t,e,i,n){if(void 0!==t.value){if("constant"===t.expression.kind){var r=t.expression.evaluate(e,null,{},i,n);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new lr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new lr(Math.floor(e.zoom),e)),t.expression.evaluate(new lr(Math.floor(e.zoom+1),e)),e)}},br.prototype._calculate=function(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},br.prototype.interpolate=function(t){return t};var xr=function(t){this.specification=t};xr.prototype.possiblyEvaluate=function(t,e,i,n){return!!t.expression.evaluate(e,null,{},i,n)},xr.prototype.interpolate=function(){return!1};var wr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var n=this.defaultPropertyValues[e]=new ur(i,void 0),r=this.defaultTransitionablePropertyValues[e]=new cr(i);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};jn("DataDrivenProperty",yr),jn("DataConstantProperty",vr),jn("CrossFadedDataDrivenProperty",_r),jn("CrossFadedProperty",br),jn("ColorRampProperty",xr);var Sr=function(r){function t(t,e){if(r.call(this),this.id=t.id,this.type=t.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new fr(e.layout)),e.paint)){for(var i in this._transitionablePaint=new hr(e.paint),t.paint)this.setPaintProperty(i,t.paint[i],{validate:!1});for(var n in t.layout)this.setLayoutProperty(n,t.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},t.prototype.setLayoutProperty=function(t,e,i){void 0===i&&(i={}),null!=e&&this._validate(Mn,"layers."+this.id+".layout."+t,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},t.prototype.getPaintProperty=function(t){return m(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},t.prototype.setPaintProperty=function(t,e,i){if(void 0===i&&(i={}),null!=e&&this._validate(zn,"layers."+this.id+".paint."+t,t,e,i))return!1;if(m(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var n=this._transitionablePaint._values[t],r="cross-faded-data-driven"===n.property.specification["property-type"],o=n.value.isDataDriven(),a=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||r||this._handleOverridablePaintPropertyUpdate(t,a,s)},t.prototype._handleSpecialPaintPropertyUpdate=function(t){},t.prototype._handleOverridablePaintPropertyUpdate=function(t,e,i){return!1},t.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,e)},t.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),v(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},t.prototype._validate=function(t,e,i,n,r){return void 0===r&&(r={}),(!r||!1!==r.validate)&&Dn(this,t.call(In,{key:e,layerType:this.type,objectKey:i,value:n,styleSpec:kt,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof mr&&Li(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},t}(Et),Tr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Cr=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Er=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function kr(t,r){void 0===r&&(r=1);var o=0,a=0;return{members:t.map(function(t){var e=Tr[t.type].BYTES_PER_ELEMENT,i=o=Ar(o,Math.max(r,e)),n=t.components||1;return a=Math.max(a,e),o+=e*n,{name:t.name,type:t.type,components:n,offset:i}}),size:Ar(o,Math.max(a,r)),alignment:r}}function Ar(t,e){return Math.ceil(t/e)*e}Er.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Er.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Er.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Er.prototype.clear=function(){this.length=0},Er.prototype.resize=function(t){this.reserve(t),this.length=t},Er.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Er.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ir=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=i,t},e}(Er);Ir.prototype.bytesPerElement=4,jn("StructArrayLayout2i4",Ir);var Pr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)},e.prototype.emplace=function(t,e,i,n,r){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=n,this.int16[o+3]=r,t},e}(Er);Pr.prototype.bytesPerElement=8,jn("StructArrayLayout4i8",Pr);var zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n,r,o)},e.prototype.emplace=function(t,e,i,n,r,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Er);zr.prototype.bytesPerElement=12,jn("StructArrayLayout2i4i12",zr);var Mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n,r,o)},e.prototype.emplace=function(t,e,i,n,r,o,a){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.uint8[l+4]=n,this.uint8[l+5]=r,this.uint8[l+6]=o,this.uint8[l+7]=a,t},e}(Er);Mr.prototype.bytesPerElement=8,jn("StructArrayLayout2i4ub8",Mr);var Dr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o,a,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,n,r,o,a,s,l,u)},e.prototype.emplace=function(t,e,i,n,r,o,a,s,l,u,c){var h=9*t,p=18*t;return this.uint16[h+0]=e,this.uint16[h+1]=i,this.uint16[h+2]=n,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint8[p+16]=u,this.uint8[p+17]=c,t},e}(Er);Dr.prototype.bytesPerElement=18,jn("StructArrayLayout8ui2ub18",Dr);var Lr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o,a,s,l,u,c,h){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,i,n,r,o,a,s,l,u,c,h)},e.prototype.emplace=function(t,e,i,n,r,o,a,s,l,u,c,h,p){var d=12*t;return this.int16[d+0]=e,this.int16[d+1]=i,this.int16[d+2]=n,this.int16[d+3]=r,this.uint16[d+4]=o,this.uint16[d+5]=a,this.uint16[d+6]=s,this.uint16[d+7]=l,this.int16[d+8]=u,this.int16[d+9]=c,this.int16[d+10]=h,this.int16[d+11]=p,t},e}(Er);Lr.prototype.bytesPerElement=24,jn("StructArrayLayout4i4ui4i24",Lr);var Or=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var r=3*t;return this.float32[r+0]=e,this.float32[r+1]=i,this.float32[r+2]=n,t},e}(Er);Or.prototype.bytesPerElement=12,jn("StructArrayLayout3f12",Or);var Rr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Er);Rr.prototype.bytesPerElement=4,jn("StructArrayLayout1ul4",Rr);var Fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o,a,s,l,u,c){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,n,r,o,a,s,l,u,c)},e.prototype.emplace=function(t,e,i,n,r,o,a,s,l,u,c,h){var p=12*t,d=6*t;return this.int16[p+0]=e,this.int16[p+1]=i,this.int16[p+2]=n,this.int16[p+3]=r,this.int16[p+4]=o,this.int16[p+5]=a,this.uint32[d+3]=s,this.uint16[p+8]=l,this.uint16[p+9]=u,this.int16[p+10]=c,this.int16[p+11]=h,t},e}(Er);Fr.prototype.bytesPerElement=24,jn("StructArrayLayout6i1ul2ui2i24",Fr);var Br=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n,r,o)},e.prototype.emplace=function(t,e,i,n,r,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Er);Br.prototype.bytesPerElement=12,jn("StructArrayLayout2i2i2i12",Br);var Nr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)},e.prototype.emplace=function(t,e,i,n,r){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=i,this.float32[a+1]=n,this.float32[a+2]=r,t},e}(Er);Nr.prototype.bytesPerElement=12,jn("StructArrayLayout2ub2f12",Nr);var jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o,a,s,l,u,c,h,p,d,f,m,g){var v=this.length;return this.resize(v+1),this.emplace(v,t,e,i,n,r,o,a,s,l,u,c,h,p,d,f,m,g)},e.prototype.emplace=function(t,e,i,n,r,o,a,s,l,u,c,h,p,d,f,m,g,v){var y=24*t,_=12*t,b=48*t;return this.int16[y+0]=e,this.int16[y+1]=i,this.uint16[y+2]=n,this.uint16[y+3]=r,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[y+10]=l,this.uint16[y+11]=u,this.uint16[y+12]=c,this.float32[_+7]=h,this.float32[_+8]=p,this.uint8[b+36]=d,this.uint8[b+37]=f,this.uint8[b+38]=m,this.uint32[_+10]=g,this.int16[y+22]=v,t},e}(Er);jr.prototype.bytesPerElement=48,jn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jr);var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,r,o,a,s,l,u,c,h,p,d,f,m,g,v,y,_,b,x,w,S,T,C){var E=this.length;return this.resize(E+1),this.emplace(E,t,e,i,n,r,o,a,s,l,u,c,h,p,d,f,m,g,v,y,_,b,x,w,S,T,C)},e.prototype.emplace=function(t,e,i,n,r,o,a,s,l,u,c,h,p,d,f,m,g,v,y,_,b,x,w,S,T,C,E){var k=30*t,A=15*t;return this.int16[k+0]=e,this.int16[k+1]=i,this.int16[k+2]=n,this.int16[k+3]=r,this.int16[k+4]=o,this.int16[k+5]=a,this.int16[k+6]=s,this.int16[k+7]=l,this.uint16[k+8]=u,this.uint16[k+9]=c,this.uint16[k+10]=h,this.uint16[k+11]=p,this.uint16[k+12]=d,this.uint16[k+13]=f,this.uint16[k+14]=m,this.uint16[k+15]=g,this.uint16[k+16]=v,this.uint16[k+17]=y,this.uint16[k+18]=_,this.uint16[k+19]=b,this.uint16[k+20]=x,this.uint16[k+21]=w,this.uint32[A+11]=S,this.float32[A+12]=T,this.float32[A+13]=C,this.float32[A+14]=E,t},e}(Er);$r.prototype.bytesPerElement=60,jn("StructArrayLayout8i14ui1ul3f60",$r);var Ur=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Er);Ur.prototype.bytesPerElement=4,jn("StructArrayLayout1f4",Ur);var Vr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var r=3*t;return this.int16[r+0]=e,this.int16[r+1]=i,this.int16[r+2]=n,t},e}(Er);Vr.prototype.bytesPerElement=6,jn("StructArrayLayout3i6",Vr);var qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var r=4*t;return this.uint32[2*t+0]=e,this.uint16[r+2]=i,this.uint16[r+3]=n,t},e}(Er);qr.prototype.bytesPerElement=8,jn("StructArrayLayout1ul2ui8",qr);var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,this.uint16[r+2]=n,t},e}(Er);Hr.prototype.bytesPerElement=6,jn("StructArrayLayout3ui6",Hr);var Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,t},e}(Er);Wr.prototype.bytesPerElement=4,jn("StructArrayLayout2ui4",Wr);var Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Er);Zr.prototype.bytesPerElement=2,jn("StructArrayLayout1ui2",Zr);var Gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=i,t},e}(Er);Gr.prototype.bytesPerElement=8,jn("StructArrayLayout2f8",Gr);var Xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n)},e.prototype.emplace=function(t,e,i,n,r){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=n,this.float32[o+3]=r,t},e}(Er);Xr.prototype.bytesPerElement=16,jn("StructArrayLayout4f16",Xr);var Yr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.radius.get=function(){return this._structArray.int16[this._pos2+10]},i.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},i.anchorPoint.get=function(){return new ht(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(Cr);Yr.prototype.size=24;var Kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return new Yr(this,t)},e}(Fr);jn("CollisionBoxArray",Kr);var Jr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,i),e}(Cr);Jr.prototype.size=48;var Qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return new Jr(this,t)},e}(jr);jn("PlacedSymbolArray",Qr);var to=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+11]=t},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},Object.defineProperties(e.prototype,i),e}(Cr);to.prototype.size=60;var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return new to(this,t)},e}($r);jn("SymbolInstanceArray",eo);var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Ur);jn("GlyphOffsetArray",io);var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Vr);jn("SymbolLineVertexArray",no);var ro=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,i),e}(Cr);ro.prototype.size=8;var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return new ro(this,t)},e}(qr);jn("FeatureIndexArray",oo);var ao=kr([{name:"a_pos",components:2,type:"Int16"}],4).members,so=function(t){void 0===t&&(t=[]),this.segments=t};function lo(t,e){return 256*(t=s(Math.floor(t),0,255))+s(Math.floor(e),0,255)}so.prototype.prepareSegment=function(t,e,i,n){var r=this.segments[this.segments.length-1];return so.MAX_VERTEX_ARRAY_LENGTH<t&&pt("Max vertices per segment is "+so.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>so.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==n)&&(r={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==n&&(r.sortKey=n),this.segments.push(r)),r},so.prototype.get=function(){return this.segments},so.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var n in i.vaos)i.vaos[n].destroy()}},so.simpleSegment=function(t,e,i,n){return new so([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:n,vaos:{},sortKey:0}])},so.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,jn("SegmentVector",so);var uo=e(function(t){t.exports=function(t,e){var i,n,r,o,a,s,l,u;for(n=t.length-(i=3&t.length),r=e,a=3432918353,s=461845907,u=0;u<n;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}}),co=e(function(t){t.exports=function(t,e){for(var i,n=t.length,r=e^n,o=0;4<=n;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}}),ho=uo,po=co;ho.murmur3=uo,ho.murmur2=po;var fo=function(){this.ids=[],this.positions=[],this.indexed=!1};fo.prototype.add=function(t,e,i,n){this.ids.push(go(t)),this.positions.push(e,i,n)},fo.prototype.getPositions=function(t){for(var e=go(t),i=0,n=this.ids.length-1;i<n;){var r=i+n>>1;this.ids[r]>=e?n=r:i=r+1}for(var o=[];this.ids[i]===e;)o.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return o},fo.serialize=function(t,e){var i=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,i,n,r){if(!(r<=n)){for(var o=e[n+r>>1],a=n-1,s=r+1;;){for(;e[++a]<o;);for(;e[--s]>o;);if(s<=a)break;vo(e,a,s),vo(i,3*a,3*s),vo(i,3*a+1,3*s+1),vo(i,3*a+2,3*s+2)}t(e,i,n,s),t(e,i,s+1,r)}}(i,n,0,i.length-1),e&&e.push(i.buffer,n.buffer),{ids:i,positions:n}},fo.deserialize=function(t){var e=new fo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var mo=Math.pow(2,53)-1;function go(t){var e=+t;return!isNaN(e)&&e<=mo?e:ho(String(t))}function vo(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}jn("FeaturePositionMap",fo);var yo=function(t,e){this.gl=t.gl,this.location=e},_o=function(i){function t(t,e){i.call(this,t,e),this.current=0}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},t}(yo),bo=function(i){function t(t,e){i.call(this,t,e),this.current=0}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},t}(yo),xo=function(i){function t(t,e){i.call(this,t,e),this.current=[0,0]}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},t}(yo),wo=function(i){function t(t,e){i.call(this,t,e),this.current=[0,0,0]}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},t}(yo),So=function(i){function t(t,e){i.call(this,t,e),this.current=[0,0,0,0]}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},t}(yo),To=function(i){function t(t,e){i.call(this,t,e),this.current=Yt.transparent}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},t}(yo),Co=new Float32Array(16),Eo=function(i){function t(t,e){i.call(this,t,e),this.current=Co}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},t}(yo);function ko(t){return[lo(255*t.r,255*t.g),lo(255*t.b,255*t.a)]}var Ao=function(t,e,i){this.value=t,this.uniformNames=e.map(function(t){return"u_"+t}),this.type=i};Ao.prototype.setUniform=function(t,e,i){t.set(i.constantOr(this.value))},Ao.prototype.getBinding=function(t,e,i){return"color"===this.type?new To(t,e):new bo(t,e)};var Io=function(t,e){this.uniformNames=e.map(function(t){return"u_"+t}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Io.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Io.prototype.setUniform=function(t,e,i,n){var r="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;r&&t.set(r)},Io.prototype.getBinding=function(t,e,i){return"u_pattern"===i.substr(0,9)?new So(t,e):new bo(t,e)};var Po=function(t,e,i,n){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?2:1,offset:0}}),this.paintVertexArray=new n};Po.prototype.populatePaintArray=function(t,e,i,n,r){var o=this.paintVertexArray.length,a=this.expression.evaluate(new lr(0),e,{},n,[],r);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},Po.prototype.updatePaintArray=function(t,e,i,n){var r=this.expression.evaluate({zoom:0},i,n);this._setPaintValue(t,e,r)},Po.prototype._setPaintValue=function(t,e,i){if("color"===this.type)for(var n=ko(i),r=t;r<e;r++)this.paintVertexArray.emplace(r,n[0],n[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Po.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Po.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var zo=function(t,e,i,n,r,o){this.expression=t,this.uniformNames=e.map(function(t){return"u_"+t+"_t"}),this.type=i,this.useIntegerZoom=n,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?4:2,offset:0}}),this.paintVertexArray=new o};zo.prototype.populatePaintArray=function(t,e,i,n,r){var o=this.expression.evaluate(new lr(this.zoom),e,{},n,[],r),a=this.expression.evaluate(new lr(this.zoom+1),e,{},n,[],r),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},zo.prototype.updatePaintArray=function(t,e,i,n){var r=this.expression.evaluate({zoom:this.zoom},i,n),o=this.expression.evaluate({zoom:this.zoom+1},i,n);this._setPaintValue(t,e,r,o)},zo.prototype._setPaintValue=function(t,e,i,n){if("color"===this.type)for(var r=ko(i),o=ko(n),a=t;a<e;a++)this.paintVertexArray.emplace(a,r[0],r[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,i,n);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(n))}},zo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},zo.prototype.setUniform=function(t,e){var i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,n=s(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(n)},zo.prototype.getBinding=function(t,e,i){return new bo(t,e)};var Mo=function(t,e,i,n,r,o,a){this.expression=t,this.type=i,this.useIntegerZoom=n,this.zoom=r,this.layerId=a,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};Mo.prototype.populatePaintArray=function(t,e,i){var n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],i)},Mo.prototype.updatePaintArray=function(t,e,i,n,r){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],r)},Mo.prototype._setPaintValues=function(t,e,i,n){if(n&&i){var r=n[i.min],o=n[i.mid],a=n[i.max];if(r&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],o.pixelRatio,r.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},Mo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Mo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Do=function(t,e,i,n){this.binders={},this.layoutAttributes=n,this._buffers=[];var r,o,a=[];for(var s in t.paint._values)if(i(s)){var l=t.paint.get(s);if(l instanceof mr&&Li(l.property.specification)){var u=(r=s,o=t.type,{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(o+"-","").replace(/-/g,"_")]),c=l.value,h=l.property.specification.type,p=l.property.useIntegerZoom,d=l.property.specification["property-type"],f="cross-faded"===d||"cross-faded-data-driven"===d;if("constant"===c.kind)this.binders[s]=f?new Io(c.value,u):new Ao(c.value,u,h),a.push("/u_"+s);else if("source"===c.kind||f){var m=Oo(s,h,"source");this.binders[s]=f?new Mo(c,u,h,p,e,m,t.id):new Po(c,u,h,m),a.push("/a_"+s)}else{var g=Oo(s,h,"composite");this.binders[s]=new zo(c,u,h,p,e,g),a.push("/z_"+s)}}}this.cacheKey=a.sort().join("")};Do.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Po||e instanceof zo?e.maxValue:0},Do.prototype.populatePaintArrays=function(t,e,i,n,r){for(var o in this.binders){var a=this.binders[o];(a instanceof Po||a instanceof zo||a instanceof Mo)&&a.populatePaintArray(t,e,i,n,r)}},Do.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders){var n=this.binders[i];n instanceof Io&&n.setConstantPatternPositions(t,e)}},Do.prototype.updatePaintArrays=function(t,e,i,n,r){var o=!1;for(var a in t)for(var s=0,l=e.getPositions(a);s<l.length;s+=1){var u=l[s],c=i.feature(u.index);for(var h in this.binders){var p=this.binders[h];if((p instanceof Po||p instanceof zo||p instanceof Mo)&&!0===p.expression.isStateDependent){var d=n.paint.get(h);p.expression=d.value,p.updatePaintArray(u.start,u.end,c,t[a],r),o=!0}}}return o},Do.prototype.defines=function(){var t=[];for(var e in this.binders){var i=this.binders[e];(i instanceof Ao||i instanceof Io)&&t.push.apply(t,i.uniformNames.map(function(t){return"#define HAS_UNIFORM_"+t}))}return t},Do.prototype.getPaintVertexBuffers=function(){return this._buffers},Do.prototype.getUniforms=function(t,e){var i=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof Ao||r instanceof Io||r instanceof zo)for(var o=0,a=r.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var l=r.getBinding(t,e[s],s);i.push({name:s,property:n,binding:l})}}}return i},Do.prototype.setUniforms=function(t,e,i,n){for(var r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.name,l=a.property;this.binders[l].setUniform(a.binding,n,i.get(l),s)}},Do.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var i=this.binders[e];if(t&&i instanceof Mo){var n=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;n&&this._buffers.push(n)}else(i instanceof Po||i instanceof zo)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Do.prototype.upload=function(t){for(var e in this.binders){var i=this.binders[e];(i instanceof Po||i instanceof zo||i instanceof Mo)&&i.upload(t)}this.updatePaintBuffers()},Do.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Po||e instanceof zo||e instanceof Mo)&&e.destroy()}};var Lo=function(t,e,i,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var r=0,o=e;r<o.length;r+=1){var a=o[r];this.programConfigurations[a.id]=new Do(a,i,n,t)}this.needsUpload=!1,this._featureMap=new fo,this._bufferOffset=0};function Oo(t,e,i){var n={color:{source:Gr,composite:Xr},number:{source:Ur,composite:Gr}},r={"line-pattern":{source:Dr,composite:Dr},"fill-pattern":{source:Dr,composite:Dr},"fill-extrusion-pattern":{source:Dr,composite:Dr}}[t];return r&&r[i]||n[e][i]}Lo.prototype.populatePaintArrays=function(t,e,i,n,r,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,n,r,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Lo.prototype.updatePaintArrays=function(t,e,i,n){for(var r=0,o=i;r<o.length;r+=1){var a=o[r];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,n)||this.needsUpload}},Lo.prototype.get=function(t){return this.programConfigurations[t]},Lo.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Lo.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},jn("ConstantBinder",Ao),jn("CrossFadedConstantBinder",Io),jn("SourceExpressionBinder",Po),jn("CrossFadedCompositeBinder",Mo),jn("CompositeExpressionBinder",zo),jn("ProgramConfiguration",Do,{omit:["_buffers"]}),jn("ProgramConfigurationSet",Lo);var Ro={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function Fo(t){for(var e=Ee/t.extent,i=t.loadGeometry(),n=0;n<i.length;n++)for(var r=i[n],o=0;o<r.length;o++){var a=r[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<Ro.min||a.x>Ro.max||a.y<Ro.min||a.y>Ro.max)&&(pt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a.x=s(a.x,Ro.min,Ro.max),a.y=s(a.y,Ro.min,Ro.max))}return i}function Bo(t,e,i,n,r){t.emplaceBack(2*e+(n+1)/2,2*i+(r+1)/2)}var No=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ir,this.indexArray=new Hr,this.segments=new so,this.programConfigurations=new Lo(ao,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function jo(t,e){for(var i=0;i<t.length;i++)if(Zo(e,t[i]))return!0;for(var n=0;n<e.length;n++)if(Zo(t,e[n]))return!0;return!!Vo(t,e)}function $o(t,e){if(1===t.length)return Wo(e,t[0]);for(var i=0;i<e.length;i++)for(var n=e[i],r=0;r<n.length;r++)if(Zo(t,n[r]))return!0;for(var o=0;o<t.length;o++)if(Wo(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Vo(t,e[a]))return!0;return!1}function Uo(t,e,i){if(1<t.length){if(Vo(t,e))return!0;for(var n=0;n<e.length;n++)if(qo(e[n],t,i))return!0}for(var r=0;r<t.length;r++)if(qo(t[r],e,i))return!0;return!1}function Vo(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var n=t[i],r=t[i+1],o=0;o<e.length-1;o++)if(a=n,s=r,l=e[o],u=e[o+1],b(a,l,u)!==b(s,l,u)&&b(a,s,l)!==b(a,s,u))return!0;var a,s,l,u;return!1}function qo(t,e,i){var n=i*i;if(1===e.length)return t.distSqr(e[0])<n;for(var r=1;r<e.length;r++)if(Ho(t,e[r-1],e[r])<n)return!0;return!1}function Ho(t,e,i){var n=e.distSqr(i);if(0===n)return t.distSqr(e);var r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;return t.distSqr(r<0?e:1<r?i:i.sub(e)._mult(r)._add(e))}function Wo(t,e){for(var i,n,r,o=!1,a=0;a<t.length;a++)for(var s=0,l=(i=t[a]).length-1;s<i.length;l=s++)(n=i[s]).y>e.y!=(r=i[l]).y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(o=!o);return o}function Zo(t,e){for(var i=!1,n=0,r=t.length-1;n<t.length;r=n++){var o=t[n],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function Go(t,e,i){var n=i[0],r=i[2];if(t.x<n.x&&e.x<n.x||t.x>r.x&&e.x>r.x||t.y<n.y&&e.y<n.y||t.y>r.y&&e.y>r.y)return!1;var o=b(t,e,i[0]);return o!==b(t,e,i[1])||o!==b(t,e,i[2])||o!==b(t,e,i[3])}function Xo(t,e,i){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:i.programConfigurations.get(e.id).getMaxValue(t)}function Yo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ko(t,e,i,n,r){if(!e[0]&&!e[1])return t;var o=ht.convert(e)._mult(r);"viewport"===i&&o._rotate(-n);for(var a=[],s=0;s<t.length;s++)a.push(t[s].sub(o));return a}No.prototype.populate=function(t,e,i){var n=this.layers[0],r=[],o=null;"circle"===n.type&&(o=n.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var l=s[a],u=l.feature,c=l.id,h=l.index,p=l.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:c,properties:u.properties,geometry:d?Fo(u):[]};if(this.layers[0]._featureFilter.filter(new lr(this.zoom),f,i)){d||(f.geometry=Fo(u));var m=o?o.evaluate(f,{},i):void 0;r.push({id:c,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:f.geometry,patterns:{},sortKey:m})}}o&&r.sort(function(t,e){return t.sortKey-e.sortKey});for(var g=0,v=r;g<v.length;g+=1){var y=v[g],_=y.geometry,b=y.index,x=y.sourceLayerIndex,w=t[b].feature;this.addFeature(y,_,b,i),e.featureIndex.insert(w,_,b,x,this.index)}},No.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},No.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},No.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},No.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ao),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},No.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},No.prototype.addFeature=function(t,e,i,n){for(var r=0,o=e;r<o.length;r+=1)for(var a=0,s=o[r];a<s.length;a+=1){var l=s[a],u=l.x,c=l.y;if(!(u<0||Ee<=u||c<0||Ee<=c)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),p=h.vertexLength;Bo(this.layoutVertexArray,u,c,-1,-1),Bo(this.layoutVertexArray,u,c,1,-1),Bo(this.layoutVertexArray,u,c,1,1),Bo(this.layoutVertexArray,u,c,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},n)},jn("CircleBucket",No,{omit:["layers"]});var Jo,Qo,ta=new wr({"circle-sort-key":new yr(kt.layout_circle["circle-sort-key"])}),ea={paint:new wr({"circle-radius":new yr(kt.paint_circle["circle-radius"]),"circle-color":new yr(kt.paint_circle["circle-color"]),"circle-blur":new yr(kt.paint_circle["circle-blur"]),"circle-opacity":new yr(kt.paint_circle["circle-opacity"]),"circle-translate":new vr(kt.paint_circle["circle-translate"]),"circle-translate-anchor":new vr(kt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vr(kt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vr(kt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yr(kt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yr(kt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yr(kt.paint_circle["circle-stroke-opacity"])}),layout:ta},ia="undefined"!=typeof Float32Array?Float32Array:Array;function na(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*a,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*a,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*a,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*a,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)}),Jo=new ia(3),ia!=Float32Array&&(Jo[0]=0,Jo[1]=0,Jo[2]=0),Qo=new ia(4),ia!=Float32Array&&(Qo[0]=0,Qo[1]=0,Qo[2]=0,Qo[3]=0);var ra,oa=(ra=new ia(2),ia!=Float32Array&&(ra[0]=0,ra[1]=0),function(e){function t(t){e.call(this,t,ea)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.createBucket=function(t){return new No(t)},t.prototype.queryRadius=function(t){var e=t;return Xo("circle-radius",this,e)+Xo("circle-stroke-width",this,e)+Yo(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(t,e,i,n,r,o,a,s){for(var l=Ko(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),c="map"===this.paint.get("circle-pitch-alignment"),h=c?l:function(t,e){return l.map(function(t){return aa(t,e)})}(0,s),p=c?u*a:u,d=0,f=n;d<f.length;d+=1)for(var m=0,g=f[d];m<g.length;m+=1){var v=g[m],y=c?v:aa(v,s),_=p,b=na([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),S=_,Zo(x=h,w=y)||qo(w,x,S))return!0}var x,w,S;return!1},t}(Sr));function aa(t,e){var i=na([],[t.x,t.y,0,1],e);return new ht(i[0]/i[3],i[1]/i[3])}var sa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(No);function la(t,e,i,n){var r=e.width,o=e.height;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==r*o*i)throw new RangeError("mismatched image size")}else n=new Uint8Array(r*o*i);return t.width=r,t.height=o,t.data=n,t}function ua(t,e,i){var n=e.width,r=e.height;if(n!==t.width||r!==t.height){var o=la({},{width:n,height:r},i);ca(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,r)},i),t.width=n,t.height=r,t.data=o.data}}function ca(t,e,i,n,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<r.height;l++)for(var u=((i.y+l)*t.width+i.x)*o,c=((n.y+l)*e.width+n.x)*o,h=0;h<r.width*o;h++)s[c+h]=a[u+h];return e}jn("HeatmapBucket",sa,{omit:["layers"]});var ha=function(t,e){la(this,t,1,e)};ha.prototype.resize=function(t){ua(this,t,1)},ha.prototype.clone=function(){return new ha({width:this.width,height:this.height},new Uint8Array(this.data))},ha.copy=function(t,e,i,n,r){ca(t,e,i,n,r,1)};var pa=function(t,e){la(this,t,4,e)};pa.prototype.resize=function(t){ua(this,t,4)},pa.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},pa.prototype.clone=function(){return new pa({width:this.width,height:this.height},new Uint8Array(this.data))},pa.copy=function(t,e,i,n,r){ca(t,e,i,n,r,4)},jn("AlphaImage",ha),jn("RGBAImage",pa);var da={paint:new wr({"heatmap-radius":new yr(kt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yr(kt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vr(kt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xr(kt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vr(kt.paint_heatmap["heatmap-opacity"])})};function fa(t,e){for(var i=new Uint8Array(1024),n={},r=0,o=0;r<256;r++,o+=4){n[e]=r/255;var a=t.evaluate(n);i[o+0]=Math.floor(255*a.r/a.a),i[o+1]=Math.floor(255*a.g/a.a),i[o+2]=Math.floor(255*a.b/a.a),i[o+3]=Math.floor(255*a.a)}return new pa({width:256,height:1},i)}var ma=function(e){function t(t){e.call(this,t,da),this._updateColorRamp()}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.createBucket=function(t){return new sa(t)},t.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=fa(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(Sr),ga={paint:new wr({"hillshade-illumination-direction":new vr(kt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new vr(kt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vr(kt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vr(kt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vr(kt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vr(kt.paint_hillshade["hillshade-accent-color"])})},va=function(e){function t(t){e.call(this,t,ga)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(Sr),ya=kr([{name:"a_pos",components:2,type:"Int16"}],4).members,_a=xa,ba=xa;function xa(t,e,i){i=i||2;var n,r,o,a,s,l,u,c=e&&e.length,h=c?e[0]*i:t.length,p=wa(t,0,h,i,!0),d=[];if(!p||p.next===p.prev)return d;if(c&&(p=function(t,e,i,n){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=wa(t,e[r]*n,r<o-1?e[r+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),s.push(Ma(a));for(s.sort(Ia),r=0;r<s.length;r++)Pa(s[r],i),i=Sa(i,i.next);return i}(t,e,p,i)),t.length>80*i){n=o=t[0],r=a=t[1];for(var f=i;f<h;f+=i)(s=t[f])<n&&(n=s),(l=t[f+1])<r&&(r=l),o<s&&(o=s),a<l&&(a=l);u=0!==(u=Math.max(o-n,a-r))?1/u:0}return Ta(p,d,i,n,r,u),d}function wa(t,e,i,n,r){var o,a;if(r===0<qa(t,e,i,n))for(o=e;o<i;o+=n)a=$a(o,t[o],t[o+1],a);else for(o=i-n;e<=o;o-=n)a=$a(o,t[o],t[o+1],a);return a&&Oa(a,a.next)&&(Ua(a),a=a.next),a}function Sa(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!Oa(n,n.next)&&0!==La(n.prev,n,n.next))n=n.next;else{if(Ua(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function Ta(t,e,i,n,r,o,a){if(t){!a&&o&&function(t,e,i,n){for(var r=t;null===r.z&&(r.z=za(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,a,s,l,u=1;do{for(i=t,o=t=null,a=0;i;){for(a++,n=i,e=s=0;e<u&&(s++,n=n.nextZ);e++);for(l=u;0<s||0<l&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(i=(r=i).nextZ,s--):(n=(r=n).nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,u*=2}while(1<a)}(r)}(t,n,r,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Ea(t,n,r,o):Ca(t))e.push(s.i/i),e.push(t.i/i),e.push(l.i/i),Ua(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?Ta(t=ka(Sa(t),e,i),e,i,n,r,o,2):2===a&&Aa(t,e,i,n,r,o):Ta(Sa(t),e,i,n,r,o,1);break}}}function Ca(t){var e=t.prev,i=t,n=t.next;if(0<=La(e,i,n))return!1;for(var r=t.next.next;r!==t.prev;){if(Da(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&0<=La(r.prev,r,r.next))return!1;r=r.next}return!0}function Ea(t,e,i,n){var r=t.prev,o=t,a=t.next;if(0<=La(r,o,a))return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,l=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,u=za(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,i,n),c=za(s,l,e,i,n),h=t.prevZ,p=t.nextZ;h&&h.z>=u&&p&&p.z<=c;){if(h!==t.prev&&h!==t.next&&Da(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&0<=La(h.prev,h,h.next))return!1;if(h=h.prevZ,p!==t.prev&&p!==t.next&&Da(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=La(p.prev,p,p.next))return!1;p=p.nextZ}for(;h&&h.z>=u;){if(h!==t.prev&&h!==t.next&&Da(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&0<=La(h.prev,h,h.next))return!1;h=h.prevZ}for(;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&Da(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=La(p.prev,p,p.next))return!1;p=p.nextZ}return!0}function ka(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!Oa(r,o)&&Ra(r,n,n.next,o)&&Na(r,o)&&Na(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),Ua(n),Ua(n.next),n=t=o),n=n.next}while(n!==t);return Sa(n)}function Aa(t,e,i,n,r,o){var a,s,l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&(s=u,(a=l).next.i!==s.i&&a.prev.i!==s.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Ra(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(a,s)&&(Na(a,s)&&Na(s,a)&&function(t,e){for(var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==t;);return n}(a,s)&&(La(a.prev,a,s.prev)||La(a,s.prev,s))||Oa(a,s)&&0<La(a.prev,a,a.next)&&0<La(s.prev,s,s.next)))){var c=ja(l,u);return l=Sa(l,l.next),c=Sa(c,c.next),Ta(l,e,i,n,r,o),void Ta(c,e,i,n,r,o)}u=u.next}l=l.next}while(l!==t)}function Ia(t,e){return t.x-e.x}function Pa(t,e){if(e=function(t,e){var i,n=e,r=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&a<s){if((a=s)===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===a)return i;var l,u,c,h=i,p=i.x,d=i.y,f=1/0;for(n=i;r>=n.x&&n.x>=p&&r!==n.x&&Da(o<d?r:a,o,p,d,o<d?a:r,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(r-n.x),Na(n,t)&&(l<f||l===f&&(n.x>i.x||n.x===i.x&&(c=n,La((u=i).prev,u,c.prev)<0&&La(c.next,u,u.next)<0)))&&(i=n,f=l)),(n=n.next)!==h;);return i}(t,e)){var i=ja(e,t);Sa(e,e.next),Sa(i,i.next)}}function za(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ma(t){for(var e=t,i=t;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}function Da(t,e,i,n,r,o,a,s){return 0<=(r-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(n-s)-(i-a)*(e-s)&&0<=(i-a)*(o-s)-(r-a)*(n-s)}function La(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Oa(t,e){return t.x===e.x&&t.y===e.y}function Ra(t,e,i,n){var r=Ba(La(t,e,i)),o=Ba(La(t,e,n)),a=Ba(La(i,n,t)),s=Ba(La(i,n,e));return r!==o&&a!==s||!(0!==r||!Fa(t,i,e))||!(0!==o||!Fa(t,n,e))||!(0!==a||!Fa(i,t,n))||!(0!==s||!Fa(i,e,n))}function Fa(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Ba(t){return 0<t?1:t<0?-1:0}function Na(t,e){return La(t.prev,t,t.next)<0?0<=La(t,e,t.next)&&0<=La(t,t.prev,e):La(t,e,t.prev)<0||La(t,t.next,e)<0}function ja(t,e){var i=new Va(t.i,t.x,t.y),n=new Va(e.i,e.x,e.y),r=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=r).prev=i,(n.next=i).prev=n,(o.next=n).prev=o,n}function $a(t,e,i,n){var r=new Va(t,e,i);return n?(r.next=n.next,(r.prev=n).next.prev=r,n.next=r):(r.prev=r).next=r,r}function Ua(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Va(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qa(t,e,i,n){for(var r=0,o=e,a=i-n;o<i;o+=n)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function Ha(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function Wa(t,e){return t<e?-1:e<t?1:0}function Za(t,e){var i,n,r,o,a,s=t.length;if(s<=1)return[t];for(var l,u,c=[],h=0;h<s;h++){var p=x(t[h]);0!==p&&(t[h].area=Math.abs(p),void 0===u&&(u=p<0),u===p<0?(l&&c.push(l),l=[t[h]]):l.push(t[h]))}if(l&&c.push(l),1<e)for(var d=0;d<c.length;d++)c[d].length<=e||(i=c[d],n=e,r=1,o=c[d].length-1,a=Ga,function t(e,i,n,r,o){for(;n<r;){if(600<r-n){var a=r-n+1,s=i-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,i,Math.max(n,Math.floor(i-s*u/a+c)),Math.min(r,Math.floor(i+(a-s)*u/a+c)),o)}var h=e[i],p=n,d=r;for(Ha(e,n,i),0<o(e[r],h)&&Ha(e,n,r);p<d;){for(Ha(e,p,d),p++,d--;o(e[p],h)<0;)p++;for(;0<o(e[d],h);)d--}0===o(e[n],h)?Ha(e,n,d):Ha(e,++d,r),d<=i&&(n=d+1),i<=d&&(r=d-1)}}(i,n,r||0,o||i.length-1,a||Wa),c[d]=c[d].slice(0,e));return c}function Ga(t,e){return e.area-t.area}function Xa(t,e,i){for(var n=i.patternDependencies,r=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(r=!0);var l=s.constantOr(null);l&&(r=!0,n[l.to]=!0,n[l.from]=!0)}return r}function Ya(t,e,i,n,r){for(var o=r.patternDependencies,a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:n-1},i,{},r.availableImages),h=u.evaluate({zoom:n},i,{},r.availableImages),p=u.evaluate({zoom:n+1},i,{},r.availableImages);h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,o[c=c&&c.name?c.name:c]=!0,o[h]=!0,o[p]=!0,i.patterns[l.id]={min:c,mid:h,max:p}}}return i}xa.deviation=function(t,e,i,n){var r=e&&e.length,o=Math.abs(qa(t,0,r?e[0]*i:t.length,i));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(qa(t,e[a]*i,a<s-1?e[a+1]*i:t.length,i));var l=0;for(a=0;a<n.length;a+=3){var u=n[a]*i,c=n[a+1]*i,h=n[a+2]*i;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},xa.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[r][o][a]);0<r&&i.holes.push(n+=t[r-1].length)}return i},_a.default=ba;var Ka=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ir,this.indexArray=new Hr,this.indexArray2=new Wr,this.programConfigurations=new Lo(ya,t.layers,t.zoom),this.segments=new so,this.segments2=new so,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Ka.prototype.populate=function(t,e,i){this.hasPattern=Xa("fill",this.layers,e);for(var n=this.layers[0].layout.get("fill-sort-key"),r=[],o=0,a=t;o<a.length;o+=1){var s=a[o],l=s.feature,u=s.id,c=s.index,h=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d={type:l.type,id:u,properties:l.properties,geometry:p?Fo(l):[]};if(this.layers[0]._featureFilter.filter(new lr(this.zoom),d,i)){p||(d.geometry=Fo(l));var f=n?n.evaluate(d,{},i,e.availableImages):void 0;r.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:d.geometry,patterns:{},sortKey:f})}}n&&r.sort(function(t,e){return t.sortKey-e.sortKey});for(var m=0,g=r;m<g.length;m+=1){var v=g[m],y=v.geometry,_=v.index,b=v.sourceLayerIndex;if(this.hasPattern){var x=Ya("fill",this.layers,v,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(v,y,_,i,{});e.featureIndex.insert(t[_].feature,y,_,b,this.index)}},Ka.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Ka.prototype.addFeatures=function(t,e,i){for(var n=0,r=this.patternFeatures;n<r.length;n+=1){var o=r[n];this.addFeature(o,o.geometry,o.index,e,i)}},Ka.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ka.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ka.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ya),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Ka.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ka.prototype.addFeature=function(t,e,i,n,r){for(var o=0,a=Za(e,500);o<a.length;o+=1){for(var s=a[o],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),p=h.vertexLength,d=[],f=[],m=0,g=s;m<g.length;m+=1){var v=g[m];if(0!==v.length){v!==s[0]&&f.push(d.length/2);var y=this.segments2.prepareSegment(v.length,this.layoutVertexArray,this.indexArray2),_=y.vertexLength;this.layoutVertexArray.emplaceBack(v[0].x,v[0].y),this.indexArray2.emplaceBack(_+v.length-1,_),d.push(v[0].x),d.push(v[0].y);for(var b=1;b<v.length;b++)this.layoutVertexArray.emplaceBack(v[b].x,v[b].y),this.indexArray2.emplaceBack(_+b-1,_+b),d.push(v[b].x),d.push(v[b].y);y.vertexLength+=v.length,y.primitiveLength+=v.length}}for(var x=_a(d,f),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(p+x[w],p+x[w+1],p+x[w+2]);h.vertexLength+=l,h.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)},jn("FillBucket",Ka,{omit:["layers","patternFeatures"]});var Ja=new wr({"fill-sort-key":new yr(kt.layout_fill["fill-sort-key"])}),Qa={paint:new wr({"fill-antialias":new vr(kt.paint_fill["fill-antialias"]),"fill-opacity":new yr(kt.paint_fill["fill-opacity"]),"fill-color":new yr(kt.paint_fill["fill-color"]),"fill-outline-color":new yr(kt.paint_fill["fill-outline-color"]),"fill-translate":new vr(kt.paint_fill["fill-translate"]),"fill-translate-anchor":new vr(kt.paint_fill["fill-translate-anchor"]),"fill-pattern":new _r(kt.paint_fill["fill-pattern"])}),layout:Ja},ts=function(n){function t(t){n.call(this,t,Qa)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.recalculate=function(t,e){n.prototype.recalculate.call(this,t,e);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(t){return new Ka(t)},t.prototype.queryRadius=function(){return Yo(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(t,e,i,n,r,o,a){return $o(Ko(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),n)},t.prototype.isTileClipped=function(){return!0},t}(Sr),es=kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,is=ns;function ns(t,e,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=r,t.readFields(rs,this,e)}function rs(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function os(t){for(var e,i,n=0,r=0,o=t.length,a=o-1;r<o;a=r++)n+=((i=t[a]).x-(e=t[r]).x)*(e.y+i.y);return n}ns.types=["Unknown","Point","LineString","Polygon"],ns.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,r=0,o=0,a=0,s=[];t.pos<i;){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)o+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&s.push(e),e=[]),e.push(new ht(o,a));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&s.push(e),s},ns.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,r=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(n<=0){var c=t.readVarint();i=7&c,n=c>>3}if(n--,1===i||2===i)(r+=t.readSVarint())<a&&(a=r),s<r&&(s=r),(o+=t.readSVarint())<l&&(l=o),u<o&&(u=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,l,s,u]},ns.prototype.toGeoJSON=function(t,e,i){var n,r,o=this.extent*Math.pow(2,i),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=ns.types[this.type];function c(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(n=0;n<l.length;n++)h[n]=l[n][0];c(l=h);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,n,r=[],o=0;o<e;o++){var a=os(t[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(i&&r.push(i),i=[t[o]]):i.push(t[o]))}return i&&r.push(i),r}(l),n=0;n<l.length;n++)for(r=0;r<l[n].length;r++)c(l[n][r])}1===l.length?l=l[0]:u="Multi"+u;var p={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var as=ss;function ss(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ls,this,e),this.length=this._features.length}function ls(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(i))}function us(t,e,i){if(3===t){var n=new as(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}ss.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new is(this._pbf,e,this.extent,this._keys,this._values)};var cs={VectorTile:function(t,e){this.layers=t.readFields(us,{},e)},VectorTileFeature:is,VectorTileLayer:as},hs=cs.VectorTileFeature.types,ps=Math.pow(2,13);function ds(t,e,i,n,r,o,a,s){t.emplaceBack(e,i,2*Math.floor(n*ps)+a,r*ps*2,o*ps*2,Math.round(s))}var fs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new zr,this.indexArray=new Hr,this.programConfigurations=new Lo(es,t.layers,t.zoom),this.segments=new so,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};fs.prototype.populate=function(t,e,i){this.features=[],this.hasPattern=Xa("fill-extrusion",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var o=r[n],a=o.feature,s=o.id,l=o.index,u=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,h={type:a.type,id:s,properties:a.properties,geometry:c?Fo(a):[]};if(this.layers[0]._featureFilter.filter(new lr(this.zoom),h,i)){var p={id:s,sourceLayerIndex:u,index:l,geometry:c?h.geometry:Fo(a),properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(p.id=a.id),this.hasPattern?this.features.push(Ya("fill-extrusion",this.layers,p,this.zoom,e)):this.addFeature(p,p.geometry,l,i,{}),e.featureIndex.insert(a,p.geometry,l,u,this.index,!0)}}},fs.prototype.addFeatures=function(t,e,i){for(var n=0,r=this.features;n<r.length;n+=1){var o=r[n];this.addFeature(o,o.geometry,o.index,e,i)}},fs.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},fs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},fs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,es),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},fs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},fs.prototype.addFeature=function(t,e,i,n,r){for(var o=0,a=Za(e,500);o<a.length;o+=1){for(var s=a[o],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,d=s;p<d.length;p+=1){var f=d[p];if(0!==f.length&&!((L=f).every(function(t){return t.x<0})||L.every(function(t){return t.x>Ee})||L.every(function(t){return t.y<0})||L.every(function(t){return t.y>Ee})))for(var m=0,g=0;g<f.length;g++){var v=f[g];if(1<=g){var y=f[g-1];if(D=y,!((M=v).x===D.x&&(M.x<0||M.x>Ee)||M.y===D.y&&(M.y<0||M.y>Ee))){h.vertexLength+4>so.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=v.sub(y)._perp()._unit(),b=y.dist(v);32768<m+b&&(m=0),ds(this.layoutVertexArray,v.x,v.y,_.x,_.y,0,0,m),ds(this.layoutVertexArray,v.x,v.y,_.x,_.y,0,1,m),ds(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,0,m+=b),ds(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,1,m);var x=h.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),h.vertexLength+=4,h.primitiveLength+=2}}}}if(h.vertexLength+l>so.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===hs[t.type]){for(var w=[],S=[],T=h.vertexLength,C=0,E=s;C<E.length;C+=1){var k=E[C];if(0!==k.length){k!==s[0]&&S.push(w.length/2);for(var A=0;A<k.length;A++){var I=k[A];ds(this.layoutVertexArray,I.x,I.y,0,0,1,1,0),w.push(I.x),w.push(I.y)}}}for(var P=_a(w,S),z=0;z<P.length;z+=3)this.indexArray.emplaceBack(T+P[z],T+P[z+2],T+P[z+1]);h.primitiveLength+=P.length/3,h.vertexLength+=l}}var M,D,L;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,r,n)},jn("FillExtrusionBucket",fs,{omit:["layers","features"]});var ms={paint:new wr({"fill-extrusion-opacity":new vr(kt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yr(kt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vr(kt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vr(kt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _r(kt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yr(kt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yr(kt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vr(kt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},gs=function(e){function t(t){e.call(this,t,ms)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.createBucket=function(t){return new fs(t)},t.prototype.queryRadius=function(){return Yo(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(t,e,i,n,r,o,a,s){var u=Ko(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),l=this.paint.get("fill-extrusion-height").evaluate(e,i),c=this.paint.get("fill-extrusion-base").evaluate(e,i),h=function(t,e,i,n){for(var r=[],o=0,a=u;o<a.length;o+=1){var s=a[o],l=[s.x,s.y,0,1];na(l,l,e),r.push(new ht(l[0]/l[3],l[1]/l[3]))}return r}(0,s),p=function(t,e,i,n){for(var r=[],o=[],a=n[8]*e,s=n[9]*e,l=n[10]*e,u=n[11]*e,c=n[8]*i,h=n[9]*i,p=n[10]*i,d=n[11]*i,f=0,m=t;f<m.length;f+=1){for(var g=[],v=[],y=0,_=m[f];y<_.length;y+=1){var b=_[y],x=b.x,w=b.y,S=n[0]*x+n[4]*w+n[12],T=n[1]*x+n[5]*w+n[13],C=n[2]*x+n[6]*w+n[14],E=n[3]*x+n[7]*w+n[15],k=C+l,A=E+u,I=S+c,P=T+h,z=C+p,M=E+d,D=new ht((S+a)/A,(T+s)/A);D.z=k/A,g.push(D);var L=new ht(I/M,P/M);L.z=z/M,v.push(L)}r.push(g),o.push(v)}return[r,o]}(n,c,l,s);return function(t,e,i){var n=1/0;$o(i,e)&&(n=ys(i,e[0]));for(var r=0;r<e.length;r++)for(var o=e[r],a=t[r],s=0;s<o.length-1;s++){var l=o[s],u=[l,o[s+1],a[s+1],a[s],l];jo(i,u)&&(n=Math.min(n,ys(i,u)))}return n!==1/0&&n}(p[0],p[1],h)},t}(Sr);function vs(t,e){return t.x*e.x+t.y*e.y}function ys(t,e){if(1===t.length){for(var i,n,r=0,o=e[r++];!i||o.equals(i);)if(!(i=e[r++]))return 1/0;for(;!n||o.equals(n)||i.equals(n);)if(!(n=e[r++]))return 1/0;var a=t[0],s=i.sub(o),l=n.sub(o),u=a.sub(o),c=vs(s,s),h=vs(s,l),p=vs(l,l),d=vs(u,s),f=vs(u,l),m=c*p-h*h,g=(p*d-h*f)/m,v=(c*f-h*d)/m;return o.z*(1-g-v)+i.z*g+n.z*v}for(var y=1/0,_=0,b=e;_<b.length;_+=1)y=Math.min(y,b[_].z);return y}var _s=kr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,bs=cs.VectorTileFeature.types,xs=Math.cos(Math.PI/180*37.5),ws=Math.pow(2,14)/.5,Ss=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Mr,this.indexArray=new Hr,this.programConfigurations=new Lo(_s,t.layers,t.zoom),this.segments=new so,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Ss.prototype.populate=function(t,e,i){this.hasPattern=Xa("line",this.layers,e);for(var n=this.layers[0].layout.get("line-sort-key"),r=[],o=0,a=t;o<a.length;o+=1){var s=a[o],l=s.feature,u=s.id,c=s.index,h=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d={type:l.type,id:u,properties:l.properties,geometry:p?Fo(l):[]};if(this.layers[0]._featureFilter.filter(new lr(this.zoom),d,i)){p||(d.geometry=Fo(l));var f=n?n.evaluate(d,{},i):void 0;r.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:d.geometry,patterns:{},sortKey:f})}}n&&r.sort(function(t,e){return t.sortKey-e.sortKey});for(var m=0,g=r;m<g.length;m+=1){var v=g[m],y=v.geometry,_=v.index,b=v.sourceLayerIndex;if(this.hasPattern){var x=Ya("line",this.layers,v,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(v,y,_,i,{});e.featureIndex.insert(t[_].feature,y,_,b,this.index)}},Ss.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Ss.prototype.addFeatures=function(t,e,i){for(var n=0,r=this.patternFeatures;n<r.length;n+=1){var o=r[n];this.addFeature(o,o.geometry,o.index,e,i)}},Ss.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ss.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_s),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ss.prototype.addFeature=function(t,e,i,n,r){for(var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),u=o.get("line-round-limit"),c=0,h=e;c<h.length;c+=1)this.addLine(h[c],t,a,s,l,u,i,n,r)},Ss.prototype.addLine=function(t,e,i,n,r,o,a,s,l){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var u=0;u<t.length-1;u++)this.totalDistance+=t[u].dist(t[u+1]);this.updateScaledDistance()}for(var c="Polygon"===bs[e.type],h=t.length;2<=h&&t[h-1].equals(t[h-2]);)h--;for(var p=0;p<h-1&&t[p].equals(t[p+1]);)p++;if(!(h<(c?3:2))){"bevel"===i&&(r=1.05);var d,f=this.overscaling<=16?15*Ee/(512*this.overscaling):0,m=this.segments.prepareSegment(10*h,this.layoutVertexArray,this.indexArray),g=void 0,v=void 0,y=void 0,_=void 0;this.e1=this.e2=-1,c&&(_=t[p].sub(d=t[h-2])._unit()._perp());for(var b=p;b<h;b++)if(!(v=b===h-1?c?t[p+1]:void 0:t[b+1])||!t[b].equals(v)){_&&(y=_),d&&(g=d),d=t[b],_=v?v.sub(d)._unit()._perp():y;var x=(y=y||_).add(_);0===x.x&&0===x.y||x._unit();var w=y.x*_.x+y.y*_.y,S=x.x*_.x+x.y*_.y,T=0!==S?1/S:1/0,C=2*Math.sqrt(2-2*S),E=S<xs&&g&&v,k=0<y.x*_.y-y.y*_.x;if(E&&p<b){var A=d.dist(g);if(2*f<A){var I=d.sub(d.sub(g)._mult(f/A)._round());this.updateDistance(g,I),this.addCurrentVertex(I,y,0,0,m),g=I}}var P=g&&v,z=P?i:c?"butt":n;if(P&&"round"===z&&(T<o?z="miter":T<=2&&(z="fakeround")),"miter"===z&&r<T&&(z="bevel"),"bevel"===z&&(2<T&&(z="flipbevel"),T<r&&(z="miter")),g&&this.updateDistance(g,d),"miter"===z)x._mult(T),this.addCurrentVertex(d,x,0,0,m);else if("flipbevel"===z){if(100<T)x=_.mult(-1);else{var M=T*y.add(_).mag()/y.sub(_).mag();x._perp()._mult(M*(k?-1:1))}this.addCurrentVertex(d,x,0,0,m),this.addCurrentVertex(d,x.mult(-1),0,0,m)}else if("bevel"===z||"fakeround"===z){var D=-Math.sqrt(T*T-1),L=k?D:0,O=k?0:D;if(g&&this.addCurrentVertex(d,y,L,O,m),"fakeround"===z)for(var R=Math.round(180*C/Math.PI/20),F=1;F<R;F++){var B=F/R;if(.5!==B){var N=B-.5;B+=B*N*(B-1)*((1.0904+w*(w*(3.55645-1.43519*w)-3.2452))*N*N+(.848013+w*(.215638*w-1.06021)))}var j=_.sub(y)._mult(B)._add(y)._unit()._mult(k?-1:1);this.addHalfVertex(d,j.x,j.y,!1,k,0,m)}v&&this.addCurrentVertex(d,_,-L,-O,m)}else if("butt"===z)this.addCurrentVertex(d,x,0,0,m);else if("square"===z){var $=g?1:-1;this.addCurrentVertex(d,x,$,$,m)}else"round"===z&&(g&&(this.addCurrentVertex(d,y,0,0,m),this.addCurrentVertex(d,y,1,1,m,!0)),v&&(this.addCurrentVertex(d,_,-1,-1,m,!0),this.addCurrentVertex(d,_,0,0,m)));if(E&&b<h-1){var U=d.dist(v);if(2*f<U){var V=d.add(v.sub(d)._mult(f/U)._round());this.updateDistance(d,V),this.addCurrentVertex(V,_,0,0,m),d=V}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,l,s)}},Ss.prototype.addCurrentVertex=function(t,e,i,n,r,o){void 0===o&&(o=!1);var a=e.y*n-e.x,s=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,r),this.addHalfVertex(t,a,s,o,!0,-n,r),this.distance>ws/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,n,r,o))},Ss.prototype.addHalfVertex=function(t,e,i,n,r,o,a){var s=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(n?1:0),(t.y<<1)+(r?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6);var l=a.vertexLength++;0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,l),a.primitiveLength++),r?this.e2=l:this.e1=l},Ss.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(ws-1):this.distance},Ss.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},jn("LineBucket",Ss,{omit:["layers","patternFeatures"]});var Ts=new wr({"line-cap":new vr(kt.layout_line["line-cap"]),"line-join":new yr(kt.layout_line["line-join"]),"line-miter-limit":new vr(kt.layout_line["line-miter-limit"]),"line-round-limit":new vr(kt.layout_line["line-round-limit"]),"line-sort-key":new yr(kt.layout_line["line-sort-key"])}),Cs={paint:new wr({"line-opacity":new yr(kt.paint_line["line-opacity"]),"line-color":new yr(kt.paint_line["line-color"]),"line-translate":new vr(kt.paint_line["line-translate"]),"line-translate-anchor":new vr(kt.paint_line["line-translate-anchor"]),"line-width":new yr(kt.paint_line["line-width"]),"line-gap-width":new yr(kt.paint_line["line-gap-width"]),"line-offset":new yr(kt.paint_line["line-offset"]),"line-blur":new yr(kt.paint_line["line-blur"]),"line-dasharray":new br(kt.paint_line["line-dasharray"]),"line-pattern":new _r(kt.paint_line["line-pattern"]),"line-gradient":new xr(kt.paint_line["line-gradient"])}),layout:Ts},Es=new(function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.possiblyEvaluate=function(t,e){return e=new lr(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),r.prototype.possiblyEvaluate.call(this,t,e)},t.prototype.evaluate=function(t,e,i,n){return e=d({},e,{zoom:Math.floor(e.zoom)}),r.prototype.evaluate.call(this,t,e,i,n)},t}(yr))(Cs.paint.properties["line-width"].specification);Es.useIntegerZoom=!0;var ks=function(i){function t(t){i.call(this,t,Cs)}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},t.prototype._updateGradient=function(){this.gradient=fa(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},t.prototype.recalculate=function(t,e){i.prototype.recalculate.call(this,t,e),this.paint._values["line-floorwidth"]=Es.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(t){return new Ss(t)},t.prototype.queryRadius=function(t){var e=t,i=As(Xo("line-width",this,e),Xo("line-gap-width",this,e)),n=Xo("line-offset",this,e);return i/2+Math.abs(n)+Yo(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(t,e,i,n,r,o,a){var s=Ko(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*As(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),u=this.paint.get("line-offset").evaluate(e,i);return u&&(n=function(t,e){for(var i=[],n=new ht(0,0),r=0;r<t.length;r++){for(var o=t[r],a=[],s=0;s<o.length;s++){var l=o[s],u=o[s+1],c=0===s?n:l.sub(o[s-1])._unit()._perp(),h=s===o.length-1?n:u.sub(l)._unit()._perp(),p=c._add(h)._unit();p._mult(1/(p.x*h.x+p.y*h.y)),a.push(p._mult(e)._add(l))}i.push(a)}return i}(n,u*a)),function(t,e,i){for(var n=0;n<e.length;n++){var r=e[n];if(3<=t.length)for(var o=0;o<r.length;o++)if(Zo(t,r[o]))return!0;if(Uo(t,r,i))return!0}return!1}(s,n,l)},t.prototype.isTileClipped=function(){return!0},t}(Sr);function As(t,e){return 0<e?e+2*t:t}var Is=kr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ps=kr([{name:"a_projected_pos",components:3,type:"Float32"}],4),zs=(kr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),kr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Ms=(kr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ds=kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Ls(t,r,o){return t.sections.forEach(function(t){var e,i,n;t.text=(e=t.text,i=o,"uppercase"===(n=r.layout.get("text-transform").evaluate(i,{}))?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),sr.applyArabicShaping&&(e=sr.applyArabicShaping(e)),e)}),t}kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),kr([{type:"Float32",name:"offsetX"}]),kr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Os={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Rs=24,Fs=function(t,e,i,n,r){var o,a,s=8*r-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=i?r-1:0,p=i?-1:1,d=t[e+h];for(h+=p,o=d&(1<<-c)-1,d>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;0<c;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=u}return(d?-1:1)*a*Math.pow(2,o-n)},Bs=function(t,e,i,n,r,o){var a,s,l,u=8*o-r-1,c=(1<<u)-1,h=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,f=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?p/l:p*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));8<=r;t[i+d]=255&s,d+=f,s/=256,r-=8);for(a=a<<r|s,u+=r;0<u;t[i+d]=255&a,d+=f,a/=256,u-=8);t[i+d-f]|=128*m},Ns=js;function js(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}js.Varint=0,js.Fixed64=1,js.Bytes=2,js.Fixed32=5;var $s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Us(t){return t.type===js.Bytes?t.readVarint()+t.pos:t.pos+1}function Vs(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function qs(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;t<=r;r--)i.buf[r+n]=i.buf[r]}function Hs(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Ws(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function Zs(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function Gs(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Xs(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Ys(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Ks(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Js(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function Qs(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function tl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function el(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function il(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}js.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=7&n,t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=tl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=il(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=tl(this.buf,this.pos)+4294967296*tl(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=tl(this.buf,this.pos)+4294967296*il(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Fs(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Fs(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,o=i.buf;if(n=(112&(r=o[i.pos++]))>>4,r<128)return Vs(t,n,e);if(n|=(127&(r=o[i.pos++]))<<3,r<128)return Vs(t,n,e);if(n|=(127&(r=o[i.pos++]))<<10,r<128)return Vs(t,n,e);if(n|=(127&(r=o[i.pos++]))<<17,r<128)return Vs(t,n,e);if(n|=(127&(r=o[i.pos++]))<<24,r<128)return Vs(t,n,e);if(n|=(1&(r=o[i.pos++]))<<31,r<128)return Vs(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t,e,i,n=this.readVarint()+this.pos,h=this.pos;return 12<=(this.pos=n)-h&&$s?(t=this.buf,e=h,i=n,$s.decode(t.subarray(e,i))):function(t,e,i){for(var n="",r=h;r<i;){var o,a,s,l=t[r],u=null,c=239<l?4:223<l?3:191<l?2:1;if(i<r+c)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[r+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(a=t[r+2],128==(192&(o=t[r+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(a=t[r+2],s=t[r+3],128==(192&(o=t[r+1]))&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),r+=c}return n}(this.buf,0,n)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==js.Bytes)return t.push(this.readVarint(e));var i=Us(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==js.Bytes)return t.push(this.readSVarint());var e=Us(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==js.Bytes)return t.push(this.readBoolean());var e=Us(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==js.Bytes)return t.push(this.readFloat());var e=Us(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==js.Bytes)return t.push(this.readDouble());var e=Us(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==js.Bytes)return t.push(this.readFixed32());var e=Us(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==js.Bytes)return t.push(this.readSFixed32());var e=Us(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==js.Bytes)return t.push(this.readFixed64());var e=Us(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==js.Bytes)return t.push(this.readSFixed64());var e=Us(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===js.Varint)for(;127<this.buf[this.pos++];);else if(e===js.Bytes)this.pos=this.readVarint()+this.pos;else if(e===js.Fixed32)this.pos+=4;else{if(e!==js.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),el(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),el(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),el(this.buf,-1&t,this.pos),el(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),el(this.buf,-1&t,this.pos),el(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(u){268435455<(u=+u||0)||u<0?function(t,e){var i,n,r,o,a,s,l;if(0<=u?(i=u%4294967296|0,n=u/4294967296|0):(n=~(-u/4294967296),4294967295^(i=~(-u%4294967296))?i=i+1|0:n=n+1|(i=0)),0x10000000000000000<=u||u<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),s=i,(l=e).buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,l.buf[l.pos]=127&(s>>>=7),a=(7&(r=n))<<4,(o=e).buf[o.pos++]|=a|((r>>>=3)?128:0),r&&(o.buf[o.pos++]=127&r|((r>>>=7)?128:0),r&&(o.buf[o.pos++]=127&r|((r>>>=7)?128:0),r&&(o.buf[o.pos++]=127&r|((r>>>=7)?128:0),r&&(o.buf[o.pos++]=127&r|((r>>>=7)?128:0),r&&(o.buf[o.pos++]=127&r)))))}(0,this):(this.realloc(4),this.buf[this.pos++]=127&u|(127<u?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(127<u?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(127<u?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,o=0;o<e.length;o++){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!r){56319<n||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;128<=i&&qs(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Bs(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Bs(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;128<=n&&qs(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,js.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Hs,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Ws,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Xs,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Zs,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Gs,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Ys,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Ks,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Js,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Qs,e)},writeBytesField:function(t,e){this.writeTag(t,js.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,js.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,js.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,js.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,js.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,js.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,js.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,js.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,js.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,js.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var nl=3;function rl(t,e,i){1===t&&i.readMessage(ol,e)}function ol(t,e,i){if(3===t){var n=i.readMessage(al,{}),r=n.width,o=n.height,a=n.left,s=n.top,l=n.advance;e.push({id:n.id,bitmap:new ha({width:r+2*nl,height:o+2*nl},n.bitmap),metrics:{width:r,height:o,left:a,top:s,advance:l}})}}function al(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}var sl=nl;function ll(t){for(var e=0,i=0,n=0,r=t;n<r.length;n+=1){var o=r[n];e+=o.w*o.h,i=Math.max(i,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],s=0,l=0,u=0,c=t;u<c.length;u+=1)for(var h=c[u],p=a.length-1;0<=p;p--){var d=a[p];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,l=Math.max(l,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===d.w&&h.h===d.h){var f=a.pop();p<a.length&&(a[p]=f)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):(h.w===d.w||a.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}var ul=1,cl=function(t,e){var i=e.pixelRatio,n=e.version,r=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=r,this.stretchY=o,this.content=a,this.version=n},hl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};hl.tl.get=function(){return[this.paddedRect.x+ul,this.paddedRect.y+ul]},hl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-ul,this.paddedRect.y+this.paddedRect.h-ul]},hl.tlbr.get=function(){return this.tl.concat(this.br)},hl.displaySize.get=function(){return[(this.paddedRect.w-2*ul)/this.pixelRatio,(this.paddedRect.h-2*ul)/this.pixelRatio]},Object.defineProperties(cl.prototype,hl);var pl=function(t,e){var i={},n={};this.haveRenderCallbacks=[];var r=[];this.addImages(t,i,r),this.addImages(e,n,r);var o=ll(r),a=new pa({width:o.w||1,height:o.h||1});for(var s in t){var l=t[s],u=i[s].paddedRect;pa.copy(l.data,a,{x:0,y:0},{x:u.x+ul,y:u.y+ul},l.data)}for(var c in e){var h=e[c],p=n[c].paddedRect,d=p.x+ul,f=p.y+ul,m=h.data.width,g=h.data.height;pa.copy(h.data,a,{x:0,y:0},{x:d,y:f},h.data),pa.copy(h.data,a,{x:0,y:g-1},{x:d,y:f-1},{width:m,height:1}),pa.copy(h.data,a,{x:0,y:0},{x:d,y:f+g},{width:m,height:1}),pa.copy(h.data,a,{x:m-1,y:0},{x:d-1,y:f},{width:1,height:g}),pa.copy(h.data,a,{x:0,y:0},{x:d+m,y:f},{width:1,height:g})}this.image=a,this.iconPositions=i,this.patternPositions=n};pl.prototype.addImages=function(t,e,i){for(var n in t){var r=t[n],o={x:0,y:0,w:r.data.width+2*ul,h:r.data.height+2*ul};i.push(o),e[n]=new cl(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(n)}},pl.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},pl.prototype.patchUpdatedImage=function(t,e,i){if(t&&e&&t.version!==e.version){t.version=e.version;var n=t.tl;i.update(e.data,void 0,{x:n[0],y:n[1]})}},jn("ImagePosition",cl),jn("ImageAtlas",pl);var dl={horizontal:1,vertical:2,horizontalOnly:3},fl=-17,ml=function(){this.scale=1,this.fontStack="",this.imageName=null};ml.forText=function(t,e){var i=new ml;return i.scale=t||1,i.fontStack=e,i},ml.forImage=function(t){var e=new ml;return e.imageName=t,e};var gl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function vl(t,e,i,n,r,o,a,s,X,l,u,c,h,p,d,f){var m,g=gl.fromFeature(t,r);c===dl.vertical&&g.verticalizePunctuation();var v=sr.processBidirectionalText,y=sr.processStyledBidirectionalText;if(v&&1===g.sections.length){m=[];for(var _=0,b=v(g.toString(),Sl(g,l,o,e,n,p,d));_<b.length;_+=1){var x=b[_],w=new gl;w.text=x,w.sections=g.sections;for(var S=0;S<x.length;S++)w.sectionIndex.push(0);m.push(w)}}else if(y){m=[];for(var T=0,C=y(g.text,g.sectionIndex,Sl(g,l,o,e,n,p,d));T<C.length;T+=1){var E=C[T],k=new gl;k.text=E[0],k.sectionIndex=E[1],k.sections=g.sections,m.push(k)}}else m=function(t,e){for(var i=[],n=t.text,r=0,o=0,a=e;o<a.length;o+=1){var s=a[o];i.push(t.substring(r,s)),r=s}return r<n.length&&i.push(t.substring(r,n.length)),i}(g,Sl(g,l,o,e,n,p,d));var A=[],I={positionedLines:A,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:c,iconsInText:!1,verticalizable:!1};return function(t,e,i,n,r,o,a,s,l,u,c,h){for(var p=0,d=fl,f=0,m=0,g="right"===X?1:"left"===X?0:.5,v=0,y=0,_=r;y<_.length;y+=1){var b=_[y];b.trim();var x=b.getMaxScale(),w=(x-1)*Rs,S={positionedGlyphs:[],lineOffset:0},T=(t.positionedLines[v]=S).positionedGlyphs,C=0;if(b.length()){for(var E=0;E<b.length();E++){var k=b.getSection(E),A=b.getSectionIndex(E),I=b.getCharCode(E),P=0,z=null,M=null,D=null,L=Rs,O=!(l===dl.horizontal||!c&&!Xn(I)||c&&(yl[I]||(q=I,Zn.Arabic(q)||Zn["Arabic Supplement"](q)||Zn["Arabic Extended-A"](q)||Zn["Arabic Presentation Forms-A"](q)||Zn["Arabic Presentation Forms-B"](q))));if(k.imageName){var R=n[k.imageName];if(!R)continue;D=k.imageName,t.iconsInText=t.iconsInText||!0,M=R.paddedRect;var F=R.displaySize;k.scale=k.scale*Rs/h,P=w+(Rs-F[1]*k.scale),L=(z={width:F[0],height:F[1],left:ul,top:-sl,advance:O?F[1]:F[0]}).advance;var B=O?F[0]*k.scale-Rs*x:F[1]*k.scale-Rs*x;0<B&&C<B&&(C=B)}else{var N=i[k.fontStack],j=N&&N[I];if(j&&j.rect)M=j.rect,z=j.metrics;else{var $=e[k.fontStack],U=$&&$[I];if(!U)continue;z=U.metrics}P=(x-k.scale)*Rs}O?(t.verticalizable=!0,T.push({glyph:I,imageName:D,x:p,y:d+P,vertical:O,scale:k.scale,fontStack:k.fontStack,sectionIndex:A,metrics:z,rect:M}),p+=L*k.scale+u):(T.push({glyph:I,imageName:D,x:p,y:d+P,vertical:O,scale:k.scale,fontStack:k.fontStack,sectionIndex:A,metrics:z,rect:M}),p+=z.advance*k.scale+u)}0!==T.length&&(f=Math.max(p-u,f),Cl(T,0,T.length-1,g,C)),p=0;var V=o*x+C;S.lineOffset=Math.max(C,w),d+=V,m=Math.max(V,m),++v}else d+=o,++v}var q,H=d-fl,W=Tl(a),Z=W.horizontalAlign,G=W.verticalAlign;(function(t,e,i,n,r,o,a,s,l){var u,c=(e-i)*r;u=o!==a?-s*n-fl:(-n*l+.5)*a;for(var h=0,p=t;h<p.length;h+=1)for(var d=0,f=p[h].positionedGlyphs;d<f.length;d+=1){var m=f[d];m.x+=c,m.y+=u}})(t.positionedLines,g,Z,G,f,m,o,H,r.length),t.top+=-G*H,t.bottom=t.top+H,t.left+=-Z*f,t.right=t.left+f}(I,e,i,n,m,a,s,0,c,l,h,f),!function(t){for(var e=0,i=A;e<i.length;e+=1)if(0!==i[e].positionedGlyphs.length)return!1;return!0}()&&I}gl.fromFeature=function(t,e){for(var i=new gl,n=0;n<t.sections.length;n++){var r=t.sections[n];r.image?i.addImageSection(r):i.addTextSection(r,e)}return i},gl.prototype.length=function(){return this.text.length},gl.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},gl.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},gl.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},gl.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i+1)||null,r=t.charCodeAt(i-1)||null;e+=n&&Yn(n)&&!Os[t[i+1]]||r&&Yn(r)&&!Os[t[i-1]]||!Os[t[i]]?t[i]:Os[t[i]]}return e}(this.text)},gl.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&yl[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,n=this.text.length-1;0<=n&&t<=n&&yl[this.text.charCodeAt(n)];n--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},gl.prototype.substring=function(t,e){var i=new gl;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},gl.prototype.toString=function(){return this.text},gl.prototype.getMaxScale=function(){var i=this;return this.sectionIndex.reduce(function(t,e){return Math.max(t,i.sections[e].scale)},0)},gl.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(ml.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,n=0;n<t.text.length;++n)this.sectionIndex.push(i)},gl.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(ml.forImage(e)),this.sectionIndex.push(this.sections.length-1)):pt("Reached maximum number of images 6401")}else pt("Can't add FormattedSection with an empty image.")},gl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var yl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_l={};function bl(t,e,i,n,r,o){if(e.imageName){var a=n[e.imageName];return a?a.displaySize[0]*e.scale*Rs/o+r:0}var s=i[e.fontStack],l=s&&s[t];return l?l.metrics.advance*e.scale+r:0}function xl(t,e,i,n){var r=Math.pow(t-e,2);return n?t<e?r/2:2*r:r+Math.abs(i)*i}function wl(t,e,i,n,r,o){for(var a=null,s=xl(e,i,r,o),l=0,u=n;l<u.length;l+=1){var c=u[l],h=xl(e-c.x,i,r,o)+c.badness;h<=s&&(a=c,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function Sl(t,e,i,n,r,o,a){if("point"!==o)return[];if(!t)return[];for(var s,l=[],u=function(t,e,i,n,r,o){for(var a=0,s=0;s<t.length();s++){var l=t.getSection(s);a+=bl(t.getCharCode(s),l,n,r,e,o)}return a/Math.max(1,Math.ceil(a/i))}(t,e,i,n,r,a),c=0<=t.text.indexOf(""),h=0,p=0;p<t.length();p++){var d=t.getSection(p),f=t.getCharCode(p);if(yl[f]||(h+=bl(f,d,n,r,e,a)),p<t.length()-1){var m=!((s=f)<11904||!(Zn["Bopomofo Extended"](s)||Zn.Bopomofo(s)||Zn["CJK Compatibility Forms"](s)||Zn["CJK Compatibility Ideographs"](s)||Zn["CJK Compatibility"](s)||Zn["CJK Radicals Supplement"](s)||Zn["CJK Strokes"](s)||Zn["CJK Symbols and Punctuation"](s)||Zn["CJK Unified Ideographs Extension A"](s)||Zn["CJK Unified Ideographs"](s)||Zn["Enclosed CJK Letters and Months"](s)||Zn["Halfwidth and Fullwidth Forms"](s)||Zn.Hiragana(s)||Zn["Ideographic Description Characters"](s)||Zn["Kangxi Radicals"](s)||Zn["Katakana Phonetic Extensions"](s)||Zn.Katakana(s)||Zn["Vertical Forms"](s)||Zn["Yi Radicals"](s)||Zn["Yi Syllables"](s)));(_l[f]||m||d.imageName)&&l.push(wl(p+1,h,u,l,(g=f,v=t.getCharCode(p+1),y=void 0,y=0,10===g&&(y-=1e4),m&&c&&(y+=150),40!==g&&65288!==g||(y+=50),41!==v&&65289!==v||(y+=50),y),!1))}}var g,v,y;return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(wl(t.length(),h,u,l,0,!0))}function Tl(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function Cl(t,e,i,n,r){if(n||r)for(var o=t[i],a=(t[i].x+o.metrics.advance*o.scale)*n,s=e;s<=i;s++)t[s].x-=a,t[s].y+=r}function El(t,e,i,n,r,o){var a,s=t.image;if(s.content){var l=s.content,u=s.pixelRatio||1;a=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,h,p,d,f=e.left*o,m=e.right*o;"width"===i||"both"===i?(d=r[0]+f-n[3],h=r[0]+m+n[1]):h=(d=r[0]+(f+m-s.displaySize[0])/2)+s.displaySize[0];var g=e.top*o,v=e.bottom*o;return"height"===i||"both"===i?(c=r[1]+g-n[0],p=r[1]+v+n[2]):p=(c=r[1]+(g+v-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:p,left:d,collisionPadding:a}}_l[10]=!0,_l[32]=!0,_l[38]=!0,_l[40]=!0,_l[41]=!0,_l[43]=!0,_l[45]=!0,_l[47]=!0,_l[173]=!0,_l[183]=!0,_l[8203]=!0,_l[8208]=!0,_l[8211]=!0,_l[8231]=!0;var kl=function(r){function t(t,e,i,n){r.call(this,t,e),this.angle=i,void 0!==n&&(this.segment=n)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(ht);jn("Anchor",kl);var Al=128;function Il(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new lr(t+1))};if("source"===i.kind)return{kind:"source"};for(var n=i.zoomStops,r=i.interpolationType,o=0;o<n.length&&n[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<n.length&&n[a]<t+1;)a++;a=Math.min(n.length-1,a);var s=n[o],l=n[a];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:l,minSize:i.evaluate(new lr(s)),maxSize:i.evaluate(new lr(l)),interpolationType:r}}function Pl(t,e,i){var n=e.uSize,r=i.lowerSize;return"source"===t.kind?r/Al:"composite"===t.kind?He(r/Al,i.upperSize/Al,e.uSizeT):n}function zl(t,e){var i=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){var r=t.interpolationType,o=r?s(li.interpolationFactor(r,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?n=He(t.minSize,t.maxSize,o):i=o}return{uSizeT:i,uSize:n}}var Ml=Object.freeze({__proto__:null,getSizeData:Il,evaluateSizeForFeature:Pl,evaluateSizeForZoom:zl,SIZE_PACK_FACTOR:Al});function Dl(t,e,i,n,r){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;-i/2<s;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<i/2;){var c=t[a],h=t[a+1];if(!h)return!1;var p=t[a-1].angleTo(c)-c.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:p}),u+=p;s-l[0].distance>n;)u-=l.shift().angleDelta;if(r<u)return!1;a++,s+=c.dist(h)}return!0}function Ll(t){for(var e=0,i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function Ol(t,e,i){return t?.6*e*i:0}function Rl(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Fl(t,e,i,n,r,o){for(var a=Ol(i,r,o),s=Rl(i,n)*o,l=0,u=Ll(t)/2,c=0;c<t.length-1;c++){var h=t[c],p=t[c+1],d=h.dist(p);if(u<l+d){var f=(u-l)/d,m=He(h.x,p.x,f),g=He(h.y,p.y,f),v=new kl(m,g,p.angleTo(h),c);return v._round(),!a||Dl(t,v,s,a,e)?v:void 0}l+=d}}var Bl=ul;function Nl(T,C,E,t){var e=[],k=T.image,A=k.pixelRatio,i=k.paddedRect.w-2*Bl,n=k.paddedRect.h-2*Bl,I=T.right-T.left,P=T.bottom-T.top,r=k.stretchX||[[0,i]],o=k.stretchY||[[0,n]],a=function(t,e){return t+e[1]-e[0]},z=r.reduce(a,0),M=o.reduce(a,0),s=i-z,l=n-M,D=0,L=z,O=0,R=M,F=0,B=s,N=0,j=l;if(k.content&&t){var u=k.content;D=jl(r,0,u[0]),O=jl(o,0,u[1]),L=jl(r,u[0],u[2]),R=jl(o,u[1],u[3]),F=u[0]-D,N=u[1]-O,B=u[2]-u[0]-L,j=u[3]-u[1]-R}var c=function(t,e,i,n){var r=Ul(t.stretch-D,L,I,T.left),o=Vl(t.fixed-F,B,t.stretch,z),a=Ul(e.stretch-O,R,P,T.top),s=Vl(e.fixed-N,j,e.stretch,M),l=Ul(i.stretch-D,L,I,T.left),u=Vl(i.fixed-F,B,i.stretch,z),c=Ul(n.stretch-O,R,P,T.top),h=Vl(n.fixed-N,j,n.stretch,M),p=new ht(r,a),d=new ht(l,a),f=new ht(l,c),m=new ht(r,c),g=new ht(o/A,s/A),v=new ht(u/A,h/A),y=C*Math.PI/180;if(y){var _=Math.sin(y),b=Math.cos(y),x=[b,-_,_,b];p._matMult(x),d._matMult(x),m._matMult(x),f._matMult(x)}var w=t.stretch+t.fixed,S=e.stretch+e.fixed;return{tl:p,tr:d,bl:m,br:f,tex:{x:k.paddedRect.x+Bl+w,y:k.paddedRect.y+Bl+S,w:i.stretch+i.fixed-w,h:n.stretch+n.fixed-S},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:g,pixelOffsetBR:v,minFontScaleX:B/A/I,minFontScaleY:j/A/P,isSDF:E}};if(t&&(k.stretchX||k.stretchY))for(var h=$l(r,s,z),p=$l(o,l,M),d=0;d<h.length-1;d++)for(var f=h[d],m=h[d+1],g=0;g<p.length-1;g++)e.push(c(f,p[g],m,p[g+1]));else e.push(c({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:i+1},{fixed:0,stretch:n+1}));return e}function jl(t,e,i){for(var n=0,r=0,o=t;r<o.length;r+=1){var a=o[r];n+=Math.max(e,Math.min(i,a[1]))-Math.max(e,Math.min(i,a[0]))}return n}function $l(t,e,i){for(var n=[{fixed:-Bl,stretch:0}],r=0,o=t;r<o.length;r+=1){var a=o[r],s=a[0],l=a[1],u=n[n.length-1];n.push({fixed:s-u.stretch,stretch:u.stretch}),n.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}return n.push({fixed:e+Bl,stretch:i}),n}function Ul(t,e,i,n){return t/e*i+n}function Vl(t,e,i,n){return t-e*i/n}var ql=function(t,e,i,n,r,o,a,s,l,u,c,h){var p=a.top*s-l,d=a.bottom*s+l,f=a.left*s-l,m=a.right*s+l,g=a.collisionPadding;if(g&&(f-=g[0]*s,p-=g[1]*s,m+=g[2]*s,d+=g[3]*s),this.boxStartIndex=t.length,u){var v=d-p,y=m-f;0<v&&(v=Math.max(10*s,v),this._addLineCollisionCircles(t,e,i,i.segment,y,v,n,r,o,c))}else{if(h){var _=new ht(f,p),b=new ht(m,p),x=new ht(f,d),w=new ht(m,d),S=h*Math.PI/180;_._rotate(S),b._rotate(S),x._rotate(S),w._rotate(S),f=Math.min(_.x,b.x,x.x,w.x),m=Math.max(_.x,b.x,x.x,w.x),p=Math.min(_.y,b.y,x.y,w.y),d=Math.max(_.y,b.y,x.y,w.y)}t.emplaceBack(i.x,i.y,f,p,m,d,n,r,o,0,0)}this.boxEndIndex=t.length};ql.prototype._addLineCollisionCircles=function(t,e,i,n,r,o,a,s,l,u){var c=o/2,h=Math.floor(r/c)||1,p=1+.4*Math.log(u)/Math.LN2,d=Math.floor(h*p/2),f=-o/2,m=i,g=n+1,v=f,y=-r/2,_=y-r/4;do{if(--g<0){if(y<v)return;g=0;break}v-=e[g].dist(m),m=e[g]}while(_<v);for(var b=e[g].dist(e[g+1]),x=-d;x<h+d;x++){var w=x*c,S=y+w;if(w<0&&(S+=w),r<w&&(S+=w-r),!(S<v)){for(;v+b<S;){if(v+=b,++g+1>=e.length)return;b=e[g].dist(e[g+1])}var T=S-v,C=e[g],E=e[g+1].sub(C)._unit()._mult(T)._add(C)._round(),k=Math.abs(S-f)<c?0:.8*(S-f);t.emplaceBack(E.x,E.y,-o/2,-o/2,o/2,o/2,a,s,l,o/2,k)}}};var Hl=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Wl),this.data=t,this.length=this.data.length,this.compare=e,0<this.length)for(var i=(this.length>>1)-1;0<=i;i--)this._down(i)};function Wl(t,e){return t<e?-1:e<t?1:0}function Zl(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var n=1/0,r=1/0,o=-1/0,a=-1/0,s=t[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<n)&&(n=u.x),(!l||u.y<r)&&(r=u.y),(!l||u.x>o)&&(o=u.x),(!l||u.y>a)&&(a=u.y)}var c=Math.min(o-n,a-r),h=c/2,p=new Hl([],Gl);if(0===c)return new ht(n,r);for(var d=n;d<o;d+=c)for(var f=r;f<a;f+=c)p.push(new Xl(d+h,f+h,h,t));for(var m=function(t){for(var e=0,i=0,n=0,r=t[0],o=0,a=r.length,s=a-1;o<a;s=o++){var l=r[o],u=r[s],c=l.x*u.y-u.x*l.y;i+=(l.x+u.x)*c,n+=(l.y+u.y)*c,e+=3*c}return new Xl(i/e,n/e,0,t)}(t),g=p.length;p.length;){var v=p.pop();(v.d>m.d||!m.d)&&(m=v,i&&console.log("found best %d after %d probes",Math.round(1e4*v.d)/1e4,g)),v.max-m.d<=e||(p.push(new Xl(v.p.x-(h=v.h/2),v.p.y-h,h,t)),p.push(new Xl(v.p.x+h,v.p.y-h,h,t)),p.push(new Xl(v.p.x-h,v.p.y+h,h,t)),p.push(new Xl(v.p.x+h,v.p.y+h,h,t)),g+=4)}return i&&(console.log("num probes: "+g),console.log("best distance: "+m.d)),m.p}function Gl(t,e){return e.max-t.max}function Xl(t,e,i,n){this.p=new ht(t,e),this.h=i,this.d=function(t,e){for(var i=!1,n=1/0,r=0;r<e.length;r++)for(var o=e[r],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(i=!i),n=Math.min(n,Ho(t,u,c))}return(i?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}Hl.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Hl.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,0<this.length&&(this.data[0]=e,this._down(0)),t}},Hl.prototype.peek=function(){return this.data[0]},Hl.prototype._up=function(t){for(var e=this.data,i=this.compare,n=e[t];0<t;){var r=t-1>>1,o=e[r];if(0<=i(n,o))break;e[t]=o,t=r}e[t]=n},Hl.prototype._down=function(t){for(var e=this.data,i=this.compare,n=this.length>>1,r=e[t];t<n;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&i(e[s],a)<0&&(a=e[o=s]),0<=i(a,r))break;e[t]=a,t=o}e[t]=r};var Yl=Number.POSITIVE_INFINITY;function Kl(t,e){return e[1]!==Yl?function(t,e,i){var n=0,r=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":r=i-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-i}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,r]}(t,e[0],e[1]):function(t,e){var i=0,n=0;e<0&&(e=0);var r=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=r-7;break;case"bottom-right":case"bottom-left":n=7-r;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":i=-r;break;case"top-left":case"bottom-left":i=r;break;case"left":i=e;break;case"right":i=-e}return[i,n]}(t,e[0])}function Jl(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var Ql=255,tu=Ql*Al;function eu(t,e,i,n,r,o,a,s,l,u,c,h,p,d,f){var m=function(t,e,i,n,r,o,a,s){for(var l=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=[],c=0,h=e.positionedLines;c<h.length;c+=1)for(var p=h[c],d=0,f=p.positionedGlyphs;d<f.length;d+=1){var m=f[d];if(m.rect){var g=m.rect||{},v=sl+1,y=!0,_=1,b=0,x=(r||s)&&m.vertical,w=m.metrics.advance*m.scale/2;if(s&&e.verticalizable&&(b=p.lineOffset/2-(m.imageName?-(Rs-m.metrics.width*m.scale)/2:(m.scale-1)*Rs)),m.imageName){var S=a[m.imageName];y=S.sdf,v=ul/(_=S.pixelRatio)}var T=r?[m.x+w,m.y]:[0,0],C=r?[0,0]:[m.x+w+i[0],m.y+i[1]-b],E=[0,0];x&&(E=C,C=[0,0]);var k=(m.metrics.left-v)*m.scale-w+C[0],A=(-m.metrics.top-v)*m.scale+C[1],I=k+g.w*m.scale/_,P=A+g.h*m.scale/_,z=new ht(k,A),M=new ht(I,A),D=new ht(k,P),L=new ht(I,P);if(x){var O=new ht(-w,w-fl),R=-Math.PI/2,F=Rs/2-w,B=new ht(5-fl-F,-(m.imageName?F:0)),N=new(Function.prototype.bind.apply(ht,[null].concat(E)));z._rotateAround(R,O)._add(B)._add(N),M._rotateAround(R,O)._add(B)._add(N),D._rotateAround(R,O)._add(B)._add(N),L._rotateAround(R,O)._add(B)._add(N)}if(l){var j=Math.sin(l),$=Math.cos(l),U=[$,-j,j,$];z._matMult(U),M._matMult(U),D._matMult(U),L._matMult(U)}var V=new ht(0,0),q=new ht(0,0);u.push({tl:z,tr:M,bl:D,br:L,tex:g,writingMode:e.writingMode,glyphOffset:T,sectionIndex:m.sectionIndex,isSDF:y,pixelOffsetTL:V,pixelOffsetBR:q,minFontScaleX:0,minFontScaleY:0})}}return u}(0,i,s,r,o,a,n,t.allowVerticalPlacement),g=t.textSizeData,v=null;"source"===g.kind?(v=[Al*r.layout.get("text-size").evaluate(a,{})])[0]>tu&&pt(t.layerIds[0]+': Value for "text-size" is >= '+Ql+'. Reduce your "text-size".'):"composite"===g.kind&&((v=[Al*d.compositeTextSizes[0].evaluate(a,{},f),Al*d.compositeTextSizes[1].evaluate(a,{},f)])[0]>tu||v[1]>tu)&&pt(t.layerIds[0]+': Value for "text-size" is >= '+Ql+'. Reduce your "text-size".'),t.addSymbols(t.text,m,v,s,o,a,u,e,l.lineStartIndex,l.lineLength,p,f);for(var y=0,_=c;y<_.length;y+=1)h[_[y]]=t.text.placedSymbolArray.length-1;return 4*m.length}function iu(t){for(var e in t)return t[e];return null}function nu(t,e,i,n){var r=t.compareText;if(e in r){for(var o=r[e],a=o.length-1;0<=a;a--)if(n.dist(o[a])<i)return!0}else r[e]=[];return r[e].push(n),!1}var ru=cs.VectorTileFeature.types,ou=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function au(t,e,i,n,r,o,a,s,l,u,c,h,p){var d=s?Math.min(tu,Math.round(s[0])):0,f=s?Math.min(tu,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*n),Math.round(32*r),o,a,(d<<1)+(l?1:0),f,16*u,16*c,256*h,256*p)}function su(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function lu(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(Jn(i[e].text))return!0;return!1}var uu=function(t){this.layoutVertexArray=new Lr,this.indexArray=new Hr,this.programConfigurations=t,this.segments=new so,this.dynamicLayoutVertexArray=new Or,this.opacityVertexArray=new Rr,this.placedSymbolArray=new Qr};uu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},uu.prototype.upload=function(t,e,i,n){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Is.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Ps.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ou,!0),this.opacityVertexBuffer.itemSize=1),(i||n)&&this.programConfigurations.upload(t))},uu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},jn("SymbolBuffers",uu);var cu=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new so,this.collisionVertexArray=new Nr};cu.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,zs.members,!0)},cu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},jn("CollisionBuffers",cu);var hu=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[];var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Il(this.zoom,e["text-size"]),this.iconSizeData=Il(this.zoom,e["icon-size"]);var i=this.layers[0].layout,n=i.get("symbol-sort-key"),r=i.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==r&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&(i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement")),"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(function(t){return dl[t]})),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};hu.prototype.createArrays=function(){this.text=new uu(new Lo(Is.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new uu(new Lo(Is.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.glyphOffsetArray=new io,this.lineVertexArray=new no,this.symbolInstances=new eo},hu.prototype.calculateGlyphDependencies=function(t,e,i,n,r){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(i||n)&&r){var a=Os[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},hu.prototype.populate=function(t,e,i){var n=this.layers[0],r=n.layout,o=r.get("text-font"),a=r.get("text-field"),s=r.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof Qt&&!a.value.value.isEmpty()||0<a.value.value.toString().length)&&("constant"!==o.value.kind||0<o.value.value.length),u="constant"!==s.value.kind||!!s.value.value||0<Object.keys(s.parameters).length,c=r.get("symbol-sort-key");if(this.features=[],l||u){for(var h=e.iconDependencies,p=e.glyphDependencies,d=e.availableImages,f=new lr(this.zoom),m=0,g=t;m<g.length;m+=1){var v=g[m],y=v.feature,_=v.id,b=v.index,x=v.sourceLayerIndex,w=n._featureFilter.needGeometry,S={type:y.type,id:_,properties:y.properties,geometry:w?Fo(y):[]};if(n._featureFilter.filter(f,S,i)){w||(S.geometry=Fo(y));var T=void 0;if(l){var C=n.getValueAndResolveTokens("text-field",S,i,d),E=Qt.factory(C);lu(E)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===or()||this.hasRTLText&&sr.isParsed())&&(T=Ls(E,n,S))}var k=void 0;if(u){var A=n.getValueAndResolveTokens("icon-image",S,i,d);k=A instanceof te?A:te.fromString(A)}if(T||k){var I=this.sortFeaturesByKey?c.evaluate(S,{},i):void 0,P={id:_,text:T,icon:k,index:b,sourceLayerIndex:x,geometry:Fo(y),properties:y.properties,type:ru[y.type],sortKey:I};if(this.features.push(P),k&&(h[k.name]=!0),T){var z=o.evaluate(S,{},i).join(","),M="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(dl.vertical);for(var D=0,L=T.sections;D<L.length;D+=1){var O=L[D];if(O.image)h[O.image.name]=!0;else{var R=Gn(T.toString()),F=O.fontStack||z,B=p[F]=p[F]||{};this.calculateGlyphDependencies(O.text,B,M,this.allowVerticalPlacement,R)}}}}}}"line"===r.get("symbol-placement")&&(this.features=function(e){var r={},o={},a=[],i=0;function t(t){a.push(e[t]),i++}function n(t,e,i){var n=o[t];return delete o[t],o[e]=n,a[n].geometry[0].pop(),a[n].geometry[0]=a[n].geometry[0].concat(i[0]),n}function s(t,e,i){var n=r[e];return delete r[e],r[t]=n,a[n].geometry[0].shift(),a[n].geometry[0]=i[0].concat(a[n].geometry[0]),n}function l(t,e,i){var n=i?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var u=0;u<e.length;u++){var c=e[u],h=c.geometry,p=c.text?c.text.toString():null;if(p){var d=l(p,h),f=l(p,h,!0);if(d in o&&f in r&&o[d]!==r[f]){var m=s(d,f,h),g=n(d,f,a[m].geometry);delete r[d],delete o[f],o[l(p,a[g].geometry,!0)]=g,a[m].geometry=null}else d in o?n(d,f,h):f in r?s(d,f,h):(t(u),r[d]=i-1,o[f]=i-1)}else t(u)}return a.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},hu.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},hu.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},hu.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},hu.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t),this.textCollisionCircle.upload(t),this.iconCollisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},hu.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},hu.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},hu.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:n},a<e.length-1&&(n+=e[a+1].dist(e[a]));for(var s=t.segment||0;0<=s;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},0<s&&(r+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},hu.prototype.addSymbols=function(t,e,i,n,r,o,a,s,l,u,c,h){for(var p=t.indexArray,d=t.layoutVertexArray,f=t.segments.prepareSegment(4*e.length,d,p,o.sortKey),m=this.glyphOffsetArray.length,g=f.vertexLength,v=this.allowVerticalPlacement&&a===dl.vertical?Math.PI/2:0,y=o.text&&o.text.sections,_=0;_<e.length;_++){var b=e[_],x=b.tl,w=b.tr,S=b.bl,T=b.br,C=b.tex,E=b.pixelOffsetTL,k=b.pixelOffsetBR,A=b.minFontScaleX,I=b.minFontScaleY,P=b.glyphOffset,z=b.isSDF,M=b.sectionIndex,D=f.vertexLength,L=P[1];au(d,s.x,s.y,x.x,L+x.y,C.x,C.y,i,z,E.x,E.y,A,I),au(d,s.x,s.y,w.x,L+w.y,C.x+C.w,C.y,i,z,k.x,E.y,A,I),au(d,s.x,s.y,S.x,L+S.y,C.x,C.y+C.h,i,z,E.x,k.y,A,I),au(d,s.x,s.y,T.x,L+T.y,C.x+C.w,C.y+C.h,i,z,k.x,k.y,A,I),su(t.dynamicLayoutVertexArray,s,v),p.emplaceBack(D,D+1,D+2),p.emplaceBack(D+1,D+2,D+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(P[0]),_!==e.length-1&&M===e[_+1].sectionIndex||t.programConfigurations.populatePaintArrays(d.length,o,o.index,{},h,y&&y[M])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,g,l,u,s.segment,i?i[0]:0,i?i[1]:0,n[0],n[1],a,0,!1,0,c)},hu.prototype._addCollisionDebugVertex=function(t,e,i,n,r,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,n,r,Math.round(o.x),Math.round(o.y))},hu.prototype.addCollisionDebugVertices=function(t,e,i,n,r,o,a,s){var l=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),u=l.vertexLength,c=r.layoutVertexArray,h=r.collisionVertexArray,p=a.anchorX,d=a.anchorY;if(this._addCollisionDebugVertex(c,h,o,p,d,new ht(t,e)),this._addCollisionDebugVertex(c,h,o,p,d,new ht(i,e)),this._addCollisionDebugVertex(c,h,o,p,d,new ht(i,n)),this._addCollisionDebugVertex(c,h,o,p,d,new ht(t,n)),l.vertexLength+=4,s){var f=r.indexArray;f.emplaceBack(u,u+1,u+2),f.emplaceBack(u,u+2,u+3),l.primitiveLength+=2}else{var m=r.indexArray;m.emplaceBack(u,u+1),m.emplaceBack(u+1,u+2),m.emplaceBack(u+2,u+3),m.emplaceBack(u+3,u),l.primitiveLength+=4}},hu.prototype.addDebugCollisionBoxes=function(t,e,i,n){for(var r=t;r<e;r++){var o=this.collisionBoxArray.get(r),a=0<o.radius;this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,a?n?this.textCollisionCircle:this.iconCollisionCircle:n?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,i,a)}},hu.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new cu(Br,Ms.members,Wr),this.iconCollisionBox=new cu(Br,Ms.members,Wr),this.textCollisionCircle=new cu(Br,Ds.members,Hr),this.iconCollisionCircle=new cu(Br,Ds.members,Hr);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},hu.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,n,r,o,a,s,l){for(var u={},c=e;c<i;c++){var h=t.get(c);if(0===h.radius){u.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},u.textFeatureIndex=h.featureIndex;break}u.textCircles||(u.textCircles=[],u.textFeatureIndex=h.featureIndex),u.textCircles.push(h.anchorPointX,h.anchorPointY,h.radius,h.signedDistanceFromAnchor,1)}for(var p=n;p<r;p++){var d=t.get(p);if(0===d.radius){u.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},u.verticalTextFeatureIndex=d.featureIndex;break}}for(var f=o;f<a;f++){var m=t.get(f);if(0===m.radius){u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},u.iconFeatureIndex=m.featureIndex;break}}for(var g=s;g<l;g++){var v=t.get(g);if(0===v.radius){u.verticalIconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},u.verticalIconFeatureIndex=v.featureIndex;break}}return u},hu.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},hu.prototype.hasTextData=function(){return 0<this.text.segments.get().length},hu.prototype.hasIconData=function(){return 0<this.icon.segments.get().length},hu.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox&&this.textCollisionCircle&&this.iconCollisionCircle},hu.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length},hu.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length},hu.prototype.hasTextCollisionCircleData=function(){return this.hasDebugData()&&0<this.textCollisionCircle.segments.get().length},hu.prototype.hasIconCollisionCircleData=function(){return this.hasDebugData()&&0<this.iconCollisionCircle.segments.get().length},hu.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),n=i.vertexStartIndex+4*i.numGlyphs,r=i.vertexStartIndex;r<n;r+=4)t.indexArray.emplaceBack(r,r+1,r+2),t.indexArray.emplaceBack(r+1,r+2,r+3)},hu.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),n=[],r=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);n.push(0|Math.round(e*s.anchorX+i*s.anchorY)),r.push(s.featureIndex)}return o.sort(function(t,e){return n[t]-n[e]||r[e]-r[t]}),o},hu.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},hu.prototype.sortFeatures=function(t){var n=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var e=0,i=this.symbolInstanceIndexes;e<i.length;e+=1){var r=this.symbolInstances.get(i[e]);this.featureSortOrder.push(r.featureIndex),[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach(function(t,e,i){0<=t&&i.indexOf(t)===e&&n.addIndicesForPlacedSymbol(n.text,t)}),0<=r.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,r.verticalPlacedTextSymbolIndex),0<=r.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,r.placedIconSymbolIndex),0<=r.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,r.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},jn("SymbolBucket",hu,{omit:["layers","collisionBoxArray","features","compareText"]}),hu.MAX_GLYPHS=65535,hu.addDynamicAttributes=su;var pu=new wr({"symbol-placement":new vr(kt.layout_symbol["symbol-placement"]),"symbol-spacing":new vr(kt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vr(kt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yr(kt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vr(kt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vr(kt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new vr(kt.layout_symbol["icon-ignore-placement"]),"icon-optional":new vr(kt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vr(kt.layout_symbol["icon-rotation-alignment"]),"icon-size":new yr(kt.layout_symbol["icon-size"]),"icon-text-fit":new vr(kt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vr(kt.layout_symbol["icon-text-fit-padding"]),"icon-image":new yr(kt.layout_symbol["icon-image"]),"icon-rotate":new yr(kt.layout_symbol["icon-rotate"]),"icon-padding":new vr(kt.layout_symbol["icon-padding"]),"icon-keep-upright":new vr(kt.layout_symbol["icon-keep-upright"]),"icon-offset":new yr(kt.layout_symbol["icon-offset"]),"icon-anchor":new yr(kt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vr(kt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vr(kt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vr(kt.layout_symbol["text-rotation-alignment"]),"text-field":new yr(kt.layout_symbol["text-field"]),"text-font":new yr(kt.layout_symbol["text-font"]),"text-size":new yr(kt.layout_symbol["text-size"]),"text-max-width":new yr(kt.layout_symbol["text-max-width"]),"text-line-height":new vr(kt.layout_symbol["text-line-height"]),"text-letter-spacing":new yr(kt.layout_symbol["text-letter-spacing"]),"text-justify":new yr(kt.layout_symbol["text-justify"]),"text-radial-offset":new yr(kt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vr(kt.layout_symbol["text-variable-anchor"]),"text-anchor":new yr(kt.layout_symbol["text-anchor"]),"text-max-angle":new vr(kt.layout_symbol["text-max-angle"]),"text-writing-mode":new vr(kt.layout_symbol["text-writing-mode"]),"text-rotate":new yr(kt.layout_symbol["text-rotate"]),"text-padding":new vr(kt.layout_symbol["text-padding"]),"text-keep-upright":new vr(kt.layout_symbol["text-keep-upright"]),"text-transform":new yr(kt.layout_symbol["text-transform"]),"text-offset":new yr(kt.layout_symbol["text-offset"]),"text-allow-overlap":new vr(kt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new vr(kt.layout_symbol["text-ignore-placement"]),"text-optional":new vr(kt.layout_symbol["text-optional"])}),du={paint:new wr({"icon-opacity":new yr(kt.paint_symbol["icon-opacity"]),"icon-color":new yr(kt.paint_symbol["icon-color"]),"icon-halo-color":new yr(kt.paint_symbol["icon-halo-color"]),"icon-halo-width":new yr(kt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yr(kt.paint_symbol["icon-halo-blur"]),"icon-translate":new vr(kt.paint_symbol["icon-translate"]),"icon-translate-anchor":new vr(kt.paint_symbol["icon-translate-anchor"]),"text-opacity":new yr(kt.paint_symbol["text-opacity"]),"text-color":new yr(kt.paint_symbol["text-color"],{runtimeType:Nt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new yr(kt.paint_symbol["text-halo-color"]),"text-halo-width":new yr(kt.paint_symbol["text-halo-width"]),"text-halo-blur":new yr(kt.paint_symbol["text-halo-blur"]),"text-translate":new vr(kt.paint_symbol["text-translate"]),"text-translate-anchor":new vr(kt.paint_symbol["text-translate-anchor"])}),layout:pu},fu=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ot,this.defaultValue=t};fu.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},fu.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},fu.prototype.outputDefined=function(){return!1},fu.prototype.serialize=function(){return null},jn("FormatSectionOverride",fu,{omit:["defaultValue"]});var mu=function(s){function l(t){s.call(this,t,du)}return s&&(l.__proto__=s),((l.prototype=Object.create(s&&s.prototype)).constructor=l).prototype.recalculate=function(t,e){if(s.prototype.recalculate.call(this,t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var i=this.layout.get("text-writing-mode");if(i){for(var n=[],r=0,o=i;r<o.length;r+=1){var a=o[r];n.indexOf(a)<0&&n.push(a)}this.layout._values["text-writing-mode"]=n}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},l.prototype.getValueAndResolveTokens=function(t,e,i,n){var r,o=this.layout.get(t).evaluate(e,{},i,n),a=this._unevaluatedLayout._values[t];return a.isDataDriven()||Wi(a.value)||!o?o:(r=e.properties,o.replace(/{([^{}]+)}/g,function(t,e){return e in r?String(r[e]):""}))},l.prototype.createBucket=function(t){return new hu(t)},l.prototype.queryRadius=function(){return 0},l.prototype.queryIntersectsFeature=function(){return!1},l.prototype._setPaintOverrides=function(){for(var t=0,e=du.paint.overridableProperties;t<e.length;t+=1){var i=e[t];if(l.hasPaintOverride(this.layout,i)){var n,r=this.paint.get(i),o=new fu(r),a=new Hi(o,r.property.specification);n="constant"===r.value.kind||"source"===r.value.kind?new Gi("source",a):new Xi("composite",a,r.value.zoomStops,r.value._interpolationType),this.paint._values[i]=new mr(r.property,n,r.parameters)}}},l.prototype._handleOverridablePaintPropertyUpdate=function(t,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven())&&l.hasPaintOverride(this.layout,t)},l.hasPaintOverride=function(t,e){var i=t.get("text-field"),n=du.paint.properties[e],r=!1,o=function(t){for(var e=0,i=t;e<i.length;e+=1)if(n.overrides&&n.overrides.hasOverride(i[e]))return void(r=!0)};if("constant"===i.value.kind&&i.value.value instanceof Qt)o(i.value.value.sections);else if("source"===i.value.kind){var a=function(t){r||(t instanceof oe&&ne(t.value)===Vt?o(t.value.sections):t instanceof ue?o(t.sections):t.eachChild(a))},s=i.value;s._styleExpression&&a(s._styleExpression.expression)}return r},l}(Sr),gu={paint:new wr({"background-color":new vr(kt.paint_background["background-color"]),"background-pattern":new br(kt.paint_background["background-pattern"]),"background-opacity":new vr(kt.paint_background["background-opacity"])})},vu=function(e){function t(t){e.call(this,t,gu)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(Sr),yu={paint:new wr({"raster-opacity":new vr(kt.paint_raster["raster-opacity"]),"raster-hue-rotate":new vr(kt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vr(kt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vr(kt.paint_raster["raster-brightness-max"]),"raster-saturation":new vr(kt.paint_raster["raster-saturation"]),"raster-contrast":new vr(kt.paint_raster["raster-contrast"]),"raster-resampling":new vr(kt.paint_raster["raster-resampling"]),"raster-fade-duration":new vr(kt.paint_raster["raster-fade-duration"])})},_u=function(e){function t(t){e.call(this,t,yu)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(Sr),bu=function(e){function t(t){e.call(this,t,{}),this.implementation=t}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.is3D=function(){return"3d"===this.implementation.renderingMode},t.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},t.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},t}(Sr),xu={circle:oa,heatmap:ma,hillshade:va,fill:ts,"fill-extrusion":gs,line:ks,symbol:mu,background:vu,raster:_u},wu=self.HTMLImageElement,Su=self.HTMLCanvasElement,Tu=self.HTMLVideoElement,Cu=self.ImageData,Eu=self.ImageBitmap,ku=function(t,e,i,n){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,n)};ku.prototype.update=function(t,e,i){var n=t.width,r=t.height,o=!(this.size&&this.size[0]===n&&this.size[1]===r||i),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[n,r],t instanceof wu||t instanceof Su||t instanceof Tu||t instanceof Cu||Eu&&t instanceof Eu?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,n,r,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=i||{x:0,y:0},u=l.x,c=l.y;t instanceof wu||t instanceof Su||t instanceof Tu||t instanceof Cu||Eu&&t instanceof Eu?s.texSubImage2D(s.TEXTURE_2D,0,u,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,u,c,n,r,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},ku.prototype.bind=function(t,e,i){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),i!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},ku.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ku.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Au=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Au.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Au.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Iu=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},f(["receive","process"],this),this.invoker=new Au(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=w()?t:self};function Pu(t,e,i){var n=2*Math.PI*6378137/256/Math.pow(2,i);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}Iu.prototype.send=function(t,e,i,n,r){var o=this;void 0===r&&(r=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[a]=i);var s=C(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!i,targetMapId:n,mustQueue:r,sourceMapId:this.mapId,data:qn(e,s)},s),{cancel:function(){i&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:n,sourceMapId:o.mapId})}}},Iu.prototype.receive=function(t){var e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];var n=this.cancelCallbacks[i];delete this.cancelCallbacks[i],n&&n()}else w()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)},Iu.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Iu.prototype.processTask=function(i,t){var n=this;if("<response>"===t.type){var e=this.callbacks[i];delete this.callbacks[i],e&&(t.error?e(Hn(t.error)):e(null,Hn(t.data)))}else{var r=!1,o=C(this.globalScope)?void 0:[],a=t.hasCallback?function(t,e){r=!0,delete n.cancelCallbacks[i],n.target.postMessage({id:i,type:"<response>",sourceMapId:n.mapId,error:t?qn(t):null,data:qn(e,o)},o)}:function(t){r=!0},s=null,l=Hn(t.data);if(this.parent[t.type])s=this.parent[t.type](t.sourceMapId,l,a);else if(this.parent.getWorkerSource){var u=t.type.split(".");s=this.parent.getWorkerSource(t.sourceMapId,u[0],l.source)[u[1]](l,a)}else a(new Error("Could not find function "+t.type));!r&&s&&s.cancel&&(this.cancelCallbacks[i]=s.cancel)}},Iu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var zu=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=Lu(0,t,t,e,i)};zu.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},zu.prototype.url=function(t,e){var i,n,r,o,a,s=(n=this.y,r=this.z,o=Pu(256*(i=this.x),256*(n=Math.pow(2,r)-n-1),r),a=Pu(256*(i+1),256*(n+1),r),o[0]+","+o[1]+","+a[0]+","+a[1]),l=function(t,e,i){for(var n,r="",o=t;0<o;o--)r+=(e&(n=1<<o-1)?1:0)+(i&n?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},zu.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new ht((t.x*e-this.x)*Ee,(t.y*e-this.y)*Ee)},zu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Mu=function(t,e){this.wrap=t,this.canonical=e,this.key=Lu(t,e.z,e.z,e.x,e.y)},Du=function(t,e,i,n,r){this.overscaledZ=t,this.wrap=e,this.canonical=new zu(i,+n,+r),this.key=Lu(e,t,i,n,r)};function Lu(t,e,i,n,r){(t*=2)<0&&(t=-1*t-1);var o=1<<i;return(o*o*t+o*r+n).toString(36)+i.toString(36)+e.toString(36)}Du.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Du.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Du(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Du(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Du.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?Lu(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Lu(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)},Du.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Du.prototype.children=function(t){if(this.overscaledZ>=t)return[new Du(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,n=2*this.canonical.y;return[new Du(e,this.wrap,e,i,n),new Du(e,this.wrap,e,i+1,n),new Du(e,this.wrap,e,i,n+1),new Du(e,this.wrap,e,i+1,n+1)]},Du.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Du.prototype.wrapped=function(){return new Du(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Du.prototype.unwrapTo=function(t){return new Du(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Du.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Du.prototype.toUnwrapped=function(){return new Mu(this.wrap,this.canonical)},Du.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Du.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Ce(t.x-this.wrap,t.y))},jn("CanonicalTileID",zu),jn("OverscaledTileID",Du,{omit:["posMatrix"]});var Ou=function(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return pt('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var n=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var r=0;r<n;r++)this.data[this._idx(-1,r)]=this.data[this._idx(0,r)],this.data[this._idx(n,r)]=this.data[this._idx(n-1,r)],this.data[this._idx(r,-1)]=this.data[this._idx(r,0)],this.data[this._idx(r,n)]=this.data[this._idx(r,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)]};Ou.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[n],i[n+1],i[n+2])},Ou.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ou.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Ou.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},Ou.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},Ou.prototype.getPixels=function(){return new pa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ou.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,r=e*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(e){case-1:n=r-1;break;case 1:r=n+1}switch(i){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,l=-i*this.dim,u=o;u<a;u++)for(var c=n;c<r;c++)this.data[this._idx(c,u)]=t.data[this._idx(c+s,u+l)]},jn("DEMData",Ou);var Ru=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};Ru.prototype.encode=function(t){return this._stringToNumber[t]},Ru.prototype.decode=function(t){return this._numberToString[t]};var Fu=function(t,e,i,n,r){this.type="Feature",(this._vectorTileFeature=t)._z=e,t._x=i,t._y=n,this.properties=t.properties,this.id=r},Bu={geometry:{configurable:!0}};Bu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Bu.geometry.set=function(t){this._geometry=t},Fu.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Fu.prototype,Bu);var Nu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Nu.prototype.updateState=function(t,e,i){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},d(this.stateChanges[t][n],i),null===this.deletedStates[t])for(var r in this.deletedStates[t]={},this.state[t])r!==n&&(this.deletedStates[t][r]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var o in this.deletedStates[t][n]={},this.state[t][n])i[o]||(this.deletedStates[t][n][o]=null);else for(var a in i)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][a]&&delete this.deletedStates[t][n][a]},Nu.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(i in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][i]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}},Nu.prototype.getState=function(t,e){var i=String(e),n=d({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var r=this.deletedStates[t][e];if(null===r)return{};for(var o in r)delete n[o]}return n},Nu.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Nu.prototype.coalesceChanges=function(t,e){var i={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var r={};for(var o in this.stateChanges[n])this.state[n][o]||(this.state[n][o]={}),d(this.state[n][o],this.stateChanges[n][o]),r[o]=this.state[n][o];i[n]=r}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var l in this.state[a])s[l]={},this.state[a][l]={};else for(var u in this.deletedStates[a]){if(null===this.deletedStates[a][u])this.state[a][u]={};else for(var c=0,h=Object.keys(this.deletedStates[a][u]);c<h.length;c+=1)delete this.state[a][u][h[c]];s[u]=this.state[a][u]}i[a]=i[a]||{},d(i[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var p in t)t[p].setFeatureState(i,e)};var ju=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ln(Ee,16,0),this.grid3D=new Ln(Ee,16,0),this.featureIndexArray=new oo,this.promoteId=e};function $u(t,n,r,o,a){return g(t,function(t,e){var i=n instanceof gr?n.get(e):null;return i&&i.evaluate?i.evaluate(r,o,a):i})}function Uu(t){for(var e=1/0,i=1/0,n=-1/0,r=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),i=Math.min(i,s.y),n=Math.max(n,s.x),r=Math.max(r,s.y)}return{minX:e,minY:i,maxX:n,maxY:r}}function Vu(t,e){return e-t}ju.prototype.insert=function(t,e,i,n,r,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,n,r);for(var s=o?this.grid3D:this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var p=u[h];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<Ee&&c[1]<Ee&&0<=c[2]&&0<=c[3]&&s.insert(a,c[0],c[1],c[2],c[3])}},ju.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new cs.VectorTile(new Ns(this.rawTileData)).layers,this.sourceLayerCoder=new Ru(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ju.prototype.query=function(r,o,a,s){var l=this;this.loadVTLayers();for(var u=r.params||{},c=Ee/r.tileSize/r.scale,h=sn(u.filter),p=r.queryGeometry,d=r.queryPadding*c,t=Uu(p),f=this.grid.query(t.minX-d,t.minY-d,t.maxX+d,t.maxY+d),e=Uu(r.cameraQueryGeometry),i=0,n=this.grid3D.query(e.minX-d,e.minY-d,e.maxX+d,e.maxY+d,function(t,e,i,n){return function(t,e,i,n,r){for(var o=0,a=t;o<a.length;o+=1){var s=a[o];if(e<=s.x&&i<=s.y&&n>=s.x&&r>=s.y)return!0}var l=[new ht(e,i),new ht(e,r),new ht(n,r),new ht(n,i)];if(2<t.length)for(var u=0,c=l;u<c.length;u+=1)if(Zo(t,c[u]))return!0;for(var h=0;h<t.length-1;h++)if(Go(t[h],t[h+1],l))return!0;return!1}(r.cameraQueryGeometry,t-d,e-d,i+d,n+d)});i<n.length;i+=1)f.push(n[i]);f.sort(Vu);for(var m,g={},v=function(t){var e=f[t];if(e!==m){m=e;var i=l.featureIndexArray.get(e),n=null;l.loadMatchingFeature(g,i.bucketIndex,i.sourceLayerIndex,i.featureIndex,h,u.layers,u.availableImages,o,a,s,function(t,e,i){return n||(n=Fo(t)),e.queryIntersectsFeature(p,t,i,n,l.z,r.transform,c,r.pixelPosMatrix)})}},y=0;y<f.length;y++)v(y);return g},ju.prototype.loadMatchingFeature=function(t,e,i,n,r,o,a,s,l,u,c){var h=this.bucketLayerIDs[e];if(!o||function(t,e){for(var i=0;i<t.length;i++)if(0<=e.indexOf(t[i]))return!0;return!1}(o,h)){var p=this.sourceLayerCoder.decode(i),d=this.vtLayers[p].feature(n);if(r.filter(new lr(this.tileID.overscaledZ),d))for(var f=this.getId(d,p),m=0;m<h.length;m++){var g=h[m];if(!(o&&o.indexOf(g)<0)){var v=s[g];if(v){var y={};void 0!==f&&u&&(y=u.getState(v.sourceLayer||"_geojsonTileLayer",f));var _=l[g];_.paint=$u(_.paint,v.paint,d,y,a),_.layout=$u(_.layout,v.layout,d,y,a);var b=!c||c(d,v,y);if(b){var x=new Fu(d,this.z,this.x,this.y,f);x.layer=_;var w=t[g];void 0===w&&(w=t[g]=[]),w.push({featureIndex:n,feature:x,intersectionZ:b})}}}}}},ju.prototype.lookupSymbolFeatures=function(t,e,i,n,r,o,a,s){var l={};this.loadVTLayers();for(var u=sn(r),c=0,h=t;c<h.length;c+=1)this.loadMatchingFeature(l,i,n,h[c],u,o,a,s,e);return l},ju.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var n=0,r=i[e];n<r.length;n+=1)if(t===r[n])return!0;return!1},ju.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},jn("FeatureIndex",ju,{omit:["rawTileData","sourceLayerCoder"]});var qu=function(t,e){this.tileID=t,this.uid=c(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};qu.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<L.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},qu.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},qu.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,r){var o={};if(!r)return o;for(var e=function(){var t=s[a],i=t.layerIds.map(function(t){return r.getLayer(t)}).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(e){return i.filter(function(t){return t.id===e})[0]}));for(var e=0,n=i;e<n.length;e+=1)o[n[e].id]=t}},a=0,s=t;a<s.length;a+=1)e();return o}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[n];if(r instanceof hu){if(this.hasSymbolBuckets=!0,!i)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof hu&&a.hasRTLText){this.hasRTLText=!0,sr.isLoading()||sr.isLoaded()||"deferred"!==or()||ar();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(l))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Kr},qu.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},qu.prototype.getBucket=function(t){return this.buckets[t.id]},qu.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ku(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ku(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},qu.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},qu.prototype.queryRenderedFeatures=function(t,e,i,n,r,o,a,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:r,scale:o,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:a,queryPadding:this.queryPadding*l},t,e,i):{}},qu.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var n=i.loadVTLayers(),r=e?e.sourceLayer:"",o=n._geojsonTileLayer||n[r];if(o)for(var a=sn(e&&e.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,h={z:l,x:u,y:c},p=0;p<o.length;p++){var d=o.feature(p);if(a.filter(new lr(this.tileID.overscaledZ),d)){var f=i.getId(d,r),m=new Fu(d,l,u,c,f);m.tile=h,t.push(m)}}}},qu.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},qu.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},qu.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=S(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),r=!1;if(this.expirationTime>n)r=!1;else if(e)if(this.expirationTime<e)r=!0;else{var o=this.expirationTime-e;o?this.expirationTime=n+Math.max(o,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},qu.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},qu.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets)if(e.style.hasLayer(n)){var r=this.buckets[n],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=i[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(n).queryRadius(r))))}}},qu.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},qu.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<L.now()},qu.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},qu.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=L.now()+t},qu.prototype.setDependencies=function(t,e){for(var i={},n=0,r=e;n<r.length;n+=1)i[r[n]]=!0;this.dependencies[t]=i},qu.prototype.hasDependency=function(t,e){for(var i=0,n=t;i<n.length;i+=1){var r=this.dependencies[n[i]];if(r)for(var o=0,a=e;o<a.length;o+=1)if(r[a[o]])return!0}return!1};var Hu=self.performance,Wu=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},Hu.mark(this._marks.start)};Wu.prototype.finish=function(){Hu.mark(this._marks.end);var t=Hu.getEntriesByName(this._marks.measure);return 0===t.length&&(Hu.measure(this._marks.measure,this._marks.start,this._marks.end),t=Hu.getEntriesByName(this._marks.measure),Hu.clearMarks(this._marks.start),Hu.clearMarks(this._marks.end),Hu.clearMeasures(this._marks.measure)),t},t.Actor=Iu,t.AlphaImage=ha,t.CanonicalTileID=zu,t.CollisionBoxArray=Kr,t.Color=Yt,t.DEMData=Ou,t.DataConstantProperty=vr,t.DictionaryCoder=Ru,t.EXTENT=Ee,t.ErrorEvent=Ct,t.EvaluationParameters=lr,t.Event=Tt,t.Evented=Et,t.FeatureIndex=ju,t.FillBucket=Ka,t.FillExtrusionBucket=fs,t.ImageAtlas=pl,t.ImagePosition=cl,t.LineBucket=Ss,t.LngLat=ye,t.LngLatBounds=ve,t.MercatorCoordinate=Ce,t.ONE_EM=Rs,t.OverscaledTileID=Du,t.Point=ht,t.Point$1=ht,t.Properties=wr,t.Protobuf=Ns,t.RGBAImage=pa,t.RequestManager=$,t.RequestPerformance=Wu,t.ResourceType=dt,t.SegmentVector=so,t.SourceFeatureState=Nu,t.StructArrayLayout1ui2=Zr,t.StructArrayLayout2i4=Ir,t.StructArrayLayout3ui6=Hr,t.StructArrayLayout4i8=Pr,t.SymbolBucket=hu,t.Texture=ku,t.Tile=qu,t.Transitionable=hr,t.Uniform1f=bo,t.Uniform1i=_o,t.Uniform2f=xo,t.Uniform3f=wo,t.Uniform4f=So,t.UniformColor=To,t.UniformMatrix4f=Eo,t.UnwrappedTileID=Mu,t.ValidationError=At,t.WritingMode=dl,t.ZoomHistory=Wn,t.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},t.addDynamicAttributes=su,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,o=new Array(t.length),a=null;t.forEach(function(t,i){e(t,function(t,e){t&&(a=t),o[i]=e,0==--r&&n(a,o)})})},t.bezier=r,t.bindAll=f,t.browser=L,t.cacheEntryPossiblyAdded=function(t){++ut>ot&&(t.getActor().send("enforceCacheSizeLimit",rt),ut=0)},t.clamp=s,t.clearTileCache=function(t){var e=self.caches.delete(nt);t&&e.catch(t).then(function(){return t()})},t.clone=function(t){var e=new ia(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=y,t.clone$2=function(t){var e=new ia(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.config=O,t.create=function(){var t=new ia(16);return ia!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new ia(9);return ia!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new ia(4);return ia!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Zi,t.createLayout=kr,t.createStyleLayer=function(t){return"custom"===t.type?new bu(t):new xu[t.type](t)},t.cross=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=i[0],s=i[1],l=i[2];return t[0]=r*l-o*s,t[1]=o*a-n*l,t[2]=n*s-r*a,t},t.deepEqual=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var n=0;n<e.length;n++)if(!t(e[n],i[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i)return!1;if(Object.keys(e).length!==Object.keys(i).length)return!1;for(var r in e)if(!t(e[r],i[r]))return!1;return!0}return e===i},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=o,t.emitValidationErrors=Dn,t.endsWith=m,t.enforceCacheSizeLimit=function(n){at(),Y&&Y.then(function(i){i.keys().then(function(t){for(var e=0;e<t.length-n;e++)i.delete(t[e])})})},t.evaluateSizeForFeature=Pl,t.evaluateSizeForZoom=zl,t.evaluateVariableOffset=Kl,t.evented=rr,t.extend=d,t.featureFilter=sn,t.filterObject=v,t.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Tl,t.getAnchorJustification=Jl,t.getArrayBuffer=_t,t.getImage=xt,t.getJSON=function(t,e){return yt(d(t,{type:"json"}),e)},t.getRTLTextPluginStatus=or,t.getReferrer=vt,t.getVideo=function(t,e){var i,n,r=self.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");i=t[o],n=void 0,(n=self.document.createElement("a")).href=i,(n.protocol!==self.document.location.protocol||n.host!==self.document.location.host)&&(r.crossOrigin="Anonymous"),a.src=t[o],r.appendChild(a)}return{cancel:function(){}}},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],v=e[15],y=i*s-n*a,_=i*l-r*a,b=i*u-o*a,x=n*l-r*s,w=n*u-o*s,S=r*u-o*l,T=c*m-h*f,C=c*g-p*f,E=c*v-d*f,k=h*g-p*m,A=h*v-d*m,I=p*v-d*g,P=y*I-_*A+b*k+x*E-w*C+S*T;return P?(t[0]=(s*I-l*A+u*k)*(P=1/P),t[1]=(r*A-n*I-o*k)*P,t[2]=(m*S-g*w+v*x)*P,t[3]=(p*w-h*S-d*x)*P,t[4]=(l*E-a*I-u*C)*P,t[5]=(i*I-r*E+o*C)*P,t[6]=(g*b-f*S-v*_)*P,t[7]=(c*S-p*b+d*_)*P,t[8]=(a*A-s*E+u*T)*P,t[9]=(n*E-i*A-o*T)*P,t[10]=(f*w-m*b+v*y)*P,t[11]=(h*b-c*w-d*y)*P,t[12]=(s*C-a*k-l*T)*P,t[13]=(i*k-n*C+r*T)*P,t[14]=(m*_-f*x-g*y)*P,t[15]=(c*x-h*_+p*y)*P,t):null},t.isChar=Zn,t.isMapboxURL=U,t.keysDifference=function(t,e){var i=[];for(var n in t)n in e||i.push(n);return i},t.makeRequest=yt,t.mapObject=g,t.mercatorXfromLng=xe,t.mercatorYfromLat=we,t.mercatorZfromAltitude=Se,t.multiply=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],m=e[12],g=e[13],v=e[14],y=e[15],_=i[0],b=i[1],x=i[2],w=i[3];return t[0]=_*n+b*s+x*h+w*m,t[1]=_*r+b*l+x*p+w*g,t[2]=_*o+b*u+x*d+w*v,t[3]=_*a+b*c+x*f+w*y,t[4]=(_=i[4])*n+(b=i[5])*s+(x=i[6])*h+(w=i[7])*m,t[5]=_*r+b*l+x*p+w*g,t[6]=_*o+b*u+x*d+w*v,t[7]=_*a+b*c+x*f+w*y,t[8]=(_=i[8])*n+(b=i[9])*s+(x=i[10])*h+(w=i[11])*m,t[9]=_*r+b*l+x*p+w*g,t[10]=_*o+b*u+x*d+w*v,t[11]=_*a+b*c+x*f+w*y,t[12]=(_=i[12])*n+(b=i[13])*s+(x=i[14])*h+(w=i[15])*m,t[13]=_*r+b*l+x*p+w*g,t[14]=_*o+b*u+x*d+w*v,t[15]=_*a+b*c+x*f+w*y,t},t.mvt=cs,t.normalize=function(t,e){var i=e[0],n=e[1],r=e[2],o=i*i+n*n+r*r;return 0<o&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=He,t.offscreenCanvasSupported=ct,t.ortho=function(t,e,i,n,r,o,a){var s=1/(e-i),l=1/(n-r),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*s,t[13]=(r+n)*l,t[14]=(a+o)*u,t[15]=1,t},t.parseGlyphPBF=function(t){return new Ns(t).readFields(rl,[])},t.pbf=Ns,t.performSymbolLayout=function(D,L,O,R,F,t,B){D.createArrays(),D.tilePixelRatio=Ee/(512*D.overscaling),D.compareText={},D.iconsNeedLinear=!1;var N=D.layers[0].layout,e=D.layers[0]._unevaluatedLayout._values,j={};if("composite"===D.textSizeData.kind){var i=D.textSizeData,n=i.maxZoom;j.compositeTextSizes=[e["text-size"].possiblyEvaluate(new lr(i.minZoom),B),e["text-size"].possiblyEvaluate(new lr(n),B)]}if("composite"===D.iconSizeData.kind){var r=D.iconSizeData,o=r.maxZoom;j.compositeIconSizes=[e["icon-size"].possiblyEvaluate(new lr(r.minZoom),B),e["icon-size"].possiblyEvaluate(new lr(o),B)]}j.layoutTextSize=e["text-size"].possiblyEvaluate(new lr(D.zoom+1),B),j.layoutIconSize=e["icon-size"].possiblyEvaluate(new lr(D.zoom+1),B),j.textMaxSize=e["text-size"].possiblyEvaluate(new lr(18));for(var $=N.get("text-line-height")*Rs,U="map"===N.get("text-rotation-alignment")&&"point"!==N.get("symbol-placement"),V=N.get("text-keep-upright"),q=N.get("text-size"),a=function(){var t=W[H],e=N.get("text-font").evaluate(t,{},B).join(","),i=q.evaluate(t,{},B),n=j.layoutTextSize.evaluate(t,{},B),r=j.layoutIconSize.evaluate(t,{},B),o={horizontal:{},vertical:void 0},a=t.text,s=[0,0];if(a){var l=a.toString(),u=N.get("text-letter-spacing").evaluate(t,{},B)*Rs,c=function(t){for(var e=0,i=l;e<i.length;e+=1)if(n=i[e].charCodeAt(0),Zn.Arabic(n)||Zn["Arabic Supplement"](n)||Zn["Arabic Extended-A"](n)||Zn["Arabic Presentation Forms-A"](n)||Zn["Arabic Presentation Forms-B"](n))return!1;var n;return!0}()?u:0,h=N.get("text-anchor").evaluate(t,{},B),p=N.get("text-variable-anchor");if(!p){var d=N.get("text-radial-offset").evaluate(t,{},B);s=d?Kl(h,[d*Rs,Yl]):N.get("text-offset").evaluate(t,{},B).map(function(t){return t*Rs})}var f=U?"center":N.get("text-justify").evaluate(t,{},B),m=N.get("symbol-placement"),g="point"===m?N.get("text-max-width").evaluate(t,{},B)*Rs:0,v=function(){D.allowVerticalPlacement&&Gn(l)&&(o.vertical=vl(a,L,O,F,e,g,$,h,"left",c,s,dl.vertical,!0,m,n,i))};if(!U&&p){for(var y="auto"===f?p.map(function(t){return Jl(t)}):[f],_=!1,b=0;b<y.length;b++){var x=y[b];if(!o.horizontal[x])if(_)o.horizontal[x]=o.horizontal[0];else{var w=vl(a,L,O,F,e,g,$,"center",x,c,s,dl.horizontal,!1,m,n,i);w&&(_=1===(o.horizontal[x]=w).positionedLines.length)}}v()}else{"auto"===f&&(f=Jl(h));var S=vl(a,L,O,F,e,g,$,h,f,c,s,dl.horizontal,!1,m,n,i);S&&(o.horizontal[f]=S),v(),Gn(l)&&U&&V&&(o.vertical=vl(a,L,O,F,e,g,$,h,f,c,s,dl.vertical,!1,m,n,i))}}var T,C,E,k,A,I=void 0,P=!1;if(t.icon&&t.icon.name){var z=R[t.icon.name];z&&(T=F[t.icon.name],C=N.get("icon-offset").evaluate(t,{},B),E=Tl(N.get("icon-anchor").evaluate(t,{},B)),k=C[0]-T.displaySize[0]*E.horizontalAlign,A=C[1]-T.displaySize[1]*E.verticalAlign,I={image:T,top:A,bottom:A+T.displaySize[1],left:k,right:k+T.displaySize[0]},P=z.sdf,void 0===D.sdfIcons?D.sdfIcons=z.sdf:D.sdfIcons!==z.sdf&&pt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),z.pixelRatio!==D.pixelRatio?D.iconsNeedLinear=!0:0!==N.get("icon-rotate").constantOr(1)&&(D.iconsNeedLinear=!0))}var M=iu(o.horizontal)||o.vertical;D.iconsInText=!!M&&M.iconsInText,(M||I)&&function(i,n,r,o,a,s,t,e,l,u,c){var h=s.textMaxSize.evaluate(n,{});void 0===h&&(h=t);var p,d=i.layers[0].layout,f=d.get("icon-offset").evaluate(n,{},c),m=iu(r.horizontal),g=t/24,v=i.tilePixelRatio*g,y=i.tilePixelRatio*h/24,_=i.tilePixelRatio*e,b=i.tilePixelRatio*d.get("symbol-spacing"),x=d.get("text-padding")*i.tilePixelRatio,w=d.get("icon-padding")*i.tilePixelRatio,S=d.get("text-max-angle")/180*Math.PI,T="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),C="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),E=d.get("symbol-placement"),k=b/2,A=d.get("icon-text-fit");o&&"none"!==A&&(i.allowVerticalPlacement&&r.vertical&&(p=El(o,r.vertical,A,d.get("icon-text-fit-padding"),f,g)),m&&(o=El(o,m,A,d.get("icon-text-fit-padding"),f,g)));var I,P,z,M,D,L,O,R,F,B,N,j,$,U=function(t,e){e.x<0||e.x>=Ee||e.y<0||e.y>=Ee||function(t,e,i,n,r,o,a,s,l,u,c,h,p,d,f,m,g,v,y,_,b,x,w,S){var T,C,E,k,A,I=t.addToLineVertexArray(e,i),P=0,z=0,M=0,D=0,L=-1,O=-1,R={},F=ho(""),B=0,N=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(B=(T=s.layout.get("text-offset").evaluate(b,{},S).map(function(t){return t*Rs}))[0],N=T[1]):(B=s.layout.get("text-radial-offset").evaluate(b,{},S)*Rs,N=Yl),t.allowVerticalPlacement&&n.vertical){var j=s.layout.get("text-rotate").evaluate(b,{},S)+90;k=new ql(l,i,e,u,c,h,n.vertical,p,d,f,t.overscaling,j),a&&(A=new ql(l,i,e,u,c,h,a,g,v,f,t.overscaling,j))}if(r){var $=s.layout.get("icon-rotate").evaluate(b,{}),U="none"!==s.layout.get("icon-text-fit"),V=Nl(r,$,w,U),q=a?Nl(a,$,w,U):void 0;E=new ql(l,i,e,u,c,h,r,g,v,!1,t.overscaling,$),P=4*V.length;var H=t.iconSizeData,W=null;"source"===H.kind?(W=[Al*s.layout.get("icon-size").evaluate(b,{})])[0]>tu&&pt(t.layerIds[0]+': Value for "icon-size" is >= '+Ql+'. Reduce your "icon-size".'):"composite"===H.kind&&((W=[Al*x.compositeIconSizes[0].evaluate(b,{},S),Al*x.compositeIconSizes[1].evaluate(b,{},S)])[0]>tu||W[1]>tu)&&pt(t.layerIds[0]+': Value for "icon-size" is >= '+Ql+'. Reduce your "icon-size".'),t.addSymbols(t.icon,V,W,_,y,b,!1,e,I.lineStartIndex,I.lineLength,-1,S),L=t.icon.placedSymbolArray.length-1,q&&(z=4*q.length,t.addSymbols(t.icon,q,W,_,y,b,dl.vertical,e,I.lineStartIndex,I.lineLength,-1,S),O=t.icon.placedSymbolArray.length-1)}for(var Z in n.horizontal){var G=n.horizontal[Z];if(!C){F=ho(G.text);var X=s.layout.get("text-rotate").evaluate(b,{},S);C=new ql(l,i,e,u,c,h,G,p,d,f,t.overscaling,X)}var Y=1===G.positionedLines.length;if(M+=eu(t,e,G,o,s,f,b,m,I,n.vertical?dl.horizontal:dl.horizontalOnly,Y?Object.keys(n.horizontal):[Z],R,L,x,S),Y)break}n.vertical&&(D+=eu(t,e,n.vertical,o,s,f,b,m,I,dl.vertical,["vertical"],R,O,x,S));var K=C?C.boxStartIndex:t.collisionBoxArray.length,J=C?C.boxEndIndex:t.collisionBoxArray.length,Q=k?k.boxStartIndex:t.collisionBoxArray.length,tt=k?k.boxEndIndex:t.collisionBoxArray.length,et=E?E.boxStartIndex:t.collisionBoxArray.length,it=E?E.boxEndIndex:t.collisionBoxArray.length,nt=A?A.boxStartIndex:t.collisionBoxArray.length,rt=A?A.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=hu.MAX_GLYPHS&&pt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,0<=R.right?R.right:-1,0<=R.center?R.center:-1,0<=R.left?R.left:-1,R.vertical||-1,L,O,F,K,J,Q,tt,et,it,nt,rt,u,M,D,P,z,0,p,B,N)}(i,e,t,r,o,a,p,i.layers[0],i.collisionBoxArray,n.index,n.sourceLayerIndex,i.index,v,x,T,l,_,w,C,f,n,s,u,c)};if("line"===E)for(var V=0,q=function(t,e,i,n,r){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],l=void 0,u=0;u<s.length-1;u++){var c=s[u],h=s[u+1];c.x<0&&h.x<0||(c.x<0?c=new ht(0,c.y+(0-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<0&&(h=new ht(0,c.y+(0-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<0&&h.y<0||(c.y<0?c=new ht(c.x+(0-c.y)/(h.y-c.y)*(h.x-c.x),0)._round():h.y<0&&(h=new ht(c.x+(0-c.y)/(h.y-c.y)*(h.x-c.x),0)._round()),c.x>=n&&h.x>=n||(c.x>=n?c=new ht(n,c.y+(n-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=n&&(h=new ht(n,c.y+(n-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=r&&h.y>=r||(c.y>=r?c=new ht(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r)._round():h.y>=r&&(h=new ht(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r)._round()),l&&c.equals(l[l.length-1])||o.push(l=[c]),l.push(h)))))}return o}(n.geometry,0,0,Ee,Ee);V<q.length;V+=1)for(var H=q[V],W=0,Z=(I=H,P=b,z=S,M=r.vertical||m,D=o,L=24,O=y,R=i.overscaling,F=Ee,void 0,B=Ol(M,L,O),N=Rl(M,D),j=N*O,$=0===I[0].x||I[0].x===F||0===I[0].y||I[0].y===F,P-j<P/4&&(P=j+P/4),function t(e,i,n,r,o,a,s,l,u){for(var c=a/2,h=Ll(e),p=0,d=i-n,f=[],m=0;m<e.length-1;m++){for(var g=e[m],v=e[m+1],y=g.dist(v),_=v.angleTo(g);d+n<p+y;){var b=((d+=n)-p)/y,x=He(g.x,v.x,b),w=He(g.y,v.y,b);if(0<=x&&x<u&&0<=w&&w<u&&0<=d-c&&d+c<=h){var S=new kl(x,w,_,m);S._round(),r&&!Dl(e,S,a,r,o)||f.push(S)}}p+=y}return l||f.length||s||(f=t(e,p/2,n,r,o,a,s,!0,u)),f}(I,$?P/2*R%P:(N/2+2*L)*O*R%P,P,B,z,j,$,!1,F));W<Z.length;W+=1){var G=Z[W];m&&nu(i,m.text,k,G)||U(H,G)}else if("line-center"===E)for(var X=0,Y=n.geometry;X<Y.length;X+=1){var K=Y[X];if(1<K.length){var J=Fl(K,S,r.vertical||m,o,24,y);J&&U(K,J)}}else if("Polygon"===n.type)for(var Q=0,tt=Za(n.geometry,0);Q<tt.length;Q+=1){var et=tt[Q],it=Zl(et,16);U(et[0],new kl(it.x,it.y,0))}else if("LineString"===n.type)for(var nt=0,rt=n.geometry;nt<rt.length;nt+=1){var ot=rt[nt];U(ot,new kl(ot[0].x,ot[0].y,0))}else if("Point"===n.type)for(var at=0,st=n.geometry;at<st.length;at+=1)for(var lt=0,ut=st[at];lt<ut.length;lt+=1){var ct=ut[lt];U([ct],new kl(ct.x,ct.y,0))}}(D,t,o,I,R,j,n,r,s,P,B)},H=0,W=D.features;H<W.length;H+=1)a();t&&D.generateCollisionDebugBuffers()},t.perspective=function(t,e,i,n,r){var o,a=1/Math.tan(e/2);return t[0]=a/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+n)*(o=1/(n-r)),t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){for(var i={},n=0;n<e.length;n++){var r=e[n];r in t&&(i[r]=t[r])}return i},t.plugin=sr,t.polygonIntersectsPolygon=jo,t.postMapLoadEvent=it,t.postTurnstileEvent=tt,t.potpack=ll,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=jn,t.registerForPluginStateChange=function(t){return t({pluginStatus:tr,pluginURL:er}),rr.on("pluginStateChange",t),t},t.rotate=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(i),l=Math.cos(i);return t[0]=n*l+o*s,t[1]=r*l+a*s,t[2]=n*-s+o*l,t[3]=r*-s+a*l,t},t.rotateX=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+u*n,t[5]=a*r+c*n,t[6]=s*r+h*n,t[7]=l*r+p*n,t[8]=u*r-o*n,t[9]=c*r-a*n,t[10]=h*r-s*n,t[11]=p*r-l*n,t},t.rotateZ=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+u*n,t[1]=a*r+c*n,t[2]=s*r+h*n,t[3]=l*r+p*n,t[4]=u*r-o*n,t[5]=c*r-a*n,t[6]=h*r-s*n,t[7]=p*r-l*n,t},t.scale=function(t,e,i){var n=i[0],r=i[1],o=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},t.scale$2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},t.setCacheLimits=function(t,e){rt=t,ot=e},t.setRTLTextPlugin=function(t,e,i){if(void 0===i&&(i=!1),"deferred"===tr||"loading"===tr||"loaded"===tr)throw new Error("setRTLTextPlugin cannot be called multiple times.");er=L.resolveURL(t),tr="deferred",Qn=e,nr(),i||ar()},t.sphericalToCartesian=function(t){var e=t[0],i=t[1],n=t[2];return i+=90,i*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(n),y:e*Math.sin(i)*Math.sin(n),z:e*Math.cos(n)}},t.sqrLen=function(t){var e=t[0],i=t[1];return e*e+i*i},t.styleSpec=kt,t.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},t.symbolSize=Ml,t.transformMat3=function(t,e,i){var n=e[0],r=e[1],o=e[2];return t[0]=n*i[0]+r*i[3]+o*i[6],t[1]=n*i[1]+r*i[4]+o*i[7],t[2]=n*i[2]+r*i[5]+o*i[8],t},t.transformMat4=na,t.translate=function(t,e,i){var n,r,o,a,s,l,u,c,h,p,d,f,m=i[0],g=i[1],v=i[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=n=e[0],t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=n*m+s*g+h*v+e[12],t[13]=r*m+l*g+p*v+e[13],t[14]=o*m+u*g+d*v+e[14],t[15]=a*m+c*g+f*v+e[15]),t},t.triggerPluginCompletionEvent=ir,t.uniqueId=c,t.validateCustomStyleLayer=function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Pn,t.validateStyle=In,t.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},t.vectorTile=cs,t.version="1.9.0",t.warnOnce=pt,t.webpSupported=R,t.window=self,t.wrap=l}),t(0,function(P){function l(t){var e=typeof t;if("number"===e||"boolean"===e||"string"===e||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var i="[",n=0,r=t;n<r.length;n+=1)i+=l(r[n])+",";return i+"]"}for(var o=Object.keys(t).sort(),a="{",s=0;s<o.length;s++)a+=JSON.stringify(o[s])+":"+l(t[o[s]])+",";return a+"}"}function y(t){for(var e="",i=0,n=P.refProperties;i<n.length;i+=1)e+="/"+l(t[n[i]]);return e}var i=function(t){this.keyCache={},t&&this.replace(t)};i.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},i.prototype.update=function(t,e){for(var i=this,n=0,r=t;n<r.length;n+=1){var o=r[n];this._layerConfigs[o.id]=o;var a=this._layers[o.id]=P.createStyleLayer(o);a._featureFilter=P.featureFilter(a.filter),this.keyCache[o.id]&&delete this.keyCache[o.id]}for(var s=0,l=e;s<l.length;s+=1){var u=l[s];delete this.keyCache[u],delete this._layerConfigs[u],delete this._layers[u]}this.familiesBySource={};for(var c=0,h=function(t,e){for(var i={},n=0;n<t.length;n++){var r=e&&e[t[n].id]||y(t[n]);e&&(e[t[n].id]=r);var o=i[r];o||(o=i[r]=[]),o.push(t[n])}var a=[];for(var s in i)a.push(i[s]);return a}(P.values(this._layerConfigs),this.keyCache);c<h.length;c+=1){var p=h[c].map(function(t){return i._layers[t.id]}),d=p[0];if("none"!==d.visibility){var f=d.source||"",m=this.familiesBySource[f];m||(m=this.familiesBySource[f]={});var g=d.sourceLayer||"_geojsonTileLayer",v=m[g];v||(v=m[g]=[]),v.push(p)}}};var z=function(t){var e={},i=[];for(var n in t){var r=t[n],o=e[n]={};for(var a in r){var s=r[+a];if(s&&0!==s.bitmap.width&&0!==s.bitmap.height){var l={x:0,y:0,w:s.bitmap.width+2,h:s.bitmap.height+2};i.push(l),o[a]={rect:l,metrics:s.metrics}}}}var u=P.potpack(i),c=new P.AlphaImage({width:u.w||1,height:u.h||1});for(var h in t){var p=t[h];for(var d in p){var f=p[+d];if(f&&0!==f.bitmap.width&&0!==f.bitmap.height){var m=e[h][d].rect;P.AlphaImage.copy(f.bitmap,c,{x:0,y:0},{x:m.x+1,y:m.y+1},f.bitmap)}}}this.image=c,this.positions=e};P.register("GlyphAtlas",z);var e=function(t){this.tileID=new P.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId};function M(t,e,i){for(var n=new P.EvaluationParameters(e),r=0,o=t;r<o.length;r+=1)o[r].recalculate(n,i)}function r(t,r){var e=P.getArrayBuffer(t.request,function(t,e,i,n){t?r(t):e&&r(null,{vectorTile:new P.vectorTile.VectorTile(new P.pbf(e)),rawData:e,cacheControl:i,expires:n})});return function(){e.cancel(),r()}}e.prototype.parse=function(t,e,r,i,o){var n=this;this.status="parsing",this.data=t,this.collisionBoxArray=new P.CollisionBoxArray;var a=new P.DictionaryCoder(Object.keys(t.layers).sort()),s=new P.FeatureIndex(this.tileID,this.promoteId);s.bucketLayerIDs=[];var l,u,c,h,p={},d={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},f=e.familiesBySource[this.source];for(var m in f){var g=t.layers[m];if(g){1===g.version&&P.warnOnce('Vector tile source "'+this.source+'" layer "'+m+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var v=a.encode(m),y=[],_=0;_<g.length;_++){var b=g.feature(_),x=s.getId(b,m);y.push({feature:b,id:x,index:_,sourceLayerIndex:v})}for(var w=0,S=f[m];w<S.length;w+=1){var T=S[w],C=T[0];C.minzoom&&this.zoom<Math.floor(C.minzoom)||C.maxzoom&&this.zoom>=C.maxzoom||"none"!==C.visibility&&(M(T,this.zoom,r),(p[C.id]=C.createBucket({index:s.bucketLayerIDs.length,layers:T,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:v,sourceID:this.source})).populate(y,d,this.tileID.canonical),s.bucketLayerIDs.push(T.map(function(t){return t.id})))}}}var E=P.mapObject(d.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(E).length?i.send("getGlyphs",{uid:this.uid,stacks:E},function(t,e){l||(l=t,u=e,I.call(n))}):u={};var k=Object.keys(d.iconDependencies);k.length?i.send("getImages",{icons:k,source:this.source,tileID:this.tileID,type:"icons"},function(t,e){l||(l=t,c=e,I.call(n))}):c={};var A=Object.keys(d.patternDependencies);function I(){if(l)return o(l);if(u&&c&&h){var t=new z(u),e=new P.ImageAtlas(c,h);for(var i in p){var n=p[i];n instanceof P.SymbolBucket?(M(n.layers,this.zoom,r),P.performSymbolLayout(n,u,t.positions,c,e.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):n.hasPattern&&(n instanceof P.LineBucket||n instanceof P.FillBucket||n instanceof P.FillExtrusionBucket)&&(M(n.layers,this.zoom,r),n.addFeatures(d,this.tileID.canonical,e.patternPositions))}this.status="done",o(null,{buckets:P.values(p).filter(function(t){return!t.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:e,glyphMap:this.returnDependencies?u:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?t.positions:null})}}A.length?i.send("getImages",{icons:A,source:this.source,tileID:this.tileID,type:"patterns"},function(t,e){l||(l=t,h=e,I.call(n))}):h={},I.call(this)};var n=function(t,e,i,n){this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=n||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(t,a){var s=this,l=t.uid;this.loading||(this.loading={});var u=!!(t&&t.request&&t.request.collectResourceTiming)&&new P.RequestPerformance(t.request),c=this.loading[l]=new e(t);c.abort=this.loadVectorData(t,function(t,e){if(delete s.loading[l],t||!e)return c.status="done",s.loaded[l]=c,a(t);var i=e.rawData,n={};e.expires&&(n.expires=e.expires),e.cacheControl&&(n.cacheControl=e.cacheControl);var r={};if(u){var o=u.finish();o&&(r.resourceTiming=JSON.parse(JSON.stringify(o)))}c.vectorTile=e.vectorTile,c.parse(e.vectorTile,s.layerIndex,s.availableImages,s.actor,function(t,e){if(t||!e)return a(t);a(null,P.extend({rawTileData:i.slice(0)},e,n,r))}),s.loaded=s.loaded||{},s.loaded[l]=c})},n.prototype.reloadTile=function(t,n){var r=this,e=this.loaded,i=t.uid,o=this;if(e&&e[i]){var a=e[i];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,e){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,r.availableImages,o.actor,i)),n(t,e)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},n.prototype.abortTile=function(t,e){var i=this.loading,n=t.uid;i&&i[n]&&i[n].abort&&(i[n].abort(),delete i[n]),e()},n.prototype.removeTile=function(t,e){var i=this.loaded,n=t.uid;i&&i[n]&&delete i[n],e()};var s=P.window.ImageBitmap,o=function(){this.loaded={}};o.prototype.loadTile=function(t,e){var i=t.uid,n=t.encoding,r=t.rawImageData,o=s&&r instanceof s?this.getImageData(r):r,a=new P.DEMData(i,o,n);this.loaded=this.loaded||{},e(null,this.loaded[i]=a)},o.prototype.getImageData=function(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var e=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new P.RGBAImage({width:e.width,height:e.height},e.data)},o.prototype.removeTile=function(t){var e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]};var u={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function a(t){var e=0;if(t&&0<t.length){e+=Math.abs(c(t[0]));for(var i=1;i<t.length;i++)e-=Math.abs(c(t[i]))}return e}function c(t){var e,i,n,r,o,a,s=0,l=t.length;if(2<l){for(a=0;a<l;a++)a===l-2?(n=l-2,r=l-1,o=0):a===l-1?(n=l-1,r=0,o=1):(r=(n=a)+1,o=a+2),e=t[n],i=t[r],s+=(h(t[o][0])-h(e[0]))*Math.sin(h(i[1]));s=s*u.RADIUS*u.RADIUS/2}return s}function h(t){return t*Math.PI/180}var p={geometry:function t(e){var i,n=0;switch(e.type){case"Polygon":return a(e.coordinates);case"MultiPolygon":for(i=0;i<e.coordinates.length;i++)n+=a(e.coordinates[i]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(i=0;i<e.geometries.length;i++)n+=t(e.geometries[i]);return n}},ring:c};function d(e,i){return function(t){return e(t,i)}}function f(t,e){t[0]=m(t[0],e=!!e);for(var i=1;i<t.length;i++)t[i]=m(t[i],!e);return t}function m(t,e){return i=t,0<=p.ring(i)===e?t:t.reverse();var i}var g=P.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(t){this._feature=t,this.extent=P.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};v.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],e=0,i=this._feature.geometry;e<i.length;e+=1){var n=i[e];t.push([new P.Point$1(n[0],n[1])])}return t}for(var r=[],o=0,a=this._feature.geometry;o<a.length;o+=1){for(var s=[],l=0,u=a[o];l<u.length;l+=1){var c=u[l];s.push(new P.Point$1(c[0],c[1]))}r.push(s)}return r},v.prototype.toGeoJSON=function(t,e,i){return g.call(this,t,e,i)};var _=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=P.EXTENT,this.length=t.length,this._features=t};_.prototype.feature=function(t){return new v(this._features[t])};var t=P.vectorTile.VectorTileFeature,b=x;function x(t,e){this.options=e||{},this.features=t,this.length=t.length}function w(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}x.prototype.feature=function(t){return new w(this.features[t],this.options.extent)},w.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],n=[],r=0;r<i.length;r++)n.push(new P.Point$1(i[r][0],i[r][1]));this.geometry.push(n)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,n=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),r=Math.max(r,l.y)}return[e,n,i,r]},w.prototype.toGeoJSON=t.prototype.toGeoJSON;var S=C,T=b;function C(t){var e=new P.pbf;return function(t,e){for(var i in t.layers)e.writeMessage(3,E,t.layers[i])}(t,e),e.finish()}function E(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)n.feature=t.feature(i),e.writeMessage(2,k,n);var r=n.keys;for(i=0;i<r.length;i++)e.writeStringField(3,r[i]);var o=n.values;for(i=0;i<o.length;i++)e.writeMessage(4,O,o[i])}function k(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,A,t),e.writeVarintField(3,i.type),e.writeMessage(4,L,i)}function A(t,e){var i=t.feature,n=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in i.properties){var l=o[s];void 0===l&&(n.push(s),o[s]=l=n.length-1),e.writeVarint(l);var u=i.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var h=c+":"+u,p=a[h];void 0===p&&(r.push(u),a[h]=p=r.length-1),e.writeVarint(p)}}function I(t,e){return(e<<3)+(7&t)}function D(t){return t<<1^t>>31}function L(t,e){for(var i=t.loadGeometry(),n=t.type,r=0,o=0,a=i.length,s=0;s<a;s++){var l=i[s],u=1;1===n&&(u=l.length),e.writeVarint(I(1,u));for(var c=3===n?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==n&&e.writeVarint(I(2,c-1));var p=l[h].x-r,d=l[h].y-o;e.writeVarint(D(p)),e.writeVarint(D(d)),r+=p,o+=d}3===n&&e.writeVarint(I(7,1))}}function O(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function R(t,e,i,n){F(t,i,n),F(e,2*i,2*n),F(e,2*i+1,2*n+1)}function F(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function B(t,e,i,n){var r=t-i,o=e-n;return r*r+o*o}S.fromVectorTileJs=C,S.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var n in t)i[n]=new b(t[n].features,e),i[n].name=n,i[n].version=e.version,i[n].extent=e.extent;return C({layers:i})},S.GeoJSONWrapper=T;var N=function(t){return t[0]},j=function(t){return t[1]},$=function(t,e,i,n,r){void 0===e&&(e=N),void 0===i&&(i=j),void 0===n&&(n=64),void 0===r&&(r=Float64Array),this.nodeSize=n;for(var o=(this.points=t).length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length),l=0;l<t.length;l++)s[2*(a[l]=l)]=e(t[l]),s[2*l+1]=i(t[l]);!function t(e,i,n,r,o,a){if(!(o-r<=n)){var s=r+o>>1;!function t(e,i,n,r,o,a){for(;r<o;){if(600<o-r){var s=o-r+1,l=n-r+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(e,i,n,Math.max(r,Math.floor(n-l*c/s+h)),Math.min(o,Math.floor(n+(s-l)*c/s+h)),a)}var p=i[2*n+a],d=r,f=o;for(R(e,i,r,n),i[2*o+a]>p&&R(e,i,r,o);d<f;){for(R(e,i,d,f),d++,f--;i[2*d+a]<p;)d++;for(;i[2*f+a]>p;)f--}i[2*r+a]===p?R(e,i,r,f):R(e,i,++f,o),f<=n&&(r=f+1),n<=f&&(o=f-1)}}(e,i,s,r,o,a%2),t(e,i,n,r,s-1,a+1),t(e,i,n,s+1,o,a+1)}}(a,s,n,0,a.length-1,0)};$.prototype.range=function(t,e,i,n){return function(t,e,i,n,r,o,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),p=u.pop(),d=u.pop();if(p-d<=a)for(var f=d;f<=p;f++)l=e[2*f+1],(s=e[2*f])>=i&&s<=r&&n<=l&&l<=o&&c.push(t[f]);else{var m=Math.floor((d+p)/2);l=e[2*m+1],(s=e[2*m])>=i&&s<=r&&n<=l&&l<=o&&c.push(t[m]);var g=(h+1)%2;(0===h?i<=s:n<=l)&&(u.push(d),u.push(m-1),u.push(g)),(0===h?s<=r:l<=o)&&(u.push(m+1),u.push(p),u.push(g))}}return c}(this.ids,this.coords,t,e,i,n,this.nodeSize)};var U={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!($.prototype.within=function(t,e,i){return function(t,e,i,n,r,o){for(var a=[0,t.length-1,0],s=[],l=r*r;a.length;){var u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var p=h;p<=c;p++)B(e[2*p],e[2*p+1],i,n)<=l&&s.push(t[p]);else{var d=Math.floor((h+c)/2),f=e[2*d],m=e[2*d+1];B(f,m,i,n)<=l&&s.push(t[d]);var g=(u+1)%2;(0===u?i-r<=f:n-r<=m)&&(a.push(h),a.push(d-1),a.push(g)),(0===u?f<=i+r:m<=n+r)&&(a.push(d+1),a.push(c),a.push(g))}}return s}(this.ids,this.coords,t,e,i,this.nodeSize)}),generateId:!1,reduce:null,map:function(t){return t}},V=function(t){this.options=G(Object.create(U),t),this.trees=new Array(this.options.maxZoom+1)};function q(t){return{type:"Feature",id:t.id,properties:H(t),geometry:{type:"Point",coordinates:[(n=t.x,360*(n-.5)),(e=t.y,i=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(i))/Math.PI-90)]}};var e,i,n}function H(t){var e=t.numPoints,i=1e4<=e?Math.round(e/1e3)+"k":1e3<=e?Math.round(e/100)/10+"k":e;return G(G({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function W(t){return t/360+.5}function Z(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:1<i?1:i}function G(t,e){for(var i in e)t[i]=e[i];return t}function X(t){return t.x}function Y(t){return t.y}function K(t,e,i,n,r,o){var a=r-i,s=o-n;if(0!==a||0!==s){var l=((t-i)*a+(e-n)*s)/(a*a+s*s);1<l?(i=r,n=o):0<l&&(i+=a*l,n+=s*l)}return(a=t-i)*a+(s=e-n)*s}function J(t,e,i,n){var r={id:void 0===t?null:t,type:e,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)Q(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var n=0;n<e.length;n++)Q(t,e[n]);else if("MultiPolygon"===i)for(n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)Q(t,e[n][r])}(r),r}function Q(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function tt(t,e,i,n){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=n||0),"Point"===o)et(r,s);else if("MultiPoint"===o)for(var u=0;u<r.length;u++)et(r[u],s);else if("LineString"===o)it(r,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(u=0;u<r.length;u++)it(r[u],s=[],a,!1),t.push(J(l,"LineString",s,e.properties));return}nt(r,s,a,!1)}else if("Polygon"===o)nt(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<e.geometry.geometries.length;u++)tt(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},i,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<r.length;u++){var c=[];nt(r[u],c,a,!0),s.push(c)}}t.push(J(l,o,s,e.properties))}}function et(t,e){e.push(rt(t[0])),e.push(ot(t[1])),e.push(0)}function it(t,e,i,n){for(var r,o,a=0,s=0;s<t.length;s++){var l=rt(t[s][0]),u=ot(t[s][1]);e.push(l),e.push(u),e.push(0),0<s&&(a+=n?(r*u-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(u-o,2))),r=l,o=u}var c=e.length-3;e[2]=1,function t(e,i,n,r){for(var o,a=r,s=n-i>>1,l=n-i,u=e[i],c=e[i+1],h=e[n],p=e[n+1],d=i+3;d<n;d+=3){var f=K(e[d],e[d+1],u,c,h,p);if(a<f)o=d,a=f;else if(f===a){var m=Math.abs(d-s);m<l&&(o=d,l=m)}}r<a&&(3<o-i&&t(e,i,o,r),e[o+2]=a,3<n-o&&t(e,o,n,r))}(e,0,c,i),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function nt(t,e,i,n){for(var r=0;r<t.length;r++){var o=[];it(t[r],o,i,n),e.push(o)}}function rt(t){return t/360+.5}function ot(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:1<i?1:i}function at(t,e,i,n,r,o,a,s){if(n/=e,o>=(i/=e)&&a<n)return t;if(a<i||n<=o)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.type,d=0===r?c.minX:c.minY,f=0===r?c.maxX:c.maxY;if(i<=d&&f<n)l.push(c);else if(!(f<i||n<=d)){var m=[];if("Point"===p||"MultiPoint"===p)st(h,m,i,n,r);else if("LineString"===p)lt(h,m,i,n,r,!1,s.lineMetrics);else if("MultiLineString"===p)ct(h,m,i,n,r,!1);else if("Polygon"===p)ct(h,m,i,n,r,!0);else if("MultiPolygon"===p)for(var g=0;g<h.length;g++){var v=[];ct(h[g],v,i,n,r,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<m.length;g++)l.push(J(c.id,p,m[g],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(J(c.id,p,m,c.tags))}}}return l.length?l:null}function st(t,e,i,n,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];i<=a&&a<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function lt(t,e,i,n,r,o,a){for(var s,l,u=ut(t),c=0===r?pt:dt,h=t.start,p=0;p<t.length-3;p+=3){var d=t[p],f=t[p+1],m=t[p+2],g=t[p+3],v=t[p+4],y=0===r?d:f,_=0===r?g:v,b=!1;a&&(s=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-v,2))),y<i?i<_&&(l=c(u,d,f,g,v,i),a&&(u.start=h+s*l)):n<y?_<n&&(l=c(u,d,f,g,v,n),a&&(u.start=h+s*l)):ht(u,d,f,m),_<i&&i<=y&&(l=c(u,d,f,g,v,i),b=!0),n<_&&y<=n&&(l=c(u,d,f,g,v,n),b=!0),!o&&b&&(a&&(u.end=h+s*l),e.push(u),u=ut(t)),a&&(h+=s)}var x=t.length-3;d=t[x],f=t[x+1],m=t[x+2],(y=0===r?d:f)>=i&&y<=n&&ht(u,d,f,m),x=u.length-3,o&&3<=x&&(u[x]!==u[0]||u[x+1]!==u[1])&&ht(u,u[0],u[1],u[2]),u.length&&e.push(u)}function ut(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ct(t,e,i,n,r,o){for(var a=0;a<t.length;a++)lt(t[a],e,i,n,r,o,!1)}function ht(t,e,i,n){t.push(e),t.push(i),t.push(n)}function pt(t,e,i,n,r,o){var a=(o-e)/(n-e);return t.push(o),t.push(i+(r-i)*a),t.push(1),a}function dt(t,e,i,n,r,o){var a=(o-i)/(r-i);return t.push(e+(n-e)*a),t.push(o),t.push(1),a}function ft(t,e){for(var i=[],n=0;n<t.length;n++){var r,o=t[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=mt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(mt(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(mt(o.geometry[s][u],e));r.push(l)}i.push(J(o.id,a,r,o.tags))}return i}function mt(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var n=0;n<t.length;n+=3)i.push(t[n]+e,t[n+1],t[n+2]);return i}function gt(t,e){if(t.transformed)return t;var i,n,r,o=1<<t.z,a=t.x,s=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(n=0;n<u.length;n+=2)l.geometry.push(vt(u[n],u[n+1],e,o,a,s));else for(n=0;n<u.length;n++){var h=[];for(r=0;r<u[n].length;r+=2)h.push(vt(u[n][r],u[n][r+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function vt(t,e,i,n,r,o){return[Math.round(i*(t*n-r)),Math.round(i*(e*n-o))]}function yt(t,e,i,n,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,_t(a,t[s],o,r);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function _t(t,e,i,n){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)bt(a,r,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)bt(a,r[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<r.length;l++){var u=r[l];for(s=0;s<u.length;s++)bt(a,u[s],t,i,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function bt(t,e,i,n,r,o){var a=n*n;if(0<n&&e.size<(r?a:n))i.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>a)&&(i.numSimplified++,s.push(e[l]),s.push(e[l+1])),i.numPoints++;r&&function(t,e){for(var i=0,n=0,r=t.length,o=r-2;n<r;o=n,n+=2)i+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(0<i===e)for(n=0,r=t.length;n<r/2;n+=2){var a=t[n],s=t[n+1];t[n]=t[r-2-n],t[n+1]=t[r-1-n],t[r-2-n]=a,t[r-1-n]=s}}(s,o),t.push(s)}}function xt(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n,r,o,a,s,l,u=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)tt(i,t.features[n],e,n);else tt(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=u,r=e,o=r.buffer/r.extent,a=n,s=at(n,1,-1-o,o,0,-1,2,r),l=at(n,1,1-o,2+o,0,-1,2,r),(s||l)&&(a=at(n,1,-o,1+o,0,-1,2,r)||[],s&&(a=ft(s,1).concat(a)),l&&(a=a.concat(ft(l,-1)))),u=a).length&&this.splitTile(u,0,0,0),i&&(u.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wt(t,e,i){return 32*((1<<t)*i+e)+t}function St(t,e){var i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var n=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!n)return e(null,null);var r=new _(n.features),o=S(r);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:r,rawData:o.buffer})}V.prototype.load=function(t){var e=this.options,i=e.log,n=e.minZoom,r=e.maxZoom,o=e.nodeSize;i&&console.time("total time");var a,s,l,u,c="prepare "+t.length+" points";i&&console.time(c),this.points=t;for(var h=[],p=0;p<t.length;p++)t[p].geometry&&h.push((a=t[p],s=p,void 0,l=a.geometry.coordinates,u=l[1],{x:W(l[0]),y:Z(u),zoom:1/0,index:s,parentId:-1}));this.trees[r+1]=new $(h,X,Y,o,Float32Array),i&&console.timeEnd(c);for(var d=r;n<=d;d--){var f=+Date.now();h=this._cluster(h,d),this.trees[d]=new $(h,X,Y,o,Float32Array),i&&console.log("z%d: %d clusters in %dms",d,h.length,+Date.now()-f)}return i&&console.timeEnd("total time"),this},V.prototype.getClusters=function(t,e){var i=((t[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,t[1])),r=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(360<=t[2]-t[0])i=-180,r=180;else if(r<i){var a=this.getClusters([i,n,180,o],e),s=this.getClusters([-180,n,r,o],e);return a.concat(s)}for(var l=this.trees[this._limitZoom(e)],u=[],c=0,h=l.range(W(i),Z(o),W(r),Z(n));c<h.length;c+=1){var p=l.points[h[c]];u.push(p.numPoints?q(p):this.points[p.index])}return u},V.prototype.getChildren=function(t){var e=this._getOriginId(t),i=this._getOriginZoom(t),n="No cluster with the specified id.",r=this.trees[i];if(!r)throw new Error(n);var o=r.points[e];if(!o)throw new Error(n);for(var a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=[],l=0,u=r.within(o.x,o.y,a);l<u.length;l+=1){var c=r.points[u[l]];c.parentId===t&&s.push(c.numPoints?q(c):this.points[c.index])}if(0===s.length)throw new Error(n);return s},V.prototype.getLeaves=function(t,e,i){var n=[];return this._appendLeaves(n,t,e=e||10,i=i||0,0),n},V.prototype.getTile=function(t,e,i){var n=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(i-a)/r,l=(i+1+a)/r,u={features:[]};return this._addTileFeatures(n.range((e-a)/r,s,(e+1+a)/r,l),n.points,e,i,r,u),0===e&&this._addTileFeatures(n.range(1-a/r,s,1,l),n.points,r,i,r,u),e===r-1&&this._addTileFeatures(n.range(0,s,a/r,l),n.points,-1,i,r,u),u.features.length?u:null},V.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e},V.prototype._appendLeaves=function(t,e,i,n,r){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],l=s.properties;if(l&&l.cluster?r+l.point_count<=n?r+=l.point_count:r=this._appendLeaves(t,l.cluster_id,i,n,r):r<n?r++:t.push(s),t.length===i)break}return r},V.prototype._addTileFeatures=function(t,e,i,n,r,o){for(var a=0,s=t;a<s.length;a+=1){var l=e[s[a]],u=l.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(l.x*r-i)),Math.round(this.options.extent*(l.y*r-n))]],tags:u?H(l):this.points[l.index].properties},h=void 0;u?h=l.id:this.options.generateId?h=l.index:this.points[l.index].id&&(h=this.points[l.index].id),void 0!==h&&(c.id=h),o.features.push(c)}},V.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},V.prototype._cluster=function(t,e){for(var i=[],n=this.options,r=n.reduce,o=n.radius/(n.extent*Math.pow(2,e)),a=0;a<t.length;a++){var s=t[a];if(!(s.zoom<=e)){s.zoom=e;for(var l=this.trees[e+1],u=l.within(s.x,s.y,o),c=s.numPoints||1,h=s.x*c,p=s.y*c,d=r&&1<c?this._map(s,!0):null,f=(a<<5)+(e+1)+this.points.length,m=0,g=u;m<g.length;m+=1){var v=l.points[g[m]];if(!(v.zoom<=e)){v.zoom=e;var y=v.numPoints||1;h+=v.x*y,p+=v.y*y,c+=y,v.parentId=f,r&&(d||(d=this._map(s,!0)),r(d,this._map(v)))}}1===c?i.push(s):(s.parentId=f,i.push({x:h/c,y:p/c,zoom:1/0,id:f,parentId:-1,numPoints:c,properties:d}))}}return i},V.prototype._getOriginId=function(t){return t-this.points.length>>5},V.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},xt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!(V.prototype._map=function(t,e){if(t.numPoints)return e?G({},t.properties):t.properties;var i=this.points[t.index].properties,n=this.options.map(i);return e&&n===i?G({},n):n}),promoteId:null,generateId:!1,debug:0},xt.prototype.splitTile=function(t,e,i,n,r,o,a){for(var s=[t,e,i,n],l=this.options,u=l.debug;s.length;){n=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=wt(e,i,n),p=this.tiles[h];if(!p&&(1<u&&console.time("creation"),p=this.tiles[h]=yt(t,e,i,n,l),this.tileCoords.push({z:e,x:i,y:n}),u)){1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,n,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=t,r){if(e===l.maxZoom||e===r)continue;var f=1<<r-e;if(i!==Math.floor(o/f)||n!==Math.floor(a/f))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){1<u&&console.time("clipping");var m,g,v,y,_,b,x=.5*l.buffer/l.extent,w=.5-x,S=.5+x,T=1+x;m=g=v=y=null,_=at(t,c,i-x,i+S,0,p.minX,p.maxX,l),b=at(t,c,i+w,i+T,0,p.minX,p.maxX,l),t=null,_&&(m=at(_,c,n-x,n+S,1,p.minY,p.maxY,l),g=at(_,c,n+w,n+T,1,p.minY,p.maxY,l),_=null),b&&(v=at(b,c,n-x,n+S,1,p.minY,p.maxY,l),y=at(b,c,n+w,n+T,1,p.minY,p.maxY,l),b=null),1<u&&console.timeEnd("clipping"),s.push(m||[],e+1,2*i,2*n),s.push(g||[],e+1,2*i,2*n+1),s.push(v||[],e+1,2*i+1,2*n),s.push(y||[],e+1,2*i+1,2*n+1)}}},xt.prototype.getTile=function(t,e,i){var n=this.options,r=n.extent,o=n.debug;if(t<0||24<t)return null;var a=1<<t,s=wt(t,e=(e%a+a)%a,i);if(this.tiles[s])return gt(this.tiles[s],r);1<o&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,u=t,c=e,h=i;!l&&0<u;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[wt(u,c,h)];return l&&l.source?(1<o&&console.log("found parent tile z%d-%d-%d",u,c,h),1<o&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,i),1<o&&console.timeEnd("drilling down"),this.tiles[s]?gt(this.tiles[s],r):null):null};var Tt=function(r){function t(t,e,i,n){r.call(this,t,e,i,St),n&&(this.loadGeoJSON=n)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},t.prototype._loadData=function(){var r=this;if(this._pendingCallback&&this._pendingLoadDataParams){var o=this._pendingCallback,a=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var s=!!(a&&a.request&&a.request.collectResourceTiming)&&new P.RequestPerformance(a.request);this.loadGeoJSON(a,function(t,e){if(t||!e)return o(t);if("object"!=typeof e)return o(new Error("Input data given to '"+a.source+"' is not a valid GeoJSON object."));!function t(e,i){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(d(t,i)),e;case"GeometryCollection":return e.geometries=e.geometries.map(d(t,i)),e;case"Feature":return e.geometry=t(e.geometry,i),e;case"Polygon":case"MultiPolygon":return r=i,"Polygon"===(n=e).type?n.coordinates=f(n.coordinates,r):"MultiPolygon"===n.type&&(n.coordinates=n.coordinates.map(d(f,r))),n;default:return e}var n,r}(e,!0);try{r._geoJSONIndex=a.cluster?new V(function(t){var e=t.superclusterOptions,i=t.clusterProperties;if(!i||!e)return e;for(var o={},a={},s={accumulated:null,zoom:0},l={properties:null},u=Object.keys(i),n=0,r=u;n<r.length;n+=1){var c=r[n],h=i[c],p=h[0],d=P.createExpression(h[1]),f=P.createExpression("string"==typeof p?[p,["accumulated"],["get",c]]:p);o[c]=d.value,a[c]=f.value}return e.map=function(t){l.properties=t;for(var e={},i=0,n=u;i<n.length;i+=1){var r=n[i];e[r]=o[r].evaluate(s,l)}return e},e.reduce=function(t,e){l.properties=e;for(var i=0,n=u;i<n.length;i+=1){var r=n[i];s.accumulated=t[r],t[r]=a[r].evaluate(s,l)}},e}(a)).load(e.features):new xt(e,a.geojsonVtOptions)}catch(t){return o(t)}r.loaded={};var i={};if(s){var n=s.finish();n&&(i.resourceTiming={},i.resourceTiming[a.source]=JSON.parse(JSON.stringify(n)))}o(null,i)})}},t.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},t.prototype.reloadTile=function(t,e){var i=this.loaded;return i&&i[t.uid]?r.prototype.reloadTile.call(this,t,e):this.loadTile(t,e)},t.prototype.loadGeoJSON=function(e,i){if(e.request)P.getJSON(e.request,i);else{if("string"!=typeof e.data)return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(e.data))}catch(t){return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},t.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},t.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},t.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},t}(n),Ct=function(t){var i=this;this.self=t,this.actor=new P.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:Tt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(i.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');i.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(t){if(P.plugin.isParsed())throw new Error("RTL text plugin already registered.");P.plugin.applyArabicShaping=t.applyArabicShaping,P.plugin.processBidirectionalText=t.processBidirectionalText,P.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return Ct.prototype.setReferrer=function(t,e){this.referrer=e},Ct.prototype.setImages=function(t,e,i){this.availableImages[t]=e,i()},Ct.prototype.setLayers=function(t,e,i){this.getLayerIndex(t).replace(e),i()},Ct.prototype.updateLayers=function(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()},Ct.prototype.loadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).loadTile(e,i)},Ct.prototype.loadDEMTile=function(t,e,i){this.getDEMWorkerSource(t,e.source).loadTile(e,i)},Ct.prototype.reloadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).reloadTile(e,i)},Ct.prototype.abortTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)},Ct.prototype.removeTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)},Ct.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Ct.prototype.removeSource=function(t,e,i){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var n=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==n.removeSource?n.removeSource(e,i):i()}},Ct.prototype.loadWorkerSource=function(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}},Ct.prototype.syncRTLPluginState=function(t,e,i){try{P.plugin.setState(e);var n=P.plugin.getPluginURL();if(P.plugin.isLoaded()&&!P.plugin.isParsed()&&null!=n){this.self.importScripts(n);var r=P.plugin.isParsed();i(r?void 0:new Error("RTL Text Plugin failed to import scripts from "+n),r)}}catch(t){i(t.toString())}},Ct.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},Ct.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},Ct.prototype.getWorkerSource=function(n,t,e){var r=this;return this.workerSources[n]||(this.workerSources[n]={}),this.workerSources[n][t]||(this.workerSources[n][t]={}),this.workerSources[n][t][e]||(this.workerSources[n][t][e]=new this.workerSourceTypes[t]({send:function(t,e,i){r.actor.send(t,e,i,n)}},this.getLayerIndex(n),this.getAvailableImages(n))),this.workerSources[n][t][e]},Ct.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new o),this.demWorkerSources[t][e]},Ct.prototype.enforceCacheSizeLimit=function(t,e){P.enforceCacheSizeLimit(e)},"undefined"!=typeof WorkerGlobalScope&&void 0!==P.window&&P.window instanceof WorkerGlobalScope&&(P.window.worker=new Ct(P.window)),Ct}),t(0,function(yt){var i=yt.createCommonjsModule(function(t){function o(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(i);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&(r=t&&t.failIfMajorPerformanceCaveat,void 0===a[r]&&(a[r]=(e=r,i=document.createElement("canvas"),(n=Object.create(o.webGLContextAttributes)).failIfMajorPerformanceCaveat=e,i.probablySupportsContext?i.probablySupportsContext("webgl",n)||i.probablySupportsContext("experimental-webgl",n):i.supportsContext?i.supportsContext("webgl",n)||i.supportsContext("experimental-webgl",n):i.getContext("webgl",n)||i.getContext("experimental-webgl",n))),a[r]));var e,i,n,r}t.exports?t.exports=o:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=o);var a={};o.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(t,e,i){var n=yt.window.document.createElement(t);return void 0!==e&&(n.className=e),i&&i.appendChild(n),n},createNS:function(t,e){return yt.window.document.createElementNS(t,e)}},n=yt.window.document.documentElement.style;function t(t){if(!n)return t[0];for(var e=0;e<t.length;e++)if(t[e]in n)return t[e];return t[0]}var e,r=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){n&&r&&(e=n[r],n[r]="none")},b.enableDrag=function(){n&&r&&(n[r]=e)};var o=t(["transform","WebkitTransform"]),a=!(b.setTransform=function(t,e){t.style[o]=e});try{var s=Object.defineProperty({},"passive",{get:function(){a=!0}});yt.window.addEventListener("test",s,s),yt.window.removeEventListener("test",s,s)}catch(yt){a=!1}b.addEventListener=function(t,e,i,n){void 0===n&&(n={}),t.addEventListener(e,i,"passive"in n&&a?n:n.capture)},b.removeEventListener=function(t,e,i,n){void 0===n&&(n={}),t.removeEventListener(e,i,"passive"in n&&a?n:n.capture)};var l=function(t){t.preventDefault(),t.stopPropagation(),yt.window.removeEventListener("click",l,!0)};b.suppressClick=function(){yt.window.addEventListener("click",l,!0),yt.window.setTimeout(function(){yt.window.removeEventListener("click",l,!0)},0)},b.mousePos=function(t,e){var i=t.getBoundingClientRect(),n=yt.window.TouchEvent&&e instanceof yt.window.TouchEvent?e.touches[0]:e;return new yt.Point(n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop)},b.touchPos=function(t,e){for(var i=t.getBoundingClientRect(),n=[],r="touchend"===e.type?e.changedTouches:e.touches,o=0;o<r.length;o++)n.push(new yt.Point(r[o].clientX-i.left-t.clientLeft,r[o].clientY-i.top-t.clientTop));return n},b.mouseButton=function(t){return void 0!==yt.window.InstallTrigger&&2===t.button&&t.ctrlKey&&0<=yt.window.navigator.platform.toUpperCase().indexOf("MAC")?0:t.button},b.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var u=function(t){function e(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new yt.RGBAImage({width:1,height:1}),this.dirty=!0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.isLoaded=function(){return this.loaded},e.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var n=i[e];this._notify(n.ids,n.callback)}this.requestors=[]}},e.prototype.getImage=function(t){return this.images[t]},e.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},e.prototype._validate=function(t,e){var i=!0;return this._validateStretch(e.stretchX,e.data&&e.data.width)||(this.fire(new yt.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchX" value'))),i=!1),this._validateStretch(e.stretchY,e.data&&e.data.height)||(this.fire(new yt.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchY" value'))),i=!1),this._validateContent(e.content,e)||(this.fire(new yt.ErrorEvent(new Error('Image "'+t+'" has invalid "content" value'))),i=!1),i},e.prototype._validateStretch=function(t,e){if(!t)return!0;for(var i=0,n=0,r=t;n<r.length;n+=1){var o=r[n];if(o[0]<i||o[1]<o[0]||e<o[1])return!1;i=o[1]}return!0},e.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},e.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},e.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},e.prototype.listImages=function(){return Object.keys(this.images)},e.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var n=0,r=t;n<r.length;n+=1)this.images[r[n]]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},e.prototype._notify=function(t,e){for(var i={},n=0,r=t;n<r.length;n+=1){var o=r[n];this.images[o]||this.fire(new yt.Event("styleimagemissing",{id:o}));var a=this.images[o];a?i[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf,version:a.version,stretchX:a.stretchX,stretchY:a.stretchY,content:a.content,hasRenderCallback:Boolean(a.userImage&&a.userImage.render)}:yt.warnOnce('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}e(null,i)},e.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},e.prototype.getPattern=function(t){var e=this.patterns[t],i=this.getImage(t);if(!i)return null;if(e&&e.position.version===i.version)return e.position;if(e)e.position.version=i.version;else{var n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new yt.ImagePosition(n,i);this.patterns[t]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[t].position},e.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new yt.Texture(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},e.prototype._updatePatternAtlas=function(){var t=[];for(var e in this.patterns)t.push(this.patterns[e].bin);var i=yt.potpack(t),n=i.w,r=i.h,o=this.atlasImage;for(var a in o.resize({width:n||1,height:r||1}),this.patterns){var s=this.patterns[a].bin,l=s.x+1,u=s.y+1,c=this.images[a].data,h=c.width,p=c.height;yt.RGBAImage.copy(c,o,{x:0,y:0},{x:l,y:u},{width:h,height:p}),yt.RGBAImage.copy(c,o,{x:0,y:p-1},{x:l,y:u-1},{width:h,height:1}),yt.RGBAImage.copy(c,o,{x:0,y:0},{x:l,y:u+p},{width:h,height:1}),yt.RGBAImage.copy(c,o,{x:h-1,y:0},{x:l-1,y:u},{width:1,height:p}),yt.RGBAImage.copy(c,o,{x:0,y:0},{x:l+h,y:u},{width:1,height:p})}this.dirty=!0},e.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},e.prototype.dispatchRenderCallbacks=function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if(!this.callbackDispatchedThisFrame[n]){this.callbackDispatchedThisFrame[n]=!0;var r=this.images[n];a=void 0,(a=(o=r).userImage)&&a.render&&a.render()&&(o.data.replace(new Uint8Array(a.data.buffer)),1)&&this.updateImage(n,r)}}var o,a},e}(yt.Evented),c=d,h=d,p=1e20;function d(t,e,i,n,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=r||"sans-serif",this.fontWeight=o||"normal",this.radius=i||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function f(t,e,i,n,r,o,a){for(var s=0;s<e;s++){for(var l=0;l<i;l++)n[l]=t[l*e+s];for(m(n,r,o,a,i),l=0;l<i;l++)t[l*e+s]=r[l]}for(l=0;l<i;l++){for(s=0;s<e;s++)n[s]=t[l*e+s];for(m(n,r,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(r[s])}}function m(t,e,i,n,r){n[i[0]=0]=-p,n[1]=+p;for(var o=1,a=0;o<r;o++){for(var s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);s<=n[a];)s=(t[o]+o*o-(t[i[--a]]+i[a]*i[a]))/(2*o-2*i[a]);i[++a]=o,n[a]=s,n[a+1]=+p}for(a=o=0;o<r;o++){for(;n[a+1]<o;)a++;e[o]=(o-i[a])*(o-i[a])+t[i[a]]}}d.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var r=e.data[4*n+3]/255;this.gridOuter[n]=1===r?0:0===r?p:Math.pow(Math.max(0,.5-r),2),this.gridInner[n]=1===r?p:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(f(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),f(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++)i[n]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[n]-this.gridInner[n])/this.radius+this.cutoff))));return i},c.default=h;var g=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};g.prototype.setURL=function(t){this.url=t},g.prototype.getGlyphs=function(t,u){var l=this,e=[];for(var i in t)for(var n=0,r=t[i];n<r.length;n+=1)e.push({stack:i,id:r[n]});yt.asyncAll(e,function(t,i){var n=t.stack,r=t.id,o=l.entries[n];o||(o=l.entries[n]={glyphs:{},requests:{}});var e=o.glyphs[r];if(void 0===e){if(e=l._tinySDF(o,n,r))return o.glyphs[r]=e,void i(null,{stack:n,id:r,glyph:e});var a=Math.floor(r/256);if(65535<256*a)i(new Error("glyphs > 65535 not supported"));else{var s=o.requests[a];s||(s=o.requests[a]=[],g.loadGlyphRange(n,a,l.url,l.requestManager,function(t,e){if(e)for(var i in e)l._doesCharSupportLocalGlyph(+i)||(o.glyphs[+i]=e[+i]);for(var n=0,r=s;n<r.length;n+=1)(0,r[n])(t,e);delete o.requests[a]})),s.push(function(t,e){t?i(t):e&&i(null,{stack:n,id:r,glyph:e[r]||null})})}}else i(null,{stack:n,id:r,glyph:e})},function(t,e){if(t)u(t);else if(e){for(var i={},n=0,r=e;n<r.length;n+=1){var o=r[n],a=o.stack,s=o.id,l=o.glyph;(i[a]||(i[a]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}u(null,i)}})},g.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(yt.isChar["CJK Unified Ideographs"](t)||yt.isChar["Hangul Syllables"](t)||yt.isChar.Hiragana(t)||yt.isChar.Katakana(t))},g.prototype._tinySDF=function(t,e,i){var n=this.localIdeographFontFamily;if(n&&this._doesCharSupportLocalGlyph(i)){var r=t.tinySDF;if(!r){var o="400";/bold/i.test(e)?o="900":/medium/i.test(e)?o="500":/light/i.test(e)&&(o="200"),r=t.tinySDF=new g.TinySDF(24,3,8,.25,n,o)}return{id:i,bitmap:new yt.AlphaImage({width:30,height:30},r.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},g.loadGlyphRange=function(t,e,i,n,a){var r=256*e,o=r+255,s=n.transformRequest(n.normalizeGlyphsURL(i).replace("{fontstack}",t).replace("{range}",r+"-"+o),yt.ResourceType.Glyphs);yt.getArrayBuffer(s,function(t,e){if(t)a(t);else if(e){for(var i={},n=0,r=yt.parseGlyphPBF(e);n<r.length;n+=1){var o=r[n];i[o.id]=o}a(null,i)}})},g.TinySDF=c;var v=function(){this.specification=yt.styleSpec.light.position};v.prototype.possiblyEvaluate=function(t,e){return yt.sphericalToCartesian(t.expression.evaluate(e))},v.prototype.interpolate=function(t,e,i){return{x:yt.number(t.x,e.x,i),y:yt.number(t.y,e.y,i),z:yt.number(t.z,e.z,i)}};var y=new yt.Properties({anchor:new yt.DataConstantProperty(yt.styleSpec.light.anchor),position:new v,color:new yt.DataConstantProperty(yt.styleSpec.light.color),intensity:new yt.DataConstantProperty(yt.styleSpec.light.intensity)}),_=function(e){function t(t){e.call(this),this._transitionable=new yt.Transitionable(y),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getLight=function(){return this._transitionable.serialize()},t.prototype.setLight=function(t,e){if(void 0===e&&(e={}),!this._validate(yt.validateLight,t,e))for(var i in t){var n=t[i];yt.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),n):this._transitionable.setValue(i,n)}},t.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},t.prototype.hasTransition=function(){return this._transitioning.hasTransition()},t.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},t.prototype._validate=function(t,e,i){return(!i||!1!==i.validate)&&yt.emitValidationErrors(this,t.call(yt.validateStyle,yt.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:yt.styleSpec})))},t}(yt.Evented),x=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};x.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]},x.prototype.getDashRanges=function(t,e,i){var n=[],r=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,a=!0;n.push({left:r,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){var u=t[l];n.push({left:r=s*i,right:o=(s+=u)*i,isDash:a=!a,zeroLength:0===u})}return n},x.prototype.addRoundDash=function(t,e,i){for(var n=e/2,r=-i;r<=i;r++)for(var o=this.width*(this.nextRow+i+r),a=0,s=t[a],l=0;l<this.width;l++){1<l/s.right&&(s=t[++a]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),h=Math.min(u,c),p=void 0,d=r/i*(n+1);if(s.isDash){var f=n-Math.abs(d);p=Math.sqrt(h*h+f*f)}else p=n-Math.sqrt(h*h+d*d);this.data[o+l]=Math.max(0,Math.min(255,p+128))}},x.prototype.addRegularDash=function(t){for(var e=t.length-1;0<=e;--e){var i=t[e],n=t[e+1];i.zeroLength?t.splice(e,1):n&&n.isDash===i.isDash&&(n.left=i.left,t.splice(e,1))}var r=t[0],o=t[t.length-1];r.isDash===o.isDash&&(r.left=o.left-this.width,o.right=r.right+this.width);for(var a=this.width*this.nextRow,s=0,l=t[s],u=0;u<this.width;u++){1<u/l.right&&(l=t[++s]);var c=Math.abs(u-l.left),h=Math.abs(u-l.right),p=Math.min(c,h);this.data[a+u]=Math.max(0,Math.min(255,(l.isDash?p:-p)+128))}},x.prototype.addDash=function(t,e){var i=e?7:0,n=2*i+1;if(this.nextRow+n>this.height)return yt.warnOnce("LineAtlas out of space"),null;for(var r=0,o=0;o<t.length;o++)r+=t[o];if(0!==r){var a=this.width/r,s=this.getDashRanges(t,this.width,a);e?this.addRoundDash(s,a,i):this.addRegularDash(s)}var l={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:r};return this.nextRow+=n,this.dirty=!0,l},x.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var w=function t(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=yt.uniqueId();for(var n=this.workerPool.acquire(this.id),r=0;r<n.length;r++){var o=new t.Actor(n[r],i,this.id);o.name="Worker "+r,this.actors.push(o)}};function S(n,r,o){var t=function(t,e){if(t)return o(t);if(e){var i=yt.pick(yt.extend(e,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);e.vector_layers&&(i.vectorLayers=e.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),i.tiles=r.canonicalizeTileset(i,n.url),o(null,i)}};return n.url?yt.getJSON(r.transformRequest(r.normalizeSourceURL(n.url),yt.ResourceType.Source),t):yt.browser.frame(function(){return t(null,n)})}w.prototype.broadcast=function(i,n,t){yt.asyncAll(this.actors,function(t,e){t.send(i,n,e)},t=t||function(){})},w.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},w.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},w.Actor=yt.Actor;var T=function(t,e,i){this.bounds=yt.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=i||24};T.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},T.prototype.contains=function(t){var e=Math.pow(2,t.z),i=Math.floor(yt.mercatorXfromLng(this.bounds.getWest())*e),n=Math.floor(yt.mercatorYfromLat(this.bounds.getNorth())*e),r=Math.ceil(yt.mercatorXfromLng(this.bounds.getEast())*e),o=Math.ceil(yt.mercatorYfromLat(this.bounds.getSouth())*e);return t.x>=i&&t.x<r&&t.y>=n&&t.y<o};var C=function(r){function t(t,e,i,n){if(r.call(this),this.id=t,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,yt.extend(this,yt.pick(e,["url","scheme","tileSize","promoteId"])),this._options=yt.extend({type:"vector"},e),this._collectResourceTiming=e.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.load=function(){var i=this;this._loaded=!1,this.fire(new yt.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,function(t,e){i._tileJSONRequest=null,i._loaded=!0,t?i.fire(new yt.ErrorEvent(t)):e&&(yt.extend(i,e),e.bounds&&(i.tileBounds=new T(e.bounds,i.minzoom,i.maxzoom)),yt.postTurnstileEvent(e.tiles,i.map._requestManager._customAccessToken),yt.postMapLoadEvent(e.tiles,i.map._getMapId(),i.map._requestManager._skuToken,i.map._requestManager._customAccessToken),i.fire(new yt.Event("data",{dataType:"source",sourceDataType:"metadata"})),i.fire(new yt.Event("data",{dataType:"source",sourceDataType:"content"})))})},t.prototype.loaded=function(){return this._loaded},t.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},t.prototype.serialize=function(){return yt.extend({},this._options)},t.prototype.loadTile=function(i,n){var t=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme)),e={request:this.map._requestManager.transformRequest(t,yt.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:yt.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function r(t,e){return delete i.request,i.aborted?n(null):t&&404!==t.status?n(t):(e&&e.resourceTiming&&(i.resourceTiming=e.resourceTiming),this.map._refreshExpiredTiles&&e&&i.setExpiryData(e),i.loadVectorData(e,this.map.painter),yt.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}e.request.collectResourceTiming=this._collectResourceTiming,i.actor&&"expired"!==i.state?"loading"===i.state?i.reloadCallback=n:i.request=i.actor.send("reloadTile",e,r.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",e,r.bind(this)))},t.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},t.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},t.prototype.hasTransition=function(){return!1},t}(yt.Evented),E=function(r){function t(t,e,i,n){r.call(this),this.id=t,this.dispatcher=i,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=yt.extend({type:"raster"},e),yt.extend(this,yt.pick(e,["url","scheme","tileSize"]))}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.load=function(){var i=this;this._loaded=!1,this.fire(new yt.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=S(this._options,this.map._requestManager,function(t,e){i._tileJSONRequest=null,i._loaded=!0,t?i.fire(new yt.ErrorEvent(t)):e&&(yt.extend(i,e),e.bounds&&(i.tileBounds=new T(e.bounds,i.minzoom,i.maxzoom)),yt.postTurnstileEvent(e.tiles),yt.postMapLoadEvent(e.tiles,i.map._getMapId(),i.map._requestManager._skuToken),i.fire(new yt.Event("data",{dataType:"source",sourceDataType:"metadata"})),i.fire(new yt.Event("data",{dataType:"source",sourceDataType:"content"})))})},t.prototype.loaded=function(){return this._loaded},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},t.prototype.serialize=function(){return yt.extend({},this._options)},t.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},t.prototype.loadTile=function(r,o){var a=this,t=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);r.request=yt.getImage(this.map._requestManager.transformRequest(t,yt.ResourceType.Tile),function(t,e){if(delete r.request,r.aborted)r.state="unloaded",o(null);else if(t)r.state="errored",o(t);else if(e){a.map._refreshExpiredTiles&&r.setExpiryData(e),delete e.cacheControl,delete e.expires;var i=a.map.painter.context,n=i.gl;r.texture=a.map.painter.getTileTexture(e.width),r.texture?r.texture.update(e,{useMipmap:!0}):(r.texture=new yt.Texture(i,e,n.RGBA,{useMipmap:!0}),r.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST),i.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax)),r.state="loaded",yt.cacheEntryPossiblyAdded(a.dispatcher),o(null)}})},t.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},t.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},t.prototype.hasTransition=function(){return!1},t}(yt.Evented),k=function(r){function t(t,e,i,n){r.call(this,t,e,i,n),this.type="raster-dem",this.maxzoom=22,this._options=yt.extend({type:"raster-dem"},e),this.encoding=e.encoding||"mapbox"}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},t.prototype.loadTile=function(r,o){var t=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);r.request=yt.getImage(this.map._requestManager.transformRequest(t,yt.ResourceType.Tile),function(t,e){if(delete r.request,r.aborted)r.state="unloaded",o(null);else if(t)r.state="errored",o(t);else if(e){this.map._refreshExpiredTiles&&r.setExpiryData(e),delete e.cacheControl,delete e.expires;var i=yt.window.ImageBitmap&&e instanceof yt.window.ImageBitmap&&yt.offscreenCanvasSupported()?e:yt.browser.getImageData(e,1),n={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:i,encoding:this.encoding};r.actor&&"expired"!==r.state||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",n,function(t,e){t&&(r.state="errored",o(t)),e&&(r.dem=e,r.needsHillshadePrepare=!0,r.state="loaded",o(null))}.bind(this)))}}.bind(this)),r.neighboringTiles=this._getNeighboringTiles(r.tileID)},t.prototype._getNeighboringTiles=function(t){var e=t.canonical,i=Math.pow(2,e.z),n=(e.x-1+i)%i,r=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+i)%i,a=e.x+1===i?t.wrap+1:t.wrap,s={};return s[new yt.OverscaledTileID(t.overscaledZ,r,e.z,n,e.y).key]={backfilled:!1},s[new yt.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},0<e.y&&(s[new yt.OverscaledTileID(t.overscaledZ,r,e.z,n,e.y-1).key]={backfilled:!1},s[new yt.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},s[new yt.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<i&&(s[new yt.OverscaledTileID(t.overscaledZ,r,e.z,n,e.y+1).key]={backfilled:!1},s[new yt.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},s[new yt.OverscaledTileID(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),s},t.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},t}(E),A=function(o){function t(t,e,i,n){o.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(n),this._data=e.data,this._options=yt.extend({},e),this._collectResourceTiming=e.collectResourceTiming,this._resourceTiming=[],void 0!==e.maxzoom&&(this.maxzoom=e.maxzoom),e.type&&(this.type=e.type),e.attribution&&(this.attribution=e.attribution),this.promoteId=e.promoteId;var r=yt.EXTENT/this.tileSize;this.workerOptions=yt.extend({source:this.id,cluster:e.cluster||!1,geojsonVtOptions:{buffer:(void 0!==e.buffer?e.buffer:128)*r,tolerance:(void 0!==e.tolerance?e.tolerance:.375)*r,extent:yt.EXTENT,maxZoom:this.maxzoom,lineMetrics:e.lineMetrics||!1,generateId:e.generateId||!1},superclusterOptions:{maxZoom:void 0!==e.clusterMaxZoom?Math.min(e.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:yt.EXTENT,radius:(e.clusterRadius||50)*r,log:!1,generateId:e.generateId||!1},clusterProperties:e.clusterProperties},e.workerOptions)}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.load=function(){var i=this;this.fire(new yt.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){if(t)i.fire(new yt.ErrorEvent(t));else{var e={dataType:"source",sourceDataType:"metadata"};i._collectResourceTiming&&i._resourceTiming&&0<i._resourceTiming.length&&(e.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new yt.Event("data",e))}})},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.setData=function(t){var i=this;return this._data=t,this.fire(new yt.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(t){if(t)i.fire(new yt.ErrorEvent(t));else{var e={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&0<i._resourceTiming.length&&(e.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new yt.Event("data",e))}}),this},t.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},t.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},t.prototype.getClusterLeaves=function(t,e,i,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},n),this},t.prototype._updateWorkerData=function(i){var n=this;this._loaded=!1;var r=yt.extend({},this.workerOptions),t=this._data;"string"==typeof t?(r.request=this.map._requestManager.transformRequest(yt.browser.resolveURL(t),yt.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(t),this.actor.send(this.type+".loadData",r,function(t,e){n._removed||e&&e.abandoned||(n._loaded=!0,e&&e.resourceTiming&&e.resourceTiming[n.id]&&(n._resourceTiming=e.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:r.source},null),i(t))})},t.prototype.loaded=function(){return this._loaded},t.prototype.loadTile=function(i,n){var r=this,o=i.actor?"reloadTile":"loadTile";i.actor=this.actor,i.request=this.actor.send(o,{type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:yt.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(t,e){return delete i.request,i.unloadVectorData(),i.aborted?n(null):t?n(t):(i.loadVectorData(e,r.map.painter,"reloadTile"===o),n(null))})},t.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},t.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},t.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},t.prototype.serialize=function(){return yt.extend({},this._options,{type:this.type,data:this._data})},t.prototype.hasTransition=function(){return!1},t}(yt.Evented),I=yt.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),P=function(r){function t(t,e,i,n){r.call(this),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=e}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.load=function(i,n){var r=this;this._loaded=!1,this.fire(new yt.Event("dataloading",{dataType:"source"})),this.url=this.options.url,yt.getImage(this.map._requestManager.transformRequest(this.url,yt.ResourceType.Image),function(t,e){r._loaded=!0,t?r.fire(new yt.ErrorEvent(t)):e&&(r.image=e,i&&(r.coordinates=i),n&&n(),r._finishLoading())})},t.prototype.loaded=function(){return this._loaded},t.prototype.updateImage=function(t){var e=this;return this.image&&t.url&&(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null})),this},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new yt.Event("data",{dataType:"source",sourceDataType:"metadata"})))},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.setCoordinates=function(t){var e=this,h=(this.coordinates=t).map(yt.MercatorCoordinate.fromLngLat);this.tileID=function(t){for(var e=1/0,i=1/0,n=-1/0,r=-1/0,o=0,a=h;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),i=Math.min(i,s.y),n=Math.max(n,s.x),r=Math.max(r,s.y)}var l=Math.max(n-e,r-i),u=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),c=Math.pow(2,u);return new yt.CanonicalTileID(u,Math.floor((e+n)/2*c),Math.floor((i+r)/2*c))}(),this.minzoom=this.maxzoom=this.tileID.z;var i=h.map(function(t){return e.tileID.getTilePoint(t)._round()});return this._boundsArray=new yt.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,yt.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,yt.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,yt.EXTENT,yt.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new yt.Event("data",{dataType:"source",sourceDataType:"content"})),this},t.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,e=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,I.members)),this.boundsSegments||(this.boundsSegments=yt.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new yt.Texture(t,this.image,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[i];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},t.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t).buckets={}:t.state="errored",e(null)},t.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return!1},t}(yt.Evented),z=function(r){function t(t,e,i,n){r.call(this,t,e,i,n),this.roundZoom=!0,this.type="video",this.options=e}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.load=function(){var i=this;this._loaded=!1;var t=this.options;this.urls=[];for(var e=0,n=t.urls;e<n.length;e+=1)this.urls.push(this.map._requestManager.transformRequest(n[e],yt.ResourceType.Source).url);yt.getVideo(this.urls,function(t,e){i._loaded=!0,t?i.fire(new yt.ErrorEvent(t)):e&&(i.video=e,i.video.loop=!0,i.video.addEventListener("playing",function(){i.map.triggerRepaint()}),i.map&&i.video.play(),i._finishLoading())})},t.prototype.pause=function(){this.video&&this.video.pause()},t.prototype.play=function(){this.video&&this.video.play()},t.prototype.seek=function(t){if(this.video){var e=this.video.seekable;t<e.start(0)||t>e.end(0)?this.fire(new yt.ErrorEvent(new yt.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+e.start(0)+" and "+e.end(0)+"-second mark."))):this.video.currentTime=t}},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,e=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,I.members)),this.boundsSegments||(this.boundsSegments=yt.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this.texture=new yt.Texture(t,this.video,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[i];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this.video&&!this.video.paused},t}(P),M=function(r){function t(t,e,i,n){r.call(this,t,e,i,n),e.coordinates?Array.isArray(e.coordinates)&&4===e.coordinates.length&&!e.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new yt.ErrorEvent(new yt.ValidationError("sources."+t,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new yt.ErrorEvent(new yt.ValidationError("sources."+t,null,'missing required property "coordinates"'))),e.animate&&"boolean"!=typeof e.animate&&this.fire(new yt.ErrorEvent(new yt.ValidationError("sources."+t,null,'optional "animate" property must be a boolean value'))),e.canvas?"string"==typeof e.canvas||e.canvas instanceof yt.window.HTMLCanvasElement||this.fire(new yt.ErrorEvent(new yt.ValidationError("sources."+t,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new yt.ErrorEvent(new yt.ValidationError("sources."+t,null,'missing required property "canvas"'))),this.options=e,this.animate=void 0===e.animate||e.animate}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof yt.window.HTMLCanvasElement?this.options.canvas:yt.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new yt.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},t.prototype.onRemove=function(){this.pause()},t.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var e=this.map.painter.context,i=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,I.members)),this.boundsSegments||(this.boundsSegments=yt.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new yt.Texture(e,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},t.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this._playing},t.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},t}(P),D={vector:C,raster:E,"raster-dem":k,geojson:A,video:z,image:P,canvas:M};function L(n,t,e,i,r,o){var a,s,l,u=function(t,e,i){if(t)for(var n=0,r=t;n<r.length;n+=1){var o=e[r[n]];if(o&&o.source===i&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(r&&r.layers,t,n.id),c=o.maxPitchScaleFactor(),h=n.tilesIn(i,c,u);h.sort(O);for(var g=[],p=0,d=h;p<d.length;p+=1){var f=d[p];g.push({wrappedTileID:f.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,e,n._state,f.queryGeometry,f.cameraQueryGeometry,f.scale,r,o,c,(a=n.transform,s=f.tileID,void 0,l=yt.identity([]),yt.translate(l,l,[1,1,0]),yt.scale(l,l,[.5*a.width,.5*a.height,1]),yt.multiply(l,l,a.calculatePosMatrix(s.toUnwrapped()))))})}var m=function(t){for(var e={},i={},n=0,r=g;n<r.length;n+=1){var o=r[n],a=o.queryResults,s=o.wrappedTileID,l=i[s]=i[s]||{};for(var u in a)for(var c=a[u],h=l[u]=l[u]||{},p=e[u]=e[u]||[],d=0,f=c;d<f.length;d+=1){var m=f[d];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m))}}return e}();for(var v in m)m[v].forEach(function(t){var e=t.feature,i=n.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=i});return m}function O(t,e){var i=t.tileID,n=e.tileID;return i.overscaledZ-n.overscaledZ||i.canonical.y-n.canonical.y||i.wrap-n.wrap||i.canonical.x-n.canonical.x}var R=function(t,e){this.max=t,this.onRemove=e,this.reset()};R.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var n=i[e];n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}return this.data={},this.order=[],this},R.prototype.add=function(t,e,i){var n=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var o={value:e,timeout:void 0};if(void 0!==i&&(o.timeout=setTimeout(function(){n.remove(t,o)},i)),this.data[r].push(o),this.order.push(r),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},R.prototype.has=function(t){return t.wrapped().key in this.data},R.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},R.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},R.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},R.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},R.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,n=void 0===e?0:this.data[i].indexOf(e),r=this.data[i][n];return this.data[i].splice(n,1),r.timeout&&clearTimeout(r.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(r.value),this.order.splice(this.order.indexOf(i),1),this},R.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},R.prototype.filter=function(t){var e=[];for(var i in this.data)for(var n=0,r=this.data[i];n<r.length;n+=1){var o=r[n];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var l=s[a];this.remove(l.value.tileID,l)}};var F=function(t,e,i){var n=(this.context=t).gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};F.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},F.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},F.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var B={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},N=function(t,e,i,n){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=n;var r=(this.context=t).gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};N.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},N.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},N.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var n=e.attributes[this.attributes[i].name];void 0!==n&&t.enableVertexAttribArray(n)}},N.prototype.setVertexAttribPointers=function(t,e,i){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[B[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}},N.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var j=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};j.prototype.get=function(){return this.current},j.prototype.set=function(t){},j.prototype.getDefault=function(){return this.default},j.prototype.setDefault=function(){this.set(this.default)};var $=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return yt.Color.transparent},e.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},e}(j),U=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(j),V=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(j),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(j),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(j),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(j),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(j),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(j),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(j),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(j),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(j),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(j),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(j),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(j),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return yt.Color.transparent},e.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},e}(j),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(j),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(j),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(j),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(j),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(j),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(j),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(j),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(j),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(j),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(j),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(j),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(j),ft=function(e){function t(t){e.call(this,t),this.vao=t.extVertexArrayObject}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getDefault=function(){return null},t.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},t}(j),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(j),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(j),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(j),_t=function(i){function t(t,e){i.call(this,t),this.context=t,this.parent=e}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.getDefault=function(){return null},t}(j),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(_t),xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(_t),wt=function(t,e,i,n){this.context=t,this.width=e,this.height=i;var r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new bt(t,r),n&&(this.depthAttachment=new xt(t,r))};wt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i)}t.deleteFramebuffer(this.framebuffer)};var St=function(t,e,i){this.func=t,this.mask=e,this.range=i};St.ReadOnly=!1,St.ReadWrite=!0,St.disabled=new St(519,St.ReadOnly,[0,1]);var Tt=function(t,e,i,n,r,o){this.test=t,this.ref=e,this.mask=i,this.fail=n,this.depthFail=r,this.pass=o};Tt.disabled=new Tt({func:519,mask:0},0,0,7680,7680,7680);var Ct=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};Ct.Replace=[1,0],Ct.disabled=new Ct(Ct.Replace,yt.Color.transparent,[!1,!1,!1,!1]),Ct.unblended=new Ct(Ct.Replace,yt.Color.transparent,[!0,!0,!0,!0]),Ct.alphaBlended=new Ct([1,771],yt.Color.transparent,[!0,!0,!0,!0]);var Et=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};Et.disabled=new Et(!1,1029,2305),Et.backCCW=new Et(!0,1029,2305);var kt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new $(this),this.clearDepth=new U(this),this.clearStencil=new V(this),this.colorMask=new q(this),this.depthMask=new H(this),this.stencilMask=new W(this),this.stencilFunc=new Z(this),this.stencilOp=new G(this),this.stencilTest=new X(this),this.depthRange=new Y(this),this.depthTest=new K(this),this.depthFunc=new J(this),this.blend=new Q(this),this.blendFunc=new tt(this),this.blendColor=new et(this),this.blendEquation=new it(this),this.cullFace=new nt(this),this.cullFaceSide=new rt(this),this.frontFace=new ot(this),this.program=new at(this),this.activeTexture=new st(this),this.viewport=new lt(this),this.bindFramebuffer=new ut(this),this.bindRenderbuffer=new ct(this),this.bindTexture=new ht(this),this.bindVertexBuffer=new pt(this),this.bindElementBuffer=new dt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ft(this),this.pixelStoreUnpack=new mt(this),this.pixelStoreUnpackPremultiplyAlpha=new gt(this),this.pixelStoreUnpackFlipY=new vt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};kt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},kt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},kt.prototype.createIndexBuffer=function(t,e){return new F(this,t,e)},kt.prototype.createVertexBuffer=function(t,e,i){return new N(this,t,e,i)},kt.prototype.createRenderbuffer=function(t,e,i){var n=this.gl,r=n.createRenderbuffer();return this.bindRenderbuffer.set(r),n.renderbufferStorage(n.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),r},kt.prototype.createFramebuffer=function(t,e,i){return new wt(this,t,e,i)},kt.prototype.clear=function(t){var e=t.color,i=t.depth,n=this.gl,r=0;e&&(r|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(r|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),n.clear(r)},kt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},kt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},kt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},kt.prototype.setColorMode=function(t){yt.deepEqual(t.blendFunction,Ct.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},kt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var At=function(r){function x(t,e,i){var n=this;r.call(this),this.id=t,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(n._sourceLoaded=!0),n._sourceLoaded&&!n._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(n.reload(),n.transform&&n.update(n.transform))}),this.on("error",function(){n._sourceErrored=!0}),this._source=function(t,e,i,n){var r=new D[e.type](t,e,i,n);if(r.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+r.id);return yt.bindAll(["load","abort","unload","serialize","prepare"],r),r}(t,e,i,this),this._tiles={},this._cache=new R(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new yt.SourceFeatureState}return r&&(x.__proto__=r),((x.prototype=Object.create(r&&r.prototype)).constructor=x).prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},x.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},x.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},x.prototype.getSource=function(){return this._source},x.prototype.pause=function(){this._paused=!0},x.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},x.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},x.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},x.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},x.prototype.serialize=function(){return this._source.serialize()},x.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}},x.prototype.getIds=function(){return yt.values(this._tiles).map(function(t){return t.tileID}).sort(It).map(function(t){return t.key})},x.prototype.getRenderableIds=function(t){var a=this,e=[];for(var i in this._tiles)this._isIdRenderable(i,t)&&e.push(this._tiles[i]);return t?e.sort(function(t,e){var i=t.tileID,n=e.tileID,r=new yt.Point(i.canonical.x,i.canonical.y)._rotate(a.transform.angle),o=new yt.Point(n.canonical.x,n.canonical.y)._rotate(a.transform.angle);return i.overscaledZ-n.overscaledZ||o.y-r.y||o.x-r.x}).map(function(t){return t.tileID.key}):e.map(function(t){return t.tileID}).sort(It).map(function(t){return t.key})},x.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},x.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},x.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},x.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},x.prototype._tileLoaded=function(t,e,i,n){if(n)return t.state="errored",void(404!==n.status?this._source.fire(new yt.ErrorEvent(n,{tile:t})):this.update(this.transform));t.timeAdded=yt.browser.now(),"expired"===i&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new yt.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},x.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var n=e[i];if(t.neighboringTiles&&t.neighboringTiles[n]){var r=this.getTileByID(n);o(t,r),o(r,t)}}function o(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,n=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===n||1<Math.abs(n)||(1<Math.abs(i)&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,n),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},x.prototype.getTile=function(t){return this.getTileByID(t.key)},x.prototype.getTileByID=function(t){return this._tiles[t]},x.prototype._retainLoadedChildren=function(t,e,i,n){for(var r in this._tiles){var o=this._tiles[r];if(!(n[r]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){n[a.key]=a;break}}}},x.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(var n=t.overscaledZ-1;e<=n;n--){var r=t.scaledTo(n),o=this._getLoadedTile(r);if(o)return o}},x.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},x.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,n=Math.floor(e*i*5),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},x.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var i={};for(var n in this._tiles){var r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),i[r.tileID.key]=r}for(var o in this._tiles=i,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},x.prototype.update=function(t){var e=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new yt.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return e._source.hasTile(t)}))):i=[];var n=t.coveringZoomLevel(this._source),r=Math.max(n-x.maxOverzooming,this._source.minzoom),o=Math.max(n+x.maxUnderzooming,this._source.minzoom),a=this._updateRetainedTiles(i,n);if(Pt(this._source.type)){for(var s={},l={},u=0,c=Object.keys(a);u<c.length;u+=1){var h=c[u],p=a[h],d=this._tiles[h];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=yt.browser.now())){var f=this.findLoadedParent(p,r);f&&(this._addTile(f.tileID),s[f.tileID.key]=f.tileID),l[h]=p}}for(var m in this._retainLoadedChildren(l,n,o,a),s)a[m]||(this._coveredTiles[m]=!0,a[m]=s[m])}for(var g in a)this._tiles[g].clearFadeHold();for(var v=0,y=yt.keysDifference(this._tiles,a);v<y.length;v+=1){var _=y[v],b=this._tiles[_];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(_)}this._updateLoadedParentTileCache()}},x.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},x.prototype._updateRetainedTiles=function(t,e){for(var i={},n={},r=Math.max(e-x.maxOverzooming,this._source.minzoom),o=Math.max(e+x.maxUnderzooming,this._source.minzoom),a={},s=0,l=t;s<l.length;s+=1){var u=l[s],c=this._addTile(u);i[u.key]=u,c.hasData()||e<this._source.maxzoom&&(a[u.key]=u)}this._retainLoadedChildren(a,e,o,i);for(var h=0,p=t;h<p.length;h+=1){var d=p[h],f=this._tiles[d.key];if(!f.hasData()){if(e+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){i[m.key]=m;continue}}else{var v=d.children(this._source.maxzoom);if(i[v[0].key]&&i[v[1].key]&&i[v[2].key]&&i[v[3].key])continue}for(var y=f.wasRequested(),_=d.overscaledZ-1;r<=_;--_){var b=d.scaledTo(_);if(n[b.key])break;if(n[b.key]=!0,!(f=this.getTile(b))&&y&&(f=this._addTile(b)),f&&(i[b.key]=b,y=f.wasRequested(),f.hasData()))break}}}return i},x.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],i=void 0,n=this._tiles[t].tileID;0<n.overscaledZ;){if(n.key in this._loadedParentTiles){i=this._loadedParentTiles[n.key];break}e.push(n.key);var r=n.scaledTo(n.overscaledZ-1);if(i=this._getLoadedTile(r))break;n=r}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=i}},x.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));var i=Boolean(e);return i||(e=new yt.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,i||this._source.fire(new yt.Event("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null},x.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout(function(){i._reloadTile(t,"expired"),delete i._timers[t]},n))},x.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),0<e.uses||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},x.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},x.prototype.tilesIn=function(t,l,e){var u=this,c=[],h=this.transform;if(!h)return c;for(var i=e?h.getCameraQueryGeometry(t):t,p=t.map(function(t){return h.pointCoordinate(t)}),d=i.map(function(t){return h.pointCoordinate(t)}),f=this.getIds(),m=1/0,g=1/0,v=-1/0,y=-1/0,n=0,r=d;n<r.length;n+=1){var o=r[n];m=Math.min(m,o.x),g=Math.min(g,o.y),v=Math.max(v,o.x),y=Math.max(y,o.y)}for(var a=function(t){var e=u._tiles[f[t]];if(!e.holdingForFade()){var i=e.tileID,n=Math.pow(2,h.zoom-e.tileID.overscaledZ),r=l*e.queryPadding*yt.EXTENT/e.tileSize/n,o=[i.getTilePoint(new yt.MercatorCoordinate(m,g)),i.getTilePoint(new yt.MercatorCoordinate(v,y))];if(o[0].x-r<yt.EXTENT&&o[0].y-r<yt.EXTENT&&0<=o[1].x+r&&0<=o[1].y+r){var a=p.map(function(t){return i.getTilePoint(t)}),s=d.map(function(t){return i.getTilePoint(t)});c.push({tile:e,tileID:i,queryGeometry:a,cameraQueryGeometry:s,scale:n})}}},s=0;s<f.length;s++)a(s);return c},x.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),n=0,r=i;n<r.length;n+=1){var o=r[n];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return i},x.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Pt(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=yt.browser.now())return!0}return!1},x.prototype.setFeatureState=function(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)},x.prototype.removeFeatureState=function(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)},x.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},x.prototype.setDependencies=function(t,e,i){var n=this._tiles[t];n&&n.setDependencies(e,i)},x.prototype.reloadTilesForDependencies=function(e,i){for(var t in this._tiles)this._tiles[t].hasDependency(e,i)&&this._reloadTile(t,"reloading");this._cache.filter(function(t){return!t.hasDependency(e,i)})},x}(yt.Evented);function It(t,e){var i=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Pt(t){return"raster"===t||"image"===t||"video"===t}function zt(){return new yt.window.Worker(Yn.workerUrl)}At.maxOverzooming=10,At.maxUnderzooming=3;var Mt=function(){this.active={}};Mt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Mt.workerCount;)this.workers.push(new zt);return this.active[t]=!0,this.workers.slice()},Mt.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var Dt,Lt=Math.floor(yt.browser.hardwareConcurrency/2);function Ot(t,e){var i={};for(var n in t)"ref"!==n&&(i[n]=t[n]);return yt.refProperties.forEach(function(t){t in e&&(i[t]=e[t])}),i}function Rt(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Ot(t[n],e[t[n].ref]));return t}Mt.workerCount=Math.max(Math.min(Lt,6),1);var Ft={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Bt(t,e,i){i.push({command:Ft.addSource,args:[t,e[t]]})}function Nt(t,e,i){e.push({command:Ft.removeSource,args:[t]}),i[t]=!0}function jt(t,e,i){var n;for(n in t[i])if(t[i].hasOwnProperty(n)&&"data"!==n&&!yt.deepEqual(t[i][n],e[i][n]))return!1;for(n in e[i])if(e[i].hasOwnProperty(n)&&"data"!==n&&!yt.deepEqual(t[i][n],e[i][n]))return!1;return!0}function $t(t,e,i,n,r,o){var a;for(a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(yt.deepEqual(t[a],e[a])||i.push({command:o,args:[n,a,e[a],r]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(yt.deepEqual(t[a],e[a])||i.push({command:o,args:[n,a,e[a],r]}))}function Ut(t){return t.id}function Vt(t,e){return t[e.id]=e,t}var qt=function(t,e,i){var n=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var o=0;o<this.xCellCount*this.yCellCount;o++)n.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Ht(t,e,i,n,r){var o=yt.create();return e?(yt.scale(o,o,[1/r,1/r,1]),i||yt.rotateZ(o,o,n.angle)):yt.multiply(o,n.labelPlaneMatrix,t),o}function Wt(t,e,i,n,r){if(e){var o=yt.clone(t);return yt.scale(o,o,[r,r,1]),i||yt.rotateZ(o,o,-n.angle),o}return n.glCoordMatrix}function Zt(t,e){var i=[t.x,t.y,0,1];ie(i,i,e);var n=i[3];return{point:new yt.Point(i[0]/n,i[1]/n),signedDistanceFromCamera:n}}function Gt(t,e,i,n,r,o,a,s){var l,u,c,h,p=n?t.textSizeData:t.iconSizeData,d=yt.evaluateSizeForZoom(p,i.transform.zoom),f=[256/i.width*2+1,256/i.height*2+1],m=n?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;m.clear();for(var g=t.lineVertexArray,v=n?t.text.placedSymbolArray:t.icon.placedSymbolArray,y=i.transform.width/i.transform.height,_=!1,b=0;b<v.length;b++){var x=v.get(b);if(x.hidden||x.writingMode===yt.WritingMode.vertical&&!_)ee(x.numGlyphs,m);else{_=!1;var w=[x.anchorX,x.anchorY,0,1];if(yt.transformMat4(w,w,e),u=f,void 0,c=(l=w)[0]/l[3],h=l[1]/l[3],c>=-u[0]&&c<=u[0]&&h>=-u[1]&&h<=u[1]){var S=.5+w[3]/i.transform.cameraToCenterDistance*.5,T=yt.evaluateSizeForFeature(p,d,x),C=a?T*S:T/S,E=new yt.Point(x.anchorX,x.anchorY),k=Zt(E,r).point,A={},I=Kt(x,C,!1,s,e,r,o,t.glyphOffsetArray,g,m,k,E,A,y);_=I.useVertical,(I.notEnoughRoom||_||I.needsFlipping&&Kt(x,C,!0,s,e,r,o,t.glyphOffsetArray,g,m,k,E,A,y).notEnoughRoom)&&ee(x.numGlyphs,m)}else ee(x.numGlyphs,m)}}n?t.text.dynamicLayoutVertexBuffer.updateData(m):t.icon.dynamicLayoutVertexBuffer.updateData(m)}function Xt(t,e,i,n,r,o,a,s,l,u,c,h){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(p-1),v=Qt(t*m,i,n,r,o,a,s.segment,d,f,l,u,c,h);if(!v)return null;var y=Qt(t*g,i,n,r,o,a,s.segment,d,f,l,u,c,h);return y?{first:v,last:y}:null}function Yt(t,e,i,n){return t===yt.WritingMode.horizontal&&Math.abs(i.y-e.y)>Math.abs(i.x-e.x)*n?{useVertical:!0}:(t===yt.WritingMode.vertical?e.y<i.y:e.x>i.x)?{needsFlipping:!0}:null}function Kt(t,e,i,n,r,o,a,s,l,u,c,h,p,d){var f,m=e/24,g=t.lineOffsetX*m,v=t.lineOffsetY*m;if(1<t.numGlyphs){var y=t.glyphStartIndex+t.numGlyphs,_=t.lineStartIndex,b=t.lineStartIndex+t.lineLength,x=Xt(m,s,g,v,i,c,h,t,l,o,p,!1);if(!x)return{notEnoughRoom:!0};var w=Zt(x.first.point,a).point,S=Zt(x.last.point,a).point;if(n&&!i){var T=Yt(t.writingMode,w,S,d);if(T)return T}f=[x.first];for(var C=t.glyphStartIndex+1;C<y-1;C++)f.push(Qt(m*s.getoffsetX(C),g,v,i,c,h,t.segment,_,b,l,o,p,!1));f.push(x.last)}else{if(n&&!i){var E=Zt(h,r).point,k=t.lineStartIndex+t.segment+1,A=new yt.Point(l.getx(k),l.gety(k)),I=Zt(A,r),P=0<I.signedDistanceFromCamera?I.point:Jt(h,A,E,1,r),z=Yt(t.writingMode,E,P,d);if(z)return z}var M=Qt(m*s.getoffsetX(t.glyphStartIndex),g,v,i,c,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,o,p,!1);if(!M)return{notEnoughRoom:!0};f=[M]}for(var D=0,L=f;D<L.length;D+=1){var O=L[D];yt.addDynamicAttributes(u,O.point,O.angle)}return{}}function Jt(t,e,i,n,r){var o=Zt(t.add(t.sub(e)._unit()),r).point,a=i.sub(o);return i.add(a._mult(n/a.mag()))}function Qt(t,e,i,n,r,o,a,s,l,u,c,h,p){var d=n?t-e:t+e,f=0<d?1:-1,m=0;n&&(f*=-1,m=Math.PI),f<0&&(m+=Math.PI);for(var g=0<f?s+a:s+a+1,v=g,y=r,_=r,b=0,x=0,w=Math.abs(d);b+x<=w;){if((g+=f)<s||l<=g)return null;if(_=y,void 0===(y=h[g])){var S=new yt.Point(u.getx(g),u.gety(g)),T=Zt(S,c);if(0<T.signedDistanceFromCamera)y=h[g]=T.point;else{var C=g-f;y=Jt(0===b?o:new yt.Point(u.getx(C),u.gety(C)),S,_,w-b+1,c)}}b+=x,x=_.dist(y)}var E=(w-b)/x,k=y.sub(_),A=k.mult(E)._add(_);return A._add(k._unit()._perp()._mult(i*f)),{point:A,angle:m+Math.atan2(y.y-_.y,y.x-_.x),tileDistance:p?{prevTileDistance:g-f===v?0:u.gettileUnitDistanceFromAnchor(g-f),lastSegmentViewportDistance:w-b}:null}}qt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},qt.prototype.insert=function(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)},qt.prototype.insertCircle=function(t,e,i,n){this._forEachCell(e-n,i-n,e+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(n)},qt.prototype._insertBoxCell=function(t,e,i,n,r,o){this.boxCells[r].push(o)},qt.prototype._insertCircleCell=function(t,e,i,n,r,o){this.circleCells[r].push(o)},qt.prototype._query=function(t,e,i,n,r,o){if(i<0||t>this.width||n<0||e>this.height)return!r&&[];var a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=n){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return o?a.filter(o):a}return this._forEachCell(t,e,i,n,this._queryCell,a,{hitTest:r,seenUids:{box:{},circle:{}}},o),r?0<a.length:a},qt.prototype._queryCircle=function(t,e,i,n,r){var o=t-i,a=t+i,s=e-i,l=e+i;if(a<0||o>this.width||l<0||s>this.height)return!n&&[];var u=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,u,{hitTest:n,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},r),n?0<u.length:u},qt.prototype.query=function(t,e,i,n,r){return this._query(t,e,i,n,!1,r)},qt.prototype.hitTest=function(t,e,i,n,r){return this._query(t,e,i,n,!0,r)},qt.prototype.hitTestCircle=function(t,e,i,n){return this._queryCircle(t,e,i,!0,n)},qt.prototype._queryCell=function(t,e,i,n,r,o,a,s){var l=a.seenUids,u=this.boxCells[r];if(null!==u)for(var c=this.bboxes,h=0,p=u;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(t<=c[f+2]&&e<=c[f+3]&&i>=c[f+0]&&n>=c[f+1]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var m=this.circleCells[r];if(null!==m)for(var g=this.circles,v=0,y=m;v<y.length;v+=1){var _=y[v];if(!l.circle[_]){l.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(g[b],g[b+1],g[b+2],t,e,i,n)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var x=g[b],w=g[b+1],S=g[b+2];o.push({key:this.circleKeys[_],x1:x-S,y1:w-S,x2:x+S,y2:w+S})}}}},qt.prototype._queryCellCircle=function(t,e,i,n,r,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[r];if(null!==c)for(var h=this.bboxes,p=0,d=c;p<d.length;p+=1){var f=d[p];if(!u.box[f]){u.box[f]=!0;var m=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[m+0],h[m+1],h[m+2],h[m+3])&&(!s||s(this.boxKeys[f])))return o.push(!0),!0}}var g=this.circleCells[r];if(null!==g)for(var v=this.circles,y=0,_=g;y<_.length;y+=1){var b=_[y];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circlesCollide(v[x],v[x+1],v[x+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},qt.prototype._forEachCell=function(t,e,i,n,r,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(i),h=this._convertToYCellCoord(n),p=l;p<=c;p++)for(var d=u;d<=h;d++)if(r.call(this,t,e,i,n,this.xCellCount*d+p,o,a,s))return},qt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},qt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},qt.prototype._circlesCollide=function(t,e,i,n,r,o){var a=n-t,s=r-e,l=i+o;return a*a+s*s<l*l},qt.prototype._circleAndRectCollide=function(t,e,i,n,r,o,a){var s=(o-n)/2,l=Math.abs(t-(n+s));if(s+i<l)return!1;var u=(a-r)/2,c=Math.abs(e-(r+u));if(u+i<c)return!1;if(l<=s||c<=u)return!0;var h=l-s,p=c-u;return h*h+p*p<=i*i};var te=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ee(t,e){for(var i=0;i<t;i++){var n=e.length;e.resize(n+4),e.float32.set(te,3*n)}}function ie(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t[3]=i[3]*n+i[7]*r+i[15],t}var ne=function(t,e,i){void 0===e&&(e=new qt(t.width+200,t.height+200,25)),void 0===i&&(i=new qt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function re(t,e,i){t[e+4]=i?1:0}function oe(t,e,i){return e*(yt.EXTENT/(t.tileSize*Math.pow(2,i-t.tileID.overscaledZ)))}ne.prototype.placeCollisionBox=function(t,e,i,n,r){var o=this.projectAndGetPerspectiveRatio(n,t.anchorPointX,t.anchorPointY),a=i*o.perspectiveRatio,s=t.x1*a+o.point.x,l=t.y1*a+o.point.y,u=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,l,u,c)||!e&&this.grid.hitTest(s,l,u,c,r)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},ne.prototype.approximateTileDistance=function(t,e,i,n,r){var o=t.lastSegmentViewportDistance*i;return t.prevTileDistance+o+((r?1:n/this.pitchfactor)-1)*o*Math.abs(Math.sin(e))},ne.prototype.placeCollisionCircles=function(t,e,i,n,r,o,a,s,l,u,c,h,p){var d=[],f=this.projectAnchor(l,r.anchorX,r.anchorY),m=s/24,g=r.lineOffsetX*s,v=r.lineOffsetY*s,y=new yt.Point(r.anchorX,r.anchorY),_=Xt(m,a,g,v,!1,Zt(y,u).point,y,r,o,u,{},!0),b=!1,x=!1,w=!0,S=f.perspectiveRatio*n,T=1/(n*i),C=0,E=0;_&&(C=this.approximateTileDistance(_.first.tileDistance,_.first.angle,T,f.cameraDistance,h),E=this.approximateTileDistance(_.last.tileDistance,_.last.angle,T,f.cameraDistance,h));for(var k=0;k<t.length;k+=5){var A=t[k],I=t[k+1],P=t[k+2],z=t[k+3];if(!_||z<-C||E<z)re(t,k,!1);else{var M=this.projectPoint(l,A,I),D=P*S;if(0<d.length){var L=M.x-d[d.length-4],O=M.y-d[d.length-3];if(L*L+O*O<D*D*2&&k+8<t.length){var R=t[k+8];if(-C<R&&R<E){re(t,k,!1);continue}}}d.push(M.x,M.y,D,k/5),re(t,k,!0);var F=M.x-D,B=M.y-D,N=M.x+D,j=M.y+D;if(w=w&&this.isOffscreen(F,B,N,j),x=x||this.isInsideGrid(F,B,N,j),!e&&this.grid.hitTestCircle(M.x,M.y,D,p)){if(!c)return{circles:[],offscreen:!1};b=!0}}}return{circles:b||!x?[]:d,offscreen:w}},ne.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var e=[],i=1/0,n=1/0,r=-1/0,o=-1/0,a=0,s=t;a<s.length;a+=1){var l=s[a],u=new yt.Point(l.x+100,l.y+100);i=Math.min(i,u.x),n=Math.min(n,u.y),r=Math.max(r,u.x),o=Math.max(o,u.y),e.push(u)}for(var c={},h={},p=0,d=this.grid.query(i,n,r,o).concat(this.ignoredGrid.query(i,n,r,o));p<d.length;p+=1){var f=d[p],m=f.key;if(void 0===c[m.bucketInstanceId]&&(c[m.bucketInstanceId]={}),!c[m.bucketInstanceId][m.featureIndex]){var g=[new yt.Point(f.x1,f.y1),new yt.Point(f.x2,f.y1),new yt.Point(f.x2,f.y2),new yt.Point(f.x1,f.y2)];yt.polygonIntersectsPolygon(e,g)&&(c[m.bucketInstanceId][m.featureIndex]=!0,void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]=[]),h[m.bucketInstanceId].push(m.featureIndex))}}return h},ne.prototype.insertCollisionBox=function(t,e,i,n,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:n,collisionGroupID:r},t[0],t[1],t[2],t[3])},ne.prototype.insertCollisionCircles=function(t,e,i,n,r){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:n,collisionGroupID:r},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},ne.prototype.projectAnchor=function(t,e,i){var n=[e,i,0,1];return ie(n,n,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5,cameraDistance:n[3]}},ne.prototype.projectPoint=function(t,e,i){var n=[e,i,0,1];return ie(n,n,t),new yt.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100)},ne.prototype.projectAndGetPerspectiveRatio=function(t,e,i){var n=[e,i,0,1];return ie(n,n,t),{point:new yt.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},ne.prototype.isOffscreen=function(t,e,i,n){return i<100||t>=this.screenRightBoundary||n<100||e>this.screenBottomBoundary},ne.prototype.isInsideGrid=function(t,e,i,n){return 0<=i&&t<this.gridRightBoundary&&0<=n&&e<this.gridBottomBoundary};var ae=function(t,e,i,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&i?1:0,this.placed=i};ae.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var se=function(t,e,i,n,r){this.text=new ae(t?t.text:null,e,i,r),this.icon=new ae(t?t.icon:null,e,n,r)};se.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var le=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},ue=function(t,e,i,n,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=n,this.tileID=r},ce=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function he(t,e,i,n,r){var o=yt.getAnchorAlignment(t),a=-(o.horizontalAlign-.5)*e,s=-(o.verticalAlign-.5)*i,l=yt.evaluateVariableOffset(t,n);return new yt.Point(a+l[0]*r,s+l[1]*r)}function pe(t,e,i,n,r,o){var a=t.x1,s=t.x2,l=t.y1,u=t.y2,c=t.anchorPointX,h=t.anchorPointY,p=new yt.Point(e,i);return n&&p._rotate(r?o:-o),{x1:a+p.x,y1:l+p.y,x2:s+p.x,y2:u+p.y,anchorPointX:c,anchorPointY:h}}ce.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var de=function(t,e,i,n){this.transform=t.clone(),this.collisionIndex=new ne(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ce(i),(this.prevPlacement=n)&&(n.prevPlacement=void 0),this.placedOrientations={}};function fe(t,e,i,n,r){t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0),t.emplaceBack(e?1:0,i?1:0,n||0,r||0)}de.prototype.getBucketParts=function(t,e,i,n){var r=i.getBucket(e),o=i.latestFeatureIndex;if(r&&o&&e.id===r.layerIds[0]){var a=i.collisionBoxArray,s=r.layers[0].layout,l=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/yt.EXTENT,c=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),h=Ht(c,"map"===s.get("text-pitch-alignment"),"map"===s.get("text-rotation-alignment"),this.transform,oe(i,1,this.transform.zoom));this.retainedQueryData[r.bucketInstanceId]=new ue(r.bucketInstanceId,o,r.sourceLayerIndex,r.index,i.tileID);var p={bucket:r,layout:s,posMatrix:c,textLabelPlaneMatrix:h,scale:l,textPixelRatio:u,holdingForFade:i.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:yt.evaluateSizeForZoom(r.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(r.sourceID)};if(n)for(var d=0,f=r.sortKeyRanges;d<f.length;d+=1){var m=f[d];t.push({sortKey:m.sortKey,symbolInstanceStart:m.symbolInstanceStart,symbolInstanceEnd:m.symbolInstanceEnd,parameters:p})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:r.symbolInstances.length,parameters:p})}},de.prototype.attemptAnchorPlacement=function(t,e,i,n,r,o,a,s,l,u,c,h,p,d,f){var m,g=[h.textOffset0,h.textOffset1],v=he(t,i,n,g,r),y=this.collisionIndex.placeCollisionBox(pe(e,v.x,v.y,o,a,this.transform.angle),c,s,l,u.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(pe(f,v.x,v.y,o,a,this.transform.angle),c,s,l,u.predicate).box.length)return 0<y.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(m=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:g,width:i,height:n,anchor:t,textBoxScale:r,prevAnchor:m},this.markUsedJustification(p,t,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:v,placedGlyphBoxes:y}):void 0},de.prototype.placeLayerBucketPart=function(t,I,P){var z=this,e=t.parameters,M=e.bucket,D=e.layout,L=e.posMatrix,O=e.textLabelPlaneMatrix,R=e.scale,F=e.textPixelRatio,B=e.holdingForFade,i=e.collisionBoxArray,N=e.partiallyEvaluatedTextSize,j=e.collisionGroup,$=D.get("text-optional"),U=D.get("icon-optional"),V=D.get("text-allow-overlap"),q=D.get("icon-allow-overlap"),H="map"===D.get("text-rotation-alignment"),W="map"===D.get("text-pitch-alignment"),Z="none"!==D.get("icon-text-fit"),n="viewport-y"===D.get("symbol-z-order"),G=V&&(q||!M.hasIconData()||U),X=q&&(V||!M.hasTextData()||$);!M.collisionArrays&&i&&M.deserializeCollisionBoxes(i);var r=function(h,r){if(!I[h.crossTileID])if(B)z.placements[h.crossTileID]=new le(!1,!1,!1);else{var t,p=!1,e=!1,i=!0,d=null,o={box:null,offscreen:null},a={box:null,offscreen:null},n=null,s=null,l=0,u=0,c=0;r.textFeatureIndex&&(l=r.textFeatureIndex),r.verticalTextFeatureIndex&&(u=r.verticalTextFeatureIndex);var f=r.textBox;if(f){var m=function(t){var e=yt.WritingMode.horizontal;if(M.allowVerticalPlacement&&!t&&z.prevPlacement){var i=z.prevPlacement.placedOrientations[h.crossTileID];i&&(z.placedOrientations[h.crossTileID]=i,z.markUsedOrientation(M,e=i,h))}return e},g=function(t,e){if(M.allowVerticalPlacement&&0<h.numVerticalGlyphVertices&&r.verticalTextBox)for(var i=0,n=M.writingModes;i<n.length&&(n[i]===yt.WritingMode.vertical?(o=e(),a=o):o=t(),!(o&&o.box&&o.box.length));i+=1);else o=t()};if(D.get("text-variable-anchor")){var v=D.get("text-variable-anchor");if(z.prevPlacement&&z.prevPlacement.variableOffsets[h.crossTileID]){var y=z.prevPlacement.variableOffsets[h.crossTileID];0<v.indexOf(y.anchor)&&(v=v.filter(function(t){return t!==y.anchor})).unshift(y.anchor)}var _=function(t,e,i){for(var n=t.x2-t.x1,r=t.y2-t.y1,o=h.textBoxScale,a=Z&&!q?e:null,s={box:[],offscreen:!1},l=V?2*v.length:v.length,u=0;u<l;++u){var c=z.attemptAnchorPlacement(v[u%v.length],t,n,r,o,H,W,F,L,j,u>=v.length,h,M,i,a);if(c&&(s=c.placedGlyphBoxes)&&s.box&&s.box.length){p=!0,d=c.shift;break}}return s};g(function(){return _(f,r.iconBox,yt.WritingMode.horizontal)},function(){var t=r.verticalTextBox;return M.allowVerticalPlacement&&!(o&&o.box&&o.box.length)&&0<h.numVerticalGlyphVertices&&t?_(t,r.verticalIconBox,yt.WritingMode.vertical):{box:null,offscreen:null}}),o&&(p=o.box,i=o.offscreen);var b=m(o&&o.box);if(!p&&z.prevPlacement){var x=z.prevPlacement.variableOffsets[h.crossTileID];x&&(z.variableOffsets[h.crossTileID]=x,z.markUsedJustification(M,x.anchor,h,b))}}else{var w=function(t,e){var i=z.collisionIndex.placeCollisionBox(t,V,F,L,j.predicate);return i&&i.box&&i.box.length&&(z.markUsedOrientation(M,e,h),z.placedOrientations[h.crossTileID]=e),i};g(function(){return w(f,yt.WritingMode.horizontal)},function(){var t=r.verticalTextBox;return M.allowVerticalPlacement&&0<h.numVerticalGlyphVertices&&t?w(t,yt.WritingMode.vertical):{box:null,offscreen:null}}),m(o&&o.box&&o.box.length)}}p=(t=o)&&t.box&&0<t.box.length,i=t&&t.offscreen;var S=r.textCircles;if(S){var T=M.text.placedSymbolArray.get(h.centerJustifiedTextSymbolIndex),C=yt.evaluateSizeForFeature(M.textSizeData,N,T);n=z.collisionIndex.placeCollisionCircles(S,V,R,F,T,M.lineVertexArray,M.glyphOffsetArray,C,L,O,P,W,j.predicate),p=V||0<n.circles.length,i=i&&n.offscreen}if(r.iconFeatureIndex&&(c=r.iconFeatureIndex),r.iconBox){var E=function(t){var e=Z&&d?pe(t,d.x,d.y,H,W,z.transform.angle):t;return z.collisionIndex.placeCollisionBox(e,q,F,L,j.predicate)};e=a&&a.box&&a.box.length&&r.verticalIconBox?0<(s=E(r.verticalIconBox)).box.length:0<(s=E(r.iconBox)).box.length,i=i&&s.offscreen}var k=$||0===h.numHorizontalGlyphVertices&&0===h.numVerticalGlyphVertices,A=U||0===h.numIconVertices;k||A?A?k||(e=e&&p):p=e&&p:e=p=e&&p,p&&t&&t.box&&z.collisionIndex.insertCollisionBox(t.box,D.get("text-ignore-placement"),M.bucketInstanceId,a&&a.box&&u?u:l,j.ID),e&&s&&z.collisionIndex.insertCollisionBox(s.box,D.get("icon-ignore-placement"),M.bucketInstanceId,c,j.ID),p&&n&&z.collisionIndex.insertCollisionCircles(n.circles,D.get("text-ignore-placement"),M.bucketInstanceId,l,j.ID),z.placements[h.crossTileID]=new le(p||G,e||X,i||M.justReloaded),I[h.crossTileID]=!0}};if(n)for(var o=M.getSortedSymbolIndexes(this.transform.angle),a=o.length-1;0<=a;--a){var s=o[a];r(M.symbolInstances.get(s),M.collisionArrays[s])}else for(var l=t.symbolInstanceStart;l<t.symbolInstanceEnd;l++)r(M.symbolInstances.get(l),M.collisionArrays[l]);M.justReloaded=!1},de.prototype.markUsedJustification=function(t,e,i,n){var r;r=n===yt.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[yt.getAnchorJustification(e)];for(var o=0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];o<a.length;o+=1){var s=a[o];0<=s&&(t.text.placedSymbolArray.get(s).crossTileID=0<=r&&s!==r?0:i.crossTileID)}},de.prototype.markUsedOrientation=function(t,e,i){for(var n=e===yt.WritingMode.horizontal||e===yt.WritingMode.horizontalOnly?e:0,r=e===yt.WritingMode.vertical?e:0,o=0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];o<a.length;o+=1)t.text.placedSymbolArray.get(a[o]).placedOrientation=n;i.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=r)},de.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var n=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=r[s];u?(this.opacities[s]=new se(u,n,l.text,l.icon),i=i||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new se(null,n,l.text,l.icon,l.skipFade),i=i||l.text||l.icon)}for(var c in r){var h=r[c];if(!this.opacities[c]){var p=new se(h,n,!1,!1);p.isHidden()||(this.opacities[c]=p,i=i||h.text.placed||h.icon.placed)}}for(var d in o)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=o[d]);for(var f in a)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=a[f]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},de.prototype.updateLayerOpacities=function(t,e){for(var i={},n=0,r=e;n<r.length;n+=1){var o=r[n],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,i,o.collisionBoxArray)}},de.prototype.updateBucketOpacities=function(T,C,t){var E=this;T.hasTextData()&&T.text.opacityVertexArray.clear(),T.hasIconData()&&T.icon.opacityVertexArray.clear(),T.hasIconCollisionBoxData()&&T.iconCollisionBox.collisionVertexArray.clear(),T.hasTextCollisionBoxData()&&T.textCollisionBox.collisionVertexArray.clear(),T.hasIconCollisionCircleData()&&T.iconCollisionCircle.collisionVertexArray.clear(),T.hasTextCollisionCircleData()&&T.textCollisionCircle.collisionVertexArray.clear();var e=T.layers[0].layout,k=new se(null,0,!1,!1,!0),i=e.get("text-allow-overlap"),n=e.get("icon-allow-overlap"),A=e.get("text-variable-anchor"),I="map"===e.get("text-rotation-alignment"),P="map"===e.get("text-pitch-alignment"),z="none"!==e.get("icon-text-fit"),M=new se(null,0,i&&(n||!T.hasIconData()||e.get("icon-optional")),n&&(i||!T.hasTextData()||e.get("text-optional")),!0);!T.collisionArrays&&t&&(T.hasIconCollisionBoxData()||T.hasIconCollisionCircleData()||T.hasTextCollisionBoxData()||T.hasTextCollisionCircleData())&&T.deserializeCollisionBoxes(t);for(var D=function(t,e,i){for(var n=0;n<e/4;n++)t.opacityVertexArray.emplaceBack(i)},r=function(t){var e=T.symbolInstances.get(t),i=e.numHorizontalGlyphVertices,n=e.numVerticalGlyphVertices,r=e.crossTileID,o=C[r],a=E.opacities[r];o?a=k:a||(E.opacities[r]=a=M),C[r]=!0;var s=0<e.numIconVertices,l=E.placedOrientations[e.crossTileID],u=l===yt.WritingMode.vertical,c=l===yt.WritingMode.horizontal||l===yt.WritingMode.horizontalOnly;if(0<i||0<n){var h=we(a.text);D(T.text,i,u?Se:h),D(T.text,n,c?Se:h);var p=a.text.isHidden();[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(function(t){0<=t&&(T.text.placedSymbolArray.get(t).hidden=p||u?1:0)}),0<=e.verticalPlacedTextSymbolIndex&&(T.text.placedSymbolArray.get(e.verticalPlacedTextSymbolIndex).hidden=p||c?1:0);var d=E.variableOffsets[e.crossTileID];d&&E.markUsedJustification(T,d.anchor,e,l);var f=E.placedOrientations[e.crossTileID];f&&(E.markUsedJustification(T,"left",e,f),E.markUsedOrientation(T,f,e))}if(s){var m=we(a.icon),g=!(z&&e.verticalPlacedIconSymbolIndex&&u);0<=e.placedIconSymbolIndex&&(D(T.icon,e.numIconVertices,g?m:Se),T.icon.placedSymbolArray.get(e.placedIconSymbolIndex).hidden=a.icon.isHidden()),0<=e.verticalPlacedIconSymbolIndex&&(D(T.icon,e.numVerticalIconVertices,g?Se:m),T.icon.placedSymbolArray.get(e.verticalPlacedIconSymbolIndex).hidden=a.icon.isHidden())}if(T.hasIconCollisionBoxData()||T.hasIconCollisionCircleData()||T.hasTextCollisionBoxData()||T.hasTextCollisionCircleData()){var v=T.collisionArrays[t];if(v){var y=new yt.Point(0,0);if(v.textBox||v.verticalTextBox){var _=!0;if(A){var b=E.variableOffsets[r];b?(y=he(b.anchor,b.width,b.height,b.textOffset,b.textBoxScale),I&&y._rotate(P?E.transform.angle:-E.transform.angle)):_=!1}v.textBox&&fe(T.textCollisionBox.collisionVertexArray,a.text.placed,!_||u,y.x,y.y),v.verticalTextBox&&fe(T.textCollisionBox.collisionVertexArray,a.text.placed,!_||c,y.x,y.y)}var x=Boolean(!c&&v.verticalIconBox);v.iconBox&&fe(T.iconCollisionBox.collisionVertexArray,a.icon.placed,x,z?y.x:0,z?y.y:0),v.verticalIconBox&&fe(T.iconCollisionBox.collisionVertexArray,a.icon.placed,!x,z?y.x:0,z?y.y:0);var w=v.textCircles;if(w&&T.hasTextCollisionCircleData())for(var S=0;S<w.length;S+=5)fe(T.textCollisionCircle.collisionVertexArray,a.text.placed,o||0===w[S+4])}}},o=0;o<T.symbolInstances.length;o++)r(o);T.sortFeatures(this.transform.angle),this.retainedQueryData[T.bucketInstanceId]&&(this.retainedQueryData[T.bucketInstanceId].featureSortOrder=T.featureSortOrder),T.hasTextData()&&T.text.opacityVertexBuffer&&T.text.opacityVertexBuffer.updateData(T.text.opacityVertexArray),T.hasIconData()&&T.icon.opacityVertexBuffer&&T.icon.opacityVertexBuffer.updateData(T.icon.opacityVertexArray),T.hasIconCollisionBoxData()&&T.iconCollisionBox.collisionVertexBuffer&&T.iconCollisionBox.collisionVertexBuffer.updateData(T.iconCollisionBox.collisionVertexArray),T.hasTextCollisionBoxData()&&T.textCollisionBox.collisionVertexBuffer&&T.textCollisionBox.collisionVertexBuffer.updateData(T.textCollisionBox.collisionVertexArray),T.hasIconCollisionCircleData()&&T.iconCollisionCircle.collisionVertexBuffer&&T.iconCollisionCircle.collisionVertexBuffer.updateData(T.iconCollisionCircle.collisionVertexArray),T.hasTextCollisionCircleData()&&T.textCollisionCircle.collisionVertexBuffer&&T.textCollisionCircle.collisionVertexBuffer.updateData(T.textCollisionCircle.collisionVertexArray)},de.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},de.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},de.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},de.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t},de.prototype.setStale=function(){this.stale=!0};var me=Math.pow(2,25),ge=Math.pow(2,24),ve=Math.pow(2,17),ye=Math.pow(2,16),_e=Math.pow(2,9),be=Math.pow(2,8),xe=Math.pow(2,1);function we(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*me+e*ge+i*ve+e*ye+i*_e+e*be+i*xe+e}var Se=0,Te=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Te.prototype.continuePlacement=function(t,e,i,n,r){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,n,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(function(t,e){return t.sortKey-e.sortKey}));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,r())return!0;return!1};var Ce=function(t,e,i,n,r,o,a){this.placement=new de(t,r,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=n,this._done=!1};Ce.prototype.isDone=function(){return this._done},Ce.prototype.continuePlacement=function(t,e,i){for(var n=this,r=yt.browser.now(),o=function(){var t=yt.browser.now()-r;return!n._forceFullPlacement&&2<t};0<=this._currentPlacementIndex;){var a=e[t[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=s)&&(!a.maxzoom||a.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new Te(a)),this._inProgressLayer.continuePlacement(i[a.source],this.placement,this._showCollisionBoxes,a,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ce.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Ee=512/yt.EXTENT/2,ke=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var n=0;n<e.length;n++){var r=e.get(n),o=r.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};ke.prototype.getScaledCoordinates=function(t,e){var i=Ee/Math.pow(2,e.canonical.z-this.tileID.canonical.z);return{x:Math.floor((e.canonical.x*yt.EXTENT+t.anchorX)*i),y:Math.floor((e.canonical.y*yt.EXTENT+t.anchorY)*i)}},ke.prototype.findMatches=function(t,e,i){for(var n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var o=t.get(r);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),l=0,u=a;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=n&&Math.abs(c.coord.y-s.y)<=n&&!i[c.crossTileID]){i[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Ae=function(){this.maxCrossTileID=0};Ae.prototype.generate=function(){return++this.maxCrossTileID};var Ie=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ie.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var n=this.indexes[i],r={};for(var o in n){var a=n[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),r[a.tileID.key]=a}this.indexes[i]=r}this.lng=t},Ie.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var n=0;n<e.symbolInstances.length;n++)e.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,r)}else{var u=a[t.scaledTo(Number(o)).key];u&&u.findMatches(e.symbolInstances,t,r)}}for(var c=0;c<e.symbolInstances.length;c++){var h=e.symbolInstances.get(c);h.crossTileID||(h.crossTileID=i.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new ke(t,e.symbolInstances,e.bucketInstanceId),!0},Ie.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var n=0,r=e.indexedSymbolInstances[i];n<r.length;n+=1)delete this.usedCrossTileIDs[t][r[n].crossTileID]},Ie.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var n=this.indexes[i];for(var r in n)t[n[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,n[r]),delete n[r],e=!0)}return e};var Pe=function(){this.layerIndexes={},this.crossTileIDs=new Ae,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Pe.prototype.addLayer=function(t,e,i){var n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new Ie);var r=!1,o={};n.handleWrapJump(i);for(var a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(l.tileID,u,this.crossTileIDs)&&(r=!0),o[u.bucketInstanceId]=!0)}return n.removeStaleBuckets(o)&&(r=!0),r},Pe.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var ze=function(t,e){return yt.emitValidationErrors(t,e&&e.filter(function(t){return"source.canvas"!==t.identifier}))},Me=yt.pick(Ft,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),De=yt.pick(Ft,["setCenter","setZoom","setBearing","setPitch"]),Le=function(){var t={},e=yt.styleSpec.$version;for(var i in yt.styleSpec.$root){var n,r=yt.styleSpec.$root[i];r.required&&null!=(n="version"===i?e:"array"===r.type?[]:{})&&(t[i]=n)}return t}(),Oe=function(i){function r(t,e){var o=this;void 0===e&&(e={}),i.call(this),this.map=t,this.dispatcher=new w((Dt||(Dt=new Mt),Dt),this),this.imageManager=new u,this.imageManager.setEventedParent(this),this.glyphManager=new g(t._requestManager,e.localIdeographFontFamily),this.lineAtlas=new x(256,512),this.crossTileSymbolIndex=new Pe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new yt.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",yt.getReferrer());var n=this;this._rtlTextPluginCallback=r.registerForPluginStateChange(function(t){n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},function(t,e){if(yt.triggerPluginCompletionEvent(t),e&&e.every(function(t){return t}))for(var i in n.sourceCaches)n.sourceCaches[i].reload()})}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var n in o._layers){var r=o._layers[n];r.source===i.id&&o._validateLayer(r)}}}})}return i&&(r.__proto__=i),((r.prototype=Object.create(i&&i.prototype)).constructor=r).prototype.loadURL=function(t,e){var i=this;void 0===e&&(e={}),this.fire(new yt.Event("dataloading",{dataType:"style"}));var n="boolean"==typeof e.validate?e.validate:!yt.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,e.accessToken);var r=this.map._requestManager.transformRequest(t,yt.ResourceType.Style);this._request=yt.getJSON(r,function(t,e){i._request=null,t?i.fire(new yt.ErrorEvent(t)):e&&i._load(e,n)})},r.prototype.loadJSON=function(t,e){var i=this;void 0===e&&(e={}),this.fire(new yt.Event("dataloading",{dataType:"style"})),this._request=yt.browser.frame(function(){i._request=null,i._load(t,!1!==e.validate)})},r.prototype.loadEmpty=function(){this.fire(new yt.Event("dataloading",{dataType:"style"})),this._load(Le,!1)},r.prototype._load=function(t,e){if(!e||!ze(this,yt.validateStyle(t))){for(var i in this._loaded=!0,(this.stylesheet=t).sources)this.addSource(i,t.sources[i],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var n=Rt(this.stylesheet.layers);this._order=n.map(function(t){return t.id}),this._layers={},this._serializedLayers={};for(var r=0,o=n;r<o.length;r+=1){var a=o[r];(a=yt.createStyleLayer(a)).setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=a,this._serializedLayers[a.id]=a.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _(this.stylesheet.light),this.fire(new yt.Event("data",{dataType:"style"})),this.fire(new yt.Event("style.load"))}},r.prototype._loadSprite=function(t){var n=this;this._spriteRequest=function(t,e,f){var m,g,v,i=1<yt.browser.devicePixelRatio?"@2x":"",n=yt.getJSON(e.transformRequest(e.normalizeSpriteURL(t,i,".json"),yt.ResourceType.SpriteJSON),function(t,e){n=null,v||(v=t,m=e,o())}),r=yt.getImage(e.transformRequest(e.normalizeSpriteURL(t,i,".png"),yt.ResourceType.SpriteImage),function(t,e){r=null,v||(v=t,g=e,o())});function o(){if(v)f(v);else if(m&&g){var t=yt.browser.getImageData(g),e={};for(var i in m){var n=m[i],r=n.width,o=n.height,a=n.x,s=n.y,l=n.sdf,u=n.pixelRatio,c=n.stretchX,h=n.stretchY,p=n.content,d=new yt.RGBAImage({width:r,height:o});yt.RGBAImage.copy(t,d,{x:a,y:s},{x:0,y:0},{width:r,height:o}),e[i]={data:d,pixelRatio:u,sdf:l,stretchX:c,stretchY:h,content:p}}f(null,e)}}return{cancel:function(){n&&(n.cancel(),n=null),r&&(r.cancel(),r=null)}}}(t,this.map._requestManager,function(t,e){if(n._spriteRequest=null,t)n.fire(new yt.ErrorEvent(t));else if(e)for(var i in e)n.imageManager.addImage(i,e[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new yt.Event("data",{dataType:"style"}))})},r.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var i=t.sourceLayer;if(i){var n=e.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new yt.ErrorEvent(new Error('Source layer "'+i+'" does not exist on source "'+n.id+'" as specified by style layer "'+t.id+'"')))}}},r.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},r.prototype._serializeLayers=function(t){for(var e=[],i=0,n=t;i<n.length;i+=1){var r=this._layers[n[i]];"custom"!==r.type&&e.push(r.serialize())}return e},r.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},r.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},r.prototype.update=function(t){if(this._loaded){var e=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var r in(i.length||n.length)&&this._updateWorkerLayers(i,n),this._updatedSources){var o=this._updatedSources[r];"reload"===o?this._reloadSource(r):"clear"===o&&this._clearSource(r)}for(var a in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var l=0,u=this._order;l<u.length;l+=1){var c=this._layers[u[l]];c.recalculate(t,this._availableImages),!c.isHidden(t.zoom)&&c.source&&(this.sourceCaches[c.source].used=!0)}this.light.recalculate(t),this.z=t.zoom,e&&this.fire(new yt.Event("data",{dataType:"style"}))}},r.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},r.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},r.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},r.prototype.setState=function(t){var e=this;if(this._checkLoaded(),ze(this,yt.validateStyle(t)))return!1;(t=yt.clone$1(t)).layers=Rt(t.layers);var i=function(t,e){if(!t)return[{command:Ft.setStyle,args:[e]}];var i=[];try{if(!yt.deepEqual(t.version,e.version))return[{command:Ft.setStyle,args:[e]}];yt.deepEqual(t.center,e.center)||i.push({command:Ft.setCenter,args:[e.center]}),yt.deepEqual(t.zoom,e.zoom)||i.push({command:Ft.setZoom,args:[e.zoom]}),yt.deepEqual(t.bearing,e.bearing)||i.push({command:Ft.setBearing,args:[e.bearing]}),yt.deepEqual(t.pitch,e.pitch)||i.push({command:Ft.setPitch,args:[e.pitch]}),yt.deepEqual(t.sprite,e.sprite)||i.push({command:Ft.setSprite,args:[e.sprite]}),yt.deepEqual(t.glyphs,e.glyphs)||i.push({command:Ft.setGlyphs,args:[e.glyphs]}),yt.deepEqual(t.transition,e.transition)||i.push({command:Ft.setTransition,args:[e.transition]}),yt.deepEqual(t.light,e.light)||i.push({command:Ft.setLight,args:[e.light]});var n={},r=[];!function(t,e,i,n){var r,o,a,s;for(r in e=e||{},t=t||{})t.hasOwnProperty(r)&&(e.hasOwnProperty(r)||Nt(r,i,n));for(r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)?yt.deepEqual(t[r],e[r])||("geojson"===t[r].type&&"geojson"===e[r].type&&jt(t,e,r)?i.push({command:Ft.setGeoJSONSourceData,args:[r,e[r].data]}):(a=e,Nt(o=r,s=i,n),Bt(o,a,s))):Bt(r,e,i))}(t.sources,e.sources,r,n);var o=[];t.layers&&t.layers.forEach(function(t){n[t.source]?i.push({command:Ft.removeLayer,args:[t.id]}):o.push(t)}),i=i.concat(r),function(t,e,i){e=e||[];var n,r,o,a,s,l,u,c=(t=t||[]).map(Ut),h=e.map(Ut),p=t.reduce(Vt,{}),d=e.reduce(Vt,{}),f=c.slice(),m=Object.create(null);for(r=n=0;n<c.length;n++)d.hasOwnProperty(o=c[n])?r++:(i.push({command:Ft.removeLayer,args:[o]}),f.splice(f.indexOf(o,r),1));for(r=n=0;n<h.length;n++)f[f.length-1-n]!==(o=h[h.length-1-n])&&(p.hasOwnProperty(o)?(i.push({command:Ft.removeLayer,args:[o]}),f.splice(f.lastIndexOf(o,f.length-r),1)):r++,i.push({command:Ft.addLayer,args:[d[o],l=f[f.length-n]]}),f.splice(f.length-n,0,o),m[o]=!0);for(n=0;n<h.length;n++)if(a=p[o=h[n]],s=d[o],!m[o]&&!yt.deepEqual(a,s))if(yt.deepEqual(a.source,s.source)&&yt.deepEqual(a["source-layer"],s["source-layer"])&&yt.deepEqual(a.type,s.type)){for(u in $t(a.layout,s.layout,i,o,null,Ft.setLayoutProperty),$t(a.paint,s.paint,i,o,null,Ft.setPaintProperty),yt.deepEqual(a.filter,s.filter)||i.push({command:Ft.setFilter,args:[o,s.filter]}),yt.deepEqual(a.minzoom,s.minzoom)&&yt.deepEqual(a.maxzoom,s.maxzoom)||i.push({command:Ft.setLayerZoomRange,args:[o,s.minzoom,s.maxzoom]}),a)a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?$t(a[u],s[u],i,o,u.slice(6),Ft.setPaintProperty):yt.deepEqual(a[u],s[u])||i.push({command:Ft.setLayerProperty,args:[o,u,s[u]]}));for(u in s)s.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?$t(a[u],s[u],i,o,u.slice(6),Ft.setPaintProperty):yt.deepEqual(a[u],s[u])||i.push({command:Ft.setLayerProperty,args:[o,u,s[u]]}))}else i.push({command:Ft.removeLayer,args:[o]}),l=f[f.lastIndexOf(o)+1],i.push({command:Ft.addLayer,args:[s,l]})}(o,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Ft.setStyle,args:[e]}]}return i}(this.serialize(),t).filter(function(t){return!(t.command in De)});if(0===i.length)return!1;var n=i.filter(function(t){return!(t.command in Me)});if(0<n.length)throw new Error("Unimplemented: "+n.map(function(t){return t.command}).join(", ")+".");return i.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},r.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire(new yt.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,e),this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.fire(new yt.Event("data",{dataType:"style"}))},r.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},r.prototype.getImage=function(t){return this.imageManager.getImage(t)},r.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new yt.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.fire(new yt.Event("data",{dataType:"style"}))},r.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},r.prototype.addSource=function(t,e,i){var n=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(e.type)&&this._validate(yt.validateStyle.source,"sources."+t,e,null,i))){this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0);var r=this.sourceCaches[t]=new At(t,e,this.dispatcher);r.style=this,r.setEventedParent(this,function(){return{isSourceLoaded:n.loaded(),source:r.serialize(),sourceId:t}}),r.onAdd(this.map),this._changed=!0}},r.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var e in this._layers)if(this._layers[e].source===t)return this.fire(new yt.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+e+'" is using it.')));var i=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],i.fire(new yt.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},r.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},r.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},r.prototype.addLayer=function(t,e,i){void 0===i&&(i={}),this._checkLoaded();var n=t.id;if(this.getLayer(n))this.fire(new yt.ErrorEvent(new Error('Layer with id "'+n+'" already exists on this map')));else{var r;if("custom"===t.type){if(ze(this,yt.validateCustomStyleLayer(t)))return;r=yt.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(n,t.source),t=yt.clone$1(t),t=yt.extend(t,{source:n})),this._validate(yt.validateStyle.layer,"layers."+n,t,{arrayIndex:-1},i))return;r=yt.createStyleLayer(t),this._validateLayer(r),r.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[r.id]=r.serialize()}var o=e?this._order.indexOf(e):this._order.length;if(e&&-1===o)this.fire(new yt.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.')));else{if(this._order.splice(o,0,n),this._layerOrderChanged=!0,this._layers[n]=r,this._removedLayers[n]&&r.source&&"custom"!==r.type){var a=this._removedLayers[n];delete this._removedLayers[n],a.type!==r.type?this._updatedSources[r.source]="clear":(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause())}this._updateLayer(r),r.onAdd&&r.onAdd(this.map)}}},r.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==e){var i=this._order.indexOf(t);this._order.splice(i,1);var n=e?this._order.indexOf(e):this._order.length;e&&-1===n?this.fire(new yt.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(n,0,t),this._layerOrderChanged=!0)}}else this.fire(new yt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},r.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var i=this._order.indexOf(t);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],e.onRemove&&e.onRemove(this.map)}else this.fire(new yt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},r.prototype.getLayer=function(t){return this._layers[t]},r.prototype.hasLayer=function(t){return t in this._layers},r.prototype.setLayerZoomRange=function(t,e,i){this._checkLoaded();var n=this.getLayer(t);n?n.minzoom===e&&n.maxzoom===i||(null!=e&&(n.minzoom=e),null!=i&&(n.maxzoom=i),this._updateLayer(n)):this.fire(new yt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},r.prototype.setFilter=function(t,e,i){void 0===i&&(i={}),this._checkLoaded();var n=this.getLayer(t);if(n){if(!yt.deepEqual(n.filter,e))return null==e?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(yt.validateStyle.filter,"layers."+n.id+".filter",e,null,i)||(n.filter=yt.clone$1(e),this._updateLayer(n)))}else this.fire(new yt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},r.prototype.getFilter=function(t){return yt.clone$1(this.getLayer(t).filter)},r.prototype.setLayoutProperty=function(t,e,i,n){void 0===n&&(n={}),this._checkLoaded();var r=this.getLayer(t);r?yt.deepEqual(r.getLayoutProperty(e),i)||(r.setLayoutProperty(e,i,n),this._updateLayer(r)):this.fire(new yt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},r.prototype.getLayoutProperty=function(t,e){var i=this.getLayer(t);if(i)return i.getLayoutProperty(e);this.fire(new yt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style.")))},r.prototype.setPaintProperty=function(t,e,i,n){void 0===n&&(n={}),this._checkLoaded();var r=this.getLayer(t);r?yt.deepEqual(r.getPaintProperty(e),i)||(r.setPaintProperty(e,i,n)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new yt.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},r.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},r.prototype.setFeatureState=function(t,e){this._checkLoaded();var i=t.source,n=t.sourceLayer,r=this.sourceCaches[i];if(void 0!==r){var o=r.getSource().type;"geojson"===o&&n?this.fire(new yt.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||n?(void 0===t.id&&this.fire(new yt.ErrorEvent(new Error("The feature id parameter must be provided."))),r.setFeatureState(n,t.id,e)):this.fire(new yt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new yt.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},r.prototype.removeFeatureState=function(t,e){this._checkLoaded();var i=t.source,n=this.sourceCaches[i];if(void 0!==n){var r=n.getSource().type,o="vector"===r?t.sourceLayer:void 0;"vector"!==r||o?e&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new yt.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):n.removeFeatureState(o,t.id,e):this.fire(new yt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new yt.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},r.prototype.getFeatureState=function(t){this._checkLoaded();var e=t.source,i=t.sourceLayer,n=this.sourceCaches[e];if(void 0!==n){if("vector"!==n.getSource().type||i)return void 0===t.id&&this.fire(new yt.ErrorEvent(new Error("The feature id parameter must be provided."))),n.getFeatureState(i,t.id);this.fire(new yt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new yt.ErrorEvent(new Error("The source '"+e+"' does not exist in the map's style.")))},r.prototype.getTransition=function(){return yt.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},r.prototype.serialize=function(){return yt.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:yt.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},r.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},r.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},n={},r=[],o=this._order.length-1;0<=o;o--){var a=this._order[o];if(i(a)){n[a]=o;for(var s=0,l=t;s<l.length;s+=1){var u=l[s][a];if(u)for(var c=0,h=u;c<h.length;c+=1)r.push(h[c])}}}r.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var p=[],d=this._order.length-1;0<=d;d--){var f=this._order[d];if(i(f))for(var m=r.length-1;0<=m;m--){var g=r[m].feature;if(n[g.layer.id]<d)break;p.push(g),r.pop()}else for(var v=0,y=t;v<y.length;v+=1){var _=y[v][f];if(_)for(var b=0,x=_;b<x.length;b+=1)p.push(x[b].feature)}}return p},r.prototype.queryRenderedFeatures=function(t,e,i){e&&e.filter&&this._validate(yt.validateStyle.filter,"queryRenderedFeatures.filter",e.filter,null,e);var n={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire(new yt.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var r=0,o=e.layers;r<o.length;r+=1){var a=o[r],s=this._layers[a];if(!s)return this.fire(new yt.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be queried for features."))),[];n[s.source]=!0}}var l=[];for(var u in e.availableImages=this._availableImages,this.sourceCaches)e.layers&&!n[u]||l.push(L(this.sourceCaches[u],this._layers,this._serializedLayers,t,e,i));return this.placement&&l.push(function(s,l,r,t,u,e,i){for(var c={},h=e.queryRenderedSymbols(t),n=[],o=0,a=Object.keys(h).map(Number);o<a.length;o+=1)n.push(i[a[o]]);n.sort(O);for(var p=function(){var r=f[d],t=r.featureIndex.lookupSymbolFeatures(h[r.bucketInstanceId],l,r.bucketIndex,r.sourceLayerIndex,u.filter,u.layers,u.availableImages,s);for(var e in t){var i=c[e]=c[e]||[],n=t[e];n.sort(function(t,e){var i=r.featureSortOrder;if(i){var n=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex});for(var o=0,a=n;o<a.length;o+=1)i.push(a[o])}},d=0,f=n;d<f.length;d+=1)p();var m=function(n){c[n].forEach(function(t){var e=t.feature,i=r[s[n].source].getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=i})};for(var g in c)m(g);return c}(this._layers,this._serializedLayers,this.sourceCaches,t,e,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},r.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(yt.validateStyle.filter,"querySourceFeatures.filter",e.filter,null,e);var i=this.sourceCaches[t];return i?function(e,t){for(var i=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),n=[],r={},o=0;o<i.length;o++){var a=i[o],s=a.tileID.canonical.key;r[s]||(r[s]=!0,a.querySourceFeatures(n,t))}return n}(i,e):[]},r.prototype.addSourceType=function(t,e,i){return r.getSourceType(t)?i(new Error('A source type called "'+t+'" already exists.')):(r.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))},r.prototype.getLight=function(){return this.light.getLight()},r.prototype.setLight=function(t,e){void 0===e&&(e={}),this._checkLoaded();var i=this.light.getLight(),n=!1;for(var r in t)if(!yt.deepEqual(t[r],i[r])){n=!0;break}if(n){var o={now:yt.browser.now(),transition:yt.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,e),this.light.updateTransitions(o)}},r.prototype._validate=function(t,e,i,n,r){return void 0===r&&(r={}),(!r||!1!==r.validate)&&ze(this,t.call(yt.validateStyle,yt.extend({key:e,style:this.serialize(),value:i,styleSpec:yt.styleSpec},n)))},r.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),yt.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var e in this.sourceCaches)this.sourceCaches[e].clearTiles(),this.sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},r.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},r.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},r.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},r.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},r.prototype._updatePlacement=function(t,e,i,n,r){void 0===r&&(r=!1);for(var o=!1,a=!1,s={},l=0,u=this._order;l<u.length;l+=1){var c=this._layers[u[l]];if("symbol"===c.type){if(!s[c.source]){var h=this.sourceCaches[c.source];s[c.source]=h.getRenderableIds(!0).map(function(t){return h.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var p=this.crossTileSymbolIndex.addLayer(c,s[c.source],t.center.lng);o=o||p}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((r=r||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(yt.browser.now(),t.zoom))&&(this.pauseablePlacement=new Ce(t,this._order,r,e,i,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(yt.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var d=0,f=this._order;d<f.length;d+=1){var m=this._layers[f[d]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,s[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(yt.browser.now())},r.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},r.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();var n=this.sourceCaches[e.source];n&&n.setDependencies(e.tileID.key,e.type,e.icons)},r.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},r.prototype.getResource=function(t,e,i){return yt.makeRequest(e,i)},r}(yt.Evented);Oe.getSourceType=function(t){return D[t]},Oe.setSourceType=function(t,e){D[t]=e},Oe.registerForPluginStateChange=yt.registerForPluginStateChange;var Re=yt.createLayout([{name:"a_pos",type:"Int16",components:2}]),Fe=ui("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Be=ui("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ne=ui("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),je=ui("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),$e=ui("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ue=ui("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Ve=ui("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),qe=ui("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),He=ui("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),We=ui("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ze=ui("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Ge=ui("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Xe=ui("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ye=ui("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ke=ui("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Je=ui("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Qe=ui("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ti=ui("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ei=ui("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ii=ui("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ni=ui("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),ri=ui("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),oi=ui("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ai=ui("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),si=ui("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),li=ui("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function ui(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,s={};return{fragmentSource:t=t.replace(i,function(t,e,i,n,r){return s[r]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nvarying "+i+" "+n+" "+r+";\n#else\nuniform "+i+" "+n+" u_"+r+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+r+"\n    "+i+" "+n+" "+r+" = u_"+r+";\n#endif\n"}),vertexSource:e=e.replace(i,function(t,e,i,n,r){var o="float"===n?"vec2":"vec4",a=r.match(/color/)?"color":o;return s[r]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+i+" "+o+" a_"+r+";\nvarying "+i+" "+n+" "+r+";\n#else\nuniform "+i+" "+n+" u_"+r+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = a_"+r+";\n#else\n    "+i+" "+n+" "+r+" = u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = unpack_mix_"+a+"(a_"+r+", u_"+r+"_t);\n#else\n    "+i+" "+n+" "+r+" = u_"+r+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float u_"+r+"_t;\nattribute "+i+" "+o+" a_"+r+";\n#else\nuniform "+i+" "+n+" u_"+r+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+i+" "+n+" "+r+" = a_"+r+";\n#else\n    "+i+" "+n+" "+r+" = u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+i+" "+n+" "+r+" = unpack_mix_"+a+"(a_"+r+", u_"+r+"_t);\n#else\n    "+i+" "+n+" "+r+" = u_"+r+";\n#endif\n"})}}var ci=Object.freeze({__proto__:null,prelude:Fe,background:Be,backgroundPattern:Ne,circle:je,clippingMask:$e,heatmap:Ue,heatmapTexture:Ve,collisionBox:qe,collisionCircle:He,debug:We,fill:Ze,fillOutline:Ge,fillOutlinePattern:Xe,fillPattern:Ye,fillExtrusion:Ke,fillExtrusionPattern:Je,hillshadePrepare:Qe,hillshade:ti,line:ei,lineGradient:ii,linePattern:ni,lineSDF:ri,raster:oi,symbolIcon:ai,symbolSDF:si,symbolTextAndIcon:li}),hi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};hi.prototype.bind=function(t,e,i,n,r,o,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==n.length,u=0;!l&&u<n.length;u++)this.boundPaintVertexBuffers[u]!==n[u]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===r&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(e,i,n,r,o,a,s)},hi.prototype.freshBind=function(t,e,i,n,r,o,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=n,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var h=l;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,d=i;p<d.length;p+=1)d[p].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,r);for(var f=0,m=i;f<m.length;f+=1){var g=m[f];g.bind(),g.setVertexAttribPointers(c,t,r)}o&&(o.bind(),o.setVertexAttribPointers(c,t,r)),n&&n.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,r)),u.currentNumAttributes=l},hi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var pi=function(t,e,i,n,r){var o=t.gl;this.program=o.createProgram();var a=i?i.defines():[];r&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(Fe.fragmentSource,e.fragmentSource).join("\n"),l=a.concat(Fe.vertexSource,e.vertexSource).join("\n"),u=o.createShader(o.FRAGMENT_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(u,s),o.compileShader(u),o.attachShader(this.program,u);var c=o.createShader(o.VERTEX_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(c,l),o.compileShader(c),o.attachShader(this.program,c);for(var h=i?i.layoutAttributes:[],p=0;p<h.length;p++)o.bindAttribLocation(this.program,p,h[p].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},f=0;f<this.numAttributes;f++){var m=o.getActiveAttrib(this.program,f);m&&(this.attributes[m.name]=o.getAttribLocation(this.program,m.name))}for(var g=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),v=0;v<g;v++){var y=o.getActiveUniform(this.program,v);y&&(d[y.name]=o.getUniformLocation(this.program,y.name))}this.fixedUniforms=n(t,d),this.binderUniforms=i?i.getUniforms(t,d):[]}}};function di(t,e,i){var n=1/oe(i,1,e.transform.tileZoom),r=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/r,a=o*(i.tileID.canonical.x+i.tileID.wrap*r),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[n,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}pi.prototype.draw=function(t,e,i,n,r,o,a,s,l,u,c,h,p,d,f,m){var g,v=t.gl;if(!this.failedToCreate){for(var y in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(n),t.setColorMode(r),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[y].set(a[y]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var _=(g={},g[v.LINES]=2,g[v.TRIANGLES]=3,g[v.LINE_STRIP]=1,g)[e],b=0,x=c.get();b<x.length;b+=1){var w=x[b],S=w.vaos||(w.vaos={});(S[s]||(S[s]=new hi)).bind(t,this,l,d?d.getPaintVertexBuffers():[],u,w.vertexOffset,f,m),v.drawElements(e,w.primitiveLength*_,v.UNSIGNED_SHORT,w.primitiveOffset*_*2)}}};var fi=function(t,e,i,n){var r=e.style.light,o=r.properties.get("position"),a=[o.x,o.y,o.z],s=yt.create$1();"viewport"===r.properties.get("anchor")&&yt.fromRotation(s,-e.transform.angle),yt.transformMat3(a,a,s);var l=r.properties.get("color");return{u_matrix:t,u_lightpos:a,u_lightintensity:r.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+i,u_opacity:n}},mi=function(t){return{u_matrix:t}},gi=function(t,e,i,n){return yt.extend(mi(t),di(i,e,n))},vi=function(t,e,i,n){var r,o,a=t.transform;if("map"===n.paint.get("circle-pitch-alignment")){var s=oe(i,1,a.zoom);r=!0,o=[s,s]}else r=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,i,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+r,u_device_pixel_ratio:yt.browser.devicePixelRatio,u_extrude_scale:o}},yi=function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_camera_to_center_distance:new yt.Uniform1f(t,e.u_camera_to_center_distance),u_pixels_to_tile_units:new yt.Uniform1f(t,e.u_pixels_to_tile_units),u_extrude_scale:new yt.Uniform2f(t,e.u_extrude_scale),u_overscale_factor:new yt.Uniform1f(t,e.u_overscale_factor)}},_i=function(t,e,i){var n=oe(i,1,e.zoom),r=Math.pow(2,e.zoom-i.tileID.overscaledZ),o=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:n,u_extrude_scale:[e.pixelsToGLUnits[0]/(n*r),e.pixelsToGLUnits[1]/(n*r)],u_overscale_factor:o}},bi=function(t,e,i){return void 0===i&&(i=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}},xi=function(t){return{u_matrix:t}},wi=function(t,e,i){var n=i.paint.get("hillshade-shadow-color"),r=i.paint.get("hillshade-highlight-color"),o=i.paint.get("hillshade-accent-color"),a=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s,l,u,c=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),c),u_image:0,u_latrange:(s=e.tileID,l=Math.pow(2,s.canonical.z),u=s.canonical.y,[new yt.MercatorCoordinate(0,u/l).toLngLat().lat,new yt.MercatorCoordinate(0,(u+1)/l).toLngLat().lat]),u_light:[i.paint.get("hillshade-exaggeration"),a],u_shadow:n,u_highlight:r,u_accent:o}},Si=function(t,e,i){var n=e.stride,r=yt.create();return yt.ortho(r,0,yt.EXTENT,-yt.EXTENT,0,0,1),yt.translate(r,r,[0,-yt.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[n,n],u_zoom:t.overscaledZ,u_maxzoom:i,u_unpack:e.getUnpackVector()}},Ti=function(t,e,i){var n=t.transform;return{u_matrix:Ei(t,e,i),u_ratio:1/oe(e,1,n.zoom),u_device_pixel_ratio:yt.browser.devicePixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}};function Ci(t,e){return 1/oe(t,1,e.tileZoom)}function Ei(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var ki=function(t,e,i,n,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),0<a?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),0<o?1/(1-o):1+o),u_spin_weights:function(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}(r.paint.get("raster-hue-rotate"))};var o,a};var Ai=function(t,e,i,n,r,o,a,s,l,u){var c=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:c.width/c.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:u,u_texture:0}},Ii=function(t,e,i,n,r,o,a,s,l,u,c){var h=r.transform;return yt.extend(Ai(t,e,i,n,r,o,a,s,l,u),{u_gamma_scale:n?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:yt.browser.devicePixelRatio,u_is_halo:+c})},Pi={fillExtrusion:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_lightpos:new yt.Uniform3f(t,e.u_lightpos),u_lightintensity:new yt.Uniform1f(t,e.u_lightintensity),u_lightcolor:new yt.Uniform3f(t,e.u_lightcolor),u_vertical_gradient:new yt.Uniform1f(t,e.u_vertical_gradient),u_opacity:new yt.Uniform1f(t,e.u_opacity)}},fillExtrusionPattern:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_lightpos:new yt.Uniform3f(t,e.u_lightpos),u_lightintensity:new yt.Uniform1f(t,e.u_lightintensity),u_lightcolor:new yt.Uniform3f(t,e.u_lightcolor),u_vertical_gradient:new yt.Uniform1f(t,e.u_vertical_gradient),u_height_factor:new yt.Uniform1f(t,e.u_height_factor),u_image:new yt.Uniform1i(t,e.u_image),u_texsize:new yt.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new yt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new yt.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new yt.Uniform3f(t,e.u_scale),u_fade:new yt.Uniform1f(t,e.u_fade),u_opacity:new yt.Uniform1f(t,e.u_opacity)}},fill:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix)}},fillPattern:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_image:new yt.Uniform1i(t,e.u_image),u_texsize:new yt.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new yt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new yt.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new yt.Uniform3f(t,e.u_scale),u_fade:new yt.Uniform1f(t,e.u_fade)}},fillOutline:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_world:new yt.Uniform2f(t,e.u_world)}},fillOutlinePattern:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_world:new yt.Uniform2f(t,e.u_world),u_image:new yt.Uniform1i(t,e.u_image),u_texsize:new yt.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new yt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new yt.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new yt.Uniform3f(t,e.u_scale),u_fade:new yt.Uniform1f(t,e.u_fade)}},circle:function(t,e){return{u_camera_to_center_distance:new yt.Uniform1f(t,e.u_camera_to_center_distance),u_scale_with_map:new yt.Uniform1i(t,e.u_scale_with_map),u_pitch_with_map:new yt.Uniform1i(t,e.u_pitch_with_map),u_extrude_scale:new yt.Uniform2f(t,e.u_extrude_scale),u_device_pixel_ratio:new yt.Uniform1f(t,e.u_device_pixel_ratio),u_matrix:new yt.UniformMatrix4f(t,e.u_matrix)}},collisionBox:yi,collisionCircle:yi,debug:function(t,e){return{u_color:new yt.UniformColor(t,e.u_color),u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_overlay:new yt.Uniform1i(t,e.u_overlay),u_overlay_scale:new yt.Uniform1f(t,e.u_overlay_scale)}},clippingMask:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix)}},heatmap:function(t,e){return{u_extrude_scale:new yt.Uniform1f(t,e.u_extrude_scale),u_intensity:new yt.Uniform1f(t,e.u_intensity),u_matrix:new yt.UniformMatrix4f(t,e.u_matrix)}},heatmapTexture:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_world:new yt.Uniform2f(t,e.u_world),u_image:new yt.Uniform1i(t,e.u_image),u_color_ramp:new yt.Uniform1i(t,e.u_color_ramp),u_opacity:new yt.Uniform1f(t,e.u_opacity)}},hillshade:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_image:new yt.Uniform1i(t,e.u_image),u_latrange:new yt.Uniform2f(t,e.u_latrange),u_light:new yt.Uniform2f(t,e.u_light),u_shadow:new yt.UniformColor(t,e.u_shadow),u_highlight:new yt.UniformColor(t,e.u_highlight),u_accent:new yt.UniformColor(t,e.u_accent)}},hillshadePrepare:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_image:new yt.Uniform1i(t,e.u_image),u_dimension:new yt.Uniform2f(t,e.u_dimension),u_zoom:new yt.Uniform1f(t,e.u_zoom),u_maxzoom:new yt.Uniform1f(t,e.u_maxzoom),u_unpack:new yt.Uniform4f(t,e.u_unpack)}},line:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_ratio:new yt.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new yt.Uniform1f(t,e.u_device_pixel_ratio),u_units_to_pixels:new yt.Uniform2f(t,e.u_units_to_pixels)}},lineGradient:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_ratio:new yt.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new yt.Uniform1f(t,e.u_device_pixel_ratio),u_units_to_pixels:new yt.Uniform2f(t,e.u_units_to_pixels),u_image:new yt.Uniform1i(t,e.u_image)}},linePattern:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_texsize:new yt.Uniform2f(t,e.u_texsize),u_ratio:new yt.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new yt.Uniform1f(t,e.u_device_pixel_ratio),u_image:new yt.Uniform1i(t,e.u_image),u_units_to_pixels:new yt.Uniform2f(t,e.u_units_to_pixels),u_scale:new yt.Uniform3f(t,e.u_scale),u_fade:new yt.Uniform1f(t,e.u_fade)}},lineSDF:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_ratio:new yt.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new yt.Uniform1f(t,e.u_device_pixel_ratio),u_units_to_pixels:new yt.Uniform2f(t,e.u_units_to_pixels),u_patternscale_a:new yt.Uniform2f(t,e.u_patternscale_a),u_patternscale_b:new yt.Uniform2f(t,e.u_patternscale_b),u_sdfgamma:new yt.Uniform1f(t,e.u_sdfgamma),u_image:new yt.Uniform1i(t,e.u_image),u_tex_y_a:new yt.Uniform1f(t,e.u_tex_y_a),u_tex_y_b:new yt.Uniform1f(t,e.u_tex_y_b),u_mix:new yt.Uniform1f(t,e.u_mix)}},raster:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_tl_parent:new yt.Uniform2f(t,e.u_tl_parent),u_scale_parent:new yt.Uniform1f(t,e.u_scale_parent),u_buffer_scale:new yt.Uniform1f(t,e.u_buffer_scale),u_fade_t:new yt.Uniform1f(t,e.u_fade_t),u_opacity:new yt.Uniform1f(t,e.u_opacity),u_image0:new yt.Uniform1i(t,e.u_image0),u_image1:new yt.Uniform1i(t,e.u_image1),u_brightness_low:new yt.Uniform1f(t,e.u_brightness_low),u_brightness_high:new yt.Uniform1f(t,e.u_brightness_high),u_saturation_factor:new yt.Uniform1f(t,e.u_saturation_factor),u_contrast_factor:new yt.Uniform1f(t,e.u_contrast_factor),u_spin_weights:new yt.Uniform3f(t,e.u_spin_weights)}},symbolIcon:function(t,e){return{u_is_size_zoom_constant:new yt.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new yt.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new yt.Uniform1f(t,e.u_size_t),u_size:new yt.Uniform1f(t,e.u_size),u_camera_to_center_distance:new yt.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new yt.Uniform1f(t,e.u_pitch),u_rotate_symbol:new yt.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new yt.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new yt.Uniform1f(t,e.u_fade_change),u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new yt.UniformMatrix4f(t,e.u_label_plane_matrix),u_coord_matrix:new yt.UniformMatrix4f(t,e.u_coord_matrix),u_is_text:new yt.Uniform1i(t,e.u_is_text),u_pitch_with_map:new yt.Uniform1i(t,e.u_pitch_with_map),u_texsize:new yt.Uniform2f(t,e.u_texsize),u_texture:new yt.Uniform1i(t,e.u_texture)}},symbolSDF:function(t,e){return{u_is_size_zoom_constant:new yt.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new yt.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new yt.Uniform1f(t,e.u_size_t),u_size:new yt.Uniform1f(t,e.u_size),u_camera_to_center_distance:new yt.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new yt.Uniform1f(t,e.u_pitch),u_rotate_symbol:new yt.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new yt.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new yt.Uniform1f(t,e.u_fade_change),u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new yt.UniformMatrix4f(t,e.u_label_plane_matrix),u_coord_matrix:new yt.UniformMatrix4f(t,e.u_coord_matrix),u_is_text:new yt.Uniform1i(t,e.u_is_text),u_pitch_with_map:new yt.Uniform1i(t,e.u_pitch_with_map),u_texsize:new yt.Uniform2f(t,e.u_texsize),u_texture:new yt.Uniform1i(t,e.u_texture),u_gamma_scale:new yt.Uniform1f(t,e.u_gamma_scale),u_device_pixel_ratio:new yt.Uniform1f(t,e.u_device_pixel_ratio),u_is_halo:new yt.Uniform1i(t,e.u_is_halo)}},symbolTextAndIcon:function(t,e){return{u_is_size_zoom_constant:new yt.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new yt.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new yt.Uniform1f(t,e.u_size_t),u_size:new yt.Uniform1f(t,e.u_size),u_camera_to_center_distance:new yt.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new yt.Uniform1f(t,e.u_pitch),u_rotate_symbol:new yt.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new yt.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new yt.Uniform1f(t,e.u_fade_change),u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new yt.UniformMatrix4f(t,e.u_label_plane_matrix),u_coord_matrix:new yt.UniformMatrix4f(t,e.u_coord_matrix),u_is_text:new yt.Uniform1i(t,e.u_is_text),u_pitch_with_map:new yt.Uniform1i(t,e.u_pitch_with_map),u_texsize:new yt.Uniform2f(t,e.u_texsize),u_texsize_icon:new yt.Uniform2f(t,e.u_texsize_icon),u_texture:new yt.Uniform1i(t,e.u_texture),u_texture_icon:new yt.Uniform1i(t,e.u_texture_icon),u_gamma_scale:new yt.Uniform1f(t,e.u_gamma_scale),u_device_pixel_ratio:new yt.Uniform1f(t,e.u_device_pixel_ratio),u_is_halo:new yt.Uniform1i(t,e.u_is_halo)}},background:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_opacity:new yt.Uniform1f(t,e.u_opacity),u_color:new yt.UniformColor(t,e.u_color)}},backgroundPattern:function(t,e){return{u_matrix:new yt.UniformMatrix4f(t,e.u_matrix),u_opacity:new yt.Uniform1f(t,e.u_opacity),u_image:new yt.Uniform1i(t,e.u_image),u_pattern_tl_a:new yt.Uniform2f(t,e.u_pattern_tl_a),u_pattern_br_a:new yt.Uniform2f(t,e.u_pattern_br_a),u_pattern_tl_b:new yt.Uniform2f(t,e.u_pattern_tl_b),u_pattern_br_b:new yt.Uniform2f(t,e.u_pattern_br_b),u_texsize:new yt.Uniform2f(t,e.u_texsize),u_mix:new yt.Uniform1f(t,e.u_mix),u_pattern_size_a:new yt.Uniform2f(t,e.u_pattern_size_a),u_pattern_size_b:new yt.Uniform2f(t,e.u_pattern_size_b),u_scale_a:new yt.Uniform1f(t,e.u_scale_a),u_scale_b:new yt.Uniform1f(t,e.u_scale_b),u_pixel_coord_upper:new yt.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new yt.Uniform2f(t,e.u_pixel_coord_lower),u_tile_units_to_pixels:new yt.Uniform1f(t,e.u_tile_units_to_pixels)}}};function zi(t,e,i,n,r,o,a,s){for(var l=t.context,u=l.gl,c=t.useProgram(r?"collisionCircle":"collisionBox"),h=0;h<n.length;h++){var p=n[h],d=e.getTile(p),f=d.getBucket(i);if(f){var m=r?s?f.textCollisionCircle:f.iconCollisionCircle:s?f.textCollisionBox:f.iconCollisionBox;if(m){var g=p.posMatrix;0===o[0]&&0===o[1]||(g=t.translatePosMatrix(p.posMatrix,d,o,a)),c.draw(l,r?u.TRIANGLES:u.LINES,St.disabled,Tt.disabled,t.colorModeForRenderPass(),Et.disabled,_i(g,t.transform,d),i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,t.transform.zoom,null,null,m.collisionVertexBuffer)}}}}function Mi(t,e,i,n,r,o,a){zi(t,e,i,n,!1,r,o,a),zi(t,e,i,n,!0,r,o,a)}var Di=yt.identity(new Float32Array(16));function Li(t,e,i,n,r,o,a,s,l,u,c){var h,p,d,f,m,g,v,y,_,b,x=t.text.placedSymbolArray,w=t.text.dynamicLayoutVertexArray,S=t.icon.dynamicLayoutVertexArray,T={};w.clear();for(var C=0;C<x.length;C++){var E=x.get(C),k=E.hidden||!E.crossTileID||t.allowVerticalPlacement&&!E.placedOrientation?null:n[E.crossTileID];if(k){var A=new yt.Point(E.anchorX,E.anchorY),I=Zt(A,i?s:a),P=.5+o.cameraToCenterDistance/I.signedDistanceFromCamera*.5,z=r.evaluateSizeForFeature(t.textSizeData,u,E)*P/yt.ONE_EM;i&&(z*=t.tilePixelRatio/l);for(var M=(h=k.anchor,p=k.width,d=k.height,f=k.textOffset,m=k.textBoxScale,g=z,void 0,v=yt.getAnchorAlignment(h),y=-(v.horizontalAlign-.5)*p,_=-(v.verticalAlign-.5)*d,b=yt.evaluateVariableOffset(h,f),new yt.Point((y/m+b[0])*g,(_/m+b[1])*g)),D=i?Zt(A.add(M),a).point:I.point.add(e?M.rotate(-o.angle):M),L=t.allowVerticalPlacement&&E.placedOrientation===yt.WritingMode.vertical?Math.PI/2:0,O=0;O<E.numGlyphs;O++)yt.addDynamicAttributes(w,D,L);c&&0<=E.associatedIconIndex&&(T[E.associatedIconIndex]={shiftedAnchor:D,angle:L})}else ee(E.numGlyphs,w)}if(c){S.clear();for(var R=t.icon.placedSymbolArray,F=0;F<R.length;F++){var B=R.get(F);if(B.hidden)ee(B.numGlyphs,S);else{var N=T[F];if(N)for(var j=0;j<B.numGlyphs;j++)yt.addDynamicAttributes(S,N.shiftedAnchor,N.angle);else ee(B.numGlyphs,S)}}t.icon.dynamicLayoutVertexBuffer.updateData(S)}t.text.dynamicLayoutVertexBuffer.updateData(w)}function Oi(t,e,i,n,r,o,a,s,l,u,c,h){for(var p,d,f=t.context,m=f.gl,g=t.transform,v="map"===s,y="map"===l,_=v&&"point"!==i.layout.get("symbol-placement"),b=v&&!y&&!_,x=void 0!==i.layout.get("symbol-sort-key").constantOr(1),w=t.depthModeForSublayer(0,St.ReadOnly),S=i.layout.get("text-variable-anchor"),T=[],C=0,E=n;C<E.length;C+=1){var k=E[C],A=e.getTile(k),I=A.getBucket(i);if(I){var P=r?I.text:I.icon;if(P&&P.segments.get().length){var z=P.programConfigurations.get(i.id),M=r||I.sdfIcons,D=r?I.textSizeData:I.iconSizeData,L=y||0!==g.pitch;p||(p=t.useProgram((ht=M,pt=r,I.iconsInText&&pt?"symbolTextAndIcon":ht?"symbolSDF":"symbolIcon"),z),d=yt.evaluateSizeForZoom(D,g.zoom));var O=void 0,R=[0,0],F=void 0,B=void 0,N=null,j=void 0;if(r)F=A.glyphAtlasTexture,B=m.LINEAR,O=A.glyphAtlasTexture.size,I.iconsInText&&(R=A.imageAtlasTexture.size,N=A.imageAtlasTexture,j=L||t.options.rotating||t.options.zooming||"composite"===D.kind||"camera"===D.kind?m.LINEAR:m.NEAREST);else{var $=1!==i.layout.get("icon-size").constantOr(0)||I.iconsNeedLinear;F=A.imageAtlasTexture,B=M||t.options.rotating||t.options.zooming||$||L?m.LINEAR:m.NEAREST,O=A.imageAtlasTexture.size}var U=oe(A,1,t.transform.zoom),V=Ht(k.posMatrix,y,v,t.transform,U),q=Wt(k.posMatrix,y,v,t.transform,U),H=S&&I.hasTextData(),W="none"!==i.layout.get("icon-text-fit")&&H&&I.hasIconData();_&&Gt(I,k.posMatrix,t,r,V,q,y,u);var Z=t.translatePosMatrix(k.posMatrix,A,o,a),G=_||r&&S||W?Di:V,X=t.translatePosMatrix(q,A,o,a,!0),Y=M&&0!==i.paint.get(r?"text-halo-width":"icon-halo-width").constantOr(1),K={program:p,buffers:P,uniformValues:M?I.iconsInText?(et=D.kind,it=d,nt=b,rt=y,ot=t,at=Z,st=G,lt=X,ut=O,ct=R,yt.extend(Ii(et,it,nt,rt,ot,at,st,lt,!0,ut,!0),{u_texsize_icon:ct,u_texture_icon:1})):Ii(D.kind,d,b,y,t,Z,G,X,r,O,!0):Ai(D.kind,d,b,y,t,Z,G,X,r,O),atlasTexture:F,atlasTextureIcon:N,atlasInterpolation:B,atlasInterpolationIcon:j,isSDF:M,hasHalo:Y};if(x)for(var J=0,Q=P.segments.get();J<Q.length;J+=1){var tt=Q[J];T.push({segments:new yt.SegmentVector([tt]),sortKey:tt.sortKey,state:K})}else T.push({segments:P.segments,sortKey:0,state:K})}}}var et,it,nt,rt,ot,at,st,lt,ut,ct,ht,pt;x&&T.sort(function(t,e){return t.sortKey-e.sortKey});for(var dt=0,ft=T;dt<ft.length;dt+=1){var mt=ft[dt],gt=mt.state;if(f.activeTexture.set(m.TEXTURE0),gt.atlasTexture.bind(gt.atlasInterpolation,m.CLAMP_TO_EDGE),gt.atlasTextureIcon&&(f.activeTexture.set(m.TEXTURE1),gt.atlasTextureIcon&&gt.atlasTextureIcon.bind(gt.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),gt.isSDF){var vt=gt.uniformValues;gt.hasHalo&&(vt.u_is_halo=1,Ri(gt.buffers,mt.segments,i,t,gt.program,w,c,h,vt)),vt.u_is_halo=0}Ri(gt.buffers,mt.segments,i,t,gt.program,w,c,h,gt.uniformValues)}}function Ri(t,e,i,n,r,o,a,s,l){var u=n.context;r.draw(u,u.gl.TRIANGLES,o,a,s,Et.disabled,l,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,n.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Fi(t,e,i,n,r,o,a){var s,l,u,c,h,p,d,f,m,g,v=t.context.gl,y=i.paint.get("fill-pattern"),_=y&&y.constantOr(1),b=i.getCrossfadeParameters();a?(l=_&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=v.LINES):(l=_?"fillPattern":"fill",s=v.TRIANGLES);for(var x=0,w=n;x<w.length;x+=1){var S=w[x],T=e.getTile(S);if(!_||T.patternsLoaded()){var C=T.getBucket(i);if(C){var E=C.programConfigurations.get(i.id),k=t.useProgram(l,E);_&&(t.context.activeTexture.set(v.TEXTURE0),T.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),E.updatePaintBuffers(b));var A=y.constantOr(null);if(A&&T.imageAtlas){var I=T.imageAtlas,P=I.patternPositions[A.to.toString()],z=I.patternPositions[A.from.toString()];P&&z&&E.setConstantPatternPositions(P,z)}var M=t.translatePosMatrix(S.posMatrix,T,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(a){c=C.indexBuffer2,h=C.segments2;var D=[v.drawingBufferWidth,v.drawingBufferHeight];u="fillOutlinePattern"===l&&_?(p=M,d=t,f=b,m=T,g=D,yt.extend(gi(p,d,f,m),{u_world:g})):{u_matrix:M,u_world:D}}else c=C.indexBuffer,h=C.segments,u=_?gi(M,t,b,T):mi(M);k.draw(t.context,s,r,t.stencilModeForClipping(S),o,Et.disabled,u,i.id,C.layoutVertexBuffer,c,h,i.paint,t.transform.zoom,E)}}}}function Bi(t,e,i,n,r,o,a){for(var s=t.context,l=s.gl,u=i.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),h=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity"),d=0,f=n;d<f.length;d+=1){var m=f[d],g=e.getTile(m),v=g.getBucket(i);if(v){var y=v.programConfigurations.get(i.id),_=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(t.context.activeTexture.set(l.TEXTURE0),g.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(h));var b=u.constantOr(null);if(b&&g.imageAtlas){var x=g.imageAtlas,w=x.patternPositions[b.to.toString()],S=x.patternPositions[b.from.toString()];w&&S&&y.setConstantPatternPositions(w,S)}var T=t.translatePosMatrix(m.posMatrix,g,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),C=i.paint.get("fill-extrusion-vertical-gradient"),E=c?(k=T,A=t,I=C,P=p,z=m,M=h,D=g,yt.extend(fi(k,A,I,P),di(M,A,D),{u_height_factor:-Math.pow(2,z.overscaledZ)/D.tileSize/8})):fi(T,t,C,p);_.draw(s,s.gl.TRIANGLES,r,o,a,Et.backCCW,E,i.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,i.paint,t.transform.zoom,y)}}var k,A,I,P,z,M,D}function Ni(t,e,i,n,r,o){var a=t.context,s=a.gl,l=e.fbo;if(l){var u=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=wi(t,e,i);u.draw(a,s.TRIANGLES,n,r,o,Et.disabled,c,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function ji(t,e,i,n,r,o,a){var s=t.context,l=s.gl,u=e.dem;if(u&&u.data){var c=u.dim,h=u.stride,p=u.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(h),e.demTexture){var d=e.demTexture;d.update(p,{premultiply:!1}),d.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else e.demTexture=new yt.Texture(s,p,l.RGBA,{premultiply:!1}),e.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var f=e.fbo;if(!f){var m=new yt.Texture(s,{width:c,height:c,data:null},l.RGBA);m.bind(l.LINEAR,l.CLAMP_TO_EDGE),(f=e.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(m.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,c,c]),t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,r,o,a,Et.disabled,Si(e.tileID,u,n),i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function $i(t,e,i,n,r){var o=n.paint.get("raster-fade-duration");if(0<o){var a=yt.browser.now(),s=(a-t.timeAdded)/o,l=e?(a-e.timeAdded)/o:-1,u=i.getSource(),c=r.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!e||Math.abs(e.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),p=h&&t.refreshedUponExpiration?1:yt.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&1<=s&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var Ui=new yt.Color(1,0,0,1),Vi=new yt.Color(0,1,0,1),qi=new yt.Color(0,0,1,1),Hi=new yt.Color(1,0,1,1),Wi=new yt.Color(0,1,1,1);function Zi(t,e,i,n){Xi(t,0,e+i/2,t.transform.width,i,n)}function Gi(t,e,i,n){Xi(t,e-i/2,0,i,t.transform.height,n)}function Xi(t,e,i,n,r,o){var a=t.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*yt.browser.devicePixelRatio,i*yt.browser.devicePixelRatio,n*yt.browser.devicePixelRatio,r*yt.browser.devicePixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function Yi(t,e,i){var n=t.context,r=n.gl,o=i.posMatrix,a=t.useProgram("debug"),s=St.disabled,l=Tt.disabled,u=t.colorModeForRenderPass();n.activeTexture.set(r.TEXTURE0),t.emptyTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),a.draw(n,r.LINE_STRIP,s,l,u,Et.disabled,bi(o,yt.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var c=e.getTileByID(i.key).latestRawTileData,h=Math.floor((c&&c.byteLength||0)/1024),p=e.getTile(i).tileSize,d=512/Math.min(p,512)*(i.overscaledZ/t.transform.zoom)*.5,f=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(f+=" => "+i.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var i=t.debugOverlayCanvas,n=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,i.width,i.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(t,f+" "+h+"kb"),a.draw(n,r.TRIANGLES,s,l,Ct.alphaBlended,Et.disabled,bi(o,yt.Color.transparent,d),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}var Ki={symbol:function(t,e,i,n,r){if("translucent"===t.renderPass){var o=Tt.disabled,a=t.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(t,e,i,n,r,o,a){for(var s=e.transform,l="map"===r,u="map"===o,c=0,h=t;c<h.length;c+=1){var p=h[c],d=n.getTile(p),f=d.getBucket(i);if(f&&f.text&&f.text.segments.get().length){var m=yt.evaluateSizeForZoom(f.textSizeData,s.zoom),g=oe(d,1,e.transform.zoom),v=Ht(p.posMatrix,u,l,e.transform,g),y="none"!==i.layout.get("icon-text-fit")&&f.hasIconData();if(m){var _=Math.pow(2,s.zoom-d.tileID.overscaledZ);Li(f,l,u,a,yt.symbolSize,s,v,p.posMatrix,_,m,y)}}}}(n,t,i,e,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),r),0!==i.paint.get("icon-opacity").constantOr(1)&&Oi(t,e,i,n,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),o,a),0!==i.paint.get("text-opacity").constantOr(1)&&Oi(t,e,i,n,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),o,a),e.map.showCollisionBoxes&&(Mi(t,e,i,n,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),Mi(t,e,i,n,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(t,e,i,n){if("translucent"===t.renderPass){var r=i.paint.get("circle-opacity"),o=i.paint.get("circle-stroke-width"),a=i.paint.get("circle-stroke-opacity"),s=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==r.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){for(var l=t.context,u=l.gl,c=t.depthModeForSublayer(0,St.ReadOnly),h=Tt.disabled,p=t.colorModeForRenderPass(),d=[],f=0;f<n.length;f++){var m=n[f],g=e.getTile(m),v=g.getBucket(i);if(v){var y=v.programConfigurations.get(i.id),_={programConfiguration:y,program:t.useProgram("circle",y),layoutVertexBuffer:v.layoutVertexBuffer,indexBuffer:v.indexBuffer,uniformValues:vi(t,m,g,i)};if(s)for(var b=0,x=v.segments.get();b<x.length;b+=1){var w=x[b];d.push({segments:new yt.SegmentVector([w]),sortKey:w.sortKey,state:_})}else d.push({segments:v.segments,sortKey:0,state:_})}}s&&d.sort(function(t,e){return t.sortKey-e.sortKey});for(var S=0,T=d;S<T.length;S+=1){var C=T[S],E=C.state;E.program.draw(l,u.TRIANGLES,c,h,p,Et.disabled,E.uniformValues,i.id,E.layoutVertexBuffer,E.indexBuffer,C.segments,i.paint,t.transform.zoom,E.programConfiguration)}}}},heatmap:function(t,e,i,n){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var r=t.context,o=r.gl,a=Tt.disabled,s=new Ct([o.ONE,o.ONE],yt.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=i.heatmapFbo;if(r)n.bindTexture(n.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),function t(e,i,n,r){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,i.width/4,i.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),r.colorAttachment.set(n),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),t(e,i,n,r))}(t,e,o,r=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1))}}(r,t,i),r.clear({color:yt.Color.transparent});for(var l=0;l<n.length;l++){var u=n[l];if(!e.hasRenderableParent(u)){var c=e.getTile(u),h=c.getBucket(i);if(h){var p=h.programConfigurations.get(i.id);t.useProgram("heatmap",p).draw(r,o.TRIANGLES,St.disabled,a,s,Et.disabled,(d=u.posMatrix,f=c,m=t.transform.zoom,g=i.paint.get("heatmap-intensity"),{u_matrix:d,u_extrude_scale:oe(f,1,m),u_intensity:g}),i.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,i.paint,t.transform.zoom,p)}}}r.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,e){var i=t.context,n=i.gl,r=e.heatmapFbo;if(r){i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.colorAttachment.get()),i.activeTexture.set(n.TEXTURE1);var o=e.colorRampTexture;o||(o=e.colorRampTexture=new yt.Texture(i,e.colorRamp,n.RGBA)),o.bind(n.LINEAR,n.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(i,n.TRIANGLES,St.disabled,Tt.disabled,t.colorModeForRenderPass(),Et.disabled,function(t,e,i,n){var r=yt.create();yt.ortho(r,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:r,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}}(t,e),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}(t,i));var d,f,m,g},line:function(t,e,i,n){if("translucent"===t.renderPass){var r=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0!==r.constantOr(1)&&0!==o.constantOr(1)){var a=t.depthModeForSublayer(0,St.ReadOnly),s=t.colorModeForRenderPass(),l=i.paint.get("line-dasharray"),u=i.paint.get("line-pattern"),c=u.constantOr(1),h=i.paint.get("line-gradient"),p=i.getCrossfadeParameters(),d=c?"linePattern":l?"lineSDF":h?"lineGradient":"line",f=t.context,m=f.gl,g=!0;if(h){f.activeTexture.set(m.TEXTURE0);var v=i.gradientTexture;if(!i.gradient)return;v||(v=i.gradientTexture=new yt.Texture(f,i.gradient,m.RGBA)),v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var y=0,_=n;y<_.length;y+=1){var b=_[y],x=e.getTile(b);if(!c||x.patternsLoaded()){var w=x.getBucket(i);if(w){var S=w.programConfigurations.get(i.id),T=t.context.program.get(),C=t.useProgram(d,S),E=g||C.program!==T,k=u.constantOr(null);if(k&&x.imageAtlas){var A=x.imageAtlas,I=A.patternPositions[k.to.toString()],P=A.patternPositions[k.from.toString()];I&&P&&S.setConstantPatternPositions(I,P)}var z=c?(G=x,X=i,Y=p,void 0,K=(Z=t).transform,J=Ci(G,K),{u_matrix:Ei(Z,G,X),u_texsize:G.imageAtlasTexture.size,u_ratio:1/oe(G,1,K.zoom),u_device_pixel_ratio:yt.browser.devicePixelRatio,u_image:0,u_scale:[J,Y.fromScale,Y.toScale],u_fade:Y.t,u_units_to_pixels:[1/K.pixelsToGLUnits[0],1/K.pixelsToGLUnits[1]]}):l?(R=x,F=i,B=l,N=p,j=void 0,j=(O=t).lineAtlas,$=Ci(R,O.transform),U="round"===F.layout.get("line-cap"),V=j.getDash(B.from,U),q=j.getDash(B.to,U),H=V.width*N.fromScale,W=q.width*N.toScale,yt.extend(Ti(O,R,F),{u_patternscale_a:[$/H,-V.height/2],u_patternscale_b:[$/W,-q.height/2],u_sdfgamma:j.width/(256*Math.min(H,W)*yt.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:q.y,u_mix:N.t})):h?(M=t,D=x,L=i,yt.extend(Ti(M,D,L),{u_image:0})):Ti(t,x,i);c?(f.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),S.updatePaintBuffers(p)):l&&(E||t.lineAtlas.dirty)&&(f.activeTexture.set(m.TEXTURE0),t.lineAtlas.bind(f)),C.draw(f,m.TRIANGLES,a,t.stencilModeForClipping(b),s,Et.disabled,z,i.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,i.paint,t.transform.zoom,S),g=!1}}}}}var M,D,L,O,R,F,B,N,j,$,U,V,q,H,W,Z,G,X,Y,K,J},fill:function(t,e,i,n){var r=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0!==o.constantOr(1)){var a=t.colorModeForRenderPass(),s=i.paint.get("fill-pattern"),l=t.opaquePassEnabledForLayer()&&!s.constantOr(1)&&1===r.constantOr(yt.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===l)Fi(t,e,i,n,t.depthModeForSublayer(1,"opaque"===t.renderPass?St.ReadWrite:St.ReadOnly),a,!1);if("translucent"===t.renderPass&&i.paint.get("fill-antialias"))Fi(t,e,i,n,t.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,St.ReadOnly),a,!0)}},"fill-extrusion":function(t,e,i,n){var r=i.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){var o=new St(t.context.gl.LEQUAL,St.ReadWrite,t.depthRangeFor3D);if(1!==r||i.paint.get("fill-extrusion-pattern").constantOr(1))Bi(t,e,i,n,o,Tt.disabled,Ct.disabled),Bi(t,e,i,n,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();Bi(t,e,i,n,o,Tt.disabled,a)}}},hillshade:function(t,e,i,n){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,St.ReadOnly),s=t.colorModeForRenderPass(),l="translucent"===t.renderPass?t.stencilConfigForOverlap(n):[{},n],u=l[0],c=0,h=l[1];c<h.length;c+=1){var p=h[c],d=e.getTile(p);d.needsHillshadePrepare&&"offscreen"===t.renderPass?ji(t,d,i,o,a,Tt.disabled,s):"translucent"===t.renderPass&&Ni(t,d,i,a,u[p.overscaledZ],s)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,n){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")&&n.length)for(var r=t.context,o=r.gl,a=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),u=a instanceof P?[{},n]:t.stencilConfigForOverlap(n),c=u[0],h=u[1],p=h[h.length-1].overscaledZ,d=!t.options.moving,f=0,m=h;f<m.length;f+=1){var g=m[f],v=t.depthModeForSublayer(g.overscaledZ-p,1===i.paint.get("raster-opacity")?St.ReadWrite:St.ReadOnly,o.LESS),y=e.getTile(g),_=t.transform.calculatePosMatrix(g.toUnwrapped(),d);y.registerFadeDuration(i.paint.get("raster-fade-duration"));var b=e.findLoadedParent(g,0),x=$i(y,b,e,i,t.transform),w=void 0,S=void 0,T="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;r.activeTexture.set(o.TEXTURE0),y.texture.bind(T,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(o.TEXTURE1),b?(b.texture.bind(T,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),S=[y.tileID.canonical.x*w%1,y.tileID.canonical.y*w%1]):y.texture.bind(T,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var C=ki(_,S||[0,0],w||1,x,i);a instanceof P?s.draw(r,o.TRIANGLES,v,Tt.disabled,l,Et.disabled,C,i.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(r,o.TRIANGLES,v,c[g.overscaledZ],l,Et.disabled,C,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var n,r,o,a,s,l,u,c,h,p,d,f,m,g,v,y,_,b,x,w=i.paint.get("background-color"),S=i.paint.get("background-opacity");if(0!==S){var T=t.context,C=T.gl,E=t.transform,k=E.tileSize,A=i.paint.get("background-pattern");if(!t.isPatternMissing(A)){var I=!A&&1===w.a&&1===S&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===I){var P=Tt.disabled,z=t.depthModeForSublayer(0,"opaque"===I?St.ReadWrite:St.ReadOnly),M=t.colorModeForRenderPass(),D=t.useProgram(A?"backgroundPattern":"background"),L=E.coveringTiles({tileSize:k});A&&(T.activeTexture.set(C.TEXTURE0),t.imageManager.bind(t.context));for(var O=i.getCrossfadeParameters(),R=0,F=L;R<F.length;R+=1){var B=F[R],N=t.transform.calculatePosMatrix(B.toUnwrapped()),j=A?(n=N,r=S,o=t,a=A,s={tileID:B,tileSize:k},l=O,x=b=_=y=v=g=m=f=d=p=h=c=u=void 0,yt.extend((u=a,c=l,p=s,d=(h=o).imageManager.getPattern(u.from.toString()),f=h.imageManager.getPattern(u.to.toString()),m=h.imageManager.getPixelSize(),g=m.width,v=m.height,y=Math.pow(2,p.tileID.overscaledZ),_=p.tileSize*Math.pow(2,h.transform.tileZoom)/y,b=_*(p.tileID.canonical.x+p.tileID.wrap*y),x=_*p.tileID.canonical.y,{u_image:0,u_pattern_tl_a:d.tl,u_pattern_br_a:d.br,u_pattern_tl_b:f.tl,u_pattern_br_b:f.br,u_texsize:[g,v],u_mix:c.t,u_pattern_size_a:d.displaySize,u_pattern_size_b:f.displaySize,u_scale_a:c.fromScale,u_scale_b:c.toScale,u_tile_units_to_pixels:1/oe(p,1,h.transform.tileZoom),u_pixel_coord_upper:[b>>16,x>>16],u_pixel_coord_lower:[65535&b,65535&x]}),{u_matrix:n,u_opacity:r})):{u_matrix:N,u_opacity:S,u_color:w};D.draw(T,C.TRIANGLES,z,P,M,Et.disabled,j,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var n=0;n<i.length;n++)Yi(t,e,i[n])},custom:function(t,e,i){var n=t.context,r=i.implementation;if("offscreen"===t.renderPass){var o=r.prerender;o&&(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),o.call(r,n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(Tt.disabled);var a="3d"===r.renderingMode?new St(t.context.gl.LEQUAL,St.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,St.ReadOnly);n.setDepthMode(a),r.render(n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null)}}},Ji=function(t,e){this.context=new kt(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=At.maxUnderzooming+At.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Pe,this.gpuTimers={}};Ji.prototype.resize=function(t,e){if(this.width=t*yt.browser.devicePixelRatio,this.height=e*yt.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,n=this.style._order;i<n.length;i+=1)this.style._layers[n[i]].resize()},Ji.prototype.setup=function(){var t=this.context,e=new yt.StructArrayLayout2i4;e.emplaceBack(0,0),e.emplaceBack(yt.EXTENT,0),e.emplaceBack(0,yt.EXTENT),e.emplaceBack(yt.EXTENT,yt.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(e,Re.members),this.tileExtentSegments=yt.SegmentVector.simpleSegment(0,0,4,2);var i=new yt.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(yt.EXTENT,0),i.emplaceBack(0,yt.EXTENT),i.emplaceBack(yt.EXTENT,yt.EXTENT),this.debugBuffer=t.createVertexBuffer(i,Re.members),this.debugSegments=yt.SegmentVector.simpleSegment(0,0,4,5);var n=new yt.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(yt.EXTENT,0,yt.EXTENT,0),n.emplaceBack(0,yt.EXTENT,0,yt.EXTENT),n.emplaceBack(yt.EXTENT,yt.EXTENT,yt.EXTENT,yt.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(n,I.members),this.rasterBoundsSegments=yt.SegmentVector.simpleSegment(0,0,4,2);var r=new yt.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(1,0),r.emplaceBack(0,1),r.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(r,Re.members),this.viewportSegments=yt.SegmentVector.simpleSegment(0,0,4,2);var o=new yt.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var a=new yt.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a),this.emptyTexture=new yt.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var s=this.context.gl;this.stencilClearMode=new Tt({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},Ji.prototype.clearStencil=function(){var t=this.context,e=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=yt.create();yt.ortho(i,0,this.width,this.height,0,0,1),yt.scale(i,i,[e.drawingBufferWidth,e.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,e.TRIANGLES,St.disabled,this.stencilClearMode,Ct.disabled,Et.disabled,xi(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ji.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var i=this.context,n=i.gl;256<this.nextStencilID+e.length&&this.clearStencil(),i.setColorMode(Ct.disabled),i.setDepthMode(St.disabled);var r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;r.draw(i,n.TRIANGLES,St.disabled,new Tt({func:n.ALWAYS,mask:0},l,255,n.KEEP,n.KEEP,n.REPLACE),Ct.disabled,Et.disabled,xi(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ji.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,256<this.nextStencilID+1&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Tt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},Ji.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Tt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},Ji.prototype.stencilConfigForOverlap=function(t){var e,i=this.context.gl,n=t.sort(function(t,e){return e.overscaledZ-t.overscaledZ}),r=n[n.length-1].overscaledZ,o=n[0].overscaledZ-r+1;if(1<o){this.currentStencilSource=void 0,256<this.nextStencilID+o&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+r]=new Tt({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[a,n]}return[(e={},e[r]=Tt.disabled,e),n]},Ji.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new Ct([t.CONSTANT_COLOR,t.ONE],new yt.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ct.unblended:Ct.alphaBlended},Ji.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return St.disabled;var n=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new St(i||this.context.gl.LEQUAL,e,[n,n])},Ji.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ji.prototype.render=function(t,e){var i=this;this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(yt.browser.now()),this.imageManager.beginFrame();var n=this.style._order,r=this.style.sourceCaches;for(var o in r){var a=r[o];a.used&&a.prepare(this.context)}var s,l,u={},c={},h={};for(var p in r){var d=r[p];u[p]=d.getVisibleCoordinates(),c[p]=u[p].slice().reverse(),h[p]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var f=0;f<n.length;f++)if(this.style._layers[n[f]].is3D()){this.opaquePassCutoff=f;break}this.renderPass="offscreen";for(var m=0,g=n;m<g.length;m+=1){var v=this.style._layers[g[m]];if(v.hasOffscreenPass()&&!v.isHidden(this.transform.zoom)){var y=c[v.source];("custom"===v.type||y.length)&&this.renderLayer(this,r[v.source],v,y)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?yt.Color.black:yt.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=n.length-1;0<=this.currentLayer;this.currentLayer--){var _=this.style._layers[n[this.currentLayer]],b=r[_.source],x=u[_.source];this._renderTileClippingMasks(_,x),this.renderLayer(this,b,_,x)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){var w=this.style._layers[n[this.currentLayer]],S=r[w.source],T=("symbol"===w.type?h:c)[w.source];this._renderTileClippingMasks(w,u[w.source]),this.renderLayer(this,S,w,T)}this.options.showTileBoundaries&&(yt.values(this.style._layers).forEach(function(t){t.source&&!t.isHidden(i.transform.zoom)&&(t.source!==(l&&l.id)&&(l=i.style.sourceCaches[t.source]),(!s||s.getSource().maxzoom<l.getSource().maxzoom)&&(s=l))}),s&&Ki.debug(this,s,s.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;Zi(t,t.transform.height-(e.top||0),3,Ui),Zi(t,e.bottom||0,3,Vi),Gi(t,e.left||0,3,qi),Gi(t,t.transform.width-(e.right||0),3,Hi);var i,n,r,o,a=t.transform.centerPoint;i=t,n=a.x,r=t.transform.height-a.y,Xi(i,n-1,r-10,2,20,o=Wi),Xi(i,n-10,r-1,20,2,o)}(this),this.context.setDefault()},Ji.prototype.renderLayer=function(t,e,i,n){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||n.length)&&(this.id=i.id,this.gpuTimingStart(i),Ki[i.type](t,e,i,n,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ji.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}},Ji.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},Ji.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},Ji.prototype.queryGpuTimers=function(t){var e={};for(var i in t){var n=t[i],r=this.context.extTimerQuery,o=r.getQueryObjectEXT(n.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n.query),e[i]=o}return e},Ji.prototype.translatePosMatrix=function(t,e,i,n,r){if(!i[0]&&!i[1])return t;var o=r?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(o){var a=Math.sin(o),s=Math.cos(o);i=[i[0]*s-i[1]*a,i[0]*a+i[1]*s]}var l=[r?i[0]:oe(e,i[0],this.transform.zoom),r?i[1]:oe(e,i[1],this.transform.zoom),0],u=new Float32Array(16);return yt.translate(u,t,l),u},Ji.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},Ji.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&0<e.length?e.pop():null},Ji.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i},Ji.prototype.useProgram=function(t,e){this.cache=this.cache||{};var i=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new pi(this.context,ci[t],e,Pi[t],this._showOverdrawInspector)),this.cache[i]},Ji.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ji.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},Ji.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=yt.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new yt.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ji.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Qi=function(t,e){this.points=t,this.planes=e};Qi.fromInvProjectionMatrix=function(e,i,t){var n=Math.pow(2,t),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(t){return yt.transformMat4([],t,e)}).map(function(t){return yt.scale$1([],t,1/t[3]/i*n)}),r=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(t){var e=yt.sub([],o[t[0]],o[t[1]]),i=yt.sub([],o[t[2]],o[t[1]]),n=yt.normalize([],yt.cross([],e,i)),r=-yt.dot(n,o[t[1]]);return n.concat(r)});return new Qi(o,r)};var tn=function(t,e){this.min=t,this.max=e,this.center=yt.scale$2([],yt.add([],this.min,this.max),.5)};tn.prototype.quadrant=function(t){for(var e=[t%2==0,t<2],i=yt.clone$2(this.min),n=yt.clone$2(this.max),r=0;r<e.length;r++)i[r]=e[r]?this.min[r]:this.center[r],n[r]=e[r]?this.center[r]:this.max[r];return n[2]=this.max[2],new tn(i,n)},tn.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},tn.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},tn.prototype.intersects=function(t){for(var e=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],i=!0,n=0;n<t.planes.length;n++){for(var r=t.planes[n],o=0,a=0;a<e.length;a++)o+=0<=yt.dot$1(r,e[a]);if(0===o)return 0;o!==e.length&&(i=!1)}if(i)return 2;for(var s=0;s<3;s++){for(var l=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=0;c<t.points.length;c++){var h=t.points[c][s]-this.min[s];l=Math.min(l,h),u=Math.max(u,h)}if(u<0||l>this.max[s]-this.min[s])return 0}return 1};var en=function(t,e,i,n){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=n};en.prototype.interpolate=function(t,e,i){return null!=e.top&&null!=t.top&&(this.top=yt.number(t.top,e.top,i)),null!=e.bottom&&null!=t.bottom&&(this.bottom=yt.number(t.bottom,e.bottom,i)),null!=e.left&&null!=t.left&&(this.left=yt.number(t.left,e.left,i)),null!=e.right&&null!=t.right&&(this.right=yt.number(t.right,e.right,i)),this},en.prototype.getCenter=function(t,e){var i=yt.clamp((this.left+t-this.right)/2,0,t),n=yt.clamp((this.top+e-this.bottom)/2,0,e);return new yt.Point(i,n)},en.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},en.prototype.clone=function(){return new en(this.top,this.bottom,this.left,this.right)},en.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var nn=function(t,e,i,n,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=t||0,this._maxZoom=e||22,this._minPitch=null==i?0:i,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new yt.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new en,this._posMatrixCache={},this._alignedPosMatrixCache={}},rn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};nn.prototype.clone=function(){var t=new nn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},rn.minZoom.get=function(){return this._minZoom},rn.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},rn.maxZoom.get=function(){return this._maxZoom},rn.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},rn.minPitch.get=function(){return this._minPitch},rn.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},rn.maxPitch.get=function(){return this._maxPitch},rn.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},rn.renderWorldCopies.get=function(){return this._renderWorldCopies},rn.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},rn.worldSize.get=function(){return this.tileSize*this.scale},rn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},rn.size.get=function(){return new yt.Point(this.width,this.height)},rn.bearing.get=function(){return-this.angle/Math.PI*180},rn.bearing.set=function(t){var e=-yt.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=yt.create$2(),yt.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},rn.pitch.get=function(){return this._pitch/Math.PI*180},rn.pitch.set=function(t){var e=yt.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},rn.fov.get=function(){return this._fov/Math.PI*180},rn.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},rn.zoom.get=function(){return this._zoom},rn.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},rn.center.get=function(){return this._center},rn.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},rn.padding.get=function(){return this._edgeInsets.toJSON()},rn.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},rn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},nn.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},nn.prototype.interpolatePadding=function(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()},nn.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},nn.prototype.getVisibleUnwrappedCoordinates=function(t){var e=[new yt.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new yt.Point(0,0)),n=this.pointCoordinate(new yt.Point(this.width,0)),r=this.pointCoordinate(new yt.Point(this.width,this.height)),o=this.pointCoordinate(new yt.Point(0,this.height)),a=Math.floor(Math.min(i.x,n.x,r.x,o.x)),s=Math.floor(Math.max(i.x,n.x,r.x,o.x)),l=a-1;l<=s+1;l++)0!==l&&e.push(new yt.UnwrappedTileID(l,t));return e},nn.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),i=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var n=yt.MercatorCoordinate.fromLngLat(this.center),r=Math.pow(2,e),o=[r*n.x,r*n.y,0],a=Qi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,e),s=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(s=e);var l=function(t){return{aabb:new tn([t*r,0,0],[(t+1)*r,r,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},u=[],c=[],h=e,p=t.reparseOverscaled?i:e;if(this._renderWorldCopies)for(var d=1;d<=3;d++)u.push(l(-d)),u.push(l(d));for(u.push(l(0));0<u.length;){var f=u.pop(),m=f.x,g=f.y,v=f.fullyVisible;if(!v){var y=f.aabb.intersects(a);if(0===y)continue;v=2===y}var _=f.aabb.distanceX(o),b=f.aabb.distanceY(o),x=Math.max(Math.abs(_),Math.abs(b));if(f.zoom===h||x>3+(1<<h-f.zoom)-2&&f.zoom>=s)c.push({tileID:new yt.OverscaledTileID(f.zoom===h?p:f.zoom,f.wrap,f.zoom,m,g),distanceSq:yt.sqrLen([o[0]-.5-m,o[1]-.5-g])});else for(var w=0;w<4;w++){var S=(m<<1)+w%2,T=(g<<1)+(w>>1);u.push({aabb:f.aabb.quadrant(w),zoom:f.zoom+1,x:S,y:T,wrap:f.wrap,fullyVisible:v})}}return c.sort(function(t,e){return t.distanceSq-e.distanceSq}).map(function(t){return t.tileID})},nn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},rn.unmodified.get=function(){return this._unmodified},nn.prototype.zoomScale=function(t){return Math.pow(2,t)},nn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},nn.prototype.project=function(t){var e=yt.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new yt.Point(yt.mercatorXfromLng(t.lng)*this.worldSize,yt.mercatorYfromLat(e)*this.worldSize)},nn.prototype.unproject=function(t){return new yt.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},rn.point.get=function(){return this.project(this.center)},nn.prototype.setLocationAtPoint=function(t,e){var i=this.pointCoordinate(e),n=this.pointCoordinate(this.centerPoint),r=this.locationCoordinate(t),o=new yt.MercatorCoordinate(r.x-(i.x-n.x),r.y-(i.y-n.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},nn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},nn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},nn.prototype.locationCoordinate=function(t){return yt.MercatorCoordinate.fromLngLat(t)},nn.prototype.coordinateLocation=function(t){return t.toLngLat()},nn.prototype.pointCoordinate=function(t){var e=[t.x,t.y,0,1],i=[t.x,t.y,1,1];yt.transformMat4(e,e,this.pixelMatrixInverse),yt.transformMat4(i,i,this.pixelMatrixInverse);var n=e[3],r=i[3],o=e[1]/n,a=i[1]/r,s=e[2]/n,l=i[2]/r,u=s===l?0:(0-s)/(l-s);return new yt.MercatorCoordinate(yt.number(e[0]/n,i[0]/r,u)/this.worldSize,yt.number(o,a,u)/this.worldSize)},nn.prototype.coordinatePoint=function(t){var e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return yt.transformMat4(e,e,this.pixelMatrix),new yt.Point(e[0]/e[3],e[1]/e[3])},nn.prototype.getBounds=function(){return(new yt.LngLatBounds).extend(this.pointLocation(new yt.Point(0,0))).extend(this.pointLocation(new yt.Point(this.width,0))).extend(this.pointLocation(new yt.Point(this.width,this.height))).extend(this.pointLocation(new yt.Point(0,this.height)))},nn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new yt.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},nn.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},nn.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var i=t.key,n=e?this._alignedPosMatrixCache:this._posMatrixCache;if(n[i])return n[i];var r=t.canonical,o=this.worldSize/this.zoomScale(r.z),a=r.x+Math.pow(2,r.z)*t.wrap,s=yt.identity(new Float64Array(16));return yt.translate(s,s,[a*o,r.y*o,0]),yt.scale(s,s,[o/yt.EXTENT,o/yt.EXTENT,1]),yt.multiply(s,e?this.alignedProjMatrix:this.projMatrix,s),n[i]=new Float32Array(s),n[i]},nn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},nn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,i,n,r=-90,o=90,a=-180,s=180,l=this.size,u=this._unmodified;if(this.latRange){var c=this.latRange;r=yt.mercatorYfromLat(c[1])*this.worldSize,t=(o=yt.mercatorYfromLat(c[0])*this.worldSize)-r<l.y?l.y/(o-r):0}if(this.lngRange){var h=this.lngRange;a=yt.mercatorXfromLng(h[0])*this.worldSize,e=(s=yt.mercatorXfromLng(h[1])*this.worldSize)-a<l.x?l.x/(s-a):0}var p=this.point,d=Math.max(e||0,t||0);if(d)return this.center=this.unproject(new yt.Point(e?(s+a)/2:p.x,t?(o+r)/2:p.y)),this.zoom+=this.scaleZoom(d),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var f=p.y,m=l.y/2;f-m<r&&(n=r+m),o<f+m&&(n=o-m)}if(this.lngRange){var g=p.x,v=l.x/2;g-v<a&&(i=a+v),s<g+v&&(i=s-v)}void 0===i&&void 0===n||(this.center=this.unproject(new yt.Point(void 0!==i?i:p.x,void 0!==n?n:p.y))),this._unmodified=u,this._constraining=!1}},nn.prototype._calcMatrices=function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=Math.PI/2+this._pitch,i=this._fov*(.5+t.y/this.height),n=Math.sin(i)*this.cameraToCenterDistance/Math.sin(yt.clamp(Math.PI-e-i,.01,Math.PI-.01)),r=this.point,o=r.x,a=r.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),l=this.height/50,u=new Float64Array(16);yt.perspective(u,this._fov,this.width/this.height,l,s),u[8]=2*-t.x/this.width,u[9]=2*t.y/this.height,yt.scale(u,u,[1,-1,1]),yt.translate(u,u,[0,0,-this.cameraToCenterDistance]),yt.rotateX(u,u,this._pitch),yt.rotateZ(u,u,this.angle),yt.translate(u,u,[-o,-a,0]),this.mercatorMatrix=yt.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),yt.scale(u,u,[1,1,yt.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u,this.invProjMatrix=yt.invert([],this.projMatrix);var c=this.width%2/2,h=this.height%2/2,p=Math.cos(this.angle),d=Math.sin(this.angle),f=o-Math.round(o)+p*c+d*h,m=a-Math.round(a)+p*h+d*c,g=new Float64Array(u);if(yt.translate(g,g,[.5<f?f-1:f,.5<m?m-1:m,0]),this.alignedProjMatrix=g,u=yt.create(),yt.scale(u,u,[this.width/2,-this.height/2,1]),yt.translate(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=yt.create(),yt.scale(u,u,[1,-1,1]),yt.translate(u,u,[-1,-1,0]),yt.scale(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=yt.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(u=yt.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},nn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new yt.Point(0,0)),e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return yt.transformMat4(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance},nn.prototype.getCameraPoint=function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new yt.Point(0,t))},nn.prototype.getCameraQueryGeometry=function(t){var e=this.getCameraPoint();if(1===t.length)return[t[0],e];for(var i=e.x,n=e.y,r=e.x,o=e.y,a=0,s=t;a<s.length;a+=1){var l=s[a];i=Math.min(i,l.x),n=Math.min(n,l.y),r=Math.max(r,l.x),o=Math.max(o,l.y)}return[new yt.Point(i,n),new yt.Point(r,n),new yt.Point(r,o),new yt.Point(i,o),new yt.Point(i,n)]},Object.defineProperties(nn.prototype,rn);var on=function(t){var e,i,n,r;this._hashName=t&&encodeURIComponent(t),yt.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),i=!1,n=null,r=function(){n=null,i&&(e(),n=setTimeout(r,300),i=!1)},function(){return i=!0,n||r(),n})};on.prototype.addTo=function(t){return this._map=t,yt.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},on.prototype.remove=function(){return yt.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},on.prototype.getHashString=function(t){var e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,n=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,n),o=Math.round(e.lng*r)/r,a=Math.round(e.lat*r)/r,s=this._map.getBearing(),l=this._map.getPitch(),u="";if(u+=t?"/"+o+"/"+a+"/"+i:i+"/"+a+"/"+o,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),this._hashName){var c=this._hashName,h=!1,p=yt.window.location.hash.slice(1).split("&").map(function(t){var e=t.split("=")[0];return e===c?(h=!0,e+"="+u):t}).filter(function(t){return t});return h||p.push(c+"="+u),"#"+p.join("&")}return"#"+u},on.prototype._getCurrentHash=function(){var e,i=this,t=yt.window.location.hash.replace("#","");return this._hashName?(t.split("&").map(function(t){return t.split("=")}).forEach(function(t){t[0]===i._hashName&&(e=t)}),(e&&e[1]||"").split("/")):t.split("/")},on.prototype._onHashChange=function(){var t=this._getCurrentHash();if(3<=t.length&&!t.some(function(t){return isNaN(t)})){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},on.prototype._updateHashUnthrottled=function(){var t=this.getHashString();try{yt.window.history.replaceState(yt.window.history.state,"",t)}catch(t){}};var an=function(a){function t(t,e,i,n){void 0===n&&(n={});var r=b.mousePos(e.getCanvasContainer(),i),o=e.unproject(r);a.call(this,t,yt.extend({point:r,lngLat:o,originalEvent:i},n)),this._defaultPrevented=!1,this.target=e}a&&(t.__proto__=a);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(yt.Event),sn=function(s){function t(t,e,i){var n=b.touchPos(e.getCanvasContainer(),i),r=n.map(function(t){return e.unproject(t)}),o=n.reduce(function(t,e,i,n){return t.add(e.div(n.length))},new yt.Point(0,0)),a=e.unproject(o);s.call(this,t,{points:n,point:o,lngLats:r,lngLat:a,originalEvent:i}),this._defaultPrevented=!1}s&&(t.__proto__=s);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(yt.Event),ln=function(n){function t(t,e,i){n.call(this,t,{originalEvent:i}),this._defaultPrevented=!1}n&&(t.__proto__=n);var e={defaultPrevented:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(yt.Event),un=function(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,yt.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};un.prototype.setZoomRate=function(t){this._defaultZoomRate=t},un.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},un.prototype.isEnabled=function(){return!!this._enabled},un.prototype.isActive=function(){return!!this._active},un.prototype.isZooming=function(){return!!this._zooming},un.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},un.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},un.prototype.onWheel=function(t){if(this.isEnabled()){var e=t.deltaMode===yt.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,i=yt.browser.now(),n=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":400<n?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(n*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this.isActive()||this._start(t)),t.preventDefault()}},un.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},un.prototype._start=function(t){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new yt.Event("movestart",{originalEvent:t})),this._map.fire(new yt.Event("zoomstart",{originalEvent:t}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var e=b.mousePos(this._el,t);this._around=yt.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},un.prototype._onScrollFrame=function(){var t=this;if(this._frameId=null,this.isActive()){var e=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate,n=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==n&&(n=1/n);var r="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o="number"==typeof this._targetZoom?this._targetZoom:e.zoom,a=this._startZoom,s=this._easing,l=!1;if("wheel"===this._type&&a&&s){var u=Math.min((yt.browser.now()-this._lastWheelEventTime)/200,1),c=s(u);e.zoom=yt.number(a,o,c),u<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else e.zoom=o,l=!0;e.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new yt.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new yt.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._zooming=!1,t._map.fire(new yt.Event("zoomend",{originalEvent:t._lastWheelEvent})),t._map.fire(new yt.Event("moveend",{originalEvent:t._lastWheelEvent})),delete t._targetZoom},200))}},un.prototype._smoothOutEasing=function(t){var e=yt.ease;if(this._prevEase){var i=this._prevEase,n=(yt.browser.now()-i.start)/i.duration,r=i.easing(n+.01)-i.easing(n),o=.27/Math.sqrt(r*r+1e-4)*.01,a=Math.sqrt(.0729-o*o);e=yt.bezier(o,a,.25,1)}return this._prevEase={start:yt.browser.now(),duration:t,easing:e},e};var cn=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1,yt.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};cn.prototype.isEnabled=function(){return!!this._enabled},cn.prototype.isActive=function(){return!!this._active},cn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},cn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},cn.prototype.onMouseDown=function(t){this.isEnabled()&&t.shiftKey&&0===t.button&&(yt.window.document.addEventListener("mousemove",this._onMouseMove,!1),yt.window.document.addEventListener("keydown",this._onKeyDown,!1),yt.window.document.addEventListener("mouseup",this._onMouseUp,!1),b.disableDrag(),this._startPos=this._lastPos=b.mousePos(this._el,t),this._active=!0)},cn.prototype._onMouseMove=function(t){var e=b.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var i=this._startPos;this._lastPos=e,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var n=Math.min(i.x,e.x),r=Math.max(i.x,e.x),o=Math.min(i.y,e.y),a=Math.max(i.y,e.y);b.setTransform(this._box,"translate("+n+"px,"+o+"px)"),this._box.style.width=r-n+"px",this._box.style.height=a-o+"px"}},cn.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,i=b.mousePos(this._el,t);this._finish(),b.suppressClick(),e.x===i.x&&e.y===i.y?this._fireEvent("boxzoomcancel",t):this._map.fitScreenCoordinates(e,i,this._map.getBearing(),{linear:!0}).fire(new yt.Event("boxzoomend",{originalEvent:t}))}},cn.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},cn.prototype._finish=function(){this._active=!1,yt.window.document.removeEventListener("mousemove",this._onMouseMove,!1),yt.window.document.removeEventListener("keydown",this._onKeyDown,!1),yt.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},cn.prototype._fireEvent=function(t,e){return this._map.fire(new yt.Event(t,{originalEvent:e}))};var hn=yt.bezier(0,0,.25,1),pn=function(t,e){this._map=t,this._el=e.element||t.getCanvasContainer(),this._state="disabled",this._button=e.button||"right",this._bearingSnap=e.bearingSnap||0,this._pitchWithRotate=!1!==e.pitchWithRotate,this._clickTolerance=e.clickTolerance||1,yt.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};pn.prototype.isEnabled=function(){return"disabled"!==this._state},pn.prototype.isActive=function(){return"active"===this._state},pn.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},pn.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},pn.prototype.onMouseDown=function(t){if("enabled"===this._state){var e="touchstart"===t.type;if(e)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=b.mouseButton(t),t.altKey||t.metaKey)return;if(this._eventButton!==(t.ctrlKey?0:2))return}else{if(t.ctrlKey||0!==b.mouseButton(t))return;this._eventButton=0}b.disableDrag(),e?(yt.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),yt.window.document.addEventListener("touchend",this._onMouseUp)):(yt.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),yt.window.document.addEventListener("mouseup",this._onMouseUp)),yt.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[yt.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=b.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},pn.prototype._onMouseMove=function(t){var e=b.mousePos(this._el,t);this._lastPos.equals(e)||"pending"===this._state&&e.dist(this._startPos)<this._clickTolerance||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},pn.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform,i=this._prevPos,n=this._lastPos,r=e.bearing-.8*(i.x-n.x),o=e.pitch- -.5*(i.y-n.y),a=this._inertia,s=a[a.length-1];this._drainInertiaBuffer(),a.push([yt.browser.now(),this._map._normalizeBearing(r,s[1])]);var l=e.bearing;if(e.bearing=r,this._pitchWithRotate){var u=e.pitch;e.pitch=o,e.pitch!==u&&this._fireEvent("pitch",t)}e.bearing!==l&&this._fireEvent("rotate",t),this._fireEvent("move",t),delete this._lastMoveEvent,this._prevPos=this._lastPos}},pn.prototype._onMouseUp=function(t){var e="touchend"===t.type;if(e&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),e||b.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",b.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},pn.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},pn.prototype._unbind=function(){yt.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),yt.window.document.removeEventListener("mouseup",this._onMouseUp),yt.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),yt.window.document.removeEventListener("touchend",this._onMouseUp),yt.window.removeEventListener("blur",this._onBlur),b.enableDrag()},pn.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},pn.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var i=this._map,n=i.getBearing(),r=this._inertia,o=function(){Math.abs(n)<e._bearingSnap?i.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(r.length<2)o();else{var a=r[0],s=r[r.length-1],l=i._normalizeBearing(n,r[r.length-2][1]),u=s[1]-a[1],c=u<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==u&&0!==h){var p=Math.abs(u*(.25/h));180<p&&(p=180);var d=p/180;l+=c*p*(d/2),Math.abs(i._normalizeBearing(l,0))<this._bearingSnap&&(l=i._normalizeBearing(0,l)),i.rotateTo(l,{duration:1e3*d,easing:hn,noMoveStart:!0},{originalEvent:t})}else o()}},pn.prototype._fireEvent=function(t,e){return this._map.fire(new yt.Event(t,e?{originalEvent:e}:{}))},pn.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=yt.browser.now();0<t.length&&160<e-t[0][0];)t.shift()};var dn={linearity:.3,easing:yt.bezier(0,0,.3,1),maxSpeed:1400,deceleration:2500},fn=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._state="disabled",this._clickTolerance=e.clickTolerance||1,this._inertiaOptions=dn,yt.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};fn.prototype.isEnabled=function(){return"disabled"!==this._state},fn.prototype.isActive=function(){return"active"===this._state},fn.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled",this._inertiaOptions=yt.extend(dn,t))},fn.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},fn.prototype.onMouseDown=function(t){"enabled"===this._state&&(t.ctrlKey||0!==b.mouseButton(t)||(b.addEventListener(yt.window.document,"mousemove",this._onMove,{capture:!0}),b.addEventListener(yt.window.document,"mouseup",this._onMouseUp),this._start(t)))},fn.prototype.onTouchStart=function(t){this.isEnabled()&&(t.touches&&1<t.touches.length&&("pending"===this._state||"active"===this._state)||(b.addEventListener(yt.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),b.addEventListener(yt.window.document,"touchend",this._onTouchEnd),this._start(t)))},fn.prototype._start=function(t){yt.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=b.mousePos(this._el,t),this._startTouch=this._lastTouch=yt.window.TouchEvent&&t instanceof yt.window.TouchEvent?b.touchPos(this._el,t):null,this._inertia=[[yt.browser.now(),this._startPos]]},fn.prototype._touchesMatch=function(t,i){return!(!t||!i||t.length!==i.length)&&t.every(function(t,e){return i[e]===t})},fn.prototype._onMove=function(t){t.preventDefault();var e=yt.window.TouchEvent&&t instanceof yt.window.TouchEvent?b.touchPos(this._el,t):null,i=b.mousePos(this._el,t);(e?this._touchesMatch(this._lastTouch,e):this._lastPos.equals(i))||"pending"===this._state&&i.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=t,this._lastPos=i,this._lastTouch=e,this._drainInertiaBuffer(),this._inertia.push([yt.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},fn.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t)if(this._map.touchZoomRotate.isActive())this._abort(t);else if(this._shouldStart&&(this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._shouldStart=!1),this.isActive()){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._prevPos=this._lastPos,delete this._lastMoveEvent}},fn.prototype._onMouseUp=function(t){if(0===b.mouseButton(t))switch(this._state){case"active":this._state="enabled",b.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},fn.prototype._onTouchEnd=function(t){if(t.touches&&0!==t.touches.length)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(t)}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},fn.prototype._abort=function(t){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",t),this._fireEvent("moveend",t)),this._unbind(),this._deactivate(),yt.window.TouchEvent&&t instanceof yt.window.TouchEvent&&1<t.touches.length&&b.addEventListener(yt.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},fn.prototype._onBlur=function(t){this._abort(t)},fn.prototype._unbind=function(){b.removeEventListener(yt.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),b.removeEventListener(yt.window.document,"touchend",this._onTouchEnd),b.removeEventListener(yt.window.document,"mousemove",this._onMove,{capture:!0}),b.removeEventListener(yt.window.document,"mouseup",this._onMouseUp),b.removeEventListener(yt.window,"blur",this._onBlur)},fn.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},fn.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var i=e[e.length-1],n=e[0],r=i[1].sub(n[1]),o=(i[0]-n[0])/1e3;if(0===o||i[1].equals(n[1]))this._fireEvent("moveend",t);else{var a=this._inertiaOptions,s=a.linearity,l=a.easing,u=a.maxSpeed,c=a.deceleration,h=r.mult(s/o),p=h.mag();u<p&&(p=u,h._unit()._mult(p));var d=p/(c*s),f=h.mult(-d/2);this._map.panBy(f,{duration:1e3*d,easing:l,noMoveStart:!0},{originalEvent:t})}}},fn.prototype._fireEvent=function(t,e){return this._map.fire(new yt.Event(t,e?{originalEvent:e}:{}))},fn.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=yt.browser.now();0<t.length&&160<e-t[0][0];)t.shift()};var mn=function(t){this._map=t,this._el=t.getCanvasContainer(),yt.bindAll(["_onKeyDown"],this)};function gn(t){return t*(2-t)}mn.prototype.isEnabled=function(){return!!this._enabled},mn.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},mn.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},mn.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,i=0,n=0,r=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?n=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),l={duration:300,delayEndEvents:500,easing:gn,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*i,pitch:a.getPitch()+10*n,offset:[100*-r,100*-o],center:a.getCenter()};a.easeTo(l,{originalEvent:t})}};var vn=function(t){this._map=t,yt.bindAll(["_onDblClick","_onZoomEnd"],this)};vn.prototype.isEnabled=function(){return!!this._enabled},vn.prototype.isActive=function(){return!!this._active},vn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},vn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},vn.prototype.onTouchStart=function(t){var e=this;if(this.isEnabled()&&!(1<t.points.length))if(this._tapped){var i=this._tappedPoint;if(i&&i.dist(t.points[0])<=30){t.originalEvent.preventDefault();var n=function(){e._tapped&&e._zoom(t),e._map.off("touchcancel",r),e._resetTapped()},r=function(){e._map.off("touchend",n),e._resetTapped()};this._map.once("touchend",n),this._map.once("touchcancel",r)}else this._resetTapped()}else this._tappedPoint=t.points[0],this._tapped=setTimeout(function(){e._tapped=null,e._tappedPoint=null},300)},vn.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},vn.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},vn.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},vn.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var yn=yt.bezier(0,0,.15,1),_n=function(t){this._map=t,this._el=t.getCanvasContainer(),yt.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};_n.prototype.isEnabled=function(){return!!this._enabled},_n.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},_n.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},_n.prototype.disableRotation=function(){this._rotationDisabled=!0},_n.prototype.enableRotation=function(){this._rotationDisabled=!1},_n.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},_n.prototype.onStart=function(t){if(this.isEnabled()&&2===t.touches.length){var e=b.mousePos(this._el,t.touches[0]),i=b.mousePos(this._el,t.touches[1]),n=e.add(i).div(2);this._startVec=e.sub(i),this._startAround=this._map.transform.pointLocation(n),this._gestureIntent=void 0,this._inertia=[],b.addEventListener(yt.window.document,"touchmove",this._onMove,{passive:!1}),b.addEventListener(yt.window.document,"touchend",this._onEnd)}},_n.prototype._getTouchEventData=function(t){var e=b.mousePos(this._el,t.touches[0]),i=b.mousePos(this._el,t.touches[1]),n=e.sub(i);return{vec:n,center:e.add(i).div(2),scale:n.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*n.angleWith(this._startVec)/Math.PI}},_n.prototype._onMove=function(t){if(2===t.touches.length){var e=this._getTouchEventData(t),i=e.vec,n=e.scale,r=e.bearing;if(!this._gestureIntent){var o=this._rotationDisabled&&1!==n||.15<Math.abs(1-n);10<Math.abs(r)?this._gestureIntent="rotate":o&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new yt.Event(this._gestureIntent+"start",{originalEvent:t})),this._map.fire(new yt.Event("movestart",{originalEvent:t})),this._startVec=i)}this._lastTouchEvent=t,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),t.preventDefault()}},_n.prototype._onTouchFrame=function(){this._frameId=null;var t=this._gestureIntent;if(t){var e=this._map.transform;this._startScale||(this._startScale=e.scale,this._startBearing=e.bearing);var i=this._getTouchEventData(this._lastTouchEvent),n=i.center,r=i.bearing,o=i.scale,a=e.pointLocation(n),s=e.locationPoint(a);"rotate"===t&&(e.bearing=this._startBearing+r),e.zoom=e.scaleZoom(this._startScale*o),e.setLocationAtPoint(this._startAround,s),this._map.fire(new yt.Event(t,{originalEvent:this._lastTouchEvent})),this._map.fire(new yt.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([yt.browser.now(),o,n])}},_n.prototype._onEnd=function(t){b.removeEventListener(yt.window.document,"touchmove",this._onMove,{passive:!1}),b.removeEventListener(yt.window.document,"touchend",this._onEnd);var e=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,e){this._map.fire(new yt.Event(e+"end",{originalEvent:t})),this._drainInertiaBuffer();var n=this._inertia,r=this._map;if(n.length<2)r.snapToNorth({},{originalEvent:t});else{var o=n[n.length-1],a=n[0],s=r.transform.scaleZoom(i*o[1]),l=r.transform.scaleZoom(i*a[1]),u=(o[0]-a[0])/1e3,c=o[2];if(0!==u&&s!==l){var h=.15*(s-l)/u;2.5<Math.abs(h)&&(h=0<h?2.5:-2.5);var p=1e3*Math.abs(h/(12*.15));r.easeTo({zoom:s+h*p/2e3,duration:p,easing:yn,around:this._aroundCenter?r.getCenter():r.unproject(c),noMoveStart:!0},{originalEvent:t})}else r.snapToNorth({},{originalEvent:t})}}},_n.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=yt.browser.now();2<t.length&&160<e-t[0][0];)t.shift()};var bn={scrollZoom:un,boxZoom:cn,dragRotate:pn,dragPan:fn,keyboard:mn,doubleClickZoom:vn,touchZoomRotate:_n},xn=function(i){function t(t,e){i.call(this),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=e.bearingSnap,yt.bindAll(["_renderFrameCallback"],this)}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.getCenter=function(){return new yt.LngLat(this.transform.center.lng,this.transform.center.lat)},t.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},t.prototype.panBy=function(t,e,i){return t=yt.Point.convert(t).mult(-1),this.panTo(this.transform.center,yt.extend({offset:t},e),i)},t.prototype.panTo=function(t,e,i){return this.easeTo(yt.extend({center:t},e),i)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},t.prototype.zoomTo=function(t,e,i){return this.easeTo(yt.extend({zoom:t},e),i)},t.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},t.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},t.prototype.getPadding=function(){return this.transform.padding},t.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},t.prototype.rotateTo=function(t,e,i){return this.easeTo(yt.extend({bearing:t},e),i)},t.prototype.resetNorth=function(t,e){return this.rotateTo(0,yt.extend({duration:1e3},t),e),this},t.prototype.resetNorthPitch=function(t,e){return this.easeTo(yt.extend({bearing:0,pitch:0,duration:1e3},t),e),this},t.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},t.prototype.cameraForBounds=function(t,e){return t=yt.LngLatBounds.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,e)},t.prototype._cameraForBoxAndBearing=function(t,e,i,n){var r={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=yt.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var o=n.padding;n.padding={top:o,bottom:o,right:o,left:o}}n.padding=yt.extend(r,n.padding);var a=this.transform,s=a.padding,l=a.project(yt.LngLat.convert(t)),u=a.project(yt.LngLat.convert(e)),c=l.rotate(-i*Math.PI/180),h=u.rotate(-i*Math.PI/180),p=new yt.Point(Math.max(c.x,h.x),Math.max(c.y,h.y)),d=new yt.Point(Math.min(c.x,h.x),Math.min(c.y,h.y)),f=p.sub(d),m=(a.width-(s.left+s.right+n.padding.left+n.padding.right))/f.x,g=(a.height-(s.top+s.bottom+n.padding.top+n.padding.bottom))/f.y;if(!(g<0||m<0)){var v=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),n.maxZoom),y=yt.Point.convert(n.offset),_=new yt.Point(y.x+(n.padding.left-n.padding.right)/2,y.y+(n.padding.top-n.padding.bottom)/2).mult(a.scale/a.zoomScale(v));return{center:a.unproject(l.add(u).div(2).sub(_)),zoom:v,bearing:i}}yt.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},t.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},t.prototype.fitScreenCoordinates=function(t,e,i,n,r){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(yt.Point.convert(t)),this.transform.pointLocation(yt.Point.convert(e)),i,n),n,r)},t.prototype._fitInternal=function(t,e,i){return t?(e=yt.extend(t,e)).linear?this.easeTo(e,i):this.flyTo(e,i):this},t.prototype.jumpTo=function(t,e){this.stop();var i=this.transform,n=!1,r=!1,o=!1;return"zoom"in t&&i.zoom!==+t.zoom&&(n=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=yt.LngLat.convert(t.center)),"bearing"in t&&i.bearing!==+t.bearing&&(r=!0,i.bearing=+t.bearing),"pitch"in t&&i.pitch!==+t.pitch&&(o=!0,i.pitch=+t.pitch),null==t.padding||i.isPaddingEqual(t.padding)||(i.padding=t.padding),this.fire(new yt.Event("movestart",e)).fire(new yt.Event("move",e)),n&&this.fire(new yt.Event("zoomstart",e)).fire(new yt.Event("zoom",e)).fire(new yt.Event("zoomend",e)),r&&this.fire(new yt.Event("rotatestart",e)).fire(new yt.Event("rotate",e)).fire(new yt.Event("rotateend",e)),o&&this.fire(new yt.Event("pitchstart",e)).fire(new yt.Event("pitch",e)).fire(new yt.Event("pitchend",e)),this.fire(new yt.Event("moveend",e))},t.prototype.easeTo=function(t,o){var a=this;this.stop(),(!1===(t=yt.extend({offset:[0,0],duration:500,easing:yt.ease},t)).animate||!t.essential&&yt.browser.prefersReducedMotion)&&(t.duration=0);var s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),h=this.getPadding(),p="zoom"in t?+t.zoom:l,d="bearing"in t?this._normalizeBearing(t.bearing,u):u,f="pitch"in t?+t.pitch:c,m="padding"in t?t.padding:s.padding,g=yt.Point.convert(t.offset),v=s.centerPoint.add(g),e=s.pointLocation(v),i=yt.LngLat.convert(t.center||e);this._normalizeCenter(i);var y,_,b=s.project(e),x=s.project(i).sub(b),w=s.zoomScale(p-l);return t.around&&(y=yt.LngLat.convert(t.around),_=s.locationPoint(y)),this._zooming=p!==l,this._rotating=u!==d,this._pitching=f!==c,this._padding=!s.isPaddingEqual(m),this._prepareEase(o,t.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(t){if(a._zooming&&(s.zoom=yt.number(l,p,t)),a._rotating&&(s.bearing=yt.number(u,d,t)),a._pitching&&(s.pitch=yt.number(c,f,t)),a._padding&&(s.interpolatePadding(h,m,t),v=s.centerPoint.add(g)),y)s.setLocationAtPoint(y,_);else{var e=s.zoomScale(s.zoom-l),i=l<p?Math.min(2,w):Math.max(.5,w),n=Math.pow(i,1-t),r=s.unproject(b.add(x.mult(t*n)).mult(e));s.setLocationAtPoint(s.renderWorldCopies?r.wrap():r,v)}a._fireMoveEvents(o)},function(){t.delayEndEvents?a._easeEndTimeoutID=setTimeout(function(){return a._afterEase(o)},t.delayEndEvents):a._afterEase(o)},t),this},t.prototype._prepareEase=function(t,e){this._moving=!0,e||this.fire(new yt.Event("movestart",t)),this._zooming&&this.fire(new yt.Event("zoomstart",t)),this._rotating&&this.fire(new yt.Event("rotatestart",t)),this._pitching&&this.fire(new yt.Event("pitchstart",t))},t.prototype._fireMoveEvents=function(t){this.fire(new yt.Event("move",t)),this._zooming&&this.fire(new yt.Event("zoom",t)),this._rotating&&this.fire(new yt.Event("rotate",t)),this._pitching&&this.fire(new yt.Event("pitch",t))},t.prototype._afterEase=function(t){var e=this._zooming,i=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,e&&this.fire(new yt.Event("zoomend",t)),i&&this.fire(new yt.Event("rotateend",t)),n&&this.fire(new yt.Event("pitchend",t)),this.fire(new yt.Event("moveend",t))},t.prototype.flyTo=function(t,r){var o=this;if(!t.essential&&yt.browser.prefersReducedMotion){var e=yt.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(e,r)}this.stop(),t=yt.extend({offset:[0,0],speed:1.2,curve:1.42,easing:yt.ease},t);var a=this.transform,s=this.getZoom(),l=this.getBearing(),u=this.getPitch(),c=this.getPadding(),h="zoom"in t?yt.clamp(+t.zoom,a.minZoom,a.maxZoom):s,p="bearing"in t?this._normalizeBearing(t.bearing,l):l,d="pitch"in t?+t.pitch:u,f="padding"in t?t.padding:a.padding,i=a.zoomScale(h-s),m=yt.Point.convert(t.offset),g=a.centerPoint.add(m),n=a.pointLocation(g),v=yt.LngLat.convert(t.center||n);this._normalizeCenter(v);var y=a.project(n),_=a.project(v).sub(y),b=t.curve,x=Math.max(a.width,a.height),w=x/i,S=_.mag();if("minZoom"in t){var T=yt.clamp(Math.min(t.minZoom,s,h),a.minZoom,a.maxZoom),C=x/a.zoomScale(T-s);b=Math.sqrt(C/S*2)}var E=b*b;function k(t){var e=(w*w-x*x+(t?-1:1)*E*E*S*S)/(2*(t?w:x)*E*S);return Math.log(Math.sqrt(e*e+1)-e)}function A(t){return(Math.exp(t)-Math.exp(-t))/2}function I(t){return(Math.exp(t)+Math.exp(-t))/2}var P=k(0),z=function(t){return I(P)/I(P+b*t)},M=function(t){return x*((I(P)*(A(e=P+b*t)/I(e))-A(P))/E)/S;var e},D=(k(1)-P)/b;if(Math.abs(S)<1e-6||!isFinite(D)){if(Math.abs(x-w)<1e-6)return this.easeTo(t,r);var L=w<x?-1:1;D=Math.abs(Math.log(w/x))/b,M=function(){return 0},z=function(t){return Math.exp(L*b*t)}}return t.duration="duration"in t?+t.duration:1e3*D/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=l!==p,this._pitching=d!==u,this._padding=!a.isPaddingEqual(f),this._prepareEase(r,!1),this._ease(function(t){var e=t*D,i=1/z(e);a.zoom=1===t?h:s+a.scaleZoom(i),o._rotating&&(a.bearing=yt.number(l,p,t)),o._pitching&&(a.pitch=yt.number(u,d,t)),o._padding&&(a.interpolatePadding(c,f,t),g=a.centerPoint.add(m));var n=1===t?v:a.unproject(y.add(_.mult(M(e))).mult(i));a.setLocationAtPoint(a.renderWorldCopies?n.wrap():n,g),o._fireMoveEvents(r)},function(){return o._afterEase(r)},t),this},t.prototype.isEasing=function(){return!!this._easeFrameId},t.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},t.prototype._ease=function(t,e,i){!1===i.animate||0===i.duration?(t(1),e()):(this._easeStart=yt.browser.now(),this._easeOptions=i,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},t.prototype._renderFrameCallback=function(){var t=Math.min((yt.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},t.prototype._normalizeBearing=function(t,e){t=yt.wrap(t,-180,180);var i=Math.abs(t-e);return Math.abs(t-360-e)<i&&(t-=360),Math.abs(t+360-e)<i&&(t+=360),t},t.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=180<i?-360:i<-180?360:0}},t}(yt.Evented),wn=function(t){void 0===t&&(t={}),this.options=t,yt.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};wn.prototype.getDefaultPosition=function(){return"bottom-right"},wn.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},wn.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},wn.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||yt.config.ACCESS_TOKEN}];if(t){var e=n.reduce(function(t,e,i){return e.value&&(t+=e.key+"="+e.value+(i<n.length-1?"&":"")),t},"?");t.href=yt.config.FEEDBACK_URL+"/"+e+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow"}},wn.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},wn.prototype._updateAttributions=function(){if(this._map.style){var n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&n.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var e=this._map.style.sourceCaches;for(var i in e){var r=e[i];if(r.used){var o=r.getSource();o.attribution&&n.indexOf(o.attribution)<0&&n.push(o.attribution)}}n.sort(function(t,e){return t.length-e.length});var a=(n=n.filter(function(t,e){for(var i=e+1;i<n.length;i++)if(0<=n[i].indexOf(t))return!1;return!0})).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,n.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},wn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Sn=function(){yt.bindAll(["_updateLogo"],this),yt.bindAll(["_updateCompact"],this)};Sn.prototype.onAdd=function(t){this._map=t,this._container=b.create("div","mapboxgl-ctrl");var e=b.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Sn.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Sn.prototype.getDefaultPosition=function(){return"bottom-left"},Sn.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Sn.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Sn.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Tn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Tn.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Tn.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,n=e?this._queue.concat(e):this._queue;i<n.length;i+=1){var r=n[i];if(r.id===t)return void(r.cancelled=!0)}},Tn.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if(!n.cancelled&&(n.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Tn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Cn={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},En=yt.window.HTMLImageElement,kn=yt.window.HTMLElement,An=yt.window.ImageBitmap,In={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Pn=function(u){function t(t){var e=this;if(null!=(t=yt.extend({},In,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&60<t.maxPitch)throw new Error("maxPitch must be less than or equal to 60");var i=new nn(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies);if(u.call(this,i,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new Tn,this._controls=[],this._mapId=yt.uniqueId(),this._locale=yt.extend({},Cn,t.locale),this._requestManager=new yt.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=yt.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof kn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),yt.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return e._update(!1)}),this.on("moveend",function(){return e._update(!1)}),this.on("zoom",function(){return e._update(!0)}),void 0!==yt.window&&(yt.window.addEventListener("online",this._onWindowOnline,!1),yt.window.addEventListener("resize",this._onWindowResize,!1)),function(i,n){var r=i.getCanvasContainer(),o=null,a=!1,s=null;for(var t in bn)i[t]=new bn[t](i,n),n.interactive&&n[t]&&i[t].enable(n[t]);b.addEventListener(r,"mouseout",function(t){i.fire(new an("mouseout",i,t))}),b.addEventListener(r,"mousedown",function(t){a=!0,s=b.mousePos(r,t);var e=new an("mousedown",i,t);i.fire(e),e.defaultPrevented||(n.interactive&&!i.doubleClickZoom.isActive()&&i.stop(),i.boxZoom.onMouseDown(t),i.boxZoom.isActive()||i.dragPan.isActive()||i.dragRotate.onMouseDown(t),i.boxZoom.isActive()||i.dragRotate.isActive()||i.dragPan.onMouseDown(t))}),b.addEventListener(r,"mouseup",function(t){var e=i.dragRotate.isActive();o&&!e&&i.fire(new an("contextmenu",i,o)),o=null,a=!1,i.fire(new an("mouseup",i,t))}),b.addEventListener(r,"mousemove",function(t){if(!i.dragPan.isActive()&&!i.dragRotate.isActive()){for(var e=t.target;e&&e!==r;)e=e.parentNode;e===r&&i.fire(new an("mousemove",i,t))}}),b.addEventListener(r,"mouseover",function(t){for(var e=t.target;e&&e!==r;)e=e.parentNode;e===r&&i.fire(new an("mouseover",i,t))}),b.addEventListener(r,"touchstart",function(t){var e=new sn("touchstart",i,t);i.fire(e),e.defaultPrevented||(n.interactive&&i.stop(),i.boxZoom.isActive()||i.dragRotate.isActive()||i.dragPan.onTouchStart(t),i.touchZoomRotate.onStart(t),i.doubleClickZoom.onTouchStart(e))},{passive:!1}),b.addEventListener(r,"touchmove",function(t){i.fire(new sn("touchmove",i,t))},{passive:!1}),b.addEventListener(r,"touchend",function(t){i.fire(new sn("touchend",i,t))}),b.addEventListener(r,"touchcancel",function(t){i.fire(new sn("touchcancel",i,t))}),b.addEventListener(r,"click",function(t){var e=b.mousePos(r,t);(!s||e.equals(s)||e.dist(s)<n.clickTolerance)&&i.fire(new an("click",i,t))}),b.addEventListener(r,"dblclick",function(t){var e=new an("dblclick",i,t);i.fire(e),e.defaultPrevented||i.doubleClickZoom.onDblClick(e)}),b.addEventListener(r,"contextmenu",function(t){var e=i.dragRotate.isActive();a||e?a&&(o=t):i.fire(new an("contextmenu",i,t)),(i.dragRotate.isEnabled()||i.listens("contextmenu"))&&t.preventDefault()}),b.addEventListener(r,"wheel",function(t){n.interactive&&i.stop();var e=new ln("wheel",i,t);i.fire(e),e.defaultPrevented||i.scrollZoom.onWheel(t)},{passive:!1})}(this,t),this._hash=t.hash&&new on("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,yt.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new wn({customAttribution:t.customAttribution})),this.addControl(new Sn,t.logoPosition),this.on("style.load",function(){e.transform.unmodified&&e.jumpTo(e.style.stylesheet)}),this.on("data",function(t){e._update("style"===t.dataType),e.fire(new yt.Event(t.dataType+"data",t))}),this.on("dataloading",function(t){e.fire(new yt.Event(t.dataType+"dataloading",t))})}u&&(t.__proto__=u);var e={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return((t.prototype=Object.create(u&&u.prototype)).constructor=t).prototype._getMapId=function(){return this._mapId},t.prototype.addControl=function(t,e){if(void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right"),!t||!t.onAdd)return this.fire(new yt.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=t.onAdd(this);this._controls.push(t);var n=this._controlPositions[e];return-1!==e.indexOf("bottom")?n.insertBefore(i,n.firstChild):n.appendChild(i),this},t.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new yt.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var e=this._controls.indexOf(t);return-1<e&&this._controls.splice(e,1),t.onRemove(this),this},t.prototype.resize=function(t){var e=this._containerDimensions(),i=e[0],n=e[1];return this._resizeCanvas(i,n),this.transform.resize(i,n),this.painter.resize(i,n),this.fire(new yt.Event("movestart",t)).fire(new yt.Event("move",t)).fire(new yt.Event("resize",t)).fire(new yt.Event("moveend",t)),this},t.prototype.getBounds=function(){return this.transform.getBounds()},t.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},t.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(yt.LngLatBounds.convert(t)),this._update()},t.prototype.setMinZoom=function(t){if(-2<=(t=null==t?-2:t)&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(0<=t&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},t.prototype.getMinPitch=function(){return this.transform.minPitch},t.prototype.setMaxPitch=function(t){if(60<(t=null==t?60:t))throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},t.prototype.getMaxPitch=function(){return this.transform.maxPitch},t.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},t.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},t.prototype.project=function(t){return this.transform.locationPoint(yt.LngLat.convert(t))},t.prototype.unproject=function(t){return this.transform.pointLocation(yt.Point.convert(t))},t.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},t.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},t.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},t.prototype._createDelegatedListener=function(i,n,r){var t,o=this;if("mouseenter"===i||"mouseover"===i){var a=!1;return{layer:n,listener:r,delegates:{mousemove:function(t){var e=o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length?a||(a=!0,r.call(o,new an(i,o,t.originalEvent,{features:e}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===i||"mouseout"===i){var e=!1;return{layer:n,listener:r,delegates:{mousemove:function(t){(o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[]).length?e=!0:e&&(e=!1,r.call(o,new an(i,o,t.originalEvent)))},mouseout:function(t){e&&(e=!1,r.call(o,new an(i,o,t.originalEvent)))}}}}return{layer:n,listener:r,delegates:(t={},t[i]=function(t){var e=o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length&&(t.features=e,r.call(o,t),delete t.features)},t)}},t.prototype.on=function(t,e,i){if(void 0===i)return u.prototype.on.call(this,t,e);var n=this._createDelegatedListener(t,e,i);for(var r in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(n),n.delegates)this.on(r,n.delegates[r]);return this},t.prototype.once=function(t,e,i){if(void 0===i)return u.prototype.once.call(this,t,e);var n=this._createDelegatedListener(t,e,i);for(var r in n.delegates)this.once(r,n.delegates[r]);return this},t.prototype.off=function(o,a,s){var l=this;return void 0===s?u.prototype.off.call(this,o,a):(this._delegatedListeners&&this._delegatedListeners[o]&&function(t){for(var e=t[o],i=0;i<e.length;i++){var n=e[i];if(n.layer===a&&n.listener===s){for(var r in n.delegates)l.off(r,n.delegates[r]);return e.splice(i,1)}}}(this._delegatedListeners),this)},t.prototype.queryRenderedFeatures=function(t,e){if(!this.style)return[];var i;if(void 0!==e||void 0===t||t instanceof yt.Point||Array.isArray(t)||(e=t,t=void 0),e=e||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof yt.Point||"number"==typeof t[0])i=[yt.Point.convert(t)];else{var n=yt.Point.convert(t[0]),r=yt.Point.convert(t[1]);i=[n,new yt.Point(r.x,n.y),r,new yt.Point(n.x,r.y),n]}return this.style.queryRenderedFeatures(i,e,this.transform)},t.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},t.prototype.setStyle=function(t,e){return!1!==(e=yt.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},e)).diff&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(t,e))},t.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},t.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Oe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)):delete this.style,this},t.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Oe(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},t.prototype._diffStyle=function(t,i){var n=this;if("string"==typeof t){var e=this._requestManager.normalizeStyleURL(t),r=this._requestManager.transformRequest(e,yt.ResourceType.Style);yt.getJSON(r,function(t,e){t?n.fire(new yt.ErrorEvent(t)):e&&n._updateDiff(e,i)})}else"object"==typeof t&&this._updateDiff(t,i)},t.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(t){yt.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():yt.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},t.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];if(void 0!==e)return e.loaded();this.fire(new yt.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},t.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var n in i){var r=i[n];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},t.prototype.addSourceType=function(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)},t.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},t.prototype.getSource=function(t){return this.style.getSource(t)},t.prototype.addImage=function(t,e,i){void 0===i&&(i={});var n=i.pixelRatio;void 0===n&&(n=1);var r=i.sdf;void 0===r&&(r=!1);var o=i.stretchX,a=i.stretchY,s=i.content;if(this._lazyInitEmptyStyle(),e instanceof En||An&&e instanceof An){var l=yt.browser.getImageData(e);this.style.addImage(t,{data:new yt.RGBAImage({width:l.width,height:l.height},l.data),pixelRatio:n,stretchX:o,stretchY:a,content:s,sdf:r,version:0})}else{if(void 0===e.width||void 0===e.height)return this.fire(new yt.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=e;this.style.addImage(t,{data:new yt.RGBAImage({width:e.width,height:e.height},new Uint8Array(e.data)),pixelRatio:n,stretchX:o,stretchY:a,content:s,sdf:r,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}},t.prototype.updateImage=function(t,e){var i=this.style.getImage(t);if(!i)return this.fire(new yt.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var n=e instanceof En||An&&e instanceof An?yt.browser.getImageData(e):e,r=n.width,o=n.height,a=n.data;return void 0===r||void 0===o?this.fire(new yt.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):r!==i.data.width||o!==i.data.height?this.fire(new yt.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(i.data.replace(a,!(e instanceof En||An&&e instanceof An)),void this.style.updateImage(t,i))},t.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new yt.ErrorEvent(new Error("Missing required image id"))),!1)},t.prototype.removeImage=function(t){this.style.removeImage(t)},t.prototype.loadImage=function(t,e){yt.getImage(this._requestManager.transformRequest(t,yt.ResourceType.Image),e)},t.prototype.listImages=function(){return this.style.listImages()},t.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},t.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},t.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},t.prototype.getLayer=function(t){return this.style.getLayer(t)},t.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},t.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},t.prototype.getFilter=function(t){return this.style.getFilter(t)},t.prototype.setPaintProperty=function(t,e,i,n){return void 0===n&&(n={}),this.style.setPaintProperty(t,e,i,n),this._update(!0)},t.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},t.prototype.setLayoutProperty=function(t,e,i,n){return void 0===n&&(n={}),this.style.setLayoutProperty(t,e,i,n),this._update(!0)},t.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},t.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},t.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},t.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},t.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==yt.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&yt.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},t.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=b.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var n=this._controlContainer=b.create("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){r[t]=b.create("div","mapboxgl-ctrl-"+t,n)})},t.prototype._resizeCanvas=function(t,e){var i=yt.browser.devicePixelRatio||1;this._canvas.width=i*t,this._canvas.height=i*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},t.prototype._setupPainter=function(){var t=yt.extend({},i.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);e?(this.painter=new Ji(e,this.transform),yt.webpSupported.testSupport(e)):this.fire(new yt.ErrorEvent(new Error("Failed to initialize WebGL")))},t.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new yt.Event("webglcontextlost",{originalEvent:t}))},t.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new yt.Event("webglcontextrestored",{originalEvent:t}))},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},t.prototype._update=function(t){return this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint()),this},t.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},t.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},t.prototype._render=function(){var e,i=this,t=0,n=this.painter.context.extTimerQuery;this.listens("gpu-timing-frame")&&(e=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),t=yt.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var r=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var o=this.transform.zoom,a=yt.browser.now();this.style.zoomHistory.update(o,a);var s=new yt.EvaluationParameters(o,{now:a,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=s.crossFadingFactor();1===l&&l===this._crossFadingFactor||(r=!0,this._crossFadingFactor=l),this.style.update(s)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new yt.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new yt.Event("load"))),this.style&&(this.style.hasTransitions()||r)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var u=yt.browser.now()-t;n.endQueryEXT(n.TIME_ELAPSED_EXT,e),setTimeout(function(){var t=n.getQueryObjectEXT(e,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(e),i.fire(new yt.Event("gpu-timing-frame",{cpuTime:u,gpuTime:t}))},50)}if(this.listens("gpu-timing-layer")){var c=this.painter.collectGpuTimers();setTimeout(function(){var t=i.painter.queryGpuTimers(c);i.fire(new yt.Event("gpu-timing-layer",{layerTimes:t}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new yt.Event("idle"))),this},t.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,e=this._controls;t<e.length;t+=1)e[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.setStyle(null),void 0!==yt.window&&(yt.window.removeEventListener("resize",this._onWindowResize,!1),yt.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),zn(this._canvasContainer),zn(this._controlContainer),zn(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new yt.Event("remove"))},t.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=yt.browser.frame(function(t){e._frame=null,e._render()}))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},e.showTileBoundaries.get=function(){return!!this._showTileBoundaries},e.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},e.showPadding.get=function(){return!!this._showPadding},e.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},e.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},e.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&((this._showCollisionBoxes=t)?this.style._generateCollisionBoxes():this._update())},e.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},e.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},e.repaint.get=function(){return!!this._repaint},e.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},e.vertices.get=function(){return!!this._vertices},e.vertices.set=function(t){this._vertices=t,this._update()},t.prototype._setCacheLimits=function(t,e){yt.setCacheLimits(t,e)},e.version.get=function(){return yt.version},Object.defineProperties(t.prototype,e),t}(xn);function zn(t){t.parentNode&&t.parentNode.removeChild(t)}var Mn={showCompass:!0,showZoom:!0,visualizePitch:!1},Dn=function(t){var e=this;this.options=yt.extend({},Mn,t),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(yt.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(t){return e._map.zoomIn({},{originalEvent:t})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(t){return e._map.zoomOut({},{originalEvent:t})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(yt.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(t){e.options.visualizePitch?e._map.resetNorthPitch({},{originalEvent:t}):e._map.resetNorth({},{originalEvent:t})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};function Ln(t,e,i){if(t=new yt.LngLat(t.lng,t.lat),e){var n=new yt.LngLat(t.lng-360,t.lat),r=new yt.LngLat(t.lng+360,t.lat),o=i.locationPoint(t).distSqr(e);i.locationPoint(n).distSqr(e)<o?t=n:i.locationPoint(r).distSqr(e)<o&&(t=r)}for(;180<Math.abs(t.lng-i.center.lng);){var a=i.locationPoint(t);if(0<=a.x&&0<=a.y&&a.x<=i.width&&a.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}Dn.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Dn.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Dn.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new pn(t,{button:"left",element:this._compass,clickTolerance:t.dragRotate._clickTolerance}),b.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),b.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},Dn.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),b.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),b.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},Dn.prototype._createButton=function(t,e){var i=b.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i},Dn.prototype._setButtonTitle=function(t,e){var i=this._map._getUIString("NavigationControl."+e);t.title=i,t.setAttribute("aria-label",i)};var On={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Rn(t,e,i){var n=t.classList;for(var r in On)n.remove("mapboxgl-"+i+"-anchor-"+r);n.add("mapboxgl-"+i+"-anchor-"+e)}var Fn,Bn=function(_){function t(t,e){var i=this;if(_.call(this),(t instanceof yt.window.HTMLElement||e)&&(t=yt.extend({element:t},e)),yt.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._draggable=t&&t.draggable||!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=yt.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var n=b.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var r=b.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var o=b.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"fill-rule","nonzero");var a=b.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"transform","translate(3.0, 29.0)"),a.setAttributeNS(null,"fill","#000000");for(var s=0,l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];s<l.length;s+=1){var u=l[s],c=b.createNS("http://www.w3.org/2000/svg","ellipse");c.setAttributeNS(null,"opacity","0.04"),c.setAttributeNS(null,"cx","10.5"),c.setAttributeNS(null,"cy","5.80029008"),c.setAttributeNS(null,"rx",u.rx),c.setAttributeNS(null,"ry",u.ry),a.appendChild(c)}var h=b.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill",this._color);var p=b.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(p);var d=b.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");var f=b.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(f);var m=b.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(6.0, 7.0)"),m.setAttributeNS(null,"fill","#FFFFFF");var g=b.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var v=b.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#000000"),v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962");var y=b.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),g.appendChild(v),g.appendChild(y),o.appendChild(a),o.appendChild(h),o.appendChild(d),o.appendChild(m),o.appendChild(g),n.appendChild(o),this._element.appendChild(n),this._offset=yt.Point.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(t){t.preventDefault()}),this._element.addEventListener("mousedown",function(t){t.preventDefault()}),this._element.addEventListener("focus",function(){var t=i._map.getContainer();t.scrollTop=0,t.scrollLeft=0}),Rn(this._element,this._anchor,"marker"),this._popup=null}return _&&(t.__proto__=_),((t.prototype=Object.create(_&&_.prototype)).constructor=t).prototype.addTo=function(t){return this.remove(),(this._map=t).getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},t.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(t){return this._lngLat=yt.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},t.prototype.getElement=function(){return this._element},t.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},t.prototype._onKeyPress=function(t){var e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},t.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},t.prototype.getPopup=function(){return this._popup},t.prototype.togglePopup=function(){var t=this._popup;return t&&(t.isOpen()?t.remove():t.addTo(this._map)),this},t.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ln(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),b.setTransform(this._element,On[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+i+" "+e)}},t.prototype.getOffset=function(){return this._offset},t.prototype.setOffset=function(t){return this._offset=yt.Point.convert(t),this._update(),this},t.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new yt.Event("dragstart"))),this.fire(new yt.Event("drag"))},t.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new yt.Event("dragend")),this._state="inactive"},t.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},t.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},t.prototype.isDraggable=function(){return this._draggable},t.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},t.prototype.getRotation=function(){return this._rotation},t.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},t.prototype.getRotationAlignment=function(){return this._rotationAlignment},t.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},t.prototype.getPitchAlignment=function(){return this._pitchAlignment},t}(yt.Evented),Nn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},jn=0,$n=!1,Un=function(e){function t(t){e.call(this),this.options=yt.extend({},Nn,t),yt.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.onAdd=function(t){var e;return this._map=t,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==Fn?e(Fn):void 0!==yt.window.navigator.permissions?yt.window.navigator.permissions.query({name:"geolocation"}).then(function(t){e(Fn="denied"!==t.state)}):e(Fn=!!yt.window.navigator.geolocation),this._container},t.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(yt.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,jn=0,$n=!1},t.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())},t.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},t.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new yt.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new yt.Event("geolocate",t)),this._finish()}},t.prototype._updateCamera=function(t){var e=new yt.LngLat(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,n=this._map.getBearing(),r=yt.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(e.toBounds(i),r,{geolocateSource:!0})},t.prototype._updateMarker=function(t){if(t){var e=new yt.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(e).addTo(this._map),this._userLocationDotMarker.setLngLat(e).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},t.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),n=e.distanceTo(i),r=Math.ceil(2*this._accuracy/n);this._circleElement.style.width=r+"px",this._circleElement.style.height=r+"px"},t.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},t.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&$n)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new yt.Event("error",t)),this._finish()}},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},t.prototype._setupUI=function(t){var e=this;if(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),!(this._geolocateButton.type="button")===t){yt.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{var n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Bn(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire(new yt.Event("trackuserlocationend")))})},t.prototype.trigger=function(){if(!this._setup)return yt.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new yt.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jn--,$n=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new yt.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new yt.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),1<++jn?(t={maximumAge:6e5,timeout:0},$n=!0):(t=this.options.positionOptions,$n=!1),this._geolocationWatchID=yt.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else yt.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},t.prototype._clearWatch=function(){yt.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},t}(yt.Evented),Vn={maxWidth:100,unit:"metric"},qn=function(t){this.options=yt.extend({},Vn,t),yt.bindAll(["_onMove","setUnit"],this)};function Hn(t,e,i){var n=i&&i.maxWidth||100,r=t._container.clientHeight/2,o=t.unproject([0,r]),a=t.unproject([n,r]),s=o.distanceTo(a);if(i&&"imperial"===i.unit){var l=3.2808*s;5280<l?Wn(e,n,l/5280,t._getUIString("ScaleControl.Miles")):Wn(e,n,l,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?Wn(e,n,s/1852,t._getUIString("ScaleControl.NauticalMiles")):1e3<=s?Wn(e,n,s/1e3,t._getUIString("ScaleControl.Kilometers")):Wn(e,n,s,t._getUIString("ScaleControl.Meters"))}function Wn(t,e,i,n){var r,o,a,s,l,u=(r=i,(o=Math.pow(10,(""+Math.floor(r)).length-1))*(a=10<=(a=r/o)?10:5<=a?5:3<=a?3:2<=a?2:1<=a?1:(s=a,l=Math.pow(10,Math.ceil(-Math.log(s)/Math.LN10)),Math.round(s*l)/l)));t.style.width=e*(u/i)+"px",t.innerHTML=u+"&nbsp;"+n}qn.prototype.getDefaultPosition=function(){return"bottom-left"},qn.prototype._onMove=function(){Hn(this._map,this._container,this.options)},qn.prototype.onAdd=function(t){return this._map=t,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},qn.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},qn.prototype.setUnit=function(t){this.options.unit=t,Hn(this._map,this._container,this.options)};var Zn=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof yt.window.HTMLElement?this._container=t.container:yt.warnOnce("Full screen control 'container' must be a DOM element.")),yt.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in yt.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in yt.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in yt.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in yt.window.document&&(this._fullscreenchange="MSFullscreenChange")};Zn.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",yt.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Zn.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,yt.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Zn.prototype._checkFullscreenSupport=function(){return!!(yt.window.document.fullscreenEnabled||yt.window.document.mozFullScreenEnabled||yt.window.document.msFullscreenEnabled||yt.window.document.webkitFullscreenEnabled)},Zn.prototype._setupUI=function(){var t=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),yt.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Zn.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Zn.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Zn.prototype._isFullscreen=function(){return this._fullscreen},Zn.prototype._changeIcon=function(){(yt.window.document.fullscreenElement||yt.window.document.mozFullScreenElement||yt.window.document.webkitFullscreenElement||yt.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Zn.prototype._onClickFullscreen=function(){this._isFullscreen()?yt.window.document.exitFullscreen?yt.window.document.exitFullscreen():yt.window.document.mozCancelFullScreen?yt.window.document.mozCancelFullScreen():yt.window.document.msExitFullscreen?yt.window.document.msExitFullscreen():yt.window.document.webkitCancelFullScreen&&yt.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Gn={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Xn=function(e){function t(t){e.call(this),this.options=yt.extend(Object.create(Gn),t),yt.bindAll(["_update","_onClose","remove"],this)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.addTo=function(t){var e=this;return this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",function(t){e._update(t.point)}),this._map.on("mouseup",function(t){e._update(t.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new yt.Event("open")),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new yt.Event("close")),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(t){return this._lngLat=yt.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},t.prototype.trackPointer=function(){var e=this;return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",function(t){e._update(t.point)}),this._map.on("drag",function(t){e._update(t.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},t.prototype.getElement=function(){return this._container},t.prototype.setText=function(t){return this.setDOMContent(yt.window.document.createTextNode(t))},t.prototype.setHTML=function(t){var e,i=yt.window.document.createDocumentFragment(),n=yt.window.document.createElement("body");for(n.innerHTML=t;e=n.firstChild;)i.appendChild(e);return this.setDOMContent(i)},t.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},t.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},t.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},t.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},t.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},t.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},t.prototype._createContent=function(){this._content&&b.remove(this._content),this._content=b.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},t.prototype._update=function(t){var e=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ln(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var i=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),n=this.options.anchor,r=function t(e){if(e){if("number"==typeof e){var i=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new yt.Point(0,0),top:new yt.Point(0,e),"top-left":new yt.Point(i,i),"top-right":new yt.Point(-i,i),bottom:new yt.Point(0,-e),"bottom-left":new yt.Point(i,-i),"bottom-right":new yt.Point(-i,-i),left:new yt.Point(e,0),right:new yt.Point(-e,0)}}if(e instanceof yt.Point||Array.isArray(e)){var n=yt.Point.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:yt.Point.convert(e.center||[0,0]),top:yt.Point.convert(e.top||[0,0]),"top-left":yt.Point.convert(e["top-left"]||[0,0]),"top-right":yt.Point.convert(e["top-right"]||[0,0]),bottom:yt.Point.convert(e.bottom||[0,0]),"bottom-left":yt.Point.convert(e["bottom-left"]||[0,0]),"bottom-right":yt.Point.convert(e["bottom-right"]||[0,0]),left:yt.Point.convert(e.left||[0,0]),right:yt.Point.convert(e.right||[0,0])}}return t(new yt.Point(0,0))}(this.options.offset);if(!n){var o,a=this._container.offsetWidth,s=this._container.offsetHeight;o=i.y+r.bottom.y<s?["top"]:i.y>this._map.transform.height-s?["bottom"]:[],i.x<a/2?o.push("left"):i.x>this._map.transform.width-a/2&&o.push("right"),n=0===o.length?"bottom":o.join("-")}var l=i.add(r[n]).round();b.setTransform(this._container,On[n]+" translate("+l.x+"px,"+l.y+"px)"),Rn(this._container,n,"popup")}},t.prototype._onClose=function(){this.remove()},t}(yt.Evented),Yn={version:yt.version,supported:i,setRTLTextPlugin:yt.setRTLTextPlugin,getRTLTextPluginStatus:yt.getRTLTextPluginStatus,Map:Pn,NavigationControl:Dn,GeolocateControl:Un,AttributionControl:wn,ScaleControl:qn,FullscreenControl:Zn,Popup:Xn,Marker:Bn,Style:Oe,LngLat:yt.LngLat,LngLatBounds:yt.LngLatBounds,Point:yt.Point,MercatorCoordinate:yt.MercatorCoordinate,Evented:yt.Evented,config:yt.config,get accessToken(){return yt.config.ACCESS_TOKEN},set accessToken(t){yt.config.ACCESS_TOKEN=t},get baseApiUrl(){return yt.config.API_URL},set baseApiUrl(t){yt.config.API_URL=t},get workerCount(){return Mt.workerCount},set workerCount(t){Mt.workerCount=t},get maxParallelImageRequests(){return yt.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){yt.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){yt.clearTileCache(t)},workerUrl:""};return Yn}),a}),function(l,h,m,t){"use strict";function i(t,e){var i,n,r,o=[],a=0;t&&t.isDefaultPrevented()||(t.preventDefault(),e=e||{},t&&t.data&&(e=c(t.data.options,e)),i=e.$target||m(t.currentTarget).trigger("blur"),(r=m.fancybox.getInstance())&&r.$trigger&&r.$trigger.is(i)||(e.selector?o=m(e.selector):(n=i.attr("data-fancybox")||"")?o=(o=t.data?t.data.items:[]).length?o.filter('[data-fancybox="'+n+'"]'):m('[data-fancybox="'+n+'"]'):o=[i],(a=m(o).index(i))<0&&(a=0),(r=m.fancybox.open(o,e,a)).$trigger=i))}if(l.console=l.console||{info:function(t){}},m){if(m.fn.fancybox)return console.info("fancyBox already initialized");var e={closeExisting:!1,loop:!1,gutter:50,keyboard:!0,preventCaptionOverlap:!0,arrows:!0,infobar:!0,smallBtn:"auto",toolbar:"auto",buttons:["zoom","slideShow","thumbs","close"],idleTime:3,protect:!1,modal:!1,image:{preload:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}"><source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',format:"",autoStart:!0},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"><div class="fancybox-caption__body"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div></button>',smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg></button>'},parentEl:"body",hideScrollbar:!0,autoFocus:!0,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:3e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:m.noop,beforeLoad:m.noop,afterLoad:m.noop,beforeShow:m.noop,afterShow:m.noop,beforeClose:m.noop,afterClose:m.noop,onActivate:m.noop,onDeactivate:m.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{preventCaptionOverlap:!1,idleTime:!1,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schlie&szlig;en",NEXT:"Weiter",PREV:"Zur&uuml;ck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es sp&auml;ter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Vergr&ouml;&szlig;ern"}}},r=m(l),o=m(h),a=0,p=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||function(t){return l.setTimeout(t,1e3/60)},s=l.cancelAnimationFrame||l.webkitCancelAnimationFrame||l.mozCancelAnimationFrame||l.oCancelAnimationFrame||function(t){l.clearTimeout(t)},u=function(){var t,e=h.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==e.style[t])return i[t];return"transitionend"}(),d=function(t){return t&&t.length&&t[0].offsetHeight},c=function(t,e){var i=m.extend(!0,{},t,e);return m.each(e,function(t,e){m.isArray(e)&&(i[t]=e)}),i},n=function(t,e,i){var n=this;n.opts=c({index:i},m.fancybox.defaults),m.isPlainObject(e)&&(n.opts=c(n.opts,e)),m.fancybox.isMobile&&(n.opts=c(n.opts,n.opts.mobile)),n.id=n.opts.id||++a,n.currIndex=parseInt(n.opts.index,10)||0,n.prevIndex=null,n.prevPos=null,n.currPos=0,n.firstRun=!0,n.group=[],n.slides={},n.addContent(t),n.group.length&&n.init()};m.extend(n.prototype,{init:function(){var e,i,n=this,r=n.group[n.currIndex].opts;r.closeExisting&&m.fancybox.close(!0),m("body").addClass("fancybox-active"),!m.fancybox.getInstance()&&!1!==r.hideScrollbar&&!m.fancybox.isMobile&&h.body.scrollHeight>l.innerHeight&&(m("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:'+(l.innerWidth-h.documentElement.clientWidth)+"px;}</style>"),m("body").addClass("compensate-for-scrollbar")),i="",m.each(r.buttons,function(t,e){i+=r.btnTpl[e]||""}),e=m(n.translate(n,r.baseTpl.replace("{{buttons}}",i).replace("{{arrows}}",r.btnTpl.arrowLeft+r.btnTpl.arrowRight))).attr("id","fancybox-container-"+n.id).addClass(r.baseClass).data("FancyBox",n).appendTo(r.parentEl),n.$refs={container:e},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(t){n.$refs[t]=e.find(".fancybox-"+t)}),n.trigger("onInit"),n.activate(),n.jumpTo(n.currIndex)},translate:function(t,e){var i=t.opts.i18n[t.opts.lang]||t.opts.i18n.en;return e.replace(/\{\{(\w+)\}\}/g,function(t,e){return void 0===i[e]?t:i[e]})},addContent:function(t){var e,u=this,i=m.makeArray(t);m.each(i,function(t,e){var i,n,r,o,a,s={},l={};m.isPlainObject(e)?l=(s=e).opts||e:"object"===m.type(e)&&m(e).length?(l=(i=m(e)).data()||{},(l=m.extend(!0,{},l,l.options)).$orig=i,s.src=u.opts.src||l.src||i.attr("href"),s.type||s.src||(s.type="inline",s.src=e)):s={type:"html",src:e+""},s.opts=m.extend(!0,{},u.opts,l),m.isArray(l.buttons)&&(s.opts.buttons=l.buttons),m.fancybox.isMobile&&s.opts.mobile&&(s.opts=c(s.opts,s.opts.mobile)),n=s.type||s.opts.type,o=s.src||"",!n&&o&&((r=o.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(n="video",s.opts.video.format||(s.opts.video.format="video/"+("ogv"===r[1]?"ogg":r[1]))):o.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?n="image":o.match(/\.(pdf)((\?|#).*)?$/i)?(n="iframe",s=m.extend(!0,s,{contentType:"pdf",opts:{iframe:{preload:!1}}})):"#"===o.charAt(0)&&(n="inline")),n?s.type=n:u.trigger("objectNeedsType",s),s.contentType||(s.contentType=-1<m.inArray(s.type,["html","inline","ajax"])?"html":s.type),s.index=u.group.length,"auto"==s.opts.smallBtn&&(s.opts.smallBtn=-1<m.inArray(s.type,["html","inline","ajax"])),"auto"===s.opts.toolbar&&(s.opts.toolbar=!s.opts.smallBtn),s.$thumb=s.opts.$thumb||null,s.opts.$trigger&&s.index===u.opts.index&&(s.$thumb=s.opts.$trigger.find("img:first"),s.$thumb.length&&(s.opts.$orig=s.opts.$trigger)),s.$thumb&&s.$thumb.length||!s.opts.$orig||(s.$thumb=s.opts.$orig.find("img:first")),s.$thumb&&!s.$thumb.length&&(s.$thumb=null),s.thumb=s.opts.thumb||(s.$thumb?s.$thumb[0].src:null),"function"===m.type(s.opts.caption)&&(s.opts.caption=s.opts.caption.apply(e,[u,s])),"function"===m.type(u.opts.caption)&&(s.opts.caption=u.opts.caption.apply(e,[u,s])),s.opts.caption instanceof m||(s.opts.caption=void 0===s.opts.caption?"":s.opts.caption+""),"ajax"===s.type&&(1<(a=o.split(/\s+/,2)).length&&(s.src=a.shift(),s.opts.filter=a.shift())),s.opts.modal&&(s.opts=m.extend(!0,s.opts,{trapFocus:!0,infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),u.group.push(s)}),Object.keys(u.slides).length&&(u.updateControls(),(e=u.Thumbs)&&e.isActive&&(e.create(),e.focus()))},addEvents:function(){var n=this;n.removeEvents(),n.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),n.close(t)}).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",function(t){t.stopPropagation(),t.preventDefault(),n.previous()}).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),n.next()}).on("click.fb","[data-fancybox-zoom]",function(t){n[n.isScaledDown()?"scaleToActual":"scaleToFit"]()}),r.on("orientationchange.fb resize.fb",function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?(n.requestId&&s(n.requestId),n.requestId=p(function(){n.update(t)})):(n.current&&"iframe"===n.current.type&&n.$refs.stage.hide(),setTimeout(function(){n.$refs.stage.show(),n.update(t)},m.fancybox.isMobile?600:250))}),o.on("keydown.fb",function(t){var e=(m.fancybox?m.fancybox.getInstance():null).current,i=t.keyCode||t.which;if(9!=i)return!e.opts.keyboard||t.ctrlKey||t.altKey||t.shiftKey||m(t.target).is("input,textarea,video,audio,select")?void 0:8===i||27===i?(t.preventDefault(),void n.close(t)):37===i||38===i?(t.preventDefault(),void n.previous()):39===i||40===i?(t.preventDefault(),void n.next()):void n.trigger("afterKeydown",t,i);e.opts.trapFocus&&n.focus(t)}),n.group[n.currIndex].opts.idleTime&&(n.idleSecondsCounter=0,o.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(t){n.idleSecondsCounter=0,n.isIdle&&n.showControls(),n.isIdle=!1}),n.idleInterval=l.setInterval(function(){++n.idleSecondsCounter>=n.group[n.currIndex].opts.idleTime&&!n.isDragging&&(n.isIdle=!0,n.idleSecondsCounter=0,n.hideControls())},1e3))},removeEvents:function(){r.off("orientationchange.fb resize.fb"),o.off("keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),this.idleInterval&&(l.clearInterval(this.idleInterval),this.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,n){var e,i,r,o,a,s,l,u,c,h=this,p=h.group.length;if(!(h.isDragging||h.isClosing||h.isAnimating&&h.firstRun)){if(t=parseInt(t,10),!(r=h.current?h.current.opts.loop:h.opts.loop)&&(t<0||p<=t))return!1;if(e=h.firstRun=!Object.keys(h.slides).length,a=h.current,h.prevIndex=h.currIndex,h.prevPos=h.currPos,o=h.createSlide(t),1<p&&((r||o.index<p-1)&&h.createSlide(t+1),(r||0<o.index)&&h.createSlide(t-1)),h.current=o,h.currIndex=o.index,h.currPos=o.pos,h.trigger("beforeShow",e),h.updateControls(),o.forcedDuration=void 0,m.isNumeric(n)?o.forcedDuration=n:n=o.opts[e?"animationDuration":"transitionDuration"],n=parseInt(n,10),i=h.isMoved(o),o.$slide.addClass("fancybox-slide--current"),e)return o.opts.animationEffect&&n&&h.$refs.container.css("transition-duration",n+"ms"),h.$refs.container.addClass("fancybox-is-open").trigger("focus"),h.loadSlide(o),void h.preload("image");s=m.fancybox.getTranslate(a.$slide),l=m.fancybox.getTranslate(h.$refs.stage),m.each(h.slides,function(t,e){m.fancybox.stop(e.$slide,!0)}),a.pos!==o.pos&&(a.isComplete=!1),a.$slide.removeClass("fancybox-slide--complete fancybox-slide--current"),i?(c=s.left-(a.pos*s.width+a.pos*a.opts.gutter),m.each(h.slides,function(t,e){e.$slide.removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")});var i=e.pos*s.width+e.pos*e.opts.gutter;m.fancybox.setTranslate(e.$slide,{top:0,left:i-l.left+c}),e.pos!==o.pos&&e.$slide.addClass("fancybox-slide--"+(e.pos>o.pos?"next":"previous")),d(e.$slide),m.fancybox.animate(e.$slide,{top:0,left:(e.pos-o.pos)*s.width+(e.pos-o.pos)*e.opts.gutter},n,function(){e.$slide.css({transform:"",opacity:""}).removeClass("fancybox-slide--next fancybox-slide--previous"),e.pos===h.currPos&&h.complete()})})):n&&o.opts.transitionEffect&&(u="fancybox-animated fancybox-fx-"+o.opts.transitionEffect,a.$slide.addClass("fancybox-slide--"+(a.pos>o.pos?"next":"previous")),m.fancybox.animate(a.$slide,u,n,function(){a.$slide.removeClass(u).removeClass("fancybox-slide--next fancybox-slide--previous")},!1)),o.isLoaded?h.revealContent(o):h.loadSlide(o),h.preload("image")}},createSlide:function(t){var e,i,n=this;return i=(i=t%n.group.length)<0?n.group.length+i:i,!n.slides[t]&&n.group[i]&&(e=m('<div class="fancybox-slide"></div>').appendTo(n.$refs.stage),n.slides[t]=m.extend(!0,{},n.group[i],{pos:t,$slide:e,isLoaded:!1}),n.updateSlide(n.slides[t])),n.slides[t]},scaleToActual:function(t,e,i){var n,r,o,a,s,l=this,u=l.current,c=u.$content,h=m.fancybox.getTranslate(u.$slide).width,p=m.fancybox.getTranslate(u.$slide).height,d=u.width,f=u.height;l.isAnimating||l.isMoved()||!c||"image"!=u.type||!u.isLoaded||u.hasError||(l.isAnimating=!0,m.fancybox.stop(c),t=void 0===t?.5*h:t,e=void 0===e?.5*p:e,(n=m.fancybox.getTranslate(c)).top-=m.fancybox.getTranslate(u.$slide).top,n.left-=m.fancybox.getTranslate(u.$slide).left,a=d/n.width,s=f/n.height,r=.5*h-.5*d,o=.5*p-.5*f,h<d&&(0<(r=n.left*a-(t*a-t))&&(r=0),r<h-d&&(r=h-d)),p<f&&(0<(o=n.top*s-(e*s-e))&&(o=0),o<p-f&&(o=p-f)),l.updateCursor(d,f),m.fancybox.animate(c,{top:o,left:r,scaleX:a,scaleY:s},i||366,function(){l.isAnimating=!1}),l.SlideShow&&l.SlideShow.isActive&&l.SlideShow.stop())},scaleToFit:function(t){var e,i=this,n=i.current,r=n.$content;i.isAnimating||i.isMoved()||!r||"image"!=n.type||!n.isLoaded||n.hasError||(i.isAnimating=!0,m.fancybox.stop(r),e=i.getFitPos(n),i.updateCursor(e.width,e.height),m.fancybox.animate(r,{top:e.top,left:e.left,scaleX:e.width/r.width(),scaleY:e.height/r.height()},t||366,function(){i.isAnimating=!1}))},getFitPos:function(t){var e,i,n,r,o=t.$content,a=t.$slide,s=t.width||t.opts.width,l=t.height||t.opts.height,u={};return!!(t.isLoaded&&o&&o.length)&&(e=m.fancybox.getTranslate(this.$refs.stage).width,i=m.fancybox.getTranslate(this.$refs.stage).height,e-=parseFloat(a.css("paddingLeft"))+parseFloat(a.css("paddingRight"))+parseFloat(o.css("marginLeft"))+parseFloat(o.css("marginRight")),i-=parseFloat(a.css("paddingTop"))+parseFloat(a.css("paddingBottom"))+parseFloat(o.css("marginTop"))+parseFloat(o.css("marginBottom")),s&&l||(s=e,l=i),e-.5<(s*=n=Math.min(1,e/s,i/l))&&(s=e),i-.5<(l*=n)&&(l=i),"image"===t.type?(u.top=Math.floor(.5*(i-l))+parseFloat(a.css("paddingTop")),u.left=Math.floor(.5*(e-s))+parseFloat(a.css("paddingLeft"))):"video"===t.contentType&&(s/(r=t.opts.width&&t.opts.height?s/l:t.opts.ratio||16/9)<l?l=s/r:l*r<s&&(s=l*r)),u.width=s,u.height=l,u)},update:function(i){var n=this;m.each(n.slides,function(t,e){n.updateSlide(e,i)})},updateSlide:function(t,e){var i=this,n=t&&t.$content,r=t.width||t.opts.width,o=t.height||t.opts.height,a=t.$slide;i.adjustCaption(t),n&&(r||o||"video"===t.contentType)&&!t.hasError&&(m.fancybox.stop(n),m.fancybox.setTranslate(n,i.getFitPos(t)),t.pos===i.currPos&&(i.isAnimating=!1,i.updateCursor())),i.adjustLayout(t),a.length&&(a.trigger("refresh"),t.pos===i.currPos&&i.$refs.toolbar.add(i.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar",a.get(0).scrollHeight>a.get(0).clientHeight)),i.trigger("onUpdate",t,e)},centerSlide:function(t){var e=this,i=e.current,n=i.$slide;!e.isClosing&&i&&(n.siblings().css({transform:"",opacity:""}),n.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next"),m.fancybox.animate(n,{top:0,left:0,opacity:1},void 0===t?0:t,function(){n.css({transform:"",opacity:""}),i.isComplete||e.complete()},!1))},isMoved:function(t){var e,i,n=t||this.current;return!!n&&(i=m.fancybox.getTranslate(this.$refs.stage),e=m.fancybox.getTranslate(n.$slide),!n.$slide.hasClass("fancybox-animated")&&(.5<Math.abs(e.top-i.top)||.5<Math.abs(e.left-i.left)))},updateCursor:function(t,e){var i,n,r=this.current,o=this.$refs.container;r&&!this.isClosing&&this.Guestures&&(o.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"),n=!!(i=this.canPan(t,e))||this.isZoomable(),o.toggleClass("fancybox-is-zoomable",n),m("[data-fancybox-zoom]").prop("disabled",!n),i?o.addClass("fancybox-can-pan"):n&&("zoom"===r.opts.clickContent||m.isFunction(r.opts.clickContent)&&"zoom"==r.opts.clickContent(r))?o.addClass("fancybox-can-zoomIn"):r.opts.touch&&(r.opts.touch.vertical||1<this.group.length)&&"video"!==r.contentType&&o.addClass("fancybox-can-swipe"))},isZoomable:function(){var t,e=this.current;if(e&&!this.isClosing&&"image"===e.type&&!e.hasError){if(!e.isLoaded)return!0;if((t=this.getFitPos(e))&&(e.width>t.width||e.height>t.height))return!0}return!1},isScaledDown:function(t,e){var i=!1,n=this.current,r=n.$content;return void 0!==t&&void 0!==e?i=t<n.width&&e<n.height:r&&(i=(i=m.fancybox.getTranslate(r)).width<n.width&&i.height<n.height),i},canPan:function(t,e){var i=this.current,n=null,r=!1;return"image"===i.type&&(i.isComplete||t&&e)&&!i.hasError&&(r=this.getFitPos(i),void 0!==t&&void 0!==e?n={width:t,height:e}:i.isComplete&&(n=m.fancybox.getTranslate(i.$content)),n&&r&&(r=1.5<Math.abs(n.width-r.width)||1.5<Math.abs(n.height-r.height))),r},loadSlide:function(i){var t,e,n,r=this;if(!i.isLoading&&!i.isLoaded){if(!(i.isLoading=!0)===r.trigger("beforeLoad",i))return i.isLoading=!1;switch(t=i.type,(e=i.$slide).off("refresh").trigger("onReset").addClass(i.opts.slideClass),t){case"image":r.setImage(i);break;case"iframe":r.setIframe(i);break;case"html":r.setContent(i,i.src||i.content);break;case"video":r.setContent(i,i.opts.video.tpl.replace(/\{\{src\}\}/gi,i.src).replace("{{format}}",i.opts.videoFormat||i.opts.video.format||"").replace("{{poster}}",i.thumb||""));break;case"inline":m(i.src).length?r.setContent(i,m(i.src)):r.setError(i);break;case"ajax":r.showLoading(i),n=m.ajax(m.extend({},i.opts.ajax.settings,{url:i.src,success:function(t,e){"success"===e&&r.setContent(i,t)},error:function(t,e){t&&"abort"!==e&&r.setError(i)}})),e.one("onReset",function(){n.abort()});break;default:r.setError(i)}return!0}},setImage:function(e){var t,i=this;setTimeout(function(){var t=e.$image;i.isClosing||!e.isLoading||t&&t.length&&t[0].complete||e.hasError||i.showLoading(e)},50),i.checkSrcset(e),e.$content=m('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(e.$slide.addClass("fancybox-slide--image")),!1!==e.opts.preload&&e.opts.width&&e.opts.height&&e.thumb&&(e.width=e.opts.width,e.height=e.opts.height,(t=h.createElement("img")).onerror=function(){m(this).remove(),e.$ghost=null},t.onload=function(){i.afterLoad(e)},e.$ghost=m(t).addClass("fancybox-image").appendTo(e.$content).attr("src",e.thumb)),i.setBigImage(e)},checkSrcset:function(t){var e,i,n,r,o=t.opts.srcset||t.opts.image.srcset;if(o){n=l.devicePixelRatio||1,r=l.innerWidth*n,(i=o.split(",").map(function(t){var n={};return t.trim().split(/\s+/).forEach(function(t,e){var i=parseInt(t.substring(0,t.length-1),10);if(0===e)return n.url=t;i&&(n.value=i,n.postfix=t[t.length-1])}),n})).sort(function(t,e){return t.value-e.value});for(var a=0;a<i.length;a++){var s=i[a];if("w"===s.postfix&&s.value>=r||"x"===s.postfix&&s.value>=n){e=s;break}}!e&&i.length&&(e=i[i.length-1]),e&&(t.src=e.url,t.width&&t.height&&"w"==e.postfix&&(t.height=t.width/t.height*e.value,t.width=e.value),t.opts.srcset=o)}},setBigImage:function(e){var i=this,t=h.createElement("img"),n=m(t);e.$image=n.one("error",function(){i.setError(e)}).one("load",function(){var t;e.$ghost||(i.resolveImageSlideSize(e,this.naturalWidth,this.naturalHeight),i.afterLoad(e)),i.isClosing||(e.opts.srcset&&((t=e.opts.sizes)&&"auto"!==t||(t=(1<e.width/e.height&&1<r.width()/r.height()?"100":Math.round(e.width/e.height*100))+"vw"),n.attr("sizes",t).attr("srcset",e.opts.srcset)),e.$ghost&&setTimeout(function(){e.$ghost&&!i.isClosing&&e.$ghost.hide()},Math.min(300,Math.max(1e3,e.height/1600))),i.hideLoading(e))}).addClass("fancybox-image").attr("src",e.src).appendTo(e.$content),(t.complete||"complete"==t.readyState)&&n.naturalWidth&&n.naturalHeight?n.trigger("load"):t.error&&n.trigger("error")},resolveImageSlideSize:function(t,e,i){var n=parseInt(t.opts.width,10),r=parseInt(t.opts.height,10);t.width=e,t.height=i,0<n&&(t.width=n,t.height=Math.floor(n*i/e)),0<r&&(t.width=Math.floor(r*e/i),t.height=r)},setIframe:function(r){var o,e=this,a=r.opts.iframe,s=r.$slide;r.$content=m('<div class="fancybox-content'+(a.preload?" fancybox-is-hidden":"")+'"></div>').css(a.css).appendTo(s),s.addClass("fancybox-slide--"+r.contentType),r.$iframe=o=m(a.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(a.attr).appendTo(r.$content),a.preload?(e.showLoading(r),o.on("load.fb error.fb",function(t){this.isReady=1,r.$slide.trigger("refresh"),e.afterLoad(r)}),s.on("refresh.fb",function(){var t,e=r.$content,i=a.css.width,n=a.css.height;if(1===o[0].isReady){try{t=o.contents().find("body")}catch(t){}t&&t.length&&t.children().length&&(s.css("overflow","visible"),e.css({width:"100%","max-width":"100%",height:"9999px"}),void 0===i&&(i=Math.ceil(Math.max(t[0].clientWidth,t.outerWidth(!0)))),e.css("width",i||"").css("max-width",""),void 0===n&&(n=Math.ceil(Math.max(t[0].clientHeight,t.outerHeight(!0)))),e.css("height",n||""),s.css("overflow","auto")),e.removeClass("fancybox-is-hidden")}})):e.afterLoad(r),o.attr("src",r.src),s.one("onReset",function(){try{m(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(t){}m(this).off("refresh.fb").empty(),r.isLoaded=!1,r.isRevealed=!1})},setContent:function(t,e){var i;this.isClosing||(this.hideLoading(t),t.$content&&m.fancybox.stop(t.$content),t.$slide.empty(),(i=e)&&i.hasOwnProperty&&i instanceof m&&e.parent().length?((e.hasClass("fancybox-content")||e.parent().hasClass("fancybox-content"))&&e.parents(".fancybox-slide").trigger("onReset"),t.$placeholder=m("<div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===m.type(e)&&(e=m("<div>").append(m.trim(e)).contents()),t.opts.filter&&(e=m("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",function(){m(this).find("video,audio").trigger("pause"),t.$placeholder&&(t.$placeholder.after(e.removeClass("fancybox-content").hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(m(this).empty(),t.isLoaded=!1,t.isRevealed=!1)}),m(e).appendTo(t.$slide),m(e).is("video,audio")&&(m(e).addClass("fancybox-video"),m(e).wrap("<div></div>"),t.contentType="video",t.opts.width=t.opts.width||m(e).attr("width"),t.opts.height=t.opts.height||m(e).attr("height")),t.$content=t.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first(),t.$content.siblings().hide(),t.$content.length||(t.$content=t.$slide.wrapInner("<div></div>").children().first()),t.$content.addClass("fancybox-content"),t.$slide.addClass("fancybox-slide--"+t.contentType),this.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.trigger("onReset").removeClass("fancybox-slide--"+t.contentType).addClass("fancybox-slide--error"),t.contentType="html",this.setContent(t,this.translate(t,t.opts.errorTpl)),t.pos===this.currPos&&(this.isAnimating=!1)},showLoading:function(t){(t=t||this.current)&&!t.$spinner&&(t.$spinner=m(this.translate(this,this.opts.spinnerTpl)).appendTo(t.$slide).hide().fadeIn("fast"))},hideLoading:function(t){(t=t||this.current)&&t.$spinner&&(t.$spinner.stop().remove(),delete t.$spinner)},afterLoad:function(t){this.isClosing||(t.isLoading=!1,t.isLoaded=!0,this.trigger("afterLoad",t),this.hideLoading(t),!t.opts.smallBtn||t.$smallBtn&&t.$smallBtn.length||(t.$smallBtn=m(this.translate(t,t.opts.btnTpl.smallBtn)).appendTo(t.$content)),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0}),"image"===t.type&&m('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),this.adjustCaption(t),this.adjustLayout(t),t.pos===this.currPos&&this.updateCursor(),this.revealContent(t))},adjustCaption:function(t){var e,i=t||this.current,n=i.opts.caption,r=i.opts.preventCaptionOverlap,o=this.$refs.caption,a=!1;o.toggleClass("fancybox-caption--separate",r),r&&n&&n.length&&(i.pos!==this.currPos?((e=o.clone().appendTo(o.parent())).children().eq(0).empty().html(n),a=e.outerHeight(!0),e.empty().remove()):this.$caption&&(a=this.$caption.outerHeight(!0)),i.$slide.css("padding-bottom",a||""))},adjustLayout:function(t){var e,i,n,r,o=t||this.current;o.isLoaded&&!0!==o.opts.disableLayoutFix&&(o.$content.css("margin-bottom",""),o.$content.outerHeight()>o.$slide.height()+.5&&(n=o.$slide[0].style["padding-bottom"],r=o.$slide.css("padding-bottom"),0<parseFloat(r)&&(e=o.$slide[0].scrollHeight,o.$slide.css("padding-bottom",0),Math.abs(e-o.$slide[0].scrollHeight)<1&&(i=r),o.$slide.css("padding-bottom",n))),o.$content.css("margin-bottom",i))},revealContent:function(t){var e,i,n,r,o=this,a=t.$slide,s=!1,l=!1,u=o.isMoved(t),c=t.isRevealed;return t.isRevealed=!0,e=t.opts[o.firstRun?"animationEffect":"transitionEffect"],n=t.opts[o.firstRun?"animationDuration":"transitionDuration"],n=parseInt(void 0===t.forcedDuration?n:t.forcedDuration,10),!u&&t.pos===o.currPos&&n||(e=!1),"zoom"===e&&(t.pos===o.currPos&&n&&"image"===t.type&&!t.hasError&&(l=o.getThumbPos(t))?s=o.getFitPos(t):e="fade"),"zoom"===e?(o.isAnimating=!0,s.scaleX=s.width/l.width,s.scaleY=s.height/l.height,"auto"==(r=t.opts.zoomOpacity)&&(r=.1<Math.abs(t.width/t.height-l.width/l.height)),r&&(l.opacity=.1,s.opacity=1),m.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),l),d(t.$content),void m.fancybox.animate(t.$content,s,n,function(){o.isAnimating=!1,o.complete()})):(o.updateSlide(t),e?(m.fancybox.stop(a),i="fancybox-slide--"+(t.pos>=o.prevPos?"next":"previous")+" fancybox-animated fancybox-fx-"+e,a.addClass(i).removeClass("fancybox-slide--current"),t.$content.removeClass("fancybox-is-hidden"),d(a),"image"!==t.type&&t.$content.hide().show(0),void m.fancybox.animate(a,"fancybox-slide--current",n,function(){a.removeClass(i).css({transform:"",opacity:""}),t.pos===o.currPos&&o.complete()},!0)):(t.$content.removeClass("fancybox-is-hidden"),c||!u||"image"!==t.type||t.hasError||t.$content.hide().fadeIn("fast"),void(t.pos===o.currPos&&o.complete())))},getThumbPos:function(t){var e,i,n,r,o,a,s,l,u=!1,c=t.$thumb;return!(!c||(!(a=c[0])||a.ownerDocument!==h||(m(".fancybox-container").css("pointer-events","none"),s={x:a.getBoundingClientRect().left+a.offsetWidth/2,y:a.getBoundingClientRect().top+a.offsetHeight/2},l=h.elementFromPoint(s.x,s.y)===a,m(".fancybox-container").css("pointer-events",""),!l)))&&(e=m.fancybox.getTranslate(c),i=parseFloat(c.css("border-top-width")||0),n=parseFloat(c.css("border-right-width")||0),r=parseFloat(c.css("border-bottom-width")||0),o=parseFloat(c.css("border-left-width")||0),u={top:e.top+i,left:e.left+o,width:e.width-n-o,height:e.height-i-r,scaleX:1,scaleY:1},0<e.width&&0<e.height&&u)},complete:function(){var t,i=this,e=i.current,n={};!i.isMoved()&&e.isLoaded&&(e.isComplete||(e.isComplete=!0,e.$slide.siblings().trigger("onReset"),i.preload("inline"),d(e.$slide),e.$slide.addClass("fancybox-slide--complete"),m.each(i.slides,function(t,e){e.pos>=i.currPos-1&&e.pos<=i.currPos+1?n[e.pos]=e:e&&(m.fancybox.stop(e.$slide),e.$slide.off().remove())}),i.slides=n),i.isAnimating=!1,i.updateCursor(),i.trigger("afterShow"),e.opts.video.autoStart&&e.$slide.find("video,audio").filter(":visible:first").trigger("play").one("ended",function(){Document.exitFullscreen?Document.exitFullscreen():this.webkitExitFullscreen&&this.webkitExitFullscreen(),i.next()}),e.opts.autoFocus&&"html"===e.contentType&&((t=e.$content.find("input[autofocus]:enabled:visible:first")).length?t.trigger("focus"):i.focus(null,!0)),e.$slide.scrollTop(0).scrollLeft(0))},preload:function(t){var e,i;this.group.length<2||(i=this.slides[this.currPos+1],(e=this.slides[this.currPos-1])&&e.type===t&&this.loadSlide(e),i&&i.type===t&&this.loadSlide(i))},focus:function(t,e){var i,n,r=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",");this.isClosing||((i=(i=!t&&this.current&&this.current.isComplete?this.current.$slide.find("*:visible"+(e?":not(.fancybox-close-small)":"")):this.$refs.container.find("*:visible")).filter(r).filter(function(){return"hidden"!==m(this).css("visibility")&&!m(this).hasClass("disabled")})).length?(n=i.index(h.activeElement),t&&t.shiftKey?(n<0||0==n)&&(t.preventDefault(),i.eq(i.length-1).trigger("focus")):(n<0||n==i.length-1)&&(t&&t.preventDefault(),i.eq(0).trigger("focus"))):this.$refs.container.trigger("focus"))},activate:function(){var e=this;m(".fancybox-container").each(function(){var t=m(this).data("FancyBox");t&&t.id!==e.id&&!t.isClosing&&(t.trigger("onDeactivate"),t.removeEvents(),t.isVisible=!1)}),e.isVisible=!0,(e.current||e.isIdle)&&(e.update(),e.updateControls()),e.trigger("onActivate"),e.addEvents()},close:function(t,e){var i,n,r,o,a,s,l,u=this,c=u.current,h=function(){u.cleanUp(t)};return!u.isClosing&&(!(u.isClosing=!0)===u.trigger("beforeClose",t)?(u.isClosing=!1,p(function(){u.update()}),!1):(u.removeEvents(),r=c.$content,i=c.opts.animationEffect,n=m.isNumeric(e)?e:i?c.opts.animationDuration:0,c.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),!0!==t?m.fancybox.stop(c.$slide):i=!1,c.$slide.siblings().trigger("onReset").remove(),n&&u.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration",n+"ms"),u.hideLoading(c),u.hideControls(!0),u.updateCursor(),"zoom"!==i||r&&n&&"image"===c.type&&!u.isMoved()&&!c.hasError&&(l=u.getThumbPos(c))||(i="fade"),"zoom"===i?(m.fancybox.stop(r),s={top:(o=m.fancybox.getTranslate(r)).top,left:o.left,scaleX:o.width/l.width,scaleY:o.height/l.height,width:l.width,height:l.height},"auto"==(a=c.opts.zoomOpacity)&&(a=.1<Math.abs(c.width/c.height-l.width/l.height)),a&&(l.opacity=0),m.fancybox.setTranslate(r,s),d(r),m.fancybox.animate(r,l,n,h)):i&&n?m.fancybox.animate(c.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"),"fancybox-animated fancybox-fx-"+i,n,h):!0===t?setTimeout(h,n):h(),!0))},cleanUp:function(t){var e,i,n,r=this.current.opts.$orig;this.current.$slide.trigger("onReset"),this.$refs.container.empty().remove(),this.trigger("afterClose",t),this.current.opts.backFocus&&(r&&r.length&&r.is(":visible")||(r=this.$trigger),r&&r.length&&(i=l.scrollX,n=l.scrollY,r.trigger("focus"),m("html, body").scrollTop(n).scrollLeft(i))),this.current=null,(e=m.fancybox.getInstance())?e.activate():(m("body").removeClass("fancybox-active compensate-for-scrollbar"),m("#fancybox-style-noscroll").remove())},trigger:function(t,e){var i,n=Array.prototype.slice.call(arguments,1),r=e&&e.opts?e:this.current;if(r?n.unshift(r):r=this,n.unshift(this),m.isFunction(r.opts[t])&&(i=r.opts[t].apply(r,n)),!1===i)return i;"afterClose"!==t&&this.$refs?this.$refs.container.trigger(t+".fb",n):o.trigger(t+".fb",n)},updateControls:function(){var t=this,e=t.current,i=e.index,n=t.$refs.container,r=t.$refs.caption,o=e.opts.caption;e.$slide.trigger("refresh"),o&&o.length?(t.$caption=r).children().eq(0).html(o):t.$caption=null,t.hasHiddenControls||t.isIdle||t.showControls(),n.find("[data-fancybox-count]").html(t.group.length),n.find("[data-fancybox-index]").html(i+1),n.find("[data-fancybox-prev]").prop("disabled",!e.opts.loop&&i<=0),n.find("[data-fancybox-next]").prop("disabled",!e.opts.loop&&i>=t.group.length-1),"image"===e.type?n.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",e.opts.image.src||e.src).show():e.opts.toolbar&&n.find("[data-fancybox-download],[data-fancybox-zoom]").hide(),m(h.activeElement).is(":hidden,[disabled]")&&t.$refs.container.trigger("focus")},hideControls:function(t){var e=["infobar","toolbar","nav"];!t&&this.current.opts.preventCaptionOverlap||e.push("caption"),this.$refs.container.removeClass(e.map(function(t){return"fancybox-show-"+t}).join(" ")),this.hasHiddenControls=!0},showControls:function(){var t=this.current?this.current.opts:this.opts,e=this.$refs.container;this.hasHiddenControls=!1,this.idleSecondsCounter=0,e.toggleClass("fancybox-show-toolbar",!(!t.toolbar||!t.buttons)).toggleClass("fancybox-show-infobar",!!(t.infobar&&1<this.group.length)).toggleClass("fancybox-show-caption",!!this.$caption).toggleClass("fancybox-show-nav",!!(t.arrows&&1<this.group.length)).toggleClass("fancybox-is-modal",!!t.modal)},toggleControls:function(){this.hasHiddenControls?this.showControls():this.hideControls()}}),m.fancybox={version:"3.5.7",defaults:e,getInstance:function(t){var e=m('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),i=Array.prototype.slice.call(arguments,1);return e instanceof n&&("string"===m.type(t)?e[t].apply(e,i):"function"===m.type(t)&&t.apply(e,i),e)},open:function(t,e,i){return new n(t,e,i)},close:function(t){var e=this.getInstance();e&&(e.close(),!0===t&&this.close(t))},destroy:function(){this.close(!0),o.add("body").off("click.fb-start","**")},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:(g=h.createElement("div"),l.getComputedStyle&&l.getComputedStyle(g)&&l.getComputedStyle(g).getPropertyValue("transform")&&!(h.documentMode&&h.documentMode<11)),getTranslate:function(t){var e;return!(!t||!t.length)&&{top:(e=t[0].getBoundingClientRect()).top||0,left:e.left||0,width:e.width,height:e.height,opacity:parseFloat(t.css("opacity"))}},setTranslate:function(t,e){var i="",n={};if(t&&e)return void 0===e.left&&void 0===e.top||(i=(void 0===e.left?t.position().left:e.left)+"px, "+(void 0===e.top?t.position().top:e.top)+"px",i=this.use3d?"translate3d("+i+", 0px)":"translate("+i+")"),void 0!==e.scaleX&&void 0!==e.scaleY?i+=" scale("+e.scaleX+", "+e.scaleY+")":void 0!==e.scaleX&&(i+=" scaleX("+e.scaleX+")"),i.length&&(n.transform=i),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.width&&(n.width=e.width),void 0!==e.height&&(n.height=e.height),t.css(n)},animate:function(e,i,n,r,o){var a,s=this;m.isFunction(n)&&(r=n,n=null),s.stop(e),a=s.getTranslate(e),e.on(u,function(t){(!t||!t.originalEvent||e.is(t.originalEvent.target)&&"z-index"!=t.originalEvent.propertyName)&&(s.stop(e),m.isNumeric(n)&&e.css("transition-duration",""),m.isPlainObject(i)?void 0!==i.scaleX&&void 0!==i.scaleY&&s.setTranslate(e,{top:i.top,left:i.left,width:a.width*i.scaleX,height:a.height*i.scaleY,scaleX:1,scaleY:1}):!0!==o&&e.removeClass(i),m.isFunction(r)&&r(t))}),m.isNumeric(n)&&e.css("transition-duration",n+"ms"),m.isPlainObject(i)?(void 0!==i.scaleX&&void 0!==i.scaleY&&(delete i.width,delete i.height,e.parent().hasClass("fancybox-slide--image")&&e.parent().addClass("fancybox-is-scaling")),m.fancybox.setTranslate(e,i)):e.addClass(i),e.data("timer",setTimeout(function(){e.trigger(u)},n+33))},stop:function(t,e){t&&t.length&&(clearTimeout(t.data("timer")),e&&t.trigger(u),t.off(u).css("transition-duration",""),t.parent().removeClass("fancybox-is-scaling"))}},m.fn.fancybox=function(t){var e;return(e=(t=t||{}).selector||!1)?m("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},i):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},i),this},o.on("click.fb-start","[data-fancybox]",i),o.on("click.fb-start","[data-fancybox-trigger]",function(t){m('[data-fancybox="'+m(this).attr("data-fancybox-trigger")+'"]').eq(m(this).attr("data-fancybox-index")||0).trigger("click.fb-start",{$trigger:m(this)})}),f=null,o.on("mousedown mouseup focus blur",".fancybox-button",function(t){switch(t.type){case"mousedown":f=m(this);break;case"mouseup":f=null;break;case"focusin":m(".fancybox-button").removeClass("fancybox-focus"),m(this).is(f)||m(this).is("[disabled]")||m(this).addClass("fancybox-focus");break;case"focusout":m(".fancybox-button").removeClass("fancybox-focus")}})}var f,g}(window,document,jQuery),function(d){"use strict";var n={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"https://www.youtube-nocookie.com/embed/$4",thumb:"https://img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12]+"").replace(/\?/,"&")+"&output="+(t[12]&&0<t[12].indexOf("layer=c")?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}},f=function(i,t,e){if(i)return e=e||"","object"===d.type(e)&&(e=d.param(e,!0)),d.each(t,function(t,e){i=i.replace("$"+t,e||"")}),e.length&&(i+=(0<i.indexOf("?")?"&":"?")+e),i};d(document).on("objectNeedsType.fb",function(t,e,r){var i,o,a,s,l,u,c,h=r.src||"",p=!1;i=d.extend(!0,{},n,r.opts.media),d.each(i,function(t,e){if(a=h.match(e.matcher)){if(p=e.type,c=t,u={},e.paramPlace&&a[e.paramPlace]){"?"==(l=a[e.paramPlace])[0]&&(l=l.substring(1)),l=l.split("&");for(var i=0;i<l.length;++i){var n=l[i].split("=",2);2==n.length&&(u[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}}return s=d.extend(!0,{},e.params,r.opts[t],u),h="function"===d.type(e.url)?e.url.call(this,a,s,r):f(e.url,a,s),o="function"===d.type(e.thumb)?e.thumb.call(this,a,s,r):f(e.thumb,a),"youtube"===t?h=h.replace(/&t=((\d+)m)?(\d+)s/,function(t,e,i,n){return"&start="+((i?60*parseInt(i,10):0)+parseInt(n,10))}):"vimeo"===t&&(h=h.replace("&%23","#")),!1}}),p?(r.opts.thumb||r.opts.$thumb&&r.opts.$thumb.length||(r.opts.thumb=o),"iframe"===p&&(r.opts=d.extend(!0,r.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),d.extend(r,{type:p,src:h,origSrc:r.src,contentSource:c,contentType:"image"===p?"image":"gmap_place"==c||"gmap_search"==c?"map":"video"})):h&&(r.type=r.opts.defaultType)});var r={youtube:{src:"https://www.youtube.com/iframe_api",class:"YT",loading:!1,loaded:!1},vimeo:{src:"https://player.vimeo.com/api/player.js",class:"Vimeo",loading:!1,loaded:!1},load:function(t){var e,i=this;this[t].loaded?setTimeout(function(){i.done(t)}):this[t].loading||(this[t].loading=!0,(e=document.createElement("script")).type="text/javascript",e.src=this[t].src,"youtube"===t?window.onYouTubeIframeAPIReady=function(){i[t].loaded=!0,i.done(t)}:e.onload=function(){i[t].loaded=!0,i.done(t)},document.body.appendChild(e))},done:function(t){var e,i;"youtube"===t&&delete window.onYouTubeIframeAPIReady,(e=d.fancybox.getInstance())&&(i=e.current.$content.find("iframe"),"youtube"===t&&void 0!==YT&&YT?new YT.Player(i.attr("id"),{events:{onStateChange:function(t){0==t.data&&e.next()}}}):"vimeo"===t&&void 0!==Vimeo&&Vimeo&&new Vimeo.Player(i).on("ended",function(){e.next()}))}};d(document).on({"afterShow.fb":function(t,e,i){1<e.group.length&&("youtube"===i.contentSource||"vimeo"===i.contentSource)&&r.load(i.contentSource)}})}(jQuery),function(m,l,g){"use strict";var v=m.requestAnimationFrame||m.webkitRequestAnimationFrame||m.mozRequestAnimationFrame||m.oRequestAnimationFrame||function(t){return m.setTimeout(t,1e3/60)},y=m.cancelAnimationFrame||m.webkitCancelAnimationFrame||m.mozCancelAnimationFrame||m.oCancelAnimationFrame||function(t){m.clearTimeout(t)},c=function(t){var e=[];for(var i in t=(t=t.originalEvent||t||m.e).touches&&t.touches.length?t.touches:t.changedTouches&&t.changedTouches.length?t.changedTouches:[t])t[i].pageX?e.push({x:t[i].pageX,y:t[i].pageY}):t[i].clientX&&e.push({x:t[i].clientX,y:t[i].clientY});return e},_=function(t,e,i){return e&&t?"x"===i?t.x-e.x:"y"===i?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},u=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||g.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var e=0,i=t[0].attributes,n=i.length;e<n;e++)if("data-fancybox-"===i[e].nodeName.substr(0,14))return!0;return!1},h=function(t){for(var e=!1;(i=t.get(0),void 0,n=m.getComputedStyle(i)["overflow-y"],r=m.getComputedStyle(i)["overflow-x"],o=("scroll"===n||"auto"===n)&&i.scrollHeight>i.clientHeight,a=("scroll"===r||"auto"===r)&&i.scrollWidth>i.clientWidth,!(e=o||a))&&((t=t.parent()).length&&!t.hasClass("fancybox-stage")&&!t.is("body")););var i,n,r,o,a;return e},i=function(t){this.instance=t,this.$bg=t.$refs.bg,this.$stage=t.$refs.stage,this.$container=t.$refs.container,this.destroy(),this.$container.on("touchstart.fb.touch mousedown.fb.touch",g.proxy(this,"ontouchstart"))};i.prototype.destroy=function(){this.$container.off(".fb.touch"),g(l).off(".fb.touch"),this.requestId&&(y(this.requestId),this.requestId=null),this.tapped&&(clearTimeout(this.tapped),this.tapped=null)},i.prototype.ontouchstart=function(t){var e=this,i=g(t.target),n=e.instance,r=n.current,o=r.$slide,a=r.$content,s="touchstart"==t.type;if(s&&e.$container.off("mousedown.fb.touch"),(!t.originalEvent||2!=t.originalEvent.button)&&o.length&&i.length&&!u(i)&&!u(i.parent())&&(i.is("img")||!(t.originalEvent.clientX>i[0].clientWidth+i.offset().left))){if(!r||n.isAnimating||r.$slide.hasClass("fancybox-animated"))return t.stopPropagation(),void t.preventDefault();e.realPoints=e.startPoints=c(t),e.startPoints.length&&(r.touch&&t.stopPropagation(),e.startEvent=t,e.canTap=!0,e.$target=i,e.$content=a,e.opts=r.opts.touch,e.isPanning=!1,e.isSwiping=!1,e.isZooming=!1,e.isScrolling=!1,e.canPan=n.canPan(),e.startTime=(new Date).getTime(),e.distanceX=e.distanceY=e.distance=0,e.canvasWidth=Math.round(o[0].clientWidth),e.canvasHeight=Math.round(o[0].clientHeight),e.contentLastPos=null,e.contentStartPos=g.fancybox.getTranslate(e.$content)||{top:0,left:0},e.sliderStartPos=g.fancybox.getTranslate(o),e.stagePos=g.fancybox.getTranslate(n.$refs.stage),e.sliderStartPos.top-=e.stagePos.top,e.sliderStartPos.left-=e.stagePos.left,e.contentStartPos.top-=e.stagePos.top,e.contentStartPos.left-=e.stagePos.left,g(l).off(".fb.touch").on(s?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",g.proxy(e,"ontouchend")).on(s?"touchmove.fb.touch":"mousemove.fb.touch",g.proxy(e,"ontouchmove")),g.fancybox.isMobile&&l.addEventListener("scroll",e.onscroll,!0),((e.opts||e.canPan)&&(i.is(e.$stage)||e.$stage.find(i).length)||(i.is(".fancybox-image")&&t.preventDefault(),g.fancybox.isMobile&&i.parents(".fancybox-caption").length))&&(e.isScrollable=h(i)||h(i.parent()),g.fancybox.isMobile&&e.isScrollable||t.preventDefault(),(1===e.startPoints.length||r.hasError)&&(e.canPan?(g.fancybox.stop(e.$content),e.isPanning=!0):e.isSwiping=!0,e.$container.addClass("fancybox-is-grabbing")),2===e.startPoints.length&&"image"===r.type&&(r.isLoaded||r.$ghost)&&(e.canTap=!1,e.isSwiping=!1,e.isPanning=!1,e.isZooming=!0,g.fancybox.stop(e.$content),e.centerPointStartX=.5*(e.startPoints[0].x+e.startPoints[1].x)-g(m).scrollLeft(),e.centerPointStartY=.5*(e.startPoints[0].y+e.startPoints[1].y)-g(m).scrollTop(),e.percentageOfImageAtPinchPointX=(e.centerPointStartX-e.contentStartPos.left)/e.contentStartPos.width,e.percentageOfImageAtPinchPointY=(e.centerPointStartY-e.contentStartPos.top)/e.contentStartPos.height,e.startDistanceBetweenFingers=_(e.startPoints[0],e.startPoints[1]))))}},i.prototype.onscroll=function(t){this.isScrolling=!0,l.removeEventListener("scroll",this.onscroll,!0)},i.prototype.ontouchmove=function(t){var e=this;return void 0!==t.originalEvent.buttons&&0===t.originalEvent.buttons?void e.ontouchend(t):e.isScrolling?void(e.canTap=!1):(e.newPoints=c(t),void((e.opts||e.canPan)&&e.newPoints.length&&e.newPoints.length&&(e.isSwiping&&!0===e.isSwiping||t.preventDefault(),e.distanceX=_(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=_(e.newPoints[0],e.startPoints[0],"y"),e.distance=_(e.newPoints[0],e.startPoints[0]),0<e.distance&&(e.isSwiping?e.onSwipe(t):e.isPanning?e.onPan():e.isZooming&&e.onZoom()))))},i.prototype.onSwipe=function(t){var e,r=this,o=r.instance,i=r.isSwiping,n=r.sliderStartPos.left||0;if(!0!==i)"x"==i&&(0<r.distanceX&&(r.instance.group.length<2||0===r.instance.current.index&&!r.instance.current.opts.loop)?n+=Math.pow(r.distanceX,.8):r.distanceX<0&&(r.instance.group.length<2||r.instance.current.index===r.instance.group.length-1&&!r.instance.current.opts.loop)?n-=Math.pow(-r.distanceX,.8):n+=r.distanceX),r.sliderLastPos={top:"x"==i?0:r.sliderStartPos.top+r.distanceY,left:n},r.requestId&&(y(r.requestId),r.requestId=null),r.requestId=v(function(){r.sliderLastPos&&(g.each(r.instance.slides,function(t,e){var i=e.pos-r.instance.currPos;g.fancybox.setTranslate(e.$slide,{top:r.sliderLastPos.top,left:r.sliderLastPos.left+i*r.canvasWidth+i*e.opts.gutter})}),r.$container.addClass("fancybox-is-sliding"))});else if(10<Math.abs(r.distance)){if(r.canTap=!1,o.group.length<2&&r.opts.vertical?r.isSwiping="y":o.isDragging||!1===r.opts.vertical||"auto"===r.opts.vertical&&800<g(m).width()?r.isSwiping="x":(e=Math.abs(180*Math.atan2(r.distanceY,r.distanceX)/Math.PI),r.isSwiping=45<e&&e<135?"y":"x"),"y"===r.isSwiping&&g.fancybox.isMobile&&r.isScrollable)return void(r.isScrolling=!0);o.isDragging=r.isSwiping,r.startPoints=r.newPoints,g.each(o.slides,function(t,e){var i,n;g.fancybox.stop(e.$slide),i=g.fancybox.getTranslate(e.$slide),n=g.fancybox.getTranslate(o.$refs.stage),e.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}),e.pos===o.current.pos&&(r.sliderStartPos.top=i.top-n.top,r.sliderStartPos.left=i.left-n.left),g.fancybox.setTranslate(e.$slide,{top:i.top-n.top,left:i.left-n.left})}),o.SlideShow&&o.SlideShow.isActive&&o.SlideShow.stop()}},i.prototype.onPan=function(){var t=this;_(t.newPoints[0],t.realPoints[0])<(g.fancybox.isMobile?10:5)?t.startPoints=t.newPoints:(t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&y(t.requestId),t.requestId=v(function(){g.fancybox.setTranslate(t.$content,t.contentLastPos)}))},i.prototype.limitMovement=function(){var t,e,i,n,r,o,a=this.canvasWidth,s=this.canvasHeight,l=this.distanceX,u=this.distanceY,c=this.contentStartPos,h=c.left,p=c.top,d=c.width,f=c.height;return r=a<d?h+l:h,o=p+u,t=Math.max(0,.5*a-.5*d),e=Math.max(0,.5*s-.5*f),i=Math.min(a-d,.5*a-.5*d),n=Math.min(s-f,.5*s-.5*f),0<l&&t<r&&(r=t-1+Math.pow(-t+h+l,.8)||0),l<0&&r<i&&(r=i+1-Math.pow(i-h-l,.8)||0),0<u&&e<o&&(o=e-1+Math.pow(-e+p+u,.8)||0),u<0&&o<n&&(o=n+1-Math.pow(n-p-u,.8)||0),{top:o,left:r}},i.prototype.limitPosition=function(t,e,i,n){var r=this.canvasWidth,o=this.canvasHeight;return r<i?t=(t=0<t?0:t)<r-i?r-i:t:t=Math.max(0,r/2-i/2),o<n?e=(e=0<e?0:e)<o-n?o-n:e:e=Math.max(0,o/2-n/2),{top:e,left:t}},i.prototype.onZoom=function(){var t=this,e=t.contentStartPos,i=e.width,n=e.height,r=e.left,o=e.top,a=_(t.newPoints[0],t.newPoints[1])/t.startDistanceBetweenFingers,s=Math.floor(i*a),l=Math.floor(n*a),u=(i-s)*t.percentageOfImageAtPinchPointX,c=(n-l)*t.percentageOfImageAtPinchPointY,h=(t.newPoints[0].x+t.newPoints[1].x)/2-g(m).scrollLeft(),p=(t.newPoints[0].y+t.newPoints[1].y)/2-g(m).scrollTop(),d=h-t.centerPointStartX,f={top:o+(c+(p-t.centerPointStartY)),left:r+(u+d),scaleX:a,scaleY:a};t.canTap=!1,t.newWidth=s,t.newHeight=l,t.contentLastPos=f,t.requestId&&y(t.requestId),t.requestId=v(function(){g.fancybox.setTranslate(t.$content,t.contentLastPos)})},i.prototype.ontouchend=function(t){var e=this,i=e.isSwiping,n=e.isPanning,r=e.isZooming,o=e.isScrolling;if(e.endPoints=c(t),e.dMs=Math.max((new Date).getTime()-e.startTime,1),e.$container.removeClass("fancybox-is-grabbing"),g(l).off(".fb.touch"),l.removeEventListener("scroll",e.onscroll,!0),e.requestId&&(y(e.requestId),e.requestId=null),e.isSwiping=!1,e.isPanning=!1,e.isZooming=!1,e.isScrolling=!1,e.instance.isDragging=!1,e.canTap)return e.onTap(t);e.speed=100,e.velocityX=e.distanceX/e.dMs*.5,e.velocityY=e.distanceY/e.dMs*.5,n?e.endPanning():r?e.endZooming():e.endSwiping(i,o)},i.prototype.endSwiping=function(t,e){var i=this,n=!1,r=i.instance.group.length,o=Math.abs(i.distanceX),a="x"==t&&1<r&&(130<i.dMs&&10<o||50<o);i.sliderLastPos=null,"y"==t&&!e&&50<Math.abs(i.distanceY)?(g.fancybox.animate(i.instance.current.$slide,{top:i.sliderStartPos.top+i.distanceY+150*i.velocityY,opacity:0},200),n=i.instance.close(!0,250)):a&&0<i.distanceX?n=i.instance.previous(300):a&&i.distanceX<0&&(n=i.instance.next(300)),!1!==n||"x"!=t&&"y"!=t||i.instance.centerSlide(200),i.$container.removeClass("fancybox-is-sliding")},i.prototype.endPanning=function(){var t,e,i,n=this;n.contentLastPos&&(!1===n.opts.momentum||350<n.dMs?(t=n.contentLastPos.left,e=n.contentLastPos.top):(t=n.contentLastPos.left+500*n.velocityX,e=n.contentLastPos.top+500*n.velocityY),(i=n.limitPosition(t,e,n.contentStartPos.width,n.contentStartPos.height)).width=n.contentStartPos.width,i.height=n.contentStartPos.height,g.fancybox.animate(n.$content,i,366))},i.prototype.endZooming=function(){var t,e,i,n,r=this,o=r.instance.current,a=r.newWidth,s=r.newHeight;r.contentLastPos&&(t=r.contentLastPos.left,n={top:e=r.contentLastPos.top,left:t,width:a,height:s,scaleX:1,scaleY:1},g.fancybox.setTranslate(r.$content,n),a<r.canvasWidth&&s<r.canvasHeight?r.instance.scaleToFit(150):a>o.width||s>o.height?r.instance.scaleToActual(r.centerPointStartX,r.centerPointStartY,150):(i=r.limitPosition(t,e,a,s),g.fancybox.animate(r.$content,i,150)))},i.prototype.onTap=function(i){var t,n=this,e=g(i.target),r=n.instance,o=r.current,a=i&&c(i)||n.startPoints,s=a[0]?a[0].x-g(m).scrollLeft()-n.stagePos.left:0,l=a[0]?a[0].y-g(m).scrollTop()-n.stagePos.top:0,u=function(t){var e=o.opts[t];if(g.isFunction(e)&&(e=e.apply(r,[o,i])),e)switch(e){case"close":r.close(n.startEvent);break;case"toggleControls":r.toggleControls();break;case"next":r.next();break;case"nextOrClose":1<r.group.length?r.next():r.close(n.startEvent);break;case"zoom":"image"==o.type&&(o.isLoaded||o.$ghost)&&(r.canPan()?r.scaleToFit():r.isScaledDown()?r.scaleToActual(s,l):r.group.length<2&&r.close(n.startEvent))}};if((!i.originalEvent||2!=i.originalEvent.button)&&(e.is("img")||!(s>e[0].clientWidth+e.offset().left))){if(e.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))t="Outside";else if(e.is(".fancybox-slide"))t="Slide";else{if(!r.current.$content||!r.current.$content.find(e).addBack().filter(e).length)return;t="Content"}if(n.tapped){if(clearTimeout(n.tapped),n.tapped=null,50<Math.abs(s-n.tapX)||50<Math.abs(l-n.tapY))return this;u("dblclick"+t)}else n.tapX=s,n.tapY=l,o.opts["dblclick"+t]&&o.opts["dblclick"+t]!==o.opts["click"+t]?n.tapped=setTimeout(function(){n.tapped=null,r.isAnimating||u("click"+t)},500):u("click"+t);return this}},g(l).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new i(e))}).on("beforeClose.fb",function(t,e){e&&e.Guestures&&e.Guestures.destroy()})}(window,document,jQuery),function(a,s){"use strict";s.extend(!0,s.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg></button>'},slideShow:{autoStart:!1,speed:3e3,progress:!0}});var i=function(t){this.instance=t,this.init()};s.extend(i.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this,e=t.instance,i=e.group[e.currIndex].opts.slideShow;t.$button=e.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){t.toggle()}),e.group.length<2||!i?t.$button.hide():i.progress&&(t.$progress=s('<div class="fancybox-progress"></div>').appendTo(e.$refs.inner))},set:function(t){var e=this.instance,i=e.current;i&&(!0===t||i.opts.loop||e.currIndex<e.group.length-1)?this.isActive&&"video"!==i.contentType&&(this.$progress&&s.fancybox.animate(this.$progress.show(),{scaleX:1},i.opts.slideShow.speed),this.timer=setTimeout(function(){e.current.opts.loop||e.current.index!=e.group.length-1?e.next():e.jumpTo(0)},i.opts.slideShow.speed)):(this.stop(),e.idleSecondsCounter=0,e.showControls())},clear:function(){clearTimeout(this.timer),this.timer=null,this.$progress&&this.$progress.removeAttr("style").hide()},start:function(){var t=this.instance.current;t&&(this.$button.attr("title",(t.opts.i18n[t.opts.lang]||t.opts.i18n.en).PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),this.isActive=!0,t.isComplete&&this.set(!0),this.instance.trigger("onSlideShowChange",!0))},stop:function(){var t=this.instance.current;this.clear(),this.$button.attr("title",(t.opts.i18n[t.opts.lang]||t.opts.i18n.en).PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),this.isActive=!1,this.instance.trigger("onSlideShowChange",!1),this.$progress&&this.$progress.removeAttr("style").hide()},toggle:function(){this.isActive?this.stop():this.start()}}),s(a).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new i(e))},"beforeShow.fb":function(t,e,i,n){var r=e&&e.SlideShow;n?r&&i.opts.slideShow.autoStart&&r.start():r&&r.isActive&&r.clear()},"afterShow.fb":function(t,e,i){var n=e&&e.SlideShow;n&&n.isActive&&n.set()},"afterKeydown.fb":function(t,e,i,n,r){var o=e&&e.SlideShow;!o||!i.opts.slideShow||80!==r&&32!==r||s(a.activeElement).is("button,a,input")||(n.preventDefault(),o.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){var i=e&&e.SlideShow;i&&i.stop()}}),s(a).on("visibilitychange",function(){var t=s.fancybox.getInstance(),e=t&&t.SlideShow;e&&e.isActive&&(a.hidden?e.clear():e.set())})}(document,jQuery),function(o,i){"use strict";var n=function(){for(var t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],e={},i=0;i<t.length;i++){var n=t[i];if(n&&n[1]in o){for(var r=0;r<n.length;r++)e[t[0][r]]=n[r];return e}}return!1}();if(n){var r={request:function(t){(t=t||o.documentElement)[n.requestFullscreen](t.ALLOW_KEYBOARD_INPUT)},exit:function(){o[n.exitFullscreen]()},toggle:function(t){t=t||o.documentElement,this.isFullscreen()?this.exit():this.request(t)},isFullscreen:function(){return Boolean(o[n.fullscreenElement])},enabled:function(){return Boolean(o[n.fullscreenEnabled])}};i.extend(!0,i.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg></button>'},fullScreen:{autoStart:!1}}),i(o).on(n.fullscreenchange,function(){var t=r.isFullscreen(),e=i.fancybox.getInstance();e&&(e.current&&"image"===e.current.type&&e.isAnimating&&(e.isAnimating=!1,e.update(!0,!0,0),e.isComplete||e.complete()),e.trigger("onFullscreenChange",t),e.$refs.container.toggleClass("fancybox-is-fullscreen",t),e.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter",!t).toggleClass("fancybox-button--fsexit",t))})}i(o).on({"onInit.fb":function(t,e){n?e&&e.group[e.currIndex].opts.fullScreen?(e.$refs.container.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),r.toggle()}),e.opts.fullScreen&&!0===e.opts.fullScreen.autoStart&&r.request(),e.FullScreen=r):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide():e.$refs.toolbar.find("[data-fancybox-fullscreen]").remove()},"afterKeydown.fb":function(t,e,i,n,r){e&&e.FullScreen&&70===r&&(n.preventDefault(),e.FullScreen.toggle())},"beforeClose.fb":function(t,e){e&&e.FullScreen&&e.$refs.container.hasClass("fancybox-is-fullscreen")&&r.exit()}})}(document,jQuery),function(t,o){"use strict";var a="fancybox-thumbs";o.fancybox.defaults=o.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},o.fancybox.defaults);var n=function(t){this.init(t)};o.extend(n.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e=this,i=t.group,n=0;e.instance=t,e.opts=i[t.currIndex].opts.thumbs,(t.Thumbs=e).$button=t.$refs.toolbar.find("[data-fancybox-thumbs]");for(var r=0,o=i.length;r<o&&(i[r].thumb&&n++,!(1<n));r++);1<n&&e.opts?(e.$button.removeAttr("style").on("click",function(){e.toggle()}),e.isActive=!0):e.$button.hide()},create:function(){var i,t=this,e=t.instance,n=t.opts.parentEl,r=[];t.$grid||(t.$grid=o('<div class="'+a+" "+a+"-"+t.opts.axis+'"></div>').appendTo(e.$refs.container.find(n).addBack().filter(n)),t.$grid.on("click","a",function(){e.jumpTo(o(this).attr("data-index"))})),t.$list||(t.$list=o('<div class="'+a+'__list">').appendTo(t.$grid)),o.each(e.group,function(t,e){(i=e.thumb)||"image"!==e.type||(i=e.src),r.push('<a href="javascript:;" tabindex="0" data-index="'+t+'"'+(i&&i.length?' style="background-image:url('+i+')"':'class="fancybox-thumbs-missing"')+"></a>")}),t.$list[0].innerHTML=r.join(""),"x"===t.opts.axis&&t.$list.width(parseInt(t.$grid.css("padding-right"),10)+e.group.length*t.$list.children().eq(0).outerWidth(!0))},focus:function(t){var e,i,n=this.$list,r=this.$grid;this.instance.current&&(i=(e=n.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+this.instance.current.index+'"]').addClass("fancybox-thumbs-active")).position(),"y"===this.opts.axis&&(i.top<0||i.top>n.height()-e.outerHeight())?n.stop().animate({scrollTop:n.scrollTop()+i.top},t):"x"===this.opts.axis&&(i.left<r.scrollLeft()||i.left>r.scrollLeft()+(r.width()-e.outerWidth()))&&n.parent().stop().animate({scrollLeft:i.left},t))},update:function(){this.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),this.isVisible?(this.$grid||this.create(),this.instance.trigger("onThumbsShow"),this.focus(0)):this.$grid&&this.instance.trigger("onThumbsHide"),this.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),o(t).on({"onInit.fb":function(t,e){var i;e&&!e.Thumbs&&((i=new n(e)).isActive&&!0===i.opts.autoStart&&i.show())},"beforeShow.fb":function(t,e,i,n){var r=e&&e.Thumbs;r&&r.isVisible&&r.focus(n?0:250)},"afterKeydown.fb":function(t,e,i,n,r){var o=e&&e.Thumbs;o&&o.isActive&&71===r&&(n.preventDefault(),o.toggle())},"beforeClose.fb":function(t,e){var i=e&&e.Thumbs;i&&i.isVisible&&!1!==i.opts.hideOnClose&&i.$grid.hide()}})}(document,jQuery),function(t,a){"use strict";a.extend(!0,a.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg></button>'},share:{url:function(t,e){return!t.currentHash&&"inline"!==e.type&&"html"!==e.type&&(e.origSrc||e.src)||window.location},tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p></div>'}}),a(t).on("click","[data-fancybox-share]",function(){var t,e,i,n,r=a.fancybox.getInstance(),o=r.current||null;o&&("function"===a.type(o.opts.share.url)&&(t=o.opts.share.url.apply(o,[r,o])),e=o.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===o.type?encodeURIComponent(o.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g,(i=t,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},String(i).replace(/[&<>"'`=\/]/g,function(t){return n[t]}))).replace(/\{\{descr\}\}/g,r.$caption?encodeURIComponent(r.$caption.text()):""),a.fancybox.open({src:r.translate(r,e),type:"html",opts:{touch:!1,animationEffect:!1,afterLoad:function(t,e){r.$refs.container.one("beforeClose.fb",function(){t.close(null,0)}),e.$content.find(".fancybox-share__button").click(function(){return window.open(this.href,"Share","width=550, height=450"),!1})},mobile:{autoFocus:!1}}}))})}(document,jQuery),function(o,a,r){"use strict";function s(){var t=o.location.hash.substr(1),e=t.split("-"),i=1<e.length&&/^\+?\d+$/.test(e[e.length-1])&&parseInt(e.pop(-1),10)||1;return{hash:t,index:i<1?1:i,gallery:e.join("-")}}function e(t){""!==t.gallery&&r("[data-fancybox='"+r.escapeSelector(t.gallery)+"']").eq(t.index-1).focus().trigger("click.fb-start")}function l(t){var e,i;return!!t&&(""!==(i=(e=t.current?t.current.opts:t.opts).hash||(e.$orig?e.$orig.data("fancybox")||e.$orig.data("fancybox-trigger"):""))&&i)}r.escapeSelector||(r.escapeSelector=function(t){return(t+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t})}),r(function(){!1!==r.fancybox.defaults.hash&&(r(a).on({"onInit.fb":function(t,e){var i,n;!1!==e.group[e.currIndex].opts.hash&&(i=s(),(n=l(e))&&i.gallery&&n==i.gallery&&(e.currIndex=i.index-1))},"beforeShow.fb":function(t,e,i,n){var r;i&&!1!==i.opts.hash&&(r=l(e))&&(e.currentHash=r+(1<e.group.length?"-"+(i.index+1):""),o.location.hash!=="#"+e.currentHash&&(n&&!e.origHash&&(e.origHash=o.location.hash),e.hashTimer&&clearTimeout(e.hashTimer),e.hashTimer=setTimeout(function(){"replaceState"in o.history?(o.history[n?"pushState":"replaceState"]({},a.title,o.location.pathname+o.location.search+"#"+e.currentHash),n&&(e.hasCreatedHistory=!0)):o.location.hash=e.currentHash,e.hashTimer=null},300)))},"beforeClose.fb":function(t,e,i){i&&!1!==i.opts.hash&&(clearTimeout(e.hashTimer),e.currentHash&&e.hasCreatedHistory?o.history.back():e.currentHash&&("replaceState"in o.history?o.history.replaceState({},a.title,o.location.pathname+o.location.search+(e.origHash||"")):o.location.hash=e.origHash),e.currentHash=null)}}),r(o).on("hashchange.fb",function(){var t=s(),n=null;r.each(r(".fancybox-container").get().reverse(),function(t,e){var i=r(e).data("FancyBox");if(i&&i.currentHash)return n=i,!1}),n?n.currentHash===t.gallery+"-"+t.index||1===t.index&&n.currentHash==t.gallery||(n.currentHash=null,n.close()):""!==t.gallery&&e(t)}),setTimeout(function(){r.fancybox.getInstance()||e(s())},50))})}(window,document,jQuery),function(t,e){"use strict";var r=(new Date).getTime();e(t).on({"onInit.fb":function(t,n,e){n.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",function(t){var e=n.current,i=(new Date).getTime();n.group.length<2||!1===e.opts.wheel||"auto"===e.opts.wheel&&"image"!==e.type||(t.preventDefault(),t.stopPropagation(),e.$slide.hasClass("fancybox-animated")||(t=t.originalEvent||t,i-r<250||(r=i,n[(-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)<0?"next":"previous"]())))})}})}(document,jQuery),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(u){"use strict";var r,o=window.Slick||{};(r=0,o=function(t,e){var i,n=this;n.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:u(t),appendDots:u(t),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,e){return u('<button type="button" />').text(e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},n.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},u.extend(n,n.initials),n.activeBreakpoint=null,n.animType=null,n.animProp=null,n.breakpoints=[],n.breakpointSettings=[],n.cssTransitions=!1,n.focussed=!1,n.interrupted=!1,n.hidden="hidden",n.paused=!0,n.positionProp=null,n.respondTo=null,n.rowCount=1,n.shouldClick=!0,n.$slider=u(t),n.$slidesCache=null,n.transformType=null,n.transitionType=null,n.visibilityChange="visibilitychange",n.windowWidth=0,n.windowTimer=null,i=u(t).data("slick")||{},n.options=u.extend({},n.defaults,e,i),n.currentSlide=n.options.initialSlide,n.originalSettings=n.options,void 0!==document.mozHidden?(n.hidden="mozHidden",n.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(n.hidden="webkitHidden",n.visibilityChange="webkitvisibilitychange"),n.autoPlay=u.proxy(n.autoPlay,n),n.autoPlayClear=u.proxy(n.autoPlayClear,n),n.autoPlayIterator=u.proxy(n.autoPlayIterator,n),n.changeSlide=u.proxy(n.changeSlide,n),n.clickHandler=u.proxy(n.clickHandler,n),n.selectHandler=u.proxy(n.selectHandler,n),n.setPosition=u.proxy(n.setPosition,n),n.swipeHandler=u.proxy(n.swipeHandler,n),n.dragHandler=u.proxy(n.dragHandler,n),n.keyHandler=u.proxy(n.keyHandler,n),n.instanceUid=r++,n.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,n.registerBreakpoints(),n.init(!0)}).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},o.prototype.addSlide=o.prototype.slickAdd=function(t,e,i){var n=this;if("boolean"==typeof e)i=e,e=null;else if(e<0||e>=n.slideCount)return!1;n.unload(),"number"==typeof e?0===e&&0===n.$slides.length?u(t).appendTo(n.$slideTrack):i?u(t).insertBefore(n.$slides.eq(e)):u(t).insertAfter(n.$slides.eq(e)):!0===i?u(t).prependTo(n.$slideTrack):u(t).appendTo(n.$slideTrack),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slides.each(function(t,e){u(e).attr("data-slick-index",t)}),n.$slidesCache=n.$slides,n.reinit()},o.prototype.animateHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var t=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.animate({height:t},this.options.speed)}},o.prototype.animateSlide=function(t,e){var i={},n=this;n.animateHeight(),!0===n.options.rtl&&!1===n.options.vertical&&(t=-t),!1===n.transformsEnabled?!1===n.options.vertical?n.$slideTrack.animate({left:t},n.options.speed,n.options.easing,e):n.$slideTrack.animate({top:t},n.options.speed,n.options.easing,e):!1===n.cssTransitions?(!0===n.options.rtl&&(n.currentLeft=-n.currentLeft),u({animStart:n.currentLeft}).animate({animStart:t},{duration:n.options.speed,easing:n.options.easing,step:function(t){t=Math.ceil(t),!1===n.options.vertical?i[n.animType]="translate("+t+"px, 0px)":i[n.animType]="translate(0px,"+t+"px)",n.$slideTrack.css(i)},complete:function(){e&&e.call()}})):(n.applyTransition(),t=Math.ceil(t),!1===n.options.vertical?i[n.animType]="translate3d("+t+"px, 0px, 0px)":i[n.animType]="translate3d(0px,"+t+"px, 0px)",n.$slideTrack.css(i),e&&setTimeout(function(){n.disableTransition(),e.call()},n.options.speed))},o.prototype.getNavTarget=function(){var t=this.options.asNavFor;return t&&null!==t&&(t=u(t).not(this.$slider)),t},o.prototype.asNavFor=function(e){var t=this.getNavTarget();null!==t&&"object"==typeof t&&t.each(function(){var t=u(this).slick("getSlick");t.unslicked||t.slideHandler(e,!0)})},o.prototype.applyTransition=function(t){var e=this,i={};!1===e.options.fade?i[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:i[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(i):e.$slides.eq(t).css(i)},o.prototype.autoPlay=function(){this.autoPlayClear(),this.slideCount>this.options.slidesToShow&&(this.autoPlayTimer=setInterval(this.autoPlayIterator,this.options.autoplaySpeed))},o.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},o.prototype.autoPlayIterator=function(){var t=this,e=t.currentSlide+t.options.slidesToScroll;t.paused||t.interrupted||t.focussed||(!1===t.options.infinite&&(1===t.direction&&t.currentSlide+1===t.slideCount-1?t.direction=0:0===t.direction&&(e=t.currentSlide-t.options.slidesToScroll,t.currentSlide-1==0&&(t.direction=1))),t.slideHandler(e))},o.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&(t.$prevArrow=u(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=u(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},o.prototype.buildDots=function(){var t,e;if(!0===this.options.dots){for(this.$slider.addClass("slick-dotted"),e=u("<ul />").addClass(this.options.dotsClass),t=0;t<=this.getDotCount();t+=1)e.append(u("<li />").append(this.options.customPaging.call(this,this,t)));this.$dots=e.appendTo(this.options.appendDots),this.$dots.find("li").first().addClass("slick-active")}},o.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,e){u(e).attr("data-slick-index",t).data("originalStyling",u(e).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?u('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),!0!==t.options.centerMode&&!0!==t.options.swipeToSlide||(t.options.slidesToScroll=1),u("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},o.prototype.buildRows=function(){var t,e,i,n,r,o,a,s=this;if(n=document.createDocumentFragment(),o=s.$slider.children(),1<s.options.rows){for(a=s.options.slidesPerRow*s.options.rows,r=Math.ceil(o.length/a),t=0;t<r;t++){var l=document.createElement("div");for(e=0;e<s.options.rows;e++){var u=document.createElement("div");for(i=0;i<s.options.slidesPerRow;i++){var c=t*a+(e*s.options.slidesPerRow+i);o.get(c)&&u.appendChild(o.get(c))}l.appendChild(u)}n.appendChild(l)}s.$slider.empty().append(n),s.$slider.children().children().children().css({width:100/s.options.slidesPerRow+"%",display:"inline-block"})}},o.prototype.checkResponsive=function(t,e){var i,n,r,o=this,a=!1,s=o.$slider.width(),l=window.innerWidth||u(window).width();if("window"===o.respondTo?r=l:"slider"===o.respondTo?r=s:"min"===o.respondTo&&(r=Math.min(l,s)),o.options.responsive&&o.options.responsive.length&&null!==o.options.responsive){for(i in n=null,o.breakpoints)o.breakpoints.hasOwnProperty(i)&&(!1===o.originalSettings.mobileFirst?r<o.breakpoints[i]&&(n=o.breakpoints[i]):r>o.breakpoints[i]&&(n=o.breakpoints[i]));null!==n?null!==o.activeBreakpoint?(n!==o.activeBreakpoint||e)&&(o.activeBreakpoint=n,"unslick"===o.breakpointSettings[n]?o.unslick(n):(o.options=u.extend({},o.originalSettings,o.breakpointSettings[n]),!0===t&&(o.currentSlide=o.options.initialSlide),o.refresh(t)),a=n):(o.activeBreakpoint=n,"unslick"===o.breakpointSettings[n]?o.unslick(n):(o.options=u.extend({},o.originalSettings,o.breakpointSettings[n]),!0===t&&(o.currentSlide=o.options.initialSlide),o.refresh(t)),a=n):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=o.originalSettings,!0===t&&(o.currentSlide=o.options.initialSlide),o.refresh(t),a=n),t||!1===a||o.$slider.trigger("breakpoint",[o,a])}},o.prototype.changeSlide=function(t,e){var i,n,r=this,o=u(t.currentTarget);switch(o.is("a")&&t.preventDefault(),o.is("li")||(o=o.closest("li")),i=r.slideCount%r.options.slidesToScroll!=0?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,t.data.message){case"previous":n=0===i?r.options.slidesToScroll:r.options.slidesToShow-i,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-n,!1,e);break;case"next":n=0===i?r.options.slidesToScroll:i,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+n,!1,e);break;case"index":var a=0===t.data.index?0:t.data.index||o.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(a),!1,e),o.children().trigger("focus");break;default:return}},o.prototype.checkNavigable=function(t){var e,i;if(i=0,t>(e=this.getNavigableIndexes())[e.length-1])t=e[e.length-1];else for(var n in e){if(t<e[n]){t=i;break}i=e[n]}return t},o.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(u("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",u.proxy(t.interrupt,t,!0)).off("mouseleave.slick",u.proxy(t.interrupt,t,!1)),!0===t.options.accessibility&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),u(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&u(t.$slideTrack).children().off("click.slick",t.selectHandler),u(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),u(window).off("resize.slick.slick-"+t.instanceUid,t.resize),u("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),u(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},o.prototype.cleanUpSlideEvents=function(){this.$list.off("mouseenter.slick",u.proxy(this.interrupt,this,!0)),this.$list.off("mouseleave.slick",u.proxy(this.interrupt,this,!1))},o.prototype.cleanUpRows=function(){var t;1<this.options.rows&&((t=this.$slides.children().children()).removeAttr("style"),this.$slider.empty().append(t))},o.prototype.clickHandler=function(t){!1===this.shouldClick&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())},o.prototype.destroy=function(t){var e=this;e.autoPlayClear(),e.touchObject={},e.cleanUpEvents(),u(".slick-cloned",e.$slider).detach(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.$prevArrow.length&&(e.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove()),e.$nextArrow&&e.$nextArrow.length&&(e.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove()),e.$slides&&(e.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){u(this).attr("style",u(this).data("originalStyling"))}),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.detach(),e.$list.detach(),e.$slider.append(e.$slides)),e.cleanUpRows(),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.$slider.removeClass("slick-dotted"),e.unslicked=!0,t||e.$slider.trigger("destroy",[e])},o.prototype.disableTransition=function(t){var e={};e[this.transitionType]="",!1===this.options.fade?this.$slideTrack.css(e):this.$slides.eq(t).css(e)},o.prototype.fadeSlide=function(t,e){var i=this;!1===i.cssTransitions?(i.$slides.eq(t).css({zIndex:i.options.zIndex}),i.$slides.eq(t).animate({opacity:1},i.options.speed,i.options.easing,e)):(i.applyTransition(t),i.$slides.eq(t).css({opacity:1,zIndex:i.options.zIndex}),e&&setTimeout(function(){i.disableTransition(t),e.call()},i.options.speed))},o.prototype.fadeSlideOut=function(t){!1===this.cssTransitions?this.$slides.eq(t).animate({opacity:0,zIndex:this.options.zIndex-2},this.options.speed,this.options.easing):(this.applyTransition(t),this.$slides.eq(t).css({opacity:0,zIndex:this.options.zIndex-2}))},o.prototype.filterSlides=o.prototype.slickFilter=function(t){null!==t&&(this.$slidesCache=this.$slides,this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.filter(t).appendTo(this.$slideTrack),this.reinit())},o.prototype.focusHandler=function(){var i=this;i.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(t){t.stopImmediatePropagation();var e=u(this);setTimeout(function(){i.options.pauseOnFocus&&(i.focussed=e.is(":focus"),i.autoPlay())},0)})},o.prototype.getCurrent=o.prototype.slickCurrentSlide=function(){return this.currentSlide},o.prototype.getDotCount=function(){var t=this,e=0,i=0,n=0;if(!0===t.options.infinite)if(t.slideCount<=t.options.slidesToShow)++n;else for(;e<t.slideCount;)++n,e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else if(!0===t.options.centerMode)n=t.slideCount;else if(t.options.asNavFor)for(;e<t.slideCount;)++n,e=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else n=1+Math.ceil((t.slideCount-t.options.slidesToShow)/t.options.slidesToScroll);return n-1},o.prototype.getLeft=function(t){var e,i,n,r,o=this,a=0;return o.slideOffset=0,i=o.$slides.first().outerHeight(!0),!0===o.options.infinite?(o.slideCount>o.options.slidesToShow&&(o.slideOffset=o.slideWidth*o.options.slidesToShow*-1,r=-1,!0===o.options.vertical&&!0===o.options.centerMode&&(2===o.options.slidesToShow?r=-1.5:1===o.options.slidesToShow&&(r=-2)),a=i*o.options.slidesToShow*r),o.slideCount%o.options.slidesToScroll!=0&&t+o.options.slidesToScroll>o.slideCount&&o.slideCount>o.options.slidesToShow&&(t>o.slideCount?(o.slideOffset=(o.options.slidesToShow-(t-o.slideCount))*o.slideWidth*-1,a=(o.options.slidesToShow-(t-o.slideCount))*i*-1):(o.slideOffset=o.slideCount%o.options.slidesToScroll*o.slideWidth*-1,a=o.slideCount%o.options.slidesToScroll*i*-1))):t+o.options.slidesToShow>o.slideCount&&(o.slideOffset=(t+o.options.slidesToShow-o.slideCount)*o.slideWidth,a=(t+o.options.slidesToShow-o.slideCount)*i),o.slideCount<=o.options.slidesToShow&&(a=o.slideOffset=0),!0===o.options.centerMode&&o.slideCount<=o.options.slidesToShow?o.slideOffset=o.slideWidth*Math.floor(o.options.slidesToShow)/2-o.slideWidth*o.slideCount/2:!0===o.options.centerMode&&!0===o.options.infinite?o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)-o.slideWidth:!0===o.options.centerMode&&(o.slideOffset=0,o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)),e=!1===o.options.vertical?t*o.slideWidth*-1+o.slideOffset:t*i*-1+a,!0===o.options.variableWidth&&(n=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(t):o.$slideTrack.children(".slick-slide").eq(t+o.options.slidesToShow),e=!0===o.options.rtl?n[0]?-1*(o.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,!0===o.options.centerMode&&(n=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(t):o.$slideTrack.children(".slick-slide").eq(t+o.options.slidesToShow+1),e=!0===o.options.rtl?n[0]?-1*(o.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,e+=(o.$list.width()-n.outerWidth())/2)),e},o.prototype.getOption=o.prototype.slickGetOption=function(t){return this.options[t]},o.prototype.getNavigableIndexes=function(){var t,e=this,i=0,n=0,r=[];for(!1===e.options.infinite?t=e.slideCount:(i=-1*e.options.slidesToScroll,n=-1*e.options.slidesToScroll,t=2*e.slideCount);i<t;)r.push(i),i=n+e.options.slidesToScroll,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return r},o.prototype.getSlick=function(){return this},o.prototype.getSlideCount=function(){var i,n,r=this;return n=!0===r.options.centerMode?r.slideWidth*Math.floor(r.options.slidesToShow/2):0,!0===r.options.swipeToSlide?(r.$slideTrack.find(".slick-slide").each(function(t,e){if(e.offsetLeft-n+u(e).outerWidth()/2>-1*r.swipeLeft)return i=e,!1}),Math.abs(u(i).attr("data-slick-index")-r.currentSlide)||1):r.options.slidesToScroll},o.prototype.goTo=o.prototype.slickGoTo=function(t,e){this.changeSlide({data:{message:"index",index:parseInt(t)}},e)},o.prototype.init=function(t){var e=this;u(e.$slider).hasClass("slick-initialized")||(u(e.$slider).addClass("slick-initialized"),e.buildRows(),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.updateArrows(),e.updateDots(),e.checkResponsive(!0),e.focusHandler()),t&&e.$slider.trigger("init",[e]),!0===e.options.accessibility&&e.initADA(),e.options.autoplay&&(e.paused=!1,e.autoPlay())},o.prototype.initADA=function(){var i=this,n=Math.ceil(i.slideCount/i.options.slidesToShow),r=i.getNavigableIndexes().filter(function(t){return 0<=t&&t<i.slideCount});i.$slides.add(i.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==i.$dots&&(i.$slides.not(i.$slideTrack.find(".slick-cloned")).each(function(t){var e=r.indexOf(t);u(this).attr({role:"tabpanel",id:"slick-slide"+i.instanceUid+t,tabindex:-1}),-1!==e&&u(this).attr({"aria-describedby":"slick-slide-control"+i.instanceUid+e})}),i.$dots.attr("role","tablist").find("li").each(function(t){var e=r[t];u(this).attr({role:"presentation"}),u(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+i.instanceUid+t,"aria-controls":"slick-slide"+i.instanceUid+e,"aria-label":t+1+" of "+n,"aria-selected":null,tabindex:"-1"})}).eq(i.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var t=i.currentSlide,e=t+i.options.slidesToShow;t<e;t++)i.$slides.eq(t).attr("tabindex",0);i.activateADA()},o.prototype.initArrowEvents=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},t.changeSlide),t.$nextArrow.off("click.slick").on("click.slick",{message:"next"},t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow.on("keydown.slick",t.keyHandler),t.$nextArrow.on("keydown.slick",t.keyHandler)))},o.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&(u("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.accessibility&&t.$dots.on("keydown.slick",t.keyHandler)),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&u("li",t.$dots).on("mouseenter.slick",u.proxy(t.interrupt,t,!0)).on("mouseleave.slick",u.proxy(t.interrupt,t,!1))},o.prototype.initSlideEvents=function(){this.options.pauseOnHover&&(this.$list.on("mouseenter.slick",u.proxy(this.interrupt,this,!0)),this.$list.on("mouseleave.slick",u.proxy(this.interrupt,this,!1)))},o.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),u(document).on(t.visibilityChange,u.proxy(t.visibility,t)),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&u(t.$slideTrack).children().on("click.slick",t.selectHandler),u(window).on("orientationchange.slick.slick-"+t.instanceUid,u.proxy(t.orientationChange,t)),u(window).on("resize.slick.slick-"+t.instanceUid,u.proxy(t.resize,t)),u("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),u(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),u(t.setPosition)},o.prototype.initUI=function(){!0===this.options.arrows&&this.slideCount>this.options.slidesToShow&&(this.$prevArrow.show(),this.$nextArrow.show()),!0===this.options.dots&&this.slideCount>this.options.slidesToShow&&this.$dots.show()},o.prototype.keyHandler=function(t){t.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===t.keyCode&&!0===this.options.accessibility?this.changeSlide({data:{message:!0===this.options.rtl?"next":"previous"}}):39===t.keyCode&&!0===this.options.accessibility&&this.changeSlide({data:{message:!0===this.options.rtl?"previous":"next"}}))},o.prototype.lazyLoad=function(){function t(t){u("img[data-lazy]",t).each(function(){var t=u(this),e=u(this).attr("data-lazy"),i=u(this).attr("data-srcset"),n=u(this).attr("data-sizes")||o.$slider.attr("data-sizes"),r=document.createElement("img");r.onload=function(){t.animate({opacity:0},100,function(){i&&(t.attr("srcset",i),n&&t.attr("sizes",n)),t.attr("src",e).animate({opacity:1},200,function(){t.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),o.$slider.trigger("lazyLoaded",[o,t,e])})},r.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,t,e])},r.src=e})}var e,i,n,o=this;if(!0===o.options.centerMode?!0===o.options.infinite?n=(i=o.currentSlide+(o.options.slidesToShow/2+1))+o.options.slidesToShow+2:(i=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),n=o.options.slidesToShow/2+1+2+o.currentSlide):(i=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,n=Math.ceil(i+o.options.slidesToShow),!0===o.options.fade&&(0<i&&i--,n<=o.slideCount&&n++)),e=o.$slider.find(".slick-slide").slice(i,n),"anticipated"===o.options.lazyLoad)for(var r=i-1,a=n,s=o.$slider.find(".slick-slide"),l=0;l<o.options.slidesToScroll;l++)r<0&&(r=o.slideCount-1),e=(e=e.add(s.eq(r))).add(s.eq(a)),r--,a++;t(e),o.slideCount<=o.options.slidesToShow?t(o.$slider.find(".slick-slide")):o.currentSlide>=o.slideCount-o.options.slidesToShow?t(o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow)):0===o.currentSlide&&t(o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow))},o.prototype.loadSlider=function(){this.setPosition(),this.$slideTrack.css({opacity:1}),this.$slider.removeClass("slick-loading"),this.initUI(),"progressive"===this.options.lazyLoad&&this.progressiveLazyLoad()},o.prototype.next=o.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},o.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},o.prototype.pause=o.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},o.prototype.play=o.prototype.slickPlay=function(){this.autoPlay(),this.options.autoplay=!0,this.paused=!1,this.focussed=!1,this.interrupted=!1},o.prototype.postSlide=function(t){var e=this;e.unslicked||(e.$slider.trigger("afterChange",[e,t]),e.animating=!1,e.slideCount>e.options.slidesToShow&&e.setPosition(),e.swipeLeft=null,e.options.autoplay&&e.autoPlay(),!0===e.options.accessibility&&(e.initADA(),e.options.focusOnChange&&u(e.$slides.get(e.currentSlide)).attr("tabindex",0).focus()))},o.prototype.prev=o.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},o.prototype.preventDefault=function(t){t.preventDefault()},o.prototype.progressiveLazyLoad=function(t){t=t||1;var e,i,n,r,o,a=this,s=u("img[data-lazy]",a.$slider);s.length?(e=s.first(),i=e.attr("data-lazy"),n=e.attr("data-srcset"),r=e.attr("data-sizes")||a.$slider.attr("data-sizes"),(o=document.createElement("img")).onload=function(){n&&(e.attr("srcset",n),r&&e.attr("sizes",r)),e.attr("src",i).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===a.options.adaptiveHeight&&a.setPosition(),a.$slider.trigger("lazyLoaded",[a,e,i]),a.progressiveLazyLoad()},o.onerror=function(){t<3?setTimeout(function(){a.progressiveLazyLoad(t+1)},500):(e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,e,i]),a.progressiveLazyLoad())},o.src=i):a.$slider.trigger("allImagesLoaded",[a])},o.prototype.refresh=function(t){var e,i,n=this;i=n.slideCount-n.options.slidesToShow,!n.options.infinite&&n.currentSlide>i&&(n.currentSlide=i),n.slideCount<=n.options.slidesToShow&&(n.currentSlide=0),e=n.currentSlide,n.destroy(!0),u.extend(n,n.initials,{currentSlide:e}),n.init(),t||n.changeSlide({data:{message:"index",index:e}},!1)},o.prototype.registerBreakpoints=function(){var t,e,i,n=this,r=n.options.responsive||null;if("array"===u.type(r)&&r.length){for(t in n.respondTo=n.options.respondTo||"window",r)if(i=n.breakpoints.length-1,r.hasOwnProperty(t)){for(e=r[t].breakpoint;0<=i;)n.breakpoints[i]&&n.breakpoints[i]===e&&n.breakpoints.splice(i,1),i--;n.breakpoints.push(e),n.breakpointSettings[e]=r[t].settings}n.breakpoints.sort(function(t,e){return n.options.mobileFirst?t-e:e-t})}},o.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),!0===t.options.focusOnSelect&&u(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},o.prototype.resize=function(){var t=this;u(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=u(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},o.prototype.removeSlide=o.prototype.slickRemove=function(t,e,i){var n=this;if(t="boolean"==typeof t?!0===(e=t)?0:n.slideCount-1:!0===e?--t:t,n.slideCount<1||t<0||t>n.slideCount-1)return!1;n.unload(),!0===i?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(t).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,n.reinit()},o.prototype.setCSS=function(t){var e,i,n=this,r={};!0===n.options.rtl&&(t=-t),e="left"==n.positionProp?Math.ceil(t)+"px":"0px",i="top"==n.positionProp?Math.ceil(t)+"px":"0px",r[n.positionProp]=t,!1===n.transformsEnabled||(!(r={})===n.cssTransitions?r[n.animType]="translate("+e+", "+i+")":r[n.animType]="translate3d("+e+", "+i+", 0px)"),n.$slideTrack.css(r)},o.prototype.setDimensions=function(){var t=this;!1===t.options.vertical?!0===t.options.centerMode&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),!0===t.options.centerMode&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),!1===t.options.vertical&&!1===t.options.variableWidth?(t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length))):!0===t.options.variableWidth?t.$slideTrack.width(5e3*t.slideCount):(t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length)));var e=t.$slides.first().outerWidth(!0)-t.$slides.first().width();!1===t.options.variableWidth&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-e)},o.prototype.setFade=function(){var i,n=this;n.$slides.each(function(t,e){i=n.slideWidth*t*-1,!0===n.options.rtl?u(e).css({position:"relative",right:i,top:0,zIndex:n.options.zIndex-2,opacity:0}):u(e).css({position:"relative",left:i,top:0,zIndex:n.options.zIndex-2,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:n.options.zIndex-1,opacity:1})},o.prototype.setHeight=function(){if(1===this.options.slidesToShow&&!0===this.options.adaptiveHeight&&!1===this.options.vertical){var t=this.$slides.eq(this.currentSlide).outerHeight(!0);this.$list.css("height",t)}},o.prototype.setOption=o.prototype.slickSetOption=function(){var t,e,i,n,r,o=this,a=!1;if("object"===u.type(arguments[0])?(i=arguments[0],a=arguments[1],r="multiple"):"string"===u.type(arguments[0])&&(i=arguments[0],n=arguments[1],a=arguments[2],"responsive"===arguments[0]&&"array"===u.type(arguments[1])?r="responsive":void 0!==arguments[1]&&(r="single")),"single"===r)o.options[i]=n;else if("multiple"===r)u.each(i,function(t,e){o.options[t]=e});else if("responsive"===r)for(e in n)if("array"!==u.type(o.options.responsive))o.options.responsive=[n[e]];else{for(t=o.options.responsive.length-1;0<=t;)o.options.responsive[t].breakpoint===n[e].breakpoint&&o.options.responsive.splice(t,1),t--;o.options.responsive.push(n[e])}a&&(o.unload(),o.reinit())},o.prototype.setPosition=function(){this.setDimensions(),this.setHeight(),!1===this.options.fade?this.setCSS(this.getLeft(this.currentSlide)):this.setFade(),this.$slider.trigger("setPosition",[this])},o.prototype.setProps=function(){var t=this,e=document.body.style;t.positionProp=!0===t.options.vertical?"top":"left","top"===t.positionProp?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||!0===t.options.useCSS&&(t.cssTransitions=!0),t.options.fade&&("number"==typeof t.options.zIndex?t.options.zIndex<3&&(t.options.zIndex=3):t.options.zIndex=t.defaults.zIndex),void 0!==e.OTransform&&(t.animType="OTransform",t.transformType="-o-transform",t.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.MozTransform&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(t.animType=!1)),void 0!==e.webkitTransform&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.msTransform&&(t.animType="msTransform",t.transformType="-ms-transform",t.transitionType="msTransition",void 0===e.msTransform&&(t.animType=!1)),void 0!==e.transform&&!1!==t.animType&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=t.options.useTransform&&null!==t.animType&&!1!==t.animType},o.prototype.setSlideClasses=function(t){var e,i,n,r,o=this;if(i=o.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),o.$slides.eq(t).addClass("slick-current"),!0===o.options.centerMode){var a=o.options.slidesToShow%2==0?1:0;e=Math.floor(o.options.slidesToShow/2),!0===o.options.infinite&&(e<=t&&t<=o.slideCount-1-e?o.$slides.slice(t-e+a,t+e+1).addClass("slick-active").attr("aria-hidden","false"):(n=o.options.slidesToShow+t,i.slice(n-e+1+a,n+e+2).addClass("slick-active").attr("aria-hidden","false")),0===t?i.eq(i.length-1-o.options.slidesToShow).addClass("slick-center"):t===o.slideCount-1&&i.eq(o.options.slidesToShow).addClass("slick-center")),o.$slides.eq(t).addClass("slick-center")}else 0<=t&&t<=o.slideCount-o.options.slidesToShow?o.$slides.slice(t,t+o.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=o.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(r=o.slideCount%o.options.slidesToShow,n=!0===o.options.infinite?o.options.slidesToShow+t:t,o.options.slidesToShow==o.options.slidesToScroll&&o.slideCount-t<o.options.slidesToShow?i.slice(n-(o.options.slidesToShow-r),n+r).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+o.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==o.options.lazyLoad&&"anticipated"!==o.options.lazyLoad||o.lazyLoad()},o.prototype.setupInfinite=function(){var t,e,i,n=this;if(!0===n.options.fade&&(n.options.centerMode=!1),!0===n.options.infinite&&!1===n.options.fade&&(e=null,n.slideCount>n.options.slidesToShow)){for(i=!0===n.options.centerMode?n.options.slidesToShow+1:n.options.slidesToShow,t=n.slideCount;t>n.slideCount-i;t-=1)e=t-1,u(n.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e-n.slideCount).prependTo(n.$slideTrack).addClass("slick-cloned");for(t=0;t<i+n.slideCount;t+=1)e=t,u(n.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e+n.slideCount).appendTo(n.$slideTrack).addClass("slick-cloned");n.$slideTrack.find(".slick-cloned").find("[id]").each(function(){u(this).attr("id","")})}},o.prototype.interrupt=function(t){t||this.autoPlay(),this.interrupted=t},o.prototype.selectHandler=function(t){var e=u(t.target).is(".slick-slide")?u(t.target):u(t.target).parents(".slick-slide"),i=parseInt(e.attr("data-slick-index"));i||(i=0),this.slideCount<=this.options.slidesToShow?this.slideHandler(i,!1,!0):this.slideHandler(i)},o.prototype.slideHandler=function(t,e,i){var n,r,o,a,s,l=null,u=this;if(e=e||!1,!(!0===u.animating&&!0===u.options.waitForAnimate||!0===u.options.fade&&u.currentSlide===t))if(!1===e&&u.asNavFor(t),n=t,l=u.getLeft(n),a=u.getLeft(u.currentSlide),u.currentLeft=null===u.swipeLeft?a:u.swipeLeft,!1===u.options.infinite&&!1===u.options.centerMode&&(t<0||t>u.getDotCount()*u.options.slidesToScroll))!1===u.options.fade&&(n=u.currentSlide,!0!==i?u.animateSlide(a,function(){u.postSlide(n)}):u.postSlide(n));else if(!1===u.options.infinite&&!0===u.options.centerMode&&(t<0||t>u.slideCount-u.options.slidesToScroll))!1===u.options.fade&&(n=u.currentSlide,!0!==i?u.animateSlide(a,function(){u.postSlide(n)}):u.postSlide(n));else{if(u.options.autoplay&&clearInterval(u.autoPlayTimer),r=n<0?u.slideCount%u.options.slidesToScroll!=0?u.slideCount-u.slideCount%u.options.slidesToScroll:u.slideCount+n:n>=u.slideCount?u.slideCount%u.options.slidesToScroll!=0?0:n-u.slideCount:n,u.animating=!0,u.$slider.trigger("beforeChange",[u,u.currentSlide,r]),o=u.currentSlide,u.currentSlide=r,u.setSlideClasses(u.currentSlide),u.options.asNavFor&&(s=(s=u.getNavTarget()).slick("getSlick")).slideCount<=s.options.slidesToShow&&s.setSlideClasses(u.currentSlide),u.updateDots(),u.updateArrows(),!0===u.options.fade)return!0!==i?(u.fadeSlideOut(o),u.fadeSlide(r,function(){u.postSlide(r)})):u.postSlide(r),void u.animateHeight();!0!==i?u.animateSlide(l,function(){u.postSlide(r)}):u.postSlide(r)}},o.prototype.startLoad=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},o.prototype.swipeDirection=function(){var t,e,i,n;return t=this.touchObject.startX-this.touchObject.curX,e=this.touchObject.startY-this.touchObject.curY,i=Math.atan2(e,t),(n=Math.round(180*i/Math.PI))<0&&(n=360-Math.abs(n)),n<=45&&0<=n?!1===this.options.rtl?"left":"right":n<=360&&315<=n?!1===this.options.rtl?"left":"right":135<=n&&n<=225?!1===this.options.rtl?"right":"left":!0===this.options.verticalSwiping?35<=n&&n<=135?"down":"up":"vertical"},o.prototype.swipeEnd=function(t){var e,i,n=this;if(n.dragging=!1,n.swiping=!1,n.scrolling)return n.scrolling=!1;if(n.interrupted=!1,n.shouldClick=!(10<n.touchObject.swipeLength),void 0===n.touchObject.curX)return!1;if(!0===n.touchObject.edgeHit&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(i=n.swipeDirection()){case"left":case"down":e=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":e=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=i&&(n.slideHandler(e),n.touchObject={},n.$slider.trigger("swipe",[n,i]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},o.prototype.swipeHandler=function(t){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==t.type.indexOf("mouse")))switch(e.touchObject.fingerCount=t.originalEvent&&void 0!==t.originalEvent.touches?t.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),t.data.action){case"start":e.swipeStart(t);break;case"move":e.swipeMove(t);break;case"end":e.swipeEnd(t)}},o.prototype.swipeMove=function(t){var e,i,n,r,o,a,s=this;return o=void 0!==t.originalEvent?t.originalEvent.touches:null,!(!s.dragging||s.scrolling||o&&1!==o.length)&&(e=s.getLeft(s.currentSlide),s.touchObject.curX=void 0!==o?o[0].pageX:t.clientX,s.touchObject.curY=void 0!==o?o[0].pageY:t.clientY,s.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(s.touchObject.curX-s.touchObject.startX,2))),a=Math.round(Math.sqrt(Math.pow(s.touchObject.curY-s.touchObject.startY,2))),!s.options.verticalSwiping&&!s.swiping&&4<a?!(s.scrolling=!0):(!0===s.options.verticalSwiping&&(s.touchObject.swipeLength=a),i=s.swipeDirection(),void 0!==t.originalEvent&&4<s.touchObject.swipeLength&&(s.swiping=!0,t.preventDefault()),r=(!1===s.options.rtl?1:-1)*(s.touchObject.curX>s.touchObject.startX?1:-1),!0===s.options.verticalSwiping&&(r=s.touchObject.curY>s.touchObject.startY?1:-1),n=s.touchObject.swipeLength,(s.touchObject.edgeHit=!1)===s.options.infinite&&(0===s.currentSlide&&"right"===i||s.currentSlide>=s.getDotCount()&&"left"===i)&&(n=s.touchObject.swipeLength*s.options.edgeFriction,s.touchObject.edgeHit=!0),!1===s.options.vertical?s.swipeLeft=e+n*r:s.swipeLeft=e+n*(s.$list.height()/s.listWidth)*r,!0===s.options.verticalSwiping&&(s.swipeLeft=e+n*r),!0!==s.options.fade&&!1!==s.options.touchMove&&(!0===s.animating?(s.swipeLeft=null,!1):void s.setCSS(s.swipeLeft))))},o.prototype.swipeStart=function(t){var e,i=this;if(i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow)return!(i.touchObject={});void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&(e=t.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==e?e.pageX:t.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==e?e.pageY:t.clientY,i.dragging=!0},o.prototype.unfilterSlides=o.prototype.slickUnfilter=function(){null!==this.$slidesCache&&(this.unload(),this.$slideTrack.children(this.options.slide).detach(),this.$slidesCache.appendTo(this.$slideTrack),this.reinit())},o.prototype.unload=function(){var t=this;u(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},o.prototype.unslick=function(t){this.$slider.trigger("unslick",[this,t]),this.destroy()},o.prototype.updateArrows=function(){var t=this;Math.floor(t.options.slidesToShow/2),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&!1===t.options.centerMode?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&!0===t.options.centerMode&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},o.prototype.updateDots=function(){null!==this.$dots&&(this.$dots.find("li").removeClass("slick-active").end(),this.$dots.find("li").eq(Math.floor(this.currentSlide/this.options.slidesToScroll)).addClass("slick-active"))},o.prototype.visibility=function(){this.options.autoplay&&(document[this.hidden]?this.interrupted=!0:this.interrupted=!1)},u.fn.slick=function(){var t,e,i=arguments[0],n=Array.prototype.slice.call(arguments,1),r=this.length;for(t=0;t<r;t++)if("object"==typeof i||void 0===i?this[t].slick=new o(this[t],i):e=this[t].slick[i].apply(this[t].slick,n),void 0!==e)return e;return this}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SimpleBar=e()}(this,function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var i,n,r,o="object",a=function(t){return t&&t.Math==Math&&t},g=a(typeof globalThis==o&&globalThis)||a(typeof window==o&&window)||a(typeof self==o&&self)||a(typeof t==o&&t)||Function("return this")(),v=function(t){try{return!!t()}catch(t){return!0}},p=!v(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),s={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,d={f:l&&!s.call({1:2},1)?function(t){var e=l(this,t);return!!e&&e.enumerable}:s},b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},u={}.toString,c=function(t){return u.call(t).slice(8,-1)},h="".split,x=v(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==c(t)?h.call(t,""):Object(t)}:Object,f=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},m=function(t){return x(f(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},_=function(t,e){if(!y(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!y(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!y(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!y(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},w={}.hasOwnProperty,S=function(t,e){return w.call(t,e)},T=g.document,C=y(T)&&y(T.createElement),E=function(t){return C?T.createElement(t):{}},k=!p&&!v(function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a}),A=Object.getOwnPropertyDescriptor,I={f:p?A:function(t,e){if(t=m(t),e=_(e,!0),k)try{return A(t,e)}catch(t){}if(S(t,e))return b(!d.f.call(t,e),t[e])}},P=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},z=Object.defineProperty,M={f:p?z:function(t,e,i){if(P(t),e=_(e,!0),P(i),k)try{return z(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},D=p?function(t,e,i){return M.f(t,e,b(1,i))}:function(t,e,i){return t[e]=i,t},L=function(e,i){try{D(g,e,i)}catch(t){g[e]=i}return i},O=e(function(t){var i=g["__core-js_shared__"]||L("__core-js_shared__",{});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.2.1",mode:"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})}),R=O("native-function-to-string",Function.toString),F=g.WeakMap,B="function"==typeof F&&/native code/.test(R.call(F)),N=0,j=Math.random(),$=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++N+j).toString(36)},U=O("keys"),V=function(t){return U[t]||(U[t]=$(t))},q={},H=g.WeakMap;if(B){var W=new H,Z=W.get,G=W.has,X=W.set;i=function(t,e){return X.call(W,t,e),e},n=function(t){return Z.call(W,t)||{}},r=function(t){return G.call(W,t)}}else{var Y=V("state");q[Y]=!0,i=function(t,e){return D(t,Y,e),e},n=function(t){return S(t,Y)?t[Y]:{}},r=function(t){return S(t,Y)}}var K={set:i,get:n,has:r,enforce:function(t){return r(t)?n(t):i(t,{})},getterFor:function(i){return function(t){var e;if(!y(t)||(e=n(t)).type!==i)throw TypeError("Incompatible receiver, "+i+" required");return e}}},J=e(function(t){var e=K.get,s=K.enforce,l=String(R).split("toString");O("inspectSource",function(t){return R.call(t)}),(t.exports=function(t,e,i,n){var r=!!n&&!!n.unsafe,o=!!n&&!!n.enumerable,a=!!n&&!!n.noTargetGet;"function"==typeof i&&("string"!=typeof e||S(i,"name")||D(i,"name",e),s(i).source=l.join("string"==typeof e?e:"")),t!==g?(r?!a&&t[e]&&(o=!0):delete t[e],o?t[e]=i:D(t,e,i)):o?t[e]=i:L(e,i)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||R.call(this)})}),Q=g,tt=function(t){return"function"==typeof t?t:void 0},et=function(t,e){return arguments.length<2?tt(Q[t])||tt(g[t]):Q[t]&&Q[t][e]||g[t]&&g[t][e]},it=Math.ceil,nt=Math.floor,rt=function(t){return isNaN(t=+t)?0:(0<t?nt:it)(t)},ot=Math.min,at=function(t){return 0<t?ot(rt(t),9007199254740991):0},st=Math.max,lt=Math.min,ut=function(u){return function(t,e,i){var n,r,o,a=m(t),s=at(a.length),l=(r=s,(o=rt(i))<0?st(o+r,0):lt(o,r));if(u&&e!=e){for(;l<s;)if((n=a[l++])!=n)return!0}else for(;l<s;l++)if((u||l in a)&&a[l]===e)return u||l||0;return!u&&-1}},ct=(ut(!0),ut(!1)),ht=function(t,e){var i,n=m(t),r=0,o=[];for(i in n)!S(q,i)&&S(n,i)&&o.push(i);for(;e.length>r;)S(n,i=e[r++])&&(~ct(o,i)||o.push(i));return o},pt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],dt=pt.concat("length","prototype"),ft={f:Object.getOwnPropertyNames||function(t){return ht(t,dt)}},mt={f:Object.getOwnPropertySymbols},gt=et("Reflect","ownKeys")||function(t){var e=ft.f(P(t)),i=mt.f;return i?e.concat(i(t)):e},vt=function(t,e){for(var i=gt(e),n=M.f,r=I.f,o=0;o<i.length;o++){var a=i[o];S(t,a)||n(t,a,r(e,a))}},yt=/#|\.prototype\./,_t=function(t,e){var i=xt[bt(t)];return i==St||i!=wt&&("function"==typeof e?v(e):!!e)},bt=_t.normalize=function(t){return String(t).replace(yt,".").toLowerCase()},xt=_t.data={},wt=_t.NATIVE="N",St=_t.POLYFILL="P",Tt=_t,Ct=I.f,Et=function(t,e){var i,n,r,o,a,s=t.target,l=t.global,u=t.stat;if(i=l?g:u?g[s]||L(s,{}):(g[s]||{}).prototype)for(n in e){if(o=e[n],r=t.noTargetGet?(a=Ct(i,n))&&a.value:i[n],!Tt(l?n:s+(u?".":"#")+n,t.forced)&&void 0!==r){if(typeof o==typeof r)continue;vt(o,r)}(t.sham||r&&r.sham)&&D(o,"sham",!0),J(i,n,o,t)}},kt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},At=function(n,r,t){if(kt(n),void 0===r)return n;switch(t){case 0:return function(){return n.call(r)};case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,i){return n.call(r,t,e,i)}}return function(){return n.apply(r,arguments)}},It=function(t){return Object(f(t))},Pt=Array.isArray||function(t){return"Array"==c(t)},zt=!!Object.getOwnPropertySymbols&&!v(function(){return!String(Symbol())}),Mt=g.Symbol,Dt=O("wks"),Lt=function(t){return Dt[t]||(Dt[t]=zt&&Mt[t]||(zt?Mt:$)("Symbol."+t))},Ot=Lt("species"),Rt=function(t,e){var i;return Pt(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!Pt(i.prototype)?y(i)&&null===(i=i[Ot])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)},Ft=[].push,Bt=function(d){var f=1==d,m=2==d,g=3==d,v=4==d,y=6==d,_=5==d||y;return function(t,e,i,n){for(var r,o,a=It(t),s=x(a),l=At(e,i,3),u=at(s.length),c=0,h=n||Rt,p=f?h(t,u):m?h(t,0):void 0;c<u;c++)if((_||c in s)&&(o=l(r=s[c],c,a),d))if(f)p[c]=o;else if(o)switch(d){case 3:return!0;case 5:return r;case 6:return c;case 2:Ft.call(p,r)}else if(v)return!1;return y?-1:g||v?v:p}},Nt={forEach:Bt(0),map:Bt(1),filter:Bt(2),some:Bt(3),every:Bt(4),find:Bt(5),findIndex:Bt(6)},jt=function(t,e){var i=[][t];return!i||!v(function(){i.call(null,e||function(){throw 1},1)})},$t=Nt.forEach,Ut=jt("forEach")?function(t){return $t(this,t,1<arguments.length?arguments[1]:void 0)}:[].forEach;Et({target:"Array",proto:!0,forced:[].forEach!=Ut},{forEach:Ut});var Vt={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var qt in Vt){var Ht=g[qt],Wt=Ht&&Ht.prototype;if(Wt&&Wt.forEach!==Ut)try{D(Wt,"forEach",Ut)}catch(t){Wt.forEach=Ut}}var Zt=!("undefined"==typeof window||!window.document||!window.document.createElement),Gt=Lt("species"),Xt=Nt.filter;Et({target:"Array",proto:!0,forced:!!v(function(){var t=[];return(t.constructor={})[Gt]=function(){return{foo:1}},1!==t.filter(Boolean).foo})},{filter:function(t){return Xt(this,t,1<arguments.length?arguments[1]:void 0)}});var Yt=Object.keys||function(t){return ht(t,pt)},Kt=p?Object.defineProperties:function(t,e){P(t);for(var i,n=Yt(e),r=n.length,o=0;o<r;)M.f(t,i=n[o++],e[i]);return t},Jt=et("document","documentElement"),Qt=V("IE_PROTO"),te=function(){},ee=function(){var t,e=E("iframe"),i=pt.length;for(e.style.display="none",Jt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ee=t.F;i--;)delete ee.prototype[pt[i]];return ee()},ie=Object.create||function(t,e){var i;return null!==t?(te.prototype=P(t),i=new te,te.prototype=null,i[Qt]=t):i=ee(),void 0===e?i:Kt(i,e)};q[Qt]=!0;var ne=Lt("unscopables"),re=Array.prototype;null==re[ne]&&D(re,ne,ie(null));var oe,ae,se,le=function(t){re[ne][t]=!0},ue={},ce=!v(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),he=V("IE_PROTO"),pe=Object.prototype,de=ce?Object.getPrototypeOf:function(t){return t=It(t),S(t,he)?t[he]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?pe:null},fe=Lt("iterator"),me=!1;[].keys&&("next"in(se=[].keys())?(ae=de(de(se)))!==Object.prototype&&(oe=ae):me=!0),null==oe&&(oe={}),S(oe,fe)||D(oe,fe,function(){return this});var ge={IteratorPrototype:oe,BUGGY_SAFARI_ITERATORS:me},ve=M.f,ye=Lt("toStringTag"),_e=function(t,e,i){t&&!S(t=i?t:t.prototype,ye)&&ve(t,ye,{configurable:!0,value:e})},be=ge.IteratorPrototype,xe=function(){return this},we=Object.setPrototypeOf||("__proto__"in{}?function(){var i,n=!1,t={};try{(i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),n=t instanceof Array}catch(i){}return function(t,e){return P(t),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),n?i.call(t,e):t.__proto__=e,t}}():void 0),Se=ge.IteratorPrototype,Te=ge.BUGGY_SAFARI_ITERATORS,Ce=Lt("iterator"),Ee=function(){return this},ke=function(t,e,i,n,r,o,a){var s,l,u;l=n,u=e+" Iterator",(s=i).prototype=ie(be,{next:b(1,l)}),_e(s,u,!1),ue[u]=xe;var c,h,p,d=function(t){if(t===r&&y)return y;if(!Te&&t in g)return g[t];switch(t){case"keys":case"values":case"entries":return function(){return new i(this,t)}}return function(){return new i(this)}},f=e+" Iterator",m=!1,g=t.prototype,v=g[Ce]||g["@@iterator"]||r&&g[r],y=!Te&&v||d(r),_="Array"==e&&g.entries||v;if(_&&(c=de(_.call(new t)),Se!==Object.prototype&&c.next&&(de(c)!==Se&&(we?we(c,Se):"function"!=typeof c[Ce]&&D(c,Ce,Ee)),_e(c,f,!0))),"values"==r&&v&&"values"!==v.name&&(m=!0,y=function(){return v.call(this)}),g[Ce]!==y&&D(g,Ce,y),ue[e]=y,r)if(h={values:d("values"),keys:o?y:d("keys"),entries:d("entries")},a)for(p in h)!Te&&!m&&p in g||J(g,p,h[p]);else Et({target:e,proto:!0,forced:Te||m},h);return h},Ae=K.set,Ie=K.getterFor("Array Iterator"),Pe=ke(Array,"Array",function(t,e){Ae(this,{type:"Array Iterator",target:m(t),index:0,kind:e})},function(){var t=Ie(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?{value:t.target=void 0,done:!0}:"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}},"values");ue.Arguments=ue.Array,le("keys"),le("values"),le("entries");var ze=Object.assign,Me=!ze||v(function(){var t={},e={},i=Symbol();return t[i]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=ze({},t)[i]||"abcdefghijklmnopqrst"!=Yt(ze({},e)).join("")})?function(t,e){for(var i=It(t),n=arguments.length,r=1,o=mt.f,a=d.f;r<n;)for(var s,l=x(arguments[r++]),u=o?Yt(l).concat(o(l)):Yt(l),c=u.length,h=0;h<c;)s=u[h++],p&&!a.call(l,s)||(i[s]=l[s]);return i}:ze;Et({target:"Object",stat:!0,forced:Object.assign!==Me},{assign:Me});var De=Lt("toStringTag"),Le="Arguments"==c(function(){return arguments}()),Oe=function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),De))?i:Le?c(e):"Object"==(n=c(e))&&"function"==typeof e.callee?"Arguments":n},Re={};Re[Lt("toStringTag")]="z";var Fe="[object z]"!==String(Re)?function(){return"[object "+Oe(this)+"]"}:Re.toString,Be=Object.prototype;Fe!==Be.toString&&J(Be,"toString",Fe,{unsafe:!0});var Ne="\t\n\v\f\r \u2028\u2029\ufeff",je="["+Ne+"]",$e=RegExp("^"+je+je+"*"),Ue=RegExp(je+je+"*$"),Ve=function(i){return function(t){var e=String(f(t));return 1&i&&(e=e.replace($e,"")),2&i&&(e=e.replace(Ue,"")),e}},qe=(Ve(1),Ve(2),Ve(3)),He=g.parseInt,We=/^[+-]?0[Xx]/,Ze=8!==He(Ne+"08")||22!==He(Ne+"0x16")?function(t,e){var i=qe(String(t));return He(i,e>>>0||(We.test(i)?16:10))}:He;Et({global:!0,forced:parseInt!=Ze},{parseInt:Ze});var Ge=function(s){return function(t,e){var i,n,r=String(f(t)),o=rt(e),a=r.length;return o<0||a<=o?s?"":void 0:(i=r.charCodeAt(o))<55296||56319<i||o+1===a||(n=r.charCodeAt(o+1))<56320||57343<n?s?r.charAt(o):i:s?r.slice(o,o+2):n-56320+(i-55296<<10)+65536}},Xe={codeAt:Ge(!1),charAt:Ge(!0)},Ye=Xe.charAt,Ke=K.set,Je=K.getterFor("String Iterator");ke(String,"String",function(t){Ke(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=Je(this),i=e.string,n=e.index;return n>=i.length?{value:void 0,done:!0}:(t=Ye(i,n),e.index+=t.length,{value:t,done:!1})});var Qe=function(t,e,i){for(var n in e)J(t,n,e[n],i);return t},ti=!v(function(){return Object.isExtensible(Object.preventExtensions({}))}),ei=e(function(t){var e=M.f,i=$("meta"),n=0,r=Object.isExtensible||function(){return!0},o=function(t){e(t,i,{value:{objectID:"O"+ ++n,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!S(t,i)){if(!r(t))return"F";if(!e)return"E";o(t)}return t[i].objectID},getWeakData:function(t,e){if(!S(t,i)){if(!r(t))return!0;if(!e)return!1;o(t)}return t[i].weakData},onFreeze:function(t){return ti&&a.REQUIRED&&r(t)&&!S(t,i)&&o(t),t}};q[i]=!0}),ii=(ei.REQUIRED,ei.fastKey,ei.getWeakData,ei.onFreeze,Lt("iterator")),ni=Array.prototype,ri=Lt("iterator"),oi=function(t,e,i,n){try{return n?e(P(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&P(r.call(t)),e}},ai=e(function(t){var d=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,i,n,r){var o,a,s,l,u,c,h,p=At(e,i,n?2:1);if(r)o=t;else{if("function"!=typeof(a=function(t){if(null!=t)return t[ri]||t["@@iterator"]||ue[Oe(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(h=a)&&(ue.Array===h||ni[ii]===h)){for(s=0,l=at(t.length);s<l;s++)if((u=n?p(P(c=t[s])[0],c[1]):p(t[s]))&&u instanceof d)return u;return new d(!1)}o=a.call(t)}for(;!(c=o.next()).done;)if((u=oi(o,p,c.value,n))&&u instanceof d)return u;return new d(!1)}).stop=function(t){return new d(!0,t)}}),si=function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return t},li=Lt("iterator"),ui=!1;try{var ci=0,hi={next:function(){return{done:!!ci++}},return:function(){ui=!0}};hi[li]=function(){return this},Array.from(hi,function(){throw 2})}catch(t){}var pi=function(s,t,e,l,n){var u=g[s],r=u&&u.prototype,c=u,h=l?"set":"add",i={},o=function(t){var i=r[t];J(r,t,"add"==t?function(t){return i.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(n&&!y(t))&&i.call(this,0===t?0:t)}:"get"==t?function(t){return n&&!y(t)?void 0:i.call(this,0===t?0:t)}:"has"==t?function(t){return!(n&&!y(t))&&i.call(this,0===t?0:t)}:function(t,e){return i.call(this,0===t?0:t,e),this})};if(Tt(s,"function"!=typeof u||!(n||r.forEach&&!v(function(){(new u).entries().next()}))))c=e.getConstructor(t,s,l,h),ei.REQUIRED=!0;else if(Tt(s,!0)){var a=new c,p=a[h](n?{}:-0,1)!=a,d=v(function(){a.has(1)}),f=function(t,e){if(!ui)return!1;var i=!1;try{var n={};n[li]=function(){return{next:function(){return{done:i=!0}}}},new u(n)}catch(t){}return i}(),m=!n&&v(function(){for(var t=new u,e=5;e--;)t[h](e,e);return!t.has(-0)});f||(((c=t(function(t,e){si(t,c,s);var i,n,r,o,a=(i=new u,n=c,we&&"function"==typeof(r=t.constructor)&&r!==n&&y(o=r.prototype)&&o!==n.prototype&&we(i,o),i);return null!=e&&ai(e,a[h],a,l),a})).prototype=r).constructor=c),(d||m)&&(o("delete"),o("has"),l&&o("get")),(m||p)&&o(h),n&&r.clear&&delete r.clear}return i[s]=c,Et({global:!0,forced:c!=u},i),_e(c,s),n||e.setStrong(c,s,l),c},di=ei.getWeakData,fi=K.set,mi=K.getterFor,gi=Nt.find,vi=Nt.findIndex,yi=0,_i=function(t){return t.frozen||(t.frozen=new bi)},bi=function(){this.entries=[]},xi=function(t,e){return gi(t.entries,function(t){return t[0]===e})};bi.prototype={get:function(t){var e=xi(this,t);if(e)return e[1]},has:function(t){return!!xi(this,t)},set:function(t,e){var i=xi(this,t);i?i[1]=e:this.entries.push([t,e])},delete:function(e){var t=vi(this.entries,function(t){return t[0]===e});return~t&&this.entries.splice(t,1),!!~t}};var wi={getConstructor:function(t,i,n,r){var o=t(function(t,e){si(t,o,i),fi(t,{type:i,id:yi++,frozen:void 0}),null!=e&&ai(e,t[r],t,n)}),a=mi(i),s=function(t,e,i){var n=a(t),r=di(P(e),!0);return!0===r?_i(n).set(e,i):r[n.id]=i,t};return Qe(o.prototype,{delete:function(t){var e=a(this);if(!y(t))return!1;var i=di(t);return!0===i?_i(e).delete(t):i&&S(i,e.id)&&delete i[e.id]},has:function(t){var e=a(this);if(!y(t))return!1;var i=di(t);return!0===i?_i(e).has(t):i&&S(i,e.id)}}),Qe(o.prototype,n?{get:function(t){var e=a(this);if(y(t)){var i=di(t);return!0===i?_i(e).get(t):i?i[e.id]:void 0}},set:function(t,e){return s(this,t,e)}}:{add:function(t){return s(this,t,!0)}}),o}},Si=(e(function(t){var n,r=K.enforce,e=!g.ActiveXObject&&"ActiveXObject"in g,o=Object.isExtensible,i=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},a=t.exports=pi("WeakMap",i,wi,!0,!0);if(B&&e){n=wi.getConstructor(i,"WeakMap",!0),ei.REQUIRED=!0;var s=a.prototype,l=s.delete,u=s.has,c=s.get,h=s.set;Qe(s,{delete:function(t){if(y(t)&&!o(t)){var e=r(this);return e.frozen||(e.frozen=new n),l.call(this,t)||e.frozen.delete(t)}return l.call(this,t)},has:function(t){if(y(t)&&!o(t)){var e=r(this);return e.frozen||(e.frozen=new n),u.call(this,t)||e.frozen.has(t)}return u.call(this,t)},get:function(t){if(y(t)&&!o(t)){var e=r(this);return e.frozen||(e.frozen=new n),u.call(this,t)?c.call(this,t):e.frozen.get(t)}return c.call(this,t)},set:function(t,e){if(y(t)&&!o(t)){var i=r(this);i.frozen||(i.frozen=new n),u.call(this,t)?h.call(this,t,e):i.frozen.set(t,e)}else h.call(this,t,e);return this}})}}),Lt("iterator")),Ti=Lt("toStringTag"),Ci=Pe.values;for(var Ei in Vt){var ki=g[Ei],Ai=ki&&ki.prototype;if(Ai){if(Ai[Si]!==Ci)try{D(Ai,Si,Ci)}catch(t){Ai[Si]=Ci}if(Ai[Ti]||D(Ai,Ti,Ei),Vt[Ei])for(var Ii in Pe)if(Ai[Ii]!==Pe[Ii])try{D(Ai,Ii,Pe[Ii])}catch(t){Ai[Ii]=Pe[Ii]}}}var Pi="Expected a function",zi=NaN,Mi="[object Symbol]",Di=/^\s+|\s+$/g,Li=/^[-+]0x[0-9a-f]+$/i,Oi=/^0b[01]+$/i,Ri=/^0o[0-7]+$/i,Fi=parseInt,Bi="object"==typeof t&&t&&t.Object===Object&&t,Ni="object"==typeof self&&self&&self.Object===Object&&self,ji=Bi||Ni||Function("return this")(),$i=Object.prototype.toString,Ui=Math.max,Vi=Math.min,qi=function(){return ji.Date.now()};function Hi(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Wi(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||e&&"object"==typeof e&&$i.call(e)==Mi)return zi;var e;if(Hi(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=Hi(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Di,"");var n=Oi.test(t);return n||Ri.test(t)?Fi(t.slice(2),n?2:8):Li.test(t)?zi:+t}var Zi=function(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new TypeError(Pi);return Hi(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),function(n,r,t){var o,a,i,s,l,u,c=0,h=!1,p=!1,e=!0;if("function"!=typeof n)throw new TypeError(Pi);function d(t){var e=o,i=a;return o=a=void 0,c=t,s=n.apply(i,e)}function f(t){var e=t-u;return void 0===u||r<=e||e<0||p&&i<=t-c}function m(){var t,e=qi();if(f(e))return g(e);l=setTimeout(m,(t=r-(e-u),p?Vi(t,i-(e-c)):t))}function g(t){return l=void 0,e&&o?d(t):(o=a=void 0,s)}function v(){var t,e=qi(),i=f(e);if(o=arguments,a=this,u=e,i){if(void 0===l)return c=t=u,l=setTimeout(m,r),h?d(t):s;if(p)return l=setTimeout(m,r),d(u)}return void 0===l&&(l=setTimeout(m,r)),s}return r=Wi(r)||0,Hi(t)&&(h=!!t.leading,i=(p="maxWait"in t)?Ui(Wi(t.maxWait)||0,r):i,e="trailing"in t?!!t.trailing:e),v.cancel=function(){void 0!==l&&clearTimeout(l),o=u=a=l=void(c=0)},v.flush=function(){return void 0===l?s:g(qi())},v}(t,e,{leading:n,maxWait:e,trailing:r})},Gi=/^\s+|\s+$/g,Xi=/^[-+]0x[0-9a-f]+$/i,Yi=/^0b[01]+$/i,Ki=/^0o[0-7]+$/i,Ji=parseInt,Qi="object"==typeof t&&t&&t.Object===Object&&t,tn="object"==typeof self&&self&&self.Object===Object&&self,en=Qi||tn||Function("return this")(),nn=Object.prototype.toString,rn=Math.max,on=Math.min,an=function(){return en.Date.now()};function sn(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function ln(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||e&&"object"==typeof e&&"[object Symbol]"==nn.call(e))return NaN;var e;if(sn(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=sn(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Gi,"");var n=Yi.test(t);return n||Ki.test(t)?Ji(t.slice(2),n?2:8):Xi.test(t)?NaN:+t}var un,cn=function(n,r,t){var o,a,i,s,l,u,c=0,h=!1,p=!1,e=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function d(t){var e=o,i=a;return o=a=void 0,c=t,s=n.apply(i,e)}function f(t){var e=t-u;return void 0===u||r<=e||e<0||p&&i<=t-c}function m(){var t,e=an();if(f(e))return g(e);l=setTimeout(m,(t=r-(e-u),p?on(t,i-(e-c)):t))}function g(t){return l=void 0,e&&o?d(t):(o=a=void 0,s)}function v(){var t,e=an(),i=f(e);if(o=arguments,a=this,u=e,i){if(void 0===l)return c=t=u,l=setTimeout(m,r),h?d(t):s;if(p)return l=setTimeout(m,r),d(u)}return void 0===l&&(l=setTimeout(m,r)),s}return r=ln(r)||0,sn(t)&&(h=!!t.leading,i=(p="maxWait"in t)?rn(ln(t.maxWait)||0,r):i,e="trailing"in t?!!t.trailing:e),v.cancel=function(){void 0!==l&&clearTimeout(l),o=u=a=l=void(c=0)},v.flush=function(){return void 0===l?s:g(an())},v},hn="Expected a function",pn="__lodash_hash_undefined__",dn="[object Function]",fn="[object GeneratorFunction]",mn=/^\[object .+?Constructor\]$/,gn="object"==typeof t&&t&&t.Object===Object&&t,vn="object"==typeof self&&self&&self.Object===Object&&self,yn=gn||vn||Function("return this")(),_n=Array.prototype,bn=Function.prototype,xn=Object.prototype,wn=yn["__core-js_shared__"],Sn=(un=/[^.]+$/.exec(wn&&wn.keys&&wn.keys.IE_PROTO||""))?"Symbol(src)_1."+un:"",Tn=bn.toString,Cn=xn.hasOwnProperty,En=xn.toString,kn=RegExp("^"+Tn.call(Cn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),An=_n.splice,In=Rn(yn,"Map"),Pn=Rn(Object,"create");function zn(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Mn(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Dn(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Ln(t,e){for(var i,n,r=t.length;r--;)if((i=t[r][0])===(n=e)||i!=i&&n!=n)return r;return-1}function On(t,e){var i,n,r=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof e?"string":"hash"]:r.map}function Rn(t,e){var i,n,r,o=null==t?void 0:t[e];return!Bn(i=o)||Sn&&Sn in i||!(n=i,r=Bn(n)?En.call(n):"",r==dn||r==fn||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(i)?kn:mn).test(function(t){if(null!=t){try{return Tn.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(i))?void 0:o}function Fn(r,o){if("function"!=typeof r||o&&"function"!=typeof o)throw new TypeError(hn);var a=function(){var t=arguments,e=o?o.apply(this,t):t[0],i=a.cache;if(i.has(e))return i.get(e);var n=r.apply(this,t);return a.cache=i.set(e,n),n};return a.cache=new(Fn.Cache||Dn),a}function Bn(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}zn.prototype.clear=function(){this.__data__=Pn?Pn(null):{}},zn.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},zn.prototype.get=function(t){var e=this.__data__;if(Pn){var i=e[t];return i===pn?void 0:i}return Cn.call(e,t)?e[t]:void 0},zn.prototype.has=function(t){var e=this.__data__;return Pn?void 0!==e[t]:Cn.call(e,t)},zn.prototype.set=function(t,e){return this.__data__[t]=Pn&&void 0===e?pn:e,this},Mn.prototype.clear=function(){this.__data__=[]},Mn.prototype.delete=function(t){var e=this.__data__,i=Ln(e,t);return!(i<0||(i==e.length-1?e.pop():An.call(e,i,1),0))},Mn.prototype.get=function(t){var e=this.__data__,i=Ln(e,t);return i<0?void 0:e[i][1]},Mn.prototype.has=function(t){return-1<Ln(this.__data__,t)},Mn.prototype.set=function(t,e){var i=this.__data__,n=Ln(i,t);return n<0?i.push([t,e]):i[n][1]=e,this},Dn.prototype.clear=function(){this.__data__={hash:new zn,map:new(In||Mn),string:new zn}},Dn.prototype.delete=function(t){return On(this,t).delete(t)},Dn.prototype.get=function(t){return On(this,t).get(t)},Dn.prototype.has=function(t){return On(this,t).has(t)},Dn.prototype.set=function(t,e){return On(this,t).set(t,e),this},Fn.Cache=Dn;var Nn=Fn,jn=function(){if("undefined"!=typeof Map)return Map;function n(t,i){var n=-1;return t.some(function(t,e){return t[0]===i&&(n=e,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=n(this.__entries__,t),i=this.__entries__[e];return i&&i[1]},t.prototype.set=function(t,e){var i=n(this.__entries__,t);~i?this.__entries__[i][1]=e:this.__entries__.push([t,e])},t.prototype.delete=function(t){var e=this.__entries__,i=n(e,t);~i&&e.splice(i,1)},t.prototype.has=function(t){return!!~n(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var r=n[i];t.call(e,r[1],r[0])}},t}()}(),$n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Un="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Vn="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Un):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},qn=["top","right","bottom","left","width","height","size","weight"],Hn="undefined"!=typeof MutationObserver,Wn=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,n=!1,r=0;function o(){i&&(i=!1,t()),n&&s()}function a(){Vn(o)}function s(){var t=Date.now();if(i){if(t-r<2)return;n=!0}else n=!(i=!0),setTimeout(a,e);r=t}return s}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),0<t.length},t.prototype.connect_=function(){$n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Hn?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){$n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;qn.some(function(t){return!!~i.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Zn=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},Gn=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Un},Xn=tr(0,0,0,0);function Yn(t){return parseFloat(t)||0}function Kn(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.reduce(function(t,e){return t+Yn(i["border-"+e+"-width"])},0)}var Jn="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Gn(t).SVGGraphicsElement}:function(t){return t instanceof Gn(t).SVGElement&&"function"==typeof t.getBBox};function Qn(t){return $n?Jn(t)?tr(0,0,(e=t.getBBox()).width,e.height):function(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return Xn;var n=Gn(t).getComputedStyle(t),r=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var r=n[i],o=t["padding-"+r];e[r]=Yn(o)}return e}(n),o=r.left+r.right,a=r.top+r.bottom,s=Yn(n.width),l=Yn(n.height);if("border-box"===n.boxSizing&&(Math.round(s+o)!==e&&(s-=Kn(n,"left","right")+o),Math.round(l+a)!==i&&(l-=Kn(n,"top","bottom")+a)),t!==Gn(t).document.documentElement){var u=Math.round(s+o)-e,c=Math.round(l+a)-i;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return tr(r.left,r.top,s,l)}(t):Xn;var e}function tr(t,e,i,n){return{x:t,y:e,width:i,height:n}}var er=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=tr(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=Qn(this.target);return(this.contentRect_=t).width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),ir=function(t,e){var i,n,r,o,a,s,l,u=(n=(i=e).x,r=i.y,o=i.width,a=i.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),Zn(l,{x:n,y:r,width:o,height:a,top:r,right:n+o,bottom:a+r,left:n}),l);Zn(this,{target:t,contentRect:u})},nr=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new jn,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Gn(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new er(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Gn(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new ir(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return 0<this.activeObservations_.length},t}(),rr="undefined"!=typeof WeakMap?new WeakMap:new jn,or=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=Wn.getInstance(),n=new nr(e,i,this);rr.set(this,n)};["observe","unobserve","disconnect"].forEach(function(e){or.prototype[e]=function(){var t;return(t=rr.get(this))[e].apply(t,arguments)}});var ar=void 0!==Un.ResizeObserver?Un.ResizeObserver:or,sr=null,lr=null;function ur(){if(null===sr){if("undefined"==typeof document)return sr=0;var t=document.body,e=document.createElement("div");e.classList.add("simplebar-hide-scrollbar"),t.appendChild(e);var i=e.getBoundingClientRect().right;t.removeChild(e),sr=i}return sr}Zt&&window.addEventListener("resize",function(){lr!==window.devicePixelRatio&&(lr=window.devicePixelRatio,sr=null)});var cr=function(u){return function(t,e,i,n){kt(e);var r=It(t),o=x(r),a=at(r.length),s=u?a-1:0,l=u?-1:1;if(i<2)for(;;){if(s in o){n=o[s],s+=l;break}if(s+=l,u?s<0:a<=s)throw TypeError("Reduce of empty array with no initial value")}for(;u?0<=s:s<a;s+=l)s in o&&(n=e(n,o[s],s,r));return n}},hr=[cr(!1),cr(!0)][0];Et({target:"Array",proto:!0,forced:jt("reduce")},{reduce:function(t){return hr(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}});var pr=M.f,dr=Function.prototype,fr=dr.toString,mr=/^\s*function ([^ (]*)/;!p||"name"in dr||pr(dr,"name",{configurable:!0,get:function(){try{return fr.call(this).match(mr)[1]}catch(t){return""}}});var gr,vr,yr=RegExp.prototype.exec,_r=String.prototype.replace,br=yr,xr=(gr=/a/,vr=/b*/g,yr.call(gr,"a"),yr.call(vr,"a"),0!==gr.lastIndex||0!==vr.lastIndex),wr=void 0!==/()??/.exec("")[1];(xr||wr)&&(br=function(t){var e,i,n,r;return wr&&(i=new RegExp("^"+this.source+"$(?!\\s)",function(){var t=P(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(this))),xr&&(e=this.lastIndex),n=yr.call(this,t),xr&&n&&(this.lastIndex=this.global?n.index+n[0].length:e),wr&&n&&1<n.length&&_r.call(n[0],i,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)}),n});var Sr=br;Et({target:"RegExp",proto:!0,forced:/./.exec!==Sr},{exec:Sr});var Tr=Lt("species"),Cr=!v(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),Er=!v(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}),kr=function(i,t,e,n){var r=Lt(i),o=!v(function(){var t={};return t[r]=function(){return 7},7!=""[i](t)}),a=o&&!v(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===i&&(e.constructor={},e.constructor[Tr]=function(){return e}),e[r](""),!t});if(!o||!a||"replace"===i&&!Cr||"split"===i&&!Er){var s=/./[r],l=e(r,""[i],function(t,e,i,n,r){return e.exec===Sr?o&&!r?{done:!0,value:s.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}}),u=l[0],c=l[1];J(String.prototype,i,u),J(RegExp.prototype,r,2==t?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)}),n&&D(RegExp.prototype[r],"sham",!0)}},Ar=Xe.charAt,Ir=function(t,e,i){return e+(i?Ar(t,e).length:1)},Pr=function(t,e){var i=t.exec;if("function"==typeof i){var n=i.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==c(t))throw TypeError("RegExp#exec called on incompatible receiver");return Sr.call(t,e)};kr("match",1,function(n,u,c){return[function(t){var e=f(this),i=null==t?void 0:t[n];return void 0!==i?i.call(t,e):new RegExp(t)[n](String(e))},function(t){var e=c(u,t,this);if(e.done)return e.value;var i=P(t),n=String(this);if(!i.global)return Pr(i,n);for(var r,o=i.unicode,a=[],s=i.lastIndex=0;null!==(r=Pr(i,n));){var l=String(r[0]);""===(a[s]=l)&&(i.lastIndex=Ir(n,at(i.lastIndex),o)),s++}return 0===s?null:a}]});var zr=Math.max,Mr=Math.min,Dr=Math.floor,Lr=/\$([$&'`]|\d\d?|<[^>]*>)/g,Or=/\$([$&'`]|\d\d?)/g;kr("replace",2,function(r,x,w){return[function(t,e){var i=f(this),n=null==t?void 0:t[r];return void 0!==n?n.call(t,i,e):x.call(String(i),t,e)},function(t,e){var i=w(x,t,this,e);if(i.done)return i.value;var n=P(t),r=String(this),o="function"==typeof e;o||(e=String(e));var a=n.global;if(a){var s=n.unicode;n.lastIndex=0}for(var l=[];;){var u=Pr(n,r);if(null===u)break;if(l.push(u),!a)break;""===String(u[0])&&(n.lastIndex=Ir(r,at(n.lastIndex),s))}for(var c,h="",p=0,d=0;d<l.length;d++){u=l[d];for(var f=String(u[0]),m=zr(Mr(rt(u.index),r.length),0),g=[],v=1;v<u.length;v++)g.push(void 0===(c=u[v])?c:String(c));var y=u.groups;if(o){var _=[f].concat(g,m,r);void 0!==y&&_.push(y);var b=String(e.apply(void 0,_))}else b=S(f,r,m,g,y,e);p<=m&&(h+=r.slice(p,m)+b,p=m+f.length)}return h+r.slice(p)}];function S(o,a,s,l,u,t){var c=s+o.length,h=l.length,e=Or;return void 0!==u&&(u=It(u),e=Lr),x.call(t,e,function(t,e){var i;switch(e.charAt(0)){case"$":return"$";case"&":return o;case"`":return a.slice(0,s);case"'":return a.slice(c);case"<":i=u[e.slice(1,-1)];break;default:var n=+e;if(0===n)return t;if(h<n){var r=Dr(n/10);return 0===r?t:r<=h?void 0===l[r-1]?e.charAt(1):l[r-1]+e.charAt(1):t}i=l[n-1]}return void 0===i?"":i})}});var Rr=function(t){return Array.prototype.reduce.call(t,function(t,e){var i=e.name.match(/data-simplebar-(.+)/);if(i){var n=i[1].replace(/\W+(.)/g,function(t,e){return e.toUpperCase()});switch(e.value){case"true":t[n]=!0;break;case"false":t[n]=!1;break;case void 0:t[n]=!0;break;default:t[n]=e.value}}return t},{})};function Fr(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window}function Br(t){return t&&t.ownerDocument?t.ownerDocument:document}var Nr=function(){function l(t,e){var s=this;this.onScroll=function(){var t=Fr(s.el);s.scrollXTicking||(t.requestAnimationFrame(s.scrollX),s.scrollXTicking=!0),s.scrollYTicking||(t.requestAnimationFrame(s.scrollY),s.scrollYTicking=!0)},this.scrollX=function(){s.axis.x.isOverflowing&&(s.showScrollbar("x"),s.positionScrollbar("x")),s.scrollXTicking=!1},this.scrollY=function(){s.axis.y.isOverflowing&&(s.showScrollbar("y"),s.positionScrollbar("y")),s.scrollYTicking=!1},this.onMouseEnter=function(){s.showScrollbar("x"),s.showScrollbar("y")},this.onMouseMove=function(t){s.mouseX=t.clientX,s.mouseY=t.clientY,(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&s.onMouseMoveForAxis("x"),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&s.onMouseMoveForAxis("y")},this.onMouseLeave=function(){s.onMouseMove.cancel(),(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&s.onMouseLeaveForAxis("x"),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&s.onMouseLeaveForAxis("y"),s.mouseX=-1,s.mouseY=-1},this.onWindowResize=function(){s.scrollbarWidth=s.getScrollbarWidth(),s.hideNativeScrollbar()},this.hideScrollbars=function(){s.axis.x.track.rect=s.axis.x.track.el.getBoundingClientRect(),s.axis.y.track.rect=s.axis.y.track.el.getBoundingClientRect(),s.isWithinBounds(s.axis.y.track.rect)||(s.axis.y.scrollbar.el.classList.remove(s.classNames.visible),s.axis.y.isVisible=!1),s.isWithinBounds(s.axis.x.track.rect)||(s.axis.x.scrollbar.el.classList.remove(s.classNames.visible),s.axis.x.isVisible=!1)},this.onPointerEvent=function(t){var e,i;s.axis.x.track.rect=s.axis.x.track.el.getBoundingClientRect(),s.axis.y.track.rect=s.axis.y.track.el.getBoundingClientRect(),(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&(e=s.isWithinBounds(s.axis.x.track.rect)),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&(i=s.isWithinBounds(s.axis.y.track.rect)),(e||i)&&(t.preventDefault(),t.stopPropagation(),"mousedown"===t.type&&(e&&(s.axis.x.scrollbar.rect=s.axis.x.scrollbar.el.getBoundingClientRect(),s.isWithinBounds(s.axis.x.scrollbar.rect)?s.onDragStart(t,"x"):s.onTrackClick(t,"x")),i&&(s.axis.y.scrollbar.rect=s.axis.y.scrollbar.el.getBoundingClientRect(),s.isWithinBounds(s.axis.y.scrollbar.rect)?s.onDragStart(t,"y"):s.onTrackClick(t,"y"))))},this.drag=function(t){var e=s.axis[s.draggedAxis].track,i=e.rect[s.axis[s.draggedAxis].sizeAttr],n=s.axis[s.draggedAxis].scrollbar,r=s.contentWrapperEl[s.axis[s.draggedAxis].scrollSizeAttr],o=parseInt(s.elStyles[s.axis[s.draggedAxis].sizeAttr],10);t.preventDefault(),t.stopPropagation();var a=(("y"===s.draggedAxis?t.pageY:t.pageX)-e.rect[s.axis[s.draggedAxis].offsetAttr]-s.axis[s.draggedAxis].dragOffset)/(i-n.size)*(r-o);"x"===s.draggedAxis&&(a=s.isRtl&&l.getRtlHelpers().isRtlScrollbarInverted?a-(i+n.size):a,a=s.isRtl&&l.getRtlHelpers().isRtlScrollingInverted?-a:a),s.contentWrapperEl[s.axis[s.draggedAxis].scrollOffsetAttr]=a},this.onEndDrag=function(t){var e=Br(s.el),i=Fr(s.el);t.preventDefault(),t.stopPropagation(),s.el.classList.remove(s.classNames.dragging),e.removeEventListener("mousemove",s.drag,!0),e.removeEventListener("mouseup",s.onEndDrag,!0),s.removePreventClickId=i.setTimeout(function(){e.removeEventListener("click",s.preventClick,!0),e.removeEventListener("dblclick",s.preventClick,!0),s.removePreventClickId=null})},this.preventClick=function(t){t.preventDefault(),t.stopPropagation()},this.el=t,this.minScrollbarWidth=20,this.options=Object.assign({},l.defaultOptions,{},e),this.classNames=Object.assign({},l.defaultOptions.classNames,{},this.options.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}}},this.removePreventClickId=null,l.instances.has(this.el)||(this.recalculate=Zi(this.recalculate.bind(this),64),this.onMouseMove=Zi(this.onMouseMove.bind(this),64),this.hideScrollbars=cn(this.hideScrollbars.bind(this),this.options.timeout),this.onWindowResize=cn(this.onWindowResize.bind(this),64,{leading:!0}),l.getRtlHelpers=Nn(l.getRtlHelpers),this.init())}l.getRtlHelpers=function(){var t=document.createElement("div");t.innerHTML='<div class="hs-dummy-scrollbar-size"><div style="height: 200%; width: 200%; margin: 10px 0;"></div></div>';var e=t.firstElementChild;document.body.appendChild(e);var i=e.firstElementChild;e.scrollLeft=0;var n=l.getOffset(e),r=l.getOffset(i);e.scrollLeft=999;var o=l.getOffset(i);return{isRtlScrollingInverted:n.left!==r.left&&r.left-o.left!=0,isRtlScrollbarInverted:n.left!==r.left}},l.getOffset=function(t){var e=t.getBoundingClientRect(),i=Br(t),n=Fr(t);return{top:e.top+(n.pageYOffset||i.documentElement.scrollTop),left:e.left+(n.pageXOffset||i.documentElement.scrollLeft)}};var t=l.prototype;return t.init=function(){l.instances.set(this.el,this),Zt&&(this.initDOM(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},t.initDOM=function(){var e=this;if(Br(this.el),Array.prototype.filter.call(this.el.children,function(t){return t.classList.contains(e.classNames.wrapper)}).length)this.wrapperEl=this.el.querySelector("."+this.classNames.wrapper),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector("."+this.classNames.contentWrapper),this.contentEl=this.options.contentNode||this.el.querySelector("."+this.classNames.contentEl),this.offsetEl=this.el.querySelector("."+this.classNames.offset),this.maskEl=this.el.querySelector("."+this.classNames.mask),this.placeholderEl=this.findChild(this.wrapperEl,"."+this.classNames.placeholder),this.heightAutoObserverWrapperEl=this.el.querySelector("."+this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl=this.el.querySelector("."+this.classNames.heightAutoObserverEl),this.axis.x.track.el=this.findChild(this.el,"."+this.classNames.track+"."+this.classNames.horizontal),this.axis.y.track.el=this.findChild(this.el,"."+this.classNames.track+"."+this.classNames.vertical);else{for(this.wrapperEl=document.createElement("div"),this.contentWrapperEl=document.createElement("div"),this.offsetEl=document.createElement("div"),this.maskEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.placeholderEl=document.createElement("div"),this.heightAutoObserverWrapperEl=document.createElement("div"),this.heightAutoObserverEl=document.createElement("div"),this.wrapperEl.classList.add(this.classNames.wrapper),this.contentWrapperEl.classList.add(this.classNames.contentWrapper),this.offsetEl.classList.add(this.classNames.offset),this.maskEl.classList.add(this.classNames.mask),this.contentEl.classList.add(this.classNames.contentEl),this.placeholderEl.classList.add(this.classNames.placeholder),this.heightAutoObserverWrapperEl.classList.add(this.classNames.heightAutoObserverWrapperEl),this.heightAutoObserverEl.classList.add(this.classNames.heightAutoObserverEl);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.contentWrapperEl.appendChild(this.contentEl),this.offsetEl.appendChild(this.contentWrapperEl),this.maskEl.appendChild(this.offsetEl),this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl),this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl),this.wrapperEl.appendChild(this.maskEl),this.wrapperEl.appendChild(this.placeholderEl),this.el.appendChild(this.wrapperEl)}if(!this.axis.x.track.el||!this.axis.y.track.el){var t=document.createElement("div"),i=document.createElement("div");t.classList.add(this.classNames.track),i.classList.add(this.classNames.scrollbar),t.appendChild(i),this.axis.x.track.el=t.cloneNode(!0),this.axis.x.track.el.classList.add(this.classNames.horizontal),this.axis.y.track.el=t.cloneNode(!0),this.axis.y.track.el.classList.add(this.classNames.vertical),this.el.appendChild(this.axis.x.track.el),this.el.appendChild(this.axis.y.track.el)}this.axis.x.scrollbar.el=this.axis.x.track.el.querySelector("."+this.classNames.scrollbar),this.axis.y.scrollbar.el=this.axis.y.track.el.querySelector("."+this.classNames.scrollbar),this.options.autoHide||(this.axis.x.scrollbar.el.classList.add(this.classNames.visible),this.axis.y.scrollbar.el.classList.add(this.classNames.visible)),this.el.setAttribute("data-simplebar","init")},t.initListeners=function(){var e=this,t=Fr(this.el);this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick"].forEach(function(t){e.el.addEventListener(t,e.onPointerEvent,!0)}),["touchstart","touchend","touchmove"].forEach(function(t){e.el.addEventListener(t,e.onPointerEvent,{capture:!0,passive:!0})}),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.addEventListener("scroll",this.onScroll),t.addEventListener("resize",this.onWindowResize);var i=!1,n=t.ResizeObserver||ar;this.resizeObserver=new n(function(){i&&e.recalculate()}),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),t.requestAnimationFrame(function(){i=!0}),this.mutationObserver=new t.MutationObserver(this.recalculate),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})},t.recalculate=function(){var t=Fr(this.el);this.elStyles=t.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction;var e=this.heightAutoObserverEl.offsetHeight<=1,i=this.heightAutoObserverEl.offsetWidth<=1,n=this.contentEl.offsetWidth,r=this.contentWrapperEl.offsetWidth,o=this.elStyles.overflowX,a=this.elStyles.overflowY;this.contentEl.style.padding=this.elStyles.paddingTop+" "+this.elStyles.paddingRight+" "+this.elStyles.paddingBottom+" "+this.elStyles.paddingLeft,this.wrapperEl.style.margin="-"+this.elStyles.paddingTop+" -"+this.elStyles.paddingRight+" -"+this.elStyles.paddingBottom+" -"+this.elStyles.paddingLeft;var s=this.contentEl.scrollHeight,l=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=e?"auto":"100%",this.placeholderEl.style.width=i?n+"px":"auto",this.placeholderEl.style.height=s+"px";var u=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=n<l,this.axis.y.isOverflowing=u<s,this.axis.x.isOverflowing="hidden"!==o&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==a&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar();var c=this.axis.x.isOverflowing?this.scrollbarWidth:0,h=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&r-h<l,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&u-c<s,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el.style.width=this.axis.x.scrollbar.size+"px",this.axis.y.scrollbar.el.style.height=this.axis.y.scrollbar.size+"px",this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")},t.getScrollbarSize=function(t){if(void 0===t&&(t="y"),!this.axis[t].isOverflowing)return 0;var e,i=this.contentEl[this.axis[t].scrollSizeAttr],n=this.axis[t].track.el[this.axis[t].offsetSizeAttr],r=n/i;return e=Math.max(~~(r*n),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(e=Math.min(e,this.options.scrollbarMaxSize)),e},t.positionScrollbar=function(t){if(void 0===t&&(t="y"),this.axis[t].isOverflowing){var e=this.contentWrapperEl[this.axis[t].scrollSizeAttr],i=this.axis[t].track.el[this.axis[t].offsetSizeAttr],n=parseInt(this.elStyles[this.axis[t].sizeAttr],10),r=this.axis[t].scrollbar,o=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],a=(o="x"===t&&this.isRtl&&l.getRtlHelpers().isRtlScrollingInverted?-o:o)/(e-n),s=~~((i-r.size)*a);s="x"===t&&this.isRtl&&l.getRtlHelpers().isRtlScrollbarInverted?s+(i-r.size):s,r.el.style.transform="x"===t?"translate3d("+s+"px, 0, 0)":"translate3d(0, "+s+"px, 0)"}},t.toggleTrackVisibility=function(t){void 0===t&&(t="y");var e=this.axis[t].track.el,i=this.axis[t].scrollbar.el;this.axis[t].isOverflowing||this.axis[t].forceVisible?(e.style.visibility="visible",this.contentWrapperEl.style[this.axis[t].overflowAttr]="scroll"):(e.style.visibility="hidden",this.contentWrapperEl.style[this.axis[t].overflowAttr]="hidden"),this.axis[t].isOverflowing?i.style.display="block":i.style.display="none"},t.hideNativeScrollbar=function(){this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-"+this.scrollbarWidth+"px":0,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-"+this.scrollbarWidth+"px":0},t.onMouseMoveForAxis=function(t){void 0===t&&(t="y"),this.axis[t].track.rect=this.axis[t].track.el.getBoundingClientRect(),this.axis[t].scrollbar.rect=this.axis[t].scrollbar.el.getBoundingClientRect(),this.isWithinBounds(this.axis[t].scrollbar.rect)?this.axis[t].scrollbar.el.classList.add(this.classNames.hover):this.axis[t].scrollbar.el.classList.remove(this.classNames.hover),this.isWithinBounds(this.axis[t].track.rect)?(this.showScrollbar(t),this.axis[t].track.el.classList.add(this.classNames.hover)):this.axis[t].track.el.classList.remove(this.classNames.hover)},t.onMouseLeaveForAxis=function(t){void 0===t&&(t="y"),this.axis[t].track.el.classList.remove(this.classNames.hover),this.axis[t].scrollbar.el.classList.remove(this.classNames.hover)},t.showScrollbar=function(t){void 0===t&&(t="y");var e=this.axis[t].scrollbar.el;this.axis[t].isVisible||(e.classList.add(this.classNames.visible),this.axis[t].isVisible=!0),this.options.autoHide&&this.hideScrollbars()},t.onDragStart=function(t,e){void 0===e&&(e="y");var i=Br(this.el),n=Fr(this.el),r=this.axis[e].scrollbar,o="y"===e?t.pageY:t.pageX;this.axis[e].dragOffset=o-r.rect[this.axis[e].offsetAttr],this.draggedAxis=e,this.el.classList.add(this.classNames.dragging),i.addEventListener("mousemove",this.drag,!0),i.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(i.addEventListener("click",this.preventClick,!0),i.addEventListener("dblclick",this.preventClick,!0)):(n.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},t.onTrackClick=function(t,n){var r=this;if(void 0===n&&(n="y"),this.options.clickOnTrack){var o=Fr(this.el);this.axis[n].scrollbar.rect=this.axis[n].scrollbar.el.getBoundingClientRect();var e=this.axis[n].scrollbar.rect[this.axis[n].offsetAttr],i=parseInt(this.elStyles[this.axis[n].sizeAttr],10),a=this.contentWrapperEl[this.axis[n].scrollOffsetAttr],s=("y"===n?this.mouseY-e:this.mouseX-e)<0?-1:1,l=-1===s?a-i:a+i;!function t(){var e,i;-1===s?l<a&&(a-=40,r.contentWrapperEl.scrollTo(((e={})[r.axis[n].offsetAttr]=a,e)),o.requestAnimationFrame(t)):a<l&&(a+=40,r.contentWrapperEl.scrollTo(((i={})[r.axis[n].offsetAttr]=a,i)),o.requestAnimationFrame(t))}()}},t.getContentElement=function(){return this.contentEl},t.getScrollElement=function(){return this.contentWrapperEl},t.getScrollbarWidth=function(){try{return"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:ur()}catch(t){return ur()}},t.removeListeners=function(){var e=this,t=Fr(this.el);this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick"].forEach(function(t){e.el.removeEventListener(t,e.onPointerEvent,!0)}),["touchstart","touchend","touchmove"].forEach(function(t){e.el.removeEventListener(t,e.onPointerEvent,{capture:!0,passive:!0})}),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onWindowResize),this.mutationObserver.disconnect(),this.resizeObserver.disconnect(),this.recalculate.cancel(),this.onMouseMove.cancel(),this.hideScrollbars.cancel(),this.onWindowResize.cancel()},t.unMount=function(){this.removeListeners(),l.instances.delete(this.el)},t.isWithinBounds=function(t){return this.mouseX>=t.left&&this.mouseX<=t.left+t.width&&this.mouseY>=t.top&&this.mouseY<=t.top+t.height},t.findChild=function(t,e){var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;return Array.prototype.filter.call(t.children,function(t){return i.call(t,e)})[0]},l}();return Nr.defaultOptions={autoHide:!0,forceVisible:!1,clickOnTrack:!0,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging"},scrollbarMinSize:25,scrollbarMaxSize:0,timeout:1e3},Nr.instances=new WeakMap,Nr.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll('[data-simplebar]:not([data-simplebar="init"])'),function(t){Nr.instances.has(t)||new Nr(t,Rr(t.attributes))})},Nr.removeObserver=function(){this.globalObserver.disconnect()},Nr.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(Nr.handleMutations),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},Nr.handleMutations=function(t){t.forEach(function(t){Array.prototype.forEach.call(t.addedNodes,function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?!Nr.instances.has(t)&&new Nr(t,Rr(t.attributes)):Array.prototype.forEach.call(t.querySelectorAll('[data-simplebar]:not([data-simplebar="init"])'),function(t){!Nr.instances.has(t)&&new Nr(t,Rr(t.attributes))}))}),Array.prototype.forEach.call(t.removedNodes,function(t){1===t.nodeType&&(t.hasAttribute('[data-simplebar="init"]')?Nr.instances.has(t)&&Nr.instances.get(t).unMount():Array.prototype.forEach.call(t.querySelectorAll('[data-simplebar="init"]'),function(t){Nr.instances.has(t)&&Nr.instances.get(t).unMount()}))})})},Nr.getOptions=Rr,Zt&&Nr.initHtmlApi(),Nr}),function(o,A){function a(t){throw new Error("Pagination: "+t)}void 0===A&&a("Pagination requires jQuery.");var s="pagination",l="__pagination-";A.fn.pagination&&(s="pagination2"),A.fn[s]=function(t){if(void 0===t)return this;var i,e,d=A(this),k=A.extend({},A.fn[s].defaults,t),n={initialize:function(){var i=this;if(d.data("pagination")||d.data("pagination",{}),!1!==i.callHook("beforeInit")){d.data("pagination").initialized&&A(".paginationjs",d).remove(),i.disabled=!!k.disabled;var n=i.model={pageRange:k.pageRange,pageSize:k.pageSize};i.parseDataSource(k.dataSource,function(t){i.isAsync=f.isString(t),f.isArray(t)&&(n.totalNumber=k.totalNumber=t.length),i.isDynamicTotalNumber=i.isAsync&&k.totalNumberLocator;var e=i.render(!0);k.className&&e.addClass(k.className),n.el=e,d["bottom"===k.position?"append":"prepend"](e),i.observer(),d.data("pagination").initialized=!0,i.callHook("afterInit",e)})}},render:function(t){var e=this.model,i=e.el||A('<div class="paginationjs"></div>'),n=!0!==t;this.callHook("beforeRender",n);var r=e.pageNumber||k.pageNumber,o=k.pageRange||0,a=this.getTotalPage(),s=r-o,l=r+o;return a<l&&(s=(s=(l=a)-2*o)<1?1:s),s<=1&&(s=1,l=Math.min(2*o+1,a)),i.html(this.generateHTML({currentPage:r,pageRange:o,rangeStart:s,rangeEnd:l})),k.hideWhenLessThanOnePage&&i[a<=1?"hide":"show"](),this.callHook("afterRender",n),i},generatePageNumbersHTML:function(t){var e,i=t.currentPage,n=this.getTotalPage(),r=t.rangeStart,o=t.rangeEnd,a="",s=k.pageLink,l=k.ellipsisText,u=k.classPrefix,c=k.activeClassName,h=k.disableClassName;if(null===k.pageRange){for(e=1;e<=n;e++)a+=e==i?'<li class="'+u+"-page J-paginationjs-page "+c+'" data-num="'+e+'"><a>'+e+"</a></li>":'<li class="'+u+'-page J-paginationjs-page" data-num="'+e+'"><a href="'+s+'">'+e+"</a></li>";return a}if(r<=3)for(e=1;e<r;e++)a+=e==i?'<li class="'+u+"-page J-paginationjs-page "+c+'" data-num="'+e+'"><a>'+e+"</a></li>":'<li class="'+u+'-page J-paginationjs-page" data-num="'+e+'"><a href="'+s+'">'+e+"</a></li>";else k.showFirstOnEllipsisShow&&(a+='<li class="'+u+"-page "+u+'-first J-paginationjs-page" data-num="1"><a href="'+s+'">1</a></li>'),a+='<li class="'+u+"-ellipsis "+h+'"><a>'+l+"</a></li>";for(e=r;e<=o;e++)a+=e==i?'<li class="'+u+"-page J-paginationjs-page "+c+'" data-num="'+e+'"><a>'+e+"</a></li>":'<li class="'+u+'-page J-paginationjs-page" data-num="'+e+'"><a href="'+s+'">'+e+"</a></li>";if(n-2<=o)for(e=o+1;e<=n;e++)a+='<li class="'+u+'-page J-paginationjs-page" data-num="'+e+'"><a href="'+s+'">'+e+"</a></li>";else a+='<li class="'+u+"-ellipsis "+h+'"><a>'+l+"</a></li>",k.showLastOnEllipsisShow&&(a+='<li class="'+u+"-page "+u+'-last J-paginationjs-page" data-num="'+n+'"><a href="'+s+'">'+n+"</a></li>");return a},generateHTML:function(t){var e=t.currentPage,i=this.getTotalPage(),n=this.getTotalNumber(),r=k.showPrevious,o=k.showNext,a=k.showPageNumbers,s=k.showNavigator,l=k.showGoInput,u=k.showGoButton,c=k.pageLink,h=k.prevText,p=k.nextText,d=k.goButtonText,f=k.classPrefix,m=k.disableClassName,g=k.ulClassName,v="",y='<input type="text" class="J-paginationjs-go-pagenumber">',_='<input type="button" class="J-paginationjs-go-button" value="'+d+'">',b=A.isFunction(k.formatNavigator)?k.formatNavigator(e,i,n):k.formatNavigator,x=A.isFunction(k.formatGoInput)?k.formatGoInput(y,e,i,n):k.formatGoInput,w=A.isFunction(k.formatGoButton)?k.formatGoButton(_,e,i,n):k.formatGoButton,S=A.isFunction(k.autoHidePrevious)?k.autoHidePrevious():k.autoHidePrevious,T=A.isFunction(k.autoHideNext)?k.autoHideNext():k.autoHideNext,C=A.isFunction(k.header)?k.header(e,i,n):k.header,E=A.isFunction(k.footer)?k.footer(e,i,n):k.footer;return C&&(v+=this.replaceVariables(C,{currentPage:e,totalPage:i,totalNumber:n})),(r||a||o)&&(v+='<div class="paginationjs-pages">',v+=g?'<ul class="'+g+'">':"<ul>",r&&(e<=1?S||(v+='<li class="'+f+"-prev "+m+'"><a>'+h+"</a></li>"):v+='<li class="'+f+'-prev J-paginationjs-previous" data-num="'+(e-1)+'" title="Previous page"><a href="'+c+'">'+h+"</a></li>"),a&&(v+=this.generatePageNumbersHTML(t)),o&&(i<=e?T||(v+='<li class="'+f+"-next "+m+'"><a>'+p+"</a></li>"):v+='<li class="'+f+'-next J-paginationjs-next" data-num="'+(e+1)+'" title="Next page"><a href="'+c+'">'+p+"</a></li>"),v+="</ul></div>"),s&&b&&(v+='<div class="'+f+'-nav J-paginationjs-nav">'+this.replaceVariables(b,{currentPage:e,totalPage:i,totalNumber:n})+"</div>"),l&&x&&(v+='<div class="'+f+'-go-input">'+this.replaceVariables(x,{currentPage:e,totalPage:i,totalNumber:n,input:y})+"</div>"),u&&w&&(v+='<div class="'+f+'-go-button">'+this.replaceVariables(w,{currentPage:e,totalPage:i,totalNumber:n,button:_})+"</div>"),E&&(v+=this.replaceVariables(E,{currentPage:e,totalPage:i,totalNumber:n})),v},findTotalNumberFromRemoteResponse:function(t){this.model.totalNumber=k.totalNumberLocator(t)},go:function(t,i){function e(t){if(!1===n.callHook("beforePaging",o))return!1;if(r.direction=void 0===r.pageNumber?0:o>r.pageNumber?1:-1,r.pageNumber=o,n.render(),n.disabled&&n.isAsync&&n.enable(),d.data("pagination").model=r,k.formatResult){var e=A.extend(!0,[],t);f.isArray(t=k.formatResult(e))||(t=e)}d.data("pagination").currentPageData=t,n.doCallback(t,i),n.callHook("afterPaging",o),1==o&&n.callHook("afterIsFirstPage"),o==n.getTotalPage()&&n.callHook("afterIsLastPage")}var n=this,r=n.model;if(!n.disabled){var o=t;if((o=parseInt(o))&&!(o<1)){var a=k.pageSize,s=n.getTotalNumber(),l=n.getTotalPage();if(!(0<s&&l<o)){if(!n.isAsync)return void e(n.getDataFragment(o));var u={},c=k.alias||{};u[c.pageSize?c.pageSize:"pageSize"]=a,u[c.pageNumber?c.pageNumber:"pageNumber"]=o;var h=A.isFunction(k.ajax)?k.ajax():k.ajax,p={type:"get",cache:!1,data:{},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",async:!0};A.extend(!0,p,h),A.extend(p.data,u),p.url=k.dataSource,p.success=function(t){n.isDynamicTotalNumber?n.findTotalNumberFromRemoteResponse(t):n.model.totalNumber=k.totalNumber,e(n.filterDataByLocator(t))},p.error=function(t,e,i){k.formatAjaxError&&k.formatAjaxError(t,e,i),n.enable()},n.disable(),A.ajax(p)}}}},doCallback:function(t,e){var i=this.model;A.isFunction(e)?e(t,i):A.isFunction(k.callback)&&k.callback(t,i)},destroy:function(){!1!==this.callHook("beforeDestroy")&&(this.model.el.remove(),d.off(),A("#paginationjs-style").remove(),this.callHook("afterDestroy"))},previous:function(t){this.go(this.model.pageNumber-1,t)},next:function(t){this.go(this.model.pageNumber+1,t)},disable:function(){var t=this.isAsync?"async":"sync";!1!==this.callHook("beforeDisable",t)&&(this.disabled=!0,this.model.disabled=!0,this.callHook("afterDisable",t))},enable:function(){var t=this.isAsync?"async":"sync";!1!==this.callHook("beforeEnable",t)&&(this.disabled=!1,this.model.disabled=!1,this.callHook("afterEnable",t))},refresh:function(t){this.go(this.model.pageNumber,t)},show:function(){this.model.el.is(":visible")||this.model.el.show()},hide:function(){this.model.el.is(":visible")&&this.model.el.hide()},replaceVariables:function(t,e){var i;for(var n in e){var r=e[n],o=new RegExp("<%=\\s*"+n+"\\s*%>","img");i=(i||t).replace(o,r)}return i},getDataFragment:function(t){var e=k.pageSize,i=k.dataSource,n=this.getTotalNumber(),r=e*(t-1)+1,o=Math.min(t*e,n);return i.slice(r-1,o)},getTotalNumber:function(){return this.model.totalNumber||k.totalNumber||0},getTotalPage:function(){return Math.ceil(this.getTotalNumber()/k.pageSize)},getLocator:function(t){var e;return"string"==typeof t?e=t:A.isFunction(t)?e=t():a('"locator" is incorrect. (String | Function)'),e},filterDataByLocator:function(i){var n,t=this.getLocator(k.locator);if(f.isObject(i)){try{A.each(t.split("."),function(t,e){n=(n||i)[e]})}catch(i){}n?f.isArray(n)||a("dataSource."+t+" must be an Array."):a("dataSource."+t+" is undefined.")}return n||i},parseDataSource:function(t,e){var i=this;f.isObject(t)?e(k.dataSource=i.filterDataByLocator(t)):f.isArray(t)?e(k.dataSource=t):A.isFunction(t)?k.dataSource(function(t){f.isArray(t)||a('The parameter of "done" Function should be an Array.'),i.parseDataSource.call(i,t,e)}):"string"==typeof t?(/^https?|file:/.test(t)&&(k.ajaxDataType="jsonp"),e(t)):a('Unexpected type of "dataSource".')},callHook:function(t){var i,e=d.data("pagination"),n=Array.prototype.slice.apply(arguments);return n.shift(),k[t]&&A.isFunction(k[t])&&!1===k[t].apply(o,n)&&(i=!1),e.hooks&&e.hooks[t]&&A.each(e.hooks[t],function(t,e){!1===e.apply(o,n)&&(i=!1)}),!1!==i},observer:function(){var n=this,i=n.model.el;d.on(l+"go",function(t,e,i){(e=parseInt(A.trim(e)))&&(A.isNumeric(e)||a('"pageNumber" is incorrect. (Number)'),n.go(e,i))}),i.delegate(".J-paginationjs-page","click",function(t){var e=A(t.currentTarget),i=A.trim(e.attr("data-num"));if(i&&!e.hasClass(k.disableClassName)&&!e.hasClass(k.activeClassName))return!1!==n.callHook("beforePageOnClick",t,i)&&(n.go(i),n.callHook("afterPageOnClick",t,i),!!k.pageLink&&void 0)}),i.delegate(".J-paginationjs-previous","click",function(t){var e=A(t.currentTarget),i=A.trim(e.attr("data-num"));if(i&&!e.hasClass(k.disableClassName))return!1!==n.callHook("beforePreviousOnClick",t,i)&&(n.go(i),n.callHook("afterPreviousOnClick",t,i),!!k.pageLink&&void 0)}),i.delegate(".J-paginationjs-next","click",function(t){var e=A(t.currentTarget),i=A.trim(e.attr("data-num"));if(i&&!e.hasClass(k.disableClassName))return!1!==n.callHook("beforeNextOnClick",t,i)&&(n.go(i),n.callHook("afterNextOnClick",t,i),!!k.pageLink&&void 0)}),i.delegate(".J-paginationjs-go-button","click",function(t){var e=A(".J-paginationjs-go-pagenumber",i).val();if(!1===n.callHook("beforeGoButtonOnClick",t,e))return!1;d.trigger(l+"go",e),n.callHook("afterGoButtonOnClick",t,e)}),i.delegate(".J-paginationjs-go-pagenumber","keyup",function(t){if(13===t.which){var e=A(t.currentTarget).val();if(!1===n.callHook("beforeGoInputOnEnter",t,e))return!1;d.trigger(l+"go",e),A(".J-paginationjs-go-pagenumber",i).focus(),n.callHook("afterGoInputOnEnter",t,e)}}),d.on(l+"previous",function(t,e){n.previous(e)}),d.on(l+"next",function(t,e){n.next(e)}),d.on(l+"disable",function(){n.disable()}),d.on(l+"enable",function(){n.enable()}),d.on(l+"refresh",function(t,e){n.refresh(e)}),d.on(l+"show",function(){n.show()}),d.on(l+"hide",function(){n.hide()}),d.on(l+"destroy",function(){n.destroy()});var t=Math.max(n.getTotalPage(),1),e=k.pageNumber;n.isDynamicTotalNumber&&(e=1),k.triggerPagingOnInit&&d.trigger(l+"go",Math.min(e,t))}};if(d.data("pagination")&&!0===d.data("pagination").initialized){if(A.isNumeric(t))return d.trigger.call(this,l+"go",t,arguments[1]),this;if("string"==typeof t){var r=Array.prototype.slice.apply(arguments);switch(r[0]=l+r[0],t){case"previous":case"next":case"go":case"disable":case"enable":case"refresh":case"show":case"hide":case"destroy":d.trigger.apply(this,r);break;case"getSelectedPageNum":return d.data("pagination").model?d.data("pagination").model.pageNumber:d.data("pagination").attributes.pageNumber;case"getTotalPage":return Math.ceil(d.data("pagination").model.totalNumber/d.data("pagination").model.pageSize);case"getSelectedPageData":return d.data("pagination").currentPageData;case"isDisabled":return!0===d.data("pagination").model.disabled;default:a("Unknown action: "+t)}return this}i=d,A.each(["go","previous","next","disable","enable","refresh","show","hide","destroy"],function(t,e){i.off(l+e)}),i.data("pagination",{}),A(".paginationjs",i).remove()}else f.isObject(t)||a("Illegal options");return(e=k).dataSource||a('"dataSource" is required.'),"string"==typeof e.dataSource?void 0===e.totalNumberLocator?void 0===e.totalNumber?a('"totalNumber" is required.'):A.isNumeric(e.totalNumber)||a('"totalNumber" is incorrect. (Number)'):A.isFunction(e.totalNumberLocator)||a('"totalNumberLocator" should be a Function.'):f.isObject(e.dataSource)&&(void 0===e.locator?a('"dataSource" is an Object, please specify "locator".'):"string"==typeof e.locator||A.isFunction(e.locator)||a(e.locator+" is incorrect. (String | Function)")),void 0===e.formatResult||A.isFunction(e.formatResult)||a('"formatResult" should be a Function.'),n.initialize(),this},A.fn[s].defaults={totalNumber:0,pageNumber:1,pageSize:10,pageRange:2,showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,showGoInput:!1,showGoButton:!1,pageLink:"",prevText:"&laquo;",nextText:"&raquo;",ellipsisText:"...",goButtonText:"Go",classPrefix:"paginationjs",activeClassName:"active",disableClassName:"disabled",inlineStyle:!0,formatNavigator:"<%= currentPage %> / <%= totalPage %>",formatGoInput:"<%= input %>",formatGoButton:"<%= button %>",position:"bottom",autoHidePrevious:!1,autoHideNext:!1,triggerPagingOnInit:!0,hideWhenLessThanOnePage:!1,showFirstOnEllipsisShow:!0,showLastOnEllipsisShow:!0,callback:function(){}},A.fn.addHook=function(t,e){arguments.length<2&&a("Missing argument."),A.isFunction(e)||a("callback must be a function.");var i=A(this),n=i.data("pagination");n||(i.data("pagination",{}),n=i.data("pagination")),!n.hooks&&(n.hooks={}),n.hooks[t]=n.hooks[t]||[],n.hooks[t].push(e)},A[s]=function(t,e){var i;if(arguments.length<2&&a("Requires two parameters."),(i="string"!=typeof t&&t instanceof jQuery?t:A(t)).length)return i.pagination(e),i};var f={};A.each(["Object","Array","String"],function(t,n){f["is"+n]=function(t){return("object"==(i=typeof(e=t))?null==e?"null":Object.prototype.toString.call(e).slice(8,-1):i).toLowerCase()===n.toLowerCase();var e,i}}),"function"==typeof define&&define.amd&&define(function(){return A})}(this,window.jQuery);